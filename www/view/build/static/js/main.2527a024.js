!function(e,t){for(var a in t)e[a]=t[a]}(window,function(e){function t(t){for(var r,s,o=t[0],c=t[1],l=t[2],d=0,u=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&u.push(i[s][0]),i[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(p&&p(t);u.length;)u.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],r=!0,o=1;o<a.length;o++){var c=a[o];0!==i[c]&&(r=!1)}r&&(n.splice(t--,1),e=s(s.s=a[0]))}return e}var r={},i={0:0},n=[];function s(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=r,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(a,r,function(t){return e[t]}.bind(null,r));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var o=this.webpackJsonpundefined=this.webpackJsonpundefined||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var p=c;return n.push([483,1]),a()}({334:function(e,t,a){var r;a.p=(r=window).location.protocol+"//"+r.location.host+"/"},342:function(e,t,a){var r=a(343),i=a(344);"string"===typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};r(i,n);e.exports=i.locals||{}},344:function(e,t,a){"use strict";a.r(t);var r=a(291),i=a.n(r)()(!0);i.push([e.i,"/* global style override */\nbody {\n  margin: 0;\n  padding: 0;\n}\npre {\n  margin: 0;\n}\ncode {\n  font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, monospace;\n  font-size: 12px;\n  white-space: break-spaces;\n}\n/* global style for app */\n#root a,\n.root a {\n  color: #3455db;\n  text-decoration: none;\n}\n#root a:hover,\n.root a:hover {\n  text-decoration: underline;\n}\n#root .width-auto,\n.root .width-auto {\n  width: auto !important;\n}\n#root .app-root,\n.root .app-root {\n  height: 100%;\n  overflow: hidden;\n  position: relative;\n  display: flex;\n  width: 100%;\n}\n#root .app-content,\n.root .app-content {\n  width: 100%;\n  height: 100vh;\n  overflow: auto;\n  position: relative;\n}\n#root .text-overflow,\n.root .text-overflow {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n#root .marker-dark,\n.root .marker-dark {\n  color: #fff !important;\n}\n#root .marker-dark-clickable,\n.root .marker-dark-clickable {\n  color: #fff !important;\n  cursor: pointer;\n}\n#menu-repository,\n#menu-group {\n  pointer-events: none;\n}\n","",{version:3,sources:["webpack://src/assets/styles/App.styl"],names:[],mappings:"AAAA,0BAAA;AACA;EACE,SAAQ;EACR,UAAS;AACX;AACA;EACE,SAAQ;AACV;AACA;EACE,wEAA2B;EAC3B,eAAW;EACX,yBAAa;AACf;AACA,yBAAA;AAEE;;EACE,cAAO;EACP,qBAAiB;AACrB;AAAI;;EACE,0BAAiB;AAGvB;AADE;;EACE,sBAAO;AAIX;AADE;;EACE,YAAQ;EACR,gBAAU;EACV,kBAAU;EACV,aAAS;EACT,WAAO;AAIX;AAFE;;EACE,WAAO;EACP,aAAQ;EACR,cAAU;EACV,kBAAU;AAKd;AAFE;;EACE,gBAAU;EACV,uBAAe;EACf,mBAAa;AAKjB;AAFE;;EACE,sBAAO;AAKX;AAJE;;EACE,sBAAO;EACP,eAAQ;AAOZ;AANA;;EACE,oBAAgB;AASlB",sourcesContent:["/* global style override */\nbody\n  margin: 0\n  padding: 0\n\npre\n  margin: 0;\n\ncode\n  font-family: SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;\n  font-size: 12px;\n  white-space: break-spaces;\n\n/* global style for app */\n#root, .root\n  a\n    color: #3455db;\n    text-decoration: none;\n    &:hover\n      text-decoration: underline;\n\n  .width-auto\n    width: auto !important;\n\n  /* style sheet for container */\n  .app-root\n    height: 100%;\n    overflow: hidden;\n    position: relative;\n    display: flex;\n    width: 100%;\n\n  .app-content\n    width: 100%;\n    height: 100vh;\n    overflow: auto;\n    position: relative;\n\n  /* css helpers */\n  .text-overflow\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n\n  /* Code Diff Viewer (Diff Maker Style) */\n  .marker-dark\n    color: #FFF !important;\n  .marker-dark-clickable\n    color: #FFF !important;\n    cursor: pointer;\n#menu-repository, #menu-group\n  pointer-events: none;"],sourceRoot:""}]),t.default=i},483:function(e,t,a){"use strict";a.r(t);a(334);var r=a(1),i=a.n(r),n=a(35),s=a.n(n),o=a(17),c=a(156),l=a(11),p=(a(342),a(345),a(357),a(7)),d=a(6),u=a(8),m=a(9),h=a(39),g=a(572),b=a(298),f=a(570),j=a(124),v=a(571),O=a(157),y=a(15),x=a(297);var S=function(e){var t=Object(x.a)(e,"CodeFever");return t.typography.fontFamily='system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',t.palette.primary.main="#3455db",t.typography.caption.fontSize=14,Object(y.a)(Object(y.a)({},t),{},{overrides:Object(y.a)(Object(y.a)({},t.overrides),{},{MuiInputBase:{input:Object(y.a)(Object(y.a)({},t.overrides.MuiInputBase.input),{},{backgroundColor:"none"})},MuiMenuItem:{root:Object(y.a)(Object(y.a)({},t.overrides.MuiMenuItem.root),{},{height:e.spacing(4)})},MuiTableCell:{root:{borderBottom:"1px solid "+t.palette.border,height:e.spacing(5),paddingTop:0,paddingBottom:0,textAlign:"left",flexDirection:"row","&:last-child":{textAlign:"right",flexDirection:"row-reverse"}}},MuiPaper:{root:{pointerEvents:"auto"},elevation1:{boxShadow:"none"},elevation2:{boxShadow:"0px 8px 16px 0px rgb(63 70 62 / 20%)"},elevation8:{boxShadow:"0 10px 40px rgb(14 32 66 / 15%), 0 1px 2px rgb(14 32 66 / 5%)"}},MuiTab:Object(y.a)(Object(y.a)({},t.overrides.MuiTab),{},{root:Object(y.a)(Object(y.a)({},t.overrides.MuiTab.root),{},{"&$selected":{fontWeight:600}})})})})},C=a(13),N=a(20),R=a(292),M=a(162),w=a(99),k=a(531),_=a(485),E=a(578),T=a(4);function A(){return window.location.origin+"/"}var D={commonStatus:{normal:1,delete:4},obejctDisplayType:{unknown:0,empty:1,oversize:2,text:3,markdown:4,image:5,video:6},obejctDiffDisplayType:{unknown:0,empty:1,oversize:2,infoChange:3,textChange:4,imageChange:5},activityCategory:{all:0,commit:1,mergeRequest:2,member:3},mergeRequestStatus:{open:1,merged:2,closed:3},notificationCategory:{all:0,unRead:1,system:2,mention:3},notificationRefuseType:{group:1,repository:2},notificationStatus:{mr:1,email:2},STATIC_VERSION:"00000000000000",HOSTS:{STATIC_HOST:A(),PGYER_AVATAR_HOST:A()+"file/fetch/avatar/",STATIC_AVATAR_PREFIX:A()+"file/fetch/avatar/"},codeFileExtentsions:{bat:"bat",clj:"clojure",cljs:"clojure",cljn:"clojure",cljc:"clojure",cljx:"clojure",coffee:"coffee",litcoffee:"coffee",c:"cpp",h:"cpp",cpp:"cpp",cs:"csharp",css:"css",go:"go",graphql:"graphql",htm:"html",xhtm:"html",html:"html",xhtml:"html",ini:"ini",java:"java",js:"javascript",jsx:"javascript",es:"javascript",jsm:"javascript",esm:"javascript",json:"json",kt:"kotlin",less:"less",lua:"lua",md:"markdown",mysql:"mysql",m:"objective-c",pas:"pascal",perl:"perl",pgsql:"pgsql",php:"php",xhp:"php",php3:"php",php4:"php",ps:"powershell",py:"python",r:"r",rb:"ruby",rust:"rust",scss:"scss",sh:"bash",sql:"sql",swift:"swift",ts:"typescript",tsx:"typescript",tsm:"typescript",vb:"vb",xml:"xml",yml:"yaml"}},I={NO_PERMISSION:0,GUEST:1,REPORTER:2,DEVELOPER:3,MAINTAINER:4,OWNER:5,NOBODY:6},P={NO_PERMISSION:0,REPO_READ:1,REPO_PUSH:2,REPO_REMOVE:3,REPO_CHANGE_MEMBER:4,REPO_CHANGE_INFO:5,MR_READ:8,MR_PUSH:9,MR_MERGE:10,GROUP_CHANGE_MEMBER:16,GROUP_CREATE_REPO:17},F={};F[I.NO_PERMISSION]=[],F[I.GUEST]=[P.REPO_READ],F[I.REPORTER]=[P.REPO_READ,P.MR_READ],F[I.DEVELOPER]=[P.REPO_READ,P.MR_READ,P.MR_PUSH],F[I.MAINTAINER]=[P.REPO_READ,P.REPO_PUSH,P.REPO_CHANGE_MEMBER,P.REPO_CHANGE_INFO,P.MR_READ,P.MR_PUSH,P.MR_MERGE,P.GROUP_CHANGE_MEMBER,P.GROUP_CREATE_REPO],F[I.OWNER]=[P.REPO_READ,P.REPO_PUSH,P.REPO_REMOVE,P.REPO_CHANGE_MEMBER,P.REPO_CHANGE_INFO,P.MR_READ,P.MR_PUSH,P.MR_MERGE,P.GROUP_CHANGE_MEMBER,P.GROUP_CREATE_REPO];var L={Role:I,PermissionCode:P,PermissionConfig:F},B={NORMAL:1,USER:2};var U={not:function(e){return function(t){return!e(t)}},and:function(){var e=arguments;return function(t){return[].slice.call(e).reduce((function(e,a){return e&&a(t)}),!1)}},or:function(){var e=arguments;return function(t){return[].slice.call(e).reduce((function(e,a){return e||a(t)}),!1)}},userGroup:function(){return function(e){return e.type===B.USER}},normalGroup:function(){return function(e){return e.type===B.NORMAL}},id:function(e){return function(t){return e===t.id}},rule:function(e){return function(t){return e===t.rule}},ids:function(e){return function(t){return e.some((function(e){return e===t.id}))}},email:function(e){return function(t){return e===t.email}},indexOfEmails:function(e){return function(t){return t.emails.indexOf(e)>-1}},name:function(e){return function(t){return e===t.name}},names:function(e){return function(t){return e.some((function(e){return e===t.name}))}},group:function(e){return function(t){return e===t.group.id}},groups:function(e){return function(t){return e.some((function(e){return e===t.group.id}))}},groupMember:function(){return function(e){return e.groupMember}},notGroupMember:function(){return function(e){return!e.groupMember}},deleted:function(){return function(e){return e.deleteFlag}},notDeleted:function(){return function(e){return!e.deleteFlag}},fork:function(e){return function(t){return e===t.forkFrom}},forks:function(e){return function(t){return e.some((function(e){return e===t.forkFrom}))}},nameLikes:function(e){return function(t){return t.name.indexOf(e)>-1}},search:function(e,t){return function(a){return t.reduce((function(t,r){return t||a[r].toLowerCase().indexOf(e.toLowerCase())>-1}),!1)}},creator:function(e){return function(t){return e===t.owner}},creators:function(e){return function(t){return e.some((function(e){return e===t.owner}))}},withPermission:function(e){return function(t){return K(t.role,e)}},withPermissions:function(e){return function(t){return e.some((function(e){return K(t.role,e)}))}},groupName:function(e){return function(t){return e===t.group.name}},target:function(e){return function(t){return e===t.target}}};function G(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return void 0===e?t:e}function H(e){var t=new window.FormData;for(var a in e)if("object"!==typeof e[a]||a.match(/_(SAFE|BINARY)$/))t.append(a.replace(/_(SAFE|BINARY)$/,""),e[a]);else for(var r in e[a])"number"===typeof e[a].length?t.append(a+"[]",e[a][r]):t.append(a+"["+r+"]",e[a][r]);return t}function q(e,t,a){for(var r=0;r<e.length;r++)if(e[r][t]===a)return e[r];return{}}function z(e,t){var a=0;if(Math.abs(e)>Number.MAX_VALUE)return NaN;if("%"===t)e*=100;else for(;e>=1e3;)e/=1e3,a++;return a?(Math.round(10*e)/10+" "+["","k","M","G","T","P"][a]).trim()+(t||""):(t=t?" "+t:"",Math.round(100*e)/100+(t||""))}function W(){return"/"+[].slice.call(arguments).join("/")}function V(){for(var e={},t=0;t<arguments.length;t++)if(arguments[t]&&arguments[t].__namespace__)for(var a in arguments[t])e[arguments[t].__namespace__+"."+a]=arguments[t][a];else arguments[t]&&(e=Object(y.a)(Object(y.a)({},e),arguments[t]));return e}function J(e,t){return(a=1,function(e,t){if(t&&t.map&&t[a]&&t[a].map){var r=Object(T.a)(t);return r.map((function(t,r){return r===a?t.map((function(t){return"string"===typeof t?t.replace(/((legend|label|map)\.\w+)/g,(function(t,a){return e({id:a})})):t})):t.map((function(t,a){return"string"===typeof t&&0===a?t.replace(/((legend|label|map)\.\w+)/g,(function(t,a){return e({id:a})})):t}))}))}return t})(e,t);var a}function K(e,t){return!!(e&&L.PermissionConfig[e]&&L.PermissionConfig[e].length)&&L.PermissionConfig[e].indexOf(t)>-1}function $(e){var t=e&&e.split(".").pop().toLowerCase();return t&&D.codeFileExtentsions[t]||"markdown"}function Z(e,t){var a=e?e.filter(U.indexOfEmails(t)):[];return a.length?a[0]:{temporary:!0,name:t,email:t,icon:""}}function Y(e){if(e.branches&&e.branches.length){var t=e.branches.filter(U.id(e.repository.defaultBranch));return t[0]?t[0].id:e.branches[0].id}return""}function X(e,t,a){window.setTimeout((function(){var r=window.document.createElement("textarea");r.innerHTML=e,a?a.appendChild(r):window.document.body.appendChild(r),r.select(),document.execCommand("copy"),a?a.removeChild(r):window.document.body.removeChild(r),t&&t()}),0)}function Q(e,t,a,r){r&&(t+="?"+function(e){var t=[];for(var a in e)t.push(a+"="+window.encodeURIComponent(e[a]));return t.join("&")}(r));var i="codefever-app",n=window.localStorage.getItem("lang")||"zh-cn";return a?window.fetch(t,{body:H(a),cache:"no-cache",credentials:"same-origin",headers:{"codefever-end-env":i,"codefever-end-lang":n,Accept:"application/json"},method:e,mode:"same-origin",redirect:"follow",referrer:"client"}):window.fetch(t,{cache:"no-cache",credentials:"same-origin",headers:{"codefever-end-env":i,"codefever-end-lang":n,Accept:"application/json"},method:e,mode:"same-origin",redirect:"follow",referrer:"client"})}var ee={GET:function(e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.requestTime=(new Date).getTime(),Q("GET",e,null,t)},POST:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Q("POST",e,t,a)},PUT:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Q("PUT",e,t,a)},DELETE:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Q("DELETE",e,t,a)},OPTIONS:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Q("OPTIONS",e,t,a)}};var te={getUserInfo:function(){return ee.GET("/api/user/info")},getKeyList:function(){return ee.GET("/api/user/listKey")},addSSHKey:function(e){return ee.POST("/api/user/addSSHKey",e)},removeSSHKey:function(e){return ee.POST("/api/user/removeSSHKey",e)},setUserData:function(e){return ee.POST("/api/user/update",e)},updateBasicInfo:function(e){return ee.POST("/api/user/updateBasicInfo",e)},updatePassword:function(e){return ee.POST("/api/user/updatePassword",e)},changeEmail:function(e){return ee.POST("/api/user/changeEmail",e)},getMFAData:function(){return ee.GET("/api/user/getMFAData")},revokeMFAData:function(){return ee.POST("/api/user/revokeMFAData",{})},updateMFAData:function(e){return ee.POST("/api/user/updateMFAData",e)},getCountriesCode:function(e){return ee.POST("/api/user/getCountriesCode",e)},confirmTel:function(e){return ee.POST("/api/user/confirmTel",e)},uploadAvatar:function(e){return ee.POST("/api/user/uploadAvatar",e)},getCode:function(e){return ee.POST("/api/user/getCode",e)},getEmailCode:function(e){return ee.POST("/api/user/getEmailCode",e)},addCommitEmail:function(e){return ee.POST("/api/user/addCommitEmail",e)},resentCommitEmailCode:function(e){return ee.POST("/api/user/resentCommitEmailCode",e)},deleteCommitEmail:function(e){return ee.POST("/api/user/deleteCommitEmail",e)},validationCommitEmailCode:function(e){return ee.POST("/api/user/validationCommitEmailCode",e)},notifications:function(e){return ee.GET("/api/user/notifications",null,e)},setNotificationRead:function(e){return ee.POST("/api/user/setNotificationRead",e)},deleteNotification:function(e){return ee.POST("/api/user/deleteNotification",e)},userNotificationSetting:function(e){return ee.POST("/api/user/userNotificationSetting",e)},notificationRefused:function(e){return ee.GET("/api/user/notificationRefused",null,e)},setGroupOrRepoNotification:function(e){return ee.POST("/api/user/setGroupOrRepoNotification",e)}};var ae={Event:function(e,t){return{type:e,data:t}},NewNotification:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:"notification.message.add",data:{message:e,level:t,action:a}}},Network:function(e,t){},NewComformation:function(e,t,a,r){return{type:"notification.confirmation.popup",data:{title:e,description:t,accept:a,reject:r}}},consumeComformation:function(){return{type:"notification.confirmation.consume",data:null}},cancelComformation:function(){return{type:"notification.confirmation.close",data:null}},addComformation:function(e,t){return{type:"notification.confirmation.add",data:{key:e,data:t}}},removeComformation:function(e){return{type:"notification.confirmation.remove",data:{key:e}}}};var re=function(e){if("zh-cn"===(window.localStorage.getItem("lang")?window.localStorage.getItem("lang"):navigator.language.toLowerCase()||navigator.userLanguage.toLowerCase())){return{0:"\u64cd\u4f5c\u6210\u529f",256:"\u8bf7\u6c42\u9519\u8bef",257:"\u767b\u5f55\u4fe1\u606f\u5931\u6548, \u9700\u8981\u91cd\u65b0\u767b\u9646",258:null,259:null,260:null,261:"\u8bf7\u6c42\u7684\u5730\u5740\u4e0d\u5b58\u5728",262:"\u6ca1\u6709\u64cd\u4f5c\u6743\u9650",512:"\u8bf7\u6c42\u8d44\u6e90\u4e3a\u7a7a",513:"\u8f93\u5165\u9519\u8bef",514:"\u8f93\u5165\u503c\u8d85\u8fc7\u5141\u8bb8\u8303\u56f4",769:"\u6ca1\u6709\u6b64\u4ed3\u5e93\u7ec4",770:"\u6ca1\u6709\u6b64\u4ed3\u5e93",65280:"\u4e0d\u80fd\u8bc6\u522b\u7684\u54cd\u5e94\u6570\u636e\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",65281:"\u7f51\u7edc\u94fe\u63a5\u9519\u8bef\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",65282:"\u8bf7\u6c42\u8fc7\u4e8e\u9891\u7e41\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"}[e]||null}return{0:"Done",256:"Request Error",257:"Invalid Login",258:null,259:null,260:null,261:"Resource Not Found",262:"Insufficient Permission",512:"Empty Resource",513:"Invalid Input",514:"Input Out of Range",769:"No Such Group",770:"No Such Repository",65280:"Response Data Can Not Be Parsed, Try Later",65281:"Network Error, Try Later",65282:"Too Many Request, Try Later"}[e]||null};function ie(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t&&t({type:"network.connection.error"}),t&&t(ae.NewNotification(re(65281),2)),e}var ne={getJSONData:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t&&t({type:"network.connection.ok"}),!e.ok){if(429===parseInt(e.status))return t&&t(ae.NewNotification(re(65282),1)),{code:1};if(parseInt(e.status)>=500)return t&&t(ae.NewNotification(re(65283),1)),{code:1}}var a={};return(a=e.json().catch((function(e){return t&&t({type:"network.connection.error"}),t&&t(ae.NewNotification(re(65280),2)),{code:1}}))).then((function(e){e&&e.code&&e.code<1024&&(t&&t(ae.NewNotification(re(e.code)||e.message,2)),257===parseInt(e.code)&&window.setTimeout((function(){window.location.href="/user/login"}),3e3),parseInt(e.code))})).catch((function(e){ie(e,t)})),a},getTextData:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e.ok){switch(e.status){case 429:t&&t(ae.NewNotification(re(65282),1));break;case 500:t&&t(ae.NewNotification(re(65283),1));break;default:t&&t(ae.NewNotification("Oooops...",1))}return null}return e.text()},getFile:function(e){},catchError:ie,withEventdispatcher:function(e){return function(t){return function(a){return t(a,e)}}},getHost:function(e){return e&&e.host},getSSHHost:function(e){return e&&"git@"+e.host.replace("http://","").replace("https://","")},makeSlug:function(e){return e.replace(/[^\w]/g,"_")}};var se={stateValidator:function(e,t){return function(){for(var a={},r=!1,i=t.length-1;i>=0;i--){var n=t[i];"string"!==typeof e.state[n.name]||e.state[n.name].match(n.passPattern)||(r|=!0,a[n.name]=n.errorMessage)}return e.setState({error:a}),!r}},codeValidator:function(e,t){return function(a){for(var r={},i=0;i<t.length;i++){var n=t[i];if(n.exceptionCode&&n.exceptionCode===a&&n.name)return r[n.name]=n.errorMessage,e.setState({error:r}),!1;if(n.exceptionCode&&n.exceptionCode===a&&!n.name)return e.props.dispatchEvent(ae.NewNotification(n.errorMessage,parseInt(n.level)||2)),!1}return!0}}},oe=a(0),ce=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;Object(p.a)(this,a);var i=(r=t.call(this,e)).props.intl;return r.state={email:"",password:"",code:"",error:{},showPassword:!1,showCodeInput:!1,emailFocus:!1,passwordFocus:!1,codeBtnDisabled:!1,codeText:i.formatMessage({id:"label.getEmailCode"})},r.getEmailCodeCheckInput=se.stateValidator(Object(N.a)(r),[{name:"email",passPattern:/^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/,errorMessage:i.formatMessage({id:"message.error._S_invalid"},{s:i.formatMessage({id:"label.email"})})}]),r.getEmailCodeCheckResponse=se.codeValidator(Object(N.a)(r),[{name:"email",exceptionCode:1037,errorMessage:i.formatMessage({id:"message.error.inputNewEmail"})},{name:"email",exceptionCode:1030,errorMessage:i.formatMessage({id:"message.error._S_duplicate"},{s:r.props.intl.formatMessage({id:"label.email"})})},{name:"password",exceptionCode:1036,errorMessage:i.formatMessage({id:"message.error._S_invalid"},{s:i.formatMessage({id:"label.password"})})},{name:"email",exceptionCode:1029,errorMessage:i.formatMessage({id:"message.error.getEmailCodeFail"})}]),r.saveEmailCheckInput=se.stateValidator(Object(N.a)(r),[{name:"email",passPattern:/^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/,errorMessage:i.formatMessage({id:"message.error._S_invalid"},{s:r.props.intl.formatMessage({id:"label.email"})})},{name:"password",passPattern:/^.+$/,errorMessage:i.formatMessage({id:"message.error._S_empty"},{s:i.formatMessage({id:"label.password"})})},{name:"code",passPattern:/^[0-9]{6}$/,errorMessage:i.formatMessage({id:"message.error._S_invalid"},{s:i.formatMessage({id:"label.emailCode"})})}]),r.saveEmailCheckResponse=se.codeValidator(Object(N.a)(r),[{name:"email",exceptionCode:1029,errorMessage:i.formatMessage({id:"message.error.change_S_Fail"},{s:i.formatMessage({id:"label.email"})})},{name:"code",exceptionCode:1036,errorMessage:i.formatMessage({id:"message.error._S_invalid"},{s:i.formatMessage({id:"label.email"})})}]),r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.setState({email:this.props.currentUserInfo.email})}},{key:"getEmailCode",value:function(){var e=this,t=this.props.intl,a=this.state,r=a.email,i=a.password;if(a.codeBtnDisabled||!i||!this.getEmailCodeCheckInput())return!1;te.getEmailCode({email:r,password:i}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(a){if(a.code){if(!e.getEmailCodeCheckResponse(a.code))return!1}else e.props.dispatchEvent(ae.NewNotification(t.formatMessage({id:"message.emailCodeHasSendNewEmail"}),0)),e.setState({showCodeInput:!0}),e.countDown()}))}},{key:"countDown",value:function(){var e=this,t=this.props.intl;this.setState({codeBtnDisabled:!0});var a=60;this.int=setInterval((function(){e.setState({codeText:t.formatMessage({id:"label.retryAfter_N_seconds"},{n:a})}),--a<=0&&(clearInterval(e.int),e.setState({codeText:t.formatMessage({id:"label.getEmailCode"}),codeBtnDisabled:!1}))}),1e3)}},{key:"saveData",value:function(){var e=this,t=this.props.intl,a=this.state,r=a.email,i=a.password,n=a.code;if(!this.saveEmailCheckInput())return!1;te.changeEmail({password:i,email:r,code:n}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(a){if(a.code){if(e.saveEmailCheckResponse(a.code))return!1}else e.props.update((function(){e.props.dispatchEvent(ae.NewNotification(t.formatMessage({id:"message.updated"}),0)),setTimeout((function(){return window.location.href="/user/logout"}),3e3)}))}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,r=t.intl,n=this.state,s=n.email,o=n.password,c=n.code,l=n.error,p=n.showPassword,d=n.showCodeInput;return Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsxs)(k.a,{container:!0,spacing:2,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"subtitle1",component:"div",gutterBottom:!0,children:r.formatMessage({id:"label.email"})})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(E.a,{fullWidth:!0,variant:"outlined",value:s,error:!!l.email,helperText:l.email,placeholder:r.formatMessage({id:"message.error._S_empty"},{s:r.formatMessage({id:"label.email"})}),onChange:function(t){return e.setState({email:t.target.value})},onFocus:function(){return e.setState({emailFocus:!0,showPassword:!0})},onBlur:function(){return setTimeout((function(){e.setState({emailFocus:!1}),!e.state.passwordFocus&&e.setState({showPassword:!1})}),150)}})}),p&&!d&&Object(oe.jsxs)(i.a.Fragment,{children:[Object(oe.jsx)(k.a,{item:!0,xs:12,md:8,lg:9,children:Object(oe.jsx)(E.a,{fullWidth:!0,type:"password",variant:"outlined",value:o,error:!!l.password,helperText:l.password,placeholder:r.formatMessage({id:"message.error._S_empty"},{s:r.formatMessage({id:"label.password"})}),onChange:function(t){return e.setState({password:t.target.value})},onFocus:function(){return e.setState({passwordFocus:!0})},onBlur:function(){return setTimeout((function(){e.setState({passwordFocus:!1}),!e.state.emailFocus&&e.setState({showPassword:!1})}),150)}})}),Object(oe.jsx)(k.a,{item:!0,xs:12,md:4,lg:3,align:"right",children:Object(oe.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(){return e.getEmailCode()},children:r.formatMessage({id:"label.getEmailCode"})})})]}),d&&Object(oe.jsxs)(i.a.Fragment,{children:[Object(oe.jsx)(k.a,{item:!0,xs:12,md:8,lg:9,children:Object(oe.jsx)(E.a,{fullWidth:!0,variant:"outlined",className:a.pr0,value:c,error:!!l.code,helperText:l.code,placeholder:r.formatMessage({id:"message.error._S_empty"},{s:r.formatMessage({id:"label.emailCode"})}),onChange:function(t){return e.setState({code:t.target.value})},InputProps:{endAdornment:Object(oe.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(){return e.getEmailCode()},disabled:this.state.codeBtnDisabled,children:this.state.codeText})}})}),Object(oe.jsx)(k.a,{item:!0,xs:12,md:4,lg:3,align:"right",children:Object(oe.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(){return e.saveData()},children:r.formatMessage({id:"label.save"})})})]})]})})}}]),a}(i.a.Component),le=Object(R.b)(Object(C.a)((function(e){return{pr0:{"& > div":{paddingRight:"0px !important"},"& button":{minWidth:e.spacing(18)}}}}))(Object(l.b)((function(e,t){return{}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(ce))),pe=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).oldData=e.currentUserInfo[e.comData.field],r.state={data:r.oldData,showBtn:!1,error:{}},r.checkInput=se.stateValidator(Object(N.a)(r),[{name:"data",passPattern:/^.+$/,errorMessage:r.props.intl.formatMessage({id:"message.error._S_empty"},{s:r.props.intl.formatMessage({id:e.comData.label})})}]),r.checkResponse=se.codeValidator(Object(N.a)(r),[{name:"data",exceptionCode:1029,errorMessage:r.props.intl.formatMessage({id:"message.error.change_S_Fail"},{s:r.props.intl.formatMessage({id:e.comData.label})})}]),r}return Object(d.a)(a,[{key:"saveData",value:function(){var e=this,t=this.props,a=t.intl,r=t.comData,i=this.state.data;if(this.oldData===i||!this.checkInput())return!1;te.setUserData({data:i,field:r.field}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){if(t.code){if(!e.checkResponse(t.code))return!1}else e.props.dispatchEvent(ae.NewNotification(a.formatMessage({id:"message.updated"}),0)),e.oldData=i,e.props.update()}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.intl,r=t.comData;return Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsxs)(k.a,{container:!0,spacing:2,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"subtitle1",component:"div",gutterBottom:!0,children:a.formatMessage({id:r.label})})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(E.a,{fullWidth:!0,variant:"outlined",value:this.state.data,error:!!this.state.error.data,helperText:this.state.error.data,placeholder:a.formatMessage({id:"message.error._S_empty"},{s:a.formatMessage({id:r.label})}),onChange:function(t){return e.setState({data:t.target.value})},onFocus:function(){return e.setState({showBtn:!0})}})}),this.state.showBtn&&Object(oe.jsxs)(k.a,{item:!0,xs:12,align:"right",children:[Object(oe.jsx)(_.a,{variant:"outlined",color:"primary",onClick:function(t){return e.setState({showBtn:!1})},children:a.formatMessage({id:"label.cancel"})}),"\xa0\xa0",Object(oe.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(t){return e.saveData()},children:a.formatMessage({id:"label.save"})})]})]})})}}]),a}(i.a.Component),de=Object(R.b)(Object(C.a)((function(e){return{}}))(Object(l.b)((function(e,t){return{}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(pe))),ue=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={},r.updateAllInfo=r.updateAllInfo.bind(Object(N.a)(r)),r}return Object(d.a)(a,[{key:"updateAllInfo",value:function(e){var t=this;te.getUserInfo().then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(a){a.code||(t.props.dispatchEvent({type:"data.currentUserInfo.update",data:a.data}),"function"===typeof e&&e())}))}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.currentUserInfo,r=e.intl;return Object(oe.jsxs)("div",{children:[Object(oe.jsx)(w.a,{variant:"subtitle1",gutterBottom:!0,children:r.formatMessage({id:"label.settings"})}),Object(oe.jsxs)(M.a,{className:t.infoWrap,children:[Object(oe.jsx)(w.a,{variant:"subtitle1",gutterBottom:!0,children:r.formatMessage({id:"label.profile"})}),Object(oe.jsx)("div",{className:"mt30"}),"u_key"in a?Object(oe.jsx)(de,{comData:{field:"name",label:"label.userName"},currentUserInfo:a,update:this.updateAllInfo}):"",Object(oe.jsx)("div",{className:"mt30"}),"u_key"in a?Object(oe.jsx)(le,{currentUserInfo:a,update:this.updateAllInfo}):"",Object(oe.jsx)("div",{className:"mt30"}),Object(oe.jsx)(w.a,{variant:"subtitle2",gutterBottom:!0,children:r.formatMessage({id:"label.loginCredential"})}),Object(oe.jsx)("div",{className:"mt30"}),"u_key"in a?Object(oe.jsx)(de,{comData:{field:"company",label:"label.company"},currentUserInfo:a,update:this.updateAllInfo}):"",Object(oe.jsx)("div",{className:"mt30"}),"u_key"in a?Object(oe.jsx)(de,{comData:{field:"job",label:"label.job"},currentUserInfo:a,update:this.updateAllInfo}):""]})]})}}]),a}(i.a.Component),me=Object(R.b)(Object(C.a)((function(e){return{infoWrap:{padding:"20px 30px 60px 30px",marginTop:20}}}))(Object(l.b)((function(e,t){return{currentUserInfo:e.DataStore.currentUserInfo}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(ue))),he=a(546),ge=a(580),be=a(582),fe=a(14),je=a(3),ve=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"showDoc",value:function(){var e=this.props,t=e.doc,a="cn";"en-us"===e.currentLanguage&&(a="en"),window.open("/doc/"+a+t,"_blank")}},{key:"render",value:function(){var e=this,t=this.props,a=t.tooltip,r=t.title,i=t.type,n=t.intl;return"button"===i?Object(oe.jsxs)(_.a,{variant:"contained",color:"primary",onClick:function(){return e.showDoc()},children:[Object(oe.jsx)(fe.a,{icon:je.s}),"\xa0\xa0",r||n.formatMessage({id:"label.learnMore"})]}):"icon"===i?Object(oe.jsx)(be.a,{title:a||n.formatMessage({id:"label.learnMore"}),placement:"top",children:Object(oe.jsx)(w.a,{variant:"body2",component:"span",children:Object(oe.jsx)("a",{style:{cursor:"pointer","&:hover":{textDecoration:"underline"}},onClick:function(){return e.showDoc()},children:Object(oe.jsx)(fe.a,{icon:je.s})})})}):Object(oe.jsx)(be.a,{title:a||n.formatMessage({id:"label.learnMore"}),placement:"top",children:Object(oe.jsx)(w.a,{variant:"body2",component:"span",children:Object(oe.jsxs)("a",{style:{cursor:"pointer","&:hover":{textDecoration:"underline"}},onClick:function(){return e.showDoc()},children:[r||n.formatMessage({id:"label.learnMore"}),"\xa0",Object(oe.jsx)(fe.a,{icon:je.s})]})})})}}]),a}(i.a.Component),Oe=Object(R.b)(Object(ge.a)(Object(C.a)((function(e){return{progress:{color:e.palette.info.main}}}))(Object(l.b)((function(e,t){return{currentLanguage:e.DataStore.currentLanguage}}),(function(e,t){return{}}))(ve)))),ye=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.item,a=e.onDelete,r=e.classes;return Object(oe.jsxs)(k.a,{container:!0,justifyContent:"space-between",children:[Object(oe.jsxs)(k.a,{item:!0,children:[Object(oe.jsxs)(w.a,{variant:"body1",className:r.line,children:[t.name," \xa0"]}),Object(oe.jsx)(w.a,{variant:"body2",className:r.line2,children:t.hash.replace(/([a-f0-9]{2})/gi,"$1:").slice(0,-1)})]}),Object(oe.jsx)(k.a,{item:!0,className:r.center,children:Object(oe.jsx)(_.a,{onClick:function(e){a&&a(t.id)},children:Object(oe.jsx)(fe.a,{icon:je.H,className:r.icon})})})]})}}]),a}(i.a.Component),xe=Object(R.b)(Object(ge.a)(Object(C.a)((function(e){return{line:{marginTop:e.spacing(1),marginBottom:e.spacing(.5)},line2:{marginBottom:e.spacing(1)},center:{display:"flex",alignItems:"center"},icon:{color:e.palette.text.light}}}))(Object(h.f)(Object(l.b)((function(e,t){return{}}),(function(e,t){return{}}))(ye))))),Se=a(541),Ce=a(545),Ne=a(544),Re=a(542),Me=a(543),we=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.intl,r=t||[[],[]];return r=J(a.formatMessage,r),Object(oe.jsxs)(Se.a,{children:[Object(oe.jsx)(Re.a,{children:Object(oe.jsx)(Me.a,{children:r[1].map((function(e,t){return Object(oe.jsx)(Ne.a,{style:{width:r[0][t]},children:Object(oe.jsx)(w.a,{variant:"body1",component:"span",children:e})},t)}))})}),Object(oe.jsx)(Ce.a,{children:r.map((function(e,t){return t>1?Object(oe.jsx)(Me.a,{children:e.map((function(e,t){return Object(oe.jsx)(Ne.a,{children:e},t)}))},t):null}))})]})}}]),a}(r.Component),ke=Object(R.b)(Object(ge.a)(Object(C.a)((function(e){return{}}))(Object(h.f)(Object(l.b)((function(e,t){return{}}),(function(e,t){return{}}))(we))))),_e=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={pending:!1,keyList:[],name:"",key:"",error:{}},r.mountedFlag=!1,r.checkInput=se.stateValidator(Object(N.a)(r),[{name:"key",passPattern:/^.+$/,errorMessage:r.props.intl.formatMessage({id:"message.error._S_empty"},{s:r.props.intl.formatMessage({id:"label.SSHKey"})})},{name:"key",passPattern:/^((?:ssh|ecdsa)-[\w\d]+)\s+(\S)+(?:\s+(\S+))?\s*$/,errorMessage:r.props.intl.formatMessage({id:"message.error._S_invalid"},{s:r.props.intl.formatMessage({id:"label.SSHKey"})})},{name:"name",passPattern:/^.+$/,errorMessage:r.props.intl.formatMessage({id:"message.error._S_empty"},{s:r.props.intl.formatMessage({id:"label.name"})})},{name:"name",passPattern:/^.{5,30}$/,errorMessage:r.props.intl.formatMessage({id:"message.error.within_N1_to_N2_characters"},{n1:5,n2:30})}]),r.checkResponse=se.codeValidator(Object(N.a)(r),[{name:"key",exceptionCode:1037,errorMessage:r.props.intl.formatMessage({id:"message.error.sshKeyDuplicate"})}]),r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.mountedFlag=!0,this.getData()}},{key:"componentWillUnmount",value:function(){this.mountedFlag=!1}},{key:"addKey",value:function(){var e=this;if(!this.checkInput())return!1;var t=this.props,a=t.intl,r=t.dispatchEvent,i=this.state,n=i.key,s=i.name,o=n.match(/^((?:ssh|ecdsa)-[\w\d]+)\s+(\S+)(?:\s+(\S+))?\s*$/);return this.setState({pending:!0}),te.addSSHKey({name:s,key:o[2]}).then(ne.withEventdispatcher(r)(ne.getJSONData)).then((function(t){if(e.setState({pending:!1}),t.code){if(!e.checkResponse(t.code))return!1;t.code>1024&&r(ae.NewNotification(a.formatMessage({id:"message.error.AddFail"}),2))}else r(ae.NewNotification(a.formatMessage({id:"message.Added"}),0)),e.setState({name:"",key:""}),e.getData()})),!0}},{key:"removeKey",value:function(e){var t=this,a=this.props,r=a.intl,i=a.dispatchEvent;te.removeSSHKey({id:e}).then(ne.withEventdispatcher(i)(ne.getJSONData)).then((function(e){e.code?e.code>1024&&i(ae.NewNotification(r.formatMessage({id:"message.error.removeFail"}),2)):(i(ae.NewNotification(r.formatMessage({id:"message.removed"}),0)),t.getData())}))}},{key:"getData",value:function(){var e=this;te.getKeyList().then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){t.code||e.setState({keyList:t.data})}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.currentUserInfo,r=t.classes,i=t.intl;return Object(oe.jsxs)(k.a,{container:!0,spacing:2,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"h6",component:"div",className:r.header,children:i.formatMessage({id:"label.SSHKey_pl"})})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(M.a,{children:a.id?Object(oe.jsxs)(k.a,{container:!0,spacing:2,children:[Object(oe.jsx)(k.a,{item:!0,xs:7,children:Object(oe.jsxs)(k.a,{container:!0,spacing:2,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsxs)(w.a,{variant:"subtitle1",component:"div",gutterBottom:!0,children:[i.formatMessage({id:"label.addSSHKey"})," \xa0",Object(oe.jsx)(Oe,{type:"icon",doc:"/common/ssh_key.md"})]})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(E.a,{fullWidth:!0,variant:"outlined",multiline:!0,rows:7,value:this.state.key,error:!!this.state.error.key,helperText:this.state.error.key,placeholder:i.formatMessage({id:"message.inputSSHKEYContent"}),onChange:function(t){var a=t.target.value,r=a.match(/^((?:ssh|ecdsa)-[\w\d]+)\s+(\S)+(?:\s+(\S+))?\s*$/),i={key:a,name:""};r&&r[3]&&(i.name=r[3]),e.setState(i)}})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"subtitle1",component:"div",gutterBottom:!0,children:i.formatMessage({id:"label.name"})})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(E.a,{fullWidth:!0,variant:"outlined",value:this.state.name,error:!!this.state.error.name,helperText:this.state.error.name,onChange:function(t){return e.setState({name:t.target.value})},placeholder:i.formatMessage({id:"message.inputSSHKEYName"})})}),Object(oe.jsx)(k.a,{item:!0,xs:12,align:"right",children:Object(oe.jsx)(_.a,{color:"primary",variant:"contained",disableElevation:!0,onClick:function(t){return e.addKey()},disabled:this.state.pending,className:r.btn,children:i.formatMessage({id:"label.addSSHKey"})})})]})}),Object(oe.jsx)(k.a,{item:!0,xs:3}),Object(oe.jsx)(k.a,{item:!0,xs:7,className:r.table,children:Object(oe.jsx)(ke,{data:[["100%"],["label.SSHKeyManage"]].concat(Object(T.a)(this.state.keyList.filter(U.notDeleted()).map((function(t,a){return[Object(oe.jsx)(xe,{item:t,onDelete:function(t){return e.removeKey(t)}},a)]}))))})}),Object(oe.jsx)(k.a,{item:!0,xs:3})]}):Object(oe.jsx)(k.a,{container:!0,spacing:2,children:Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(he.a,{})})})})})]})}}]),a}(i.a.Component),Ee=Object(R.b)(Object(C.a)((function(e){return{header:{lineHeight:e.spacing(5)+"px",borderBottom:"1px solid "+e.palette.border,fontSize:"18px"},paper:{padding:e.spacing(2)},btn:{margin:e.spacing(2)+"px 0px"},table:{"& th, & td":{textAlign:"left !important"}}}}))(Object(l.b)((function(e,t){return{currentUserInfo:e.DataStore.currentUserInfo}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(_e))),Te=a(5),Ae=["icon","className","label","badge","intl","classes"],De=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.icon,a=e.className,r=e.label,i=e.badge,n=e.intl,s=e.classes,o=Object(Te.a)(e,Ae),c=Object(oe.jsxs)(_.a,Object(y.a)(Object(y.a)({},o),{},{className:[s.button,a].join(" "),children:[Object(oe.jsx)(fe.a,{icon:t,className:s.icon}),i>0&&Object(oe.jsx)("div",{align:"center",className:s.badge,children:i>99?"":i})]}));return r?Object(oe.jsx)(be.a,{title:n.formatMessage({id:r}),placement:"top",disableFocusListener:!0,children:c}):c}}]),a}(i.a.Component),Ie=Object(R.b)(Object(C.a)((function(e){return{button:{minWidth:e.spacing(3)+"px !important",padding:"7px 8px !important"},icon:{width:"18px !important",height:"18px !important"},badge:{right:0,top:"-5px",zIndex:"1",fontSize:"12px",position:"absolute",borderRadius:"10px",background:"#FF3F35",height:e.spacing(2),minWidth:e.spacing(2),lineHeight:e.spacing(2)+"px",color:e.palette.primary.contrastText,border:"2px solid "+e.palette.background.light}}}))(De)),Pe=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;Object(p.a)(this,a),(r=t.call(this,e)).state={pending:!1,primaryEmail:e.currentUserInfo.id?e.currentUserInfo.email:"",emails:e.currentUserInfo.id?e.currentUserInfo.emails:null,email:"",error:{},validationEmail:null,code:"",codeDisabled:!1,count:61};var i=e.intl;return r.checkInput=se.stateValidator(Object(N.a)(r),[{name:"email",passPattern:/^.+$/,errorMessage:i.formatMessage({id:"message.error._S_empty"},{s:i.formatMessage({id:"label.email"})})},{name:"email",passPattern:/^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/,errorMessage:i.formatMessage({id:"message.error._S_invalid"},{s:i.formatMessage({id:"label.email"})})}]),r.codeCheckInput=se.stateValidator(Object(N.a)(r),[{name:"code",passPattern:/^\d+$/,errorMessage:i.formatMessage({id:"message.error._S_empty"},{s:i.formatMessage({id:"label.emailCode"})})},{name:"code",passPattern:/^\d{6}$/,errorMessage:i.formatMessage({id:"message.error._S_invalid"},{s:i.formatMessage({id:"label.emailCode"})})}]),r.codeCheckResponse=se.codeValidator(Object(N.a)(r),[{name:"code",exceptionCode:1036,errorMessage:r.props.intl.formatMessage({id:"message.error._S_invalid"},{s:i.formatMessage({id:"label.emailCode"})})}]),r}return Object(d.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return JSON.stringify(e.currentUserInfo)===JSON.stringify(this.props.currentUserInfo)||(this.setState({primaryEmail:e.currentUserInfo.email,emails:e.currentUserInfo.emails}),!1)}},{key:"reloadUserData",value:function(e){var t=this;e&&this.cancelForm(),te.getUserInfo().then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(e){e.code||t.props.dispatchEvent({type:"data.currentUserInfo.update",data:e.data})}))}},{key:"addCommitEmail",value:function(){var e=this,t=this.state,a=t.emails,r=t.email,i=this.props.intl;return!(!a||!this.checkInput())&&(a.filter(U.email(r)).length>0?(this.setState({error:{email:i.formatMessage({id:"message.error._S_duplicate"},{s:i.formatMessage({id:"label.email"})})}}),!1):(this.setState({pending:!0}),void te.addCommitEmail({email:r}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){e.setState({pending:!1}),t.code?e.props.dispatchEvent(ae.NewNotification(i.formatMessage({id:"message.error.AddFail"}),2)):(e.props.dispatchEvent(ae.NewNotification(i.formatMessage({id:"message.emailCodeHasSendNewEmail"}),0)),e.createValidationForm(r),e.reloadUserData(!1))}))))}},{key:"resentCommitEmailCode",value:function(e){var t=this,a=this.props.intl;if(this.state.codeDisabled)return!1;this.cancelForm(),te.resentCommitEmailCode({email:e}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(e){e.code?t.props.dispatchEvent(ae.NewNotification(a.formatMessage({id:"message.error.getEmailCodeFail"}),2)):(t.props.dispatchEvent(ae.NewNotification(a.formatMessage({id:"message.emailCodeHasSendNewEmail"}),0)),t.countDown())}))}},{key:"countDown",value:function(){var e=this,t=this.state.count;t?(this.setState({codeDisabled:!0,count:--t}),window.setTimeout((function(){return e.countDown()}),1e3)):this.setState({codeDisabled:!1,count:61})}},{key:"validationCommitEmailCode",value:function(e){var t=this,a=this.props.intl,r=this.state.code;if(!e||!this.codeCheckInput())return!1;this.setState({pending:!0}),te.validationCommitEmailCode({id:e.id,email:e.email,code:r}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(e){if(t.setState({pending:!1}),e.code){if(!t.codeCheckResponse(e.code))return!1;t.props.dispatchEvent(ae.NewNotification(a.formatMessage({id:"message.error.verifyFail"}),2))}else t.props.dispatchEvent(ae.NewNotification(a.formatMessage({id:"message.verified"}),0)),t.reloadUserData(!0)}))}},{key:"deleteConfirm",value:function(e,t){var a=this,r=this.props.intl;this.cancelForm(),this.props.dispatchEvent(ae.addComformation("delete_my_email",{title:r.formatMessage({id:"message.confirmDelete"},{s:r.formatMessage({id:"label.email"})+" '"+t+"' "}),description:"",reject:function(){return!0},accept:function(){return a.deleteCommitEmail(e)}}))}},{key:"deleteCommitEmail",value:function(e){var t=this,a=this.props.intl;if(!e)return!1;this.setState({pending:!0}),te.deleteCommitEmail({id:e}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(e){t.setState({pending:!1}),t.props.dispatchEvent(ae.cancelComformation()),e.code?t.props.dispatchEvent(ae.NewNotification(a.formatMessage({id:"message.error.deleteFail"}),2)):(t.props.dispatchEvent(ae.NewNotification(a.formatMessage({id:"message.deleted"}),0)),t.reloadUserData(!0))}))}},{key:"getTableData",value:function(){var e=this,t=this.props,a=t.classes,r=t.intl,n=this.state,s=n.primaryEmail,o=n.emails,c=n.validationEmail,l=n.codeDisabled,p=n.count,d=[];return!!o&&(o.map((function(t,n){return"create"===t?d.push(e.createForm()):c===t.email?d.push(e.validationForm(t)):d.push([Object(oe.jsx)(w.a,{variant:"body1",component:"div",children:t.email}),t.email===s?Object(oe.jsx)(w.a,{variant:"body2",component:"div",children:r.formatMessage({id:"label.primaryEmail"})}):t.isCheck?Object(oe.jsx)(w.a,{variant:"body2",component:"div",children:r.formatMessage({id:"message.contactedEmail"})}):Object(oe.jsxs)(w.a,{variant:"body2",component:"div",children:[r.formatMessage({id:"message.shouldValidation"}),Object(oe.jsxs)("a",{href:"#",disabled:l,className:[a.btn,l?a.disabled:""].join(" "),onClick:function(a){return e.resentCommitEmailCode(t.email)},children:[r.formatMessage({id:"message.resendEmail"}),"?",l&&"("+p+")"]})]}),t.email!==s&&Object(oe.jsxs)(i.a.Fragment,{children:[!t.isCheck&&Object(oe.jsx)(Ie,{label:"message.shouldValidation",className:a.icon,onClick:function(a){return e.createValidationForm(t.email)},icon:je.m}),Object(oe.jsx)(Ie,{label:"label.delete",className:[a.icon,a.btn].join(" "),onClick:function(a){return e.deleteConfirm(t.id,t.email)},icon:je.H})]})]),!0})),[["30%","auto","auto"],["label.contactEmail","label.status",""]].concat(d))}},{key:"createForm",value:function(){var e=this,t=this.props,a=t.classes,r=t.intl;return[Object(oe.jsx)(E.a,{fullWidth:!0,variant:"outlined",value:this.state.email,placeholder:r.formatMessage({id:"message._S_empty"},{s:r.formatMessage({id:"label.email"})}),error:!!this.state.error.email,helperText:this.state.error.email,onChange:function(t){return e.setState({email:t.target.value})}}),"",Object(oe.jsxs)(i.a.Fragment,{children:[Object(oe.jsx)(Ie,{label:"label.ok",icon:je.e,onClick:function(t){return e.addCommitEmail()},className:a.ok}),Object(oe.jsx)(Ie,{label:"label.cancel",icon:je.g,onClick:function(t){return e.cancelForm()},className:a.cancel})]})]}},{key:"validationForm",value:function(e){var t=this,a=this.props,r=a.classes,n=a.intl;return[Object(oe.jsx)(w.a,{variant:"body1",component:"div",children:e.email}),Object(oe.jsx)(E.a,{fullWidth:!0,variant:"outlined",value:this.state.code,placeholder:n.formatMessage({id:"message._S_empty"},{s:n.formatMessage({id:"label.emailCode"})}),error:!!this.state.error.code,helperText:this.state.error.code,onChange:function(e){return t.setState({code:e.target.value})}}),Object(oe.jsxs)(i.a.Fragment,{children:[Object(oe.jsx)(Ie,{label:"label.ok",icon:je.e,onClick:function(a){return t.validationCommitEmailCode(e)},className:r.ok}),Object(oe.jsx)(Ie,{label:"label.cancel",icon:je.g,onClick:function(e){return t.cancelForm()},className:r.cancel})]})]}},{key:"cancelForm",value:function(){var e=this.state.emails;"create"===e[e.length-1]&&(e=e.slice(0,e.length-1)),this.setState({emails:e,email:"",error:{},validationEmail:null,code:""})}},{key:"createCommitEmailForm",value:function(){var e=this.state.emails;"create"!==e[e.length-1]&&(this.cancelForm(),this.setState({emails:[].concat(Object(T.a)(e),["create"])}))}},{key:"createValidationForm",value:function(e){this.cancelForm(),this.setState({validationEmail:e})}},{key:"render",value:function(){var e=this,t=this.props,a=t.history,r=t.classes,i=t.intl,n=this.state,s=n.pending,o=n.primaryEmail,c=n.emails;return Object(oe.jsxs)(k.a,{container:!0,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"h6",component:"div",className:r.header,children:i.formatMessage({id:"label.emailManage"})})}),Object(oe.jsxs)(k.a,{item:!0,xs:12,children:[Object(oe.jsx)(w.a,{variant:"subtitle1",component:"div",className:r.title,children:i.formatMessage({id:"message.primaryEmail"})}),Object(oe.jsx)(w.a,{variant:"body2",component:"div",children:i.formatMessage({id:"message.primaryEmailDescription"})}),Object(oe.jsxs)(k.a,{container:!0,className:r.content,children:[Object(oe.jsx)(k.a,{item:!0,xs:3,children:Object(oe.jsx)(w.a,{variant:"body1",component:"div",children:o})}),Object(oe.jsx)(k.a,{item:!0,xs:8,children:Object(oe.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(e){return a.push(W("settings","profile"))},children:i.formatMessage({id:"message.updatePrimaryEmail"})})})]})]}),Object(oe.jsxs)(k.a,{container:!0,children:[Object(oe.jsxs)(k.a,{item:!0,xs:6,children:[Object(oe.jsx)(w.a,{variant:"subtitle1",component:"div",className:r.title,children:i.formatMessage({id:"message.myEmail"})}),Object(oe.jsxs)(w.a,{variant:"body2",component:"div",children:[i.formatMessage({id:"message.myEmailDescription"})," \xa0",Object(oe.jsx)(Oe,{type:"icon",doc:"/common/multiple_email.md"})]})]}),Object(oe.jsx)(k.a,{item:!0,xs:2,align:"right",children:Object(oe.jsx)(_.a,{variant:"contained",color:"primary",className:r.create,disabled:s,onClick:function(t){return e.createCommitEmailForm()},children:i.formatMessage({id:"message.addEmail"})})}),Object(oe.jsx)(k.a,{item:!0,xs:8,className:r.table,children:null!==c?Object(oe.jsx)(ke,{data:this.getTableData()}):Object(oe.jsx)(k.a,{container:!0,className:r.loading,children:Object(oe.jsx)(he.a,{})})})]})]})}}]),a}(i.a.Component),Fe=Object(R.b)(Object(C.a)((function(e){return{loading:{paddingTop:e.spacing(16),paddingBottom:e.spacing(16),justifyContent:"center"},header:{lineHeight:e.spacing(5)+"px",marginBottom:e.spacing(4),borderBottom:"1px solid "+e.palette.border,fontSize:"18px"},title:{lineHeight:e.spacing(3)+"px",paddingBottom:e.spacing(2)},content:{paddingTop:e.spacing(3),paddingBottom:e.spacing(5),borderBottom:"1px solid "+e.palette.border,marginBottom:e.spacing(3)},create:{marginTop:e.spacing(1)},size:{fontSize:"12px"},btn:{textDecoration:"none !important",marginLeft:e.spacing(3)},icon:{color:e.palette.text.light},disabled:{opacity:.5,cursor:"not-allowed"},ok:{"& svg":{color:e.palette.success.main+" !important"}},cancel:{marginLeft:e.spacing(3),"& svg":{width:"14px !important",height:"14px !important",padding:"2px",color:e.palette.error.main+" !important"}},table:{marginTop:e.spacing(3),"& tbody tr":{"&:hover":{background:e.palette.background.light+" !important"}},"& td":{height:e.spacing(6)+"px","& > div":{verticalAlign:"middle"}}}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentUserInfo:e.DataStore.currentUserInfo}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(Pe)))),Le=a(583),Be=a(180),Ue=a.n(Be),Ge=a(34),He=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={showImgIcon:!1},r.uploadFile=r.uploadFile.bind(Object(N.a)(r)),r.instanceID="",r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.instanceID=Math.floor(1e6*Math.random())}},{key:"uploadFile",value:function(e){var t=this.props,a=t.appendData,r=t.name,i=t.dataProvider,n=e.target.files[0],s=Object(y.a)({},a);if(s[r+"_BINARY"]=n,!n)return!1;i(s).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then(this.props.onUpdate)}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,r=t.src,n=t.type;return Object(oe.jsxs)(i.a.Fragment,{children:[Object(oe.jsxs)("label",{htmlFor:"avater-uploader-"+this.instanceID,className:a.avatarLabel,onMouseEnter:function(){e.setState({showImgIcon:!0})},onMouseLeave:function(){e.setState({showImgIcon:!1})},children:["avatar"===n?Object(oe.jsx)(Le.a,{variant:"circular",src:r,className:Ue()(a.circleUserInfoAvatar)}):Object(oe.jsx)(Le.a,{variant:"rounded",src:r.length>1?r:"",className:Ue()(a.userInfoAvatar),children:1===r.length?r:""}),this.state.showImgIcon&&Object(oe.jsx)(k.a,{className:[a.iconBox,"avatar"===n?a.iconBoxCircle:a.iconBoxRounded].join(" "),children:Object(oe.jsx)(fe.a,{icon:Ge.h,className:a.editIcon})})]}),Object(oe.jsx)("input",{accept:"image/*",className:a.uploadInput,id:"avater-uploader-"+this.instanceID,type:"file",onChange:this.uploadFile})]})}}]),a}(i.a.Component),qe=Object(R.b)(Object(C.a)((function(e){return{avatarLabel:{cursor:"pointer",position:"relative",display:"inline-block",borderRadius:e.spacing(1)+"px"},iconBox:{width:"100%",position:"absolute",left:"0",bottom:"0",background:"#2F354D",opacity:.3},iconBoxRounded:{height:"40%",borderBottomLeftRadius:e.spacing(1)+"px",borderBottomRightRadius:e.spacing(1)+"px"},iconBoxCircle:{height:"100%",borderRadius:"50%"},editIcon:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:e.spacing(2)+"px",color:"#fff"},uploadInput:{display:"none !important"},userInfoAvatar:{width:e.spacing(7),height:e.spacing(7)},circleUserInfoAvatar:{width:e.spacing(10),height:e.spacing(10)}}}))(Object(l.b)((function(e,t){return{}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(He))),ze=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;Object(p.a)(this,a),(r=t.call(this,e)).updateUserInfo=r.updateUserInfo.bind(Object(N.a)(r)),r.mountedFlag=!1;var i=r.props.currentUserInfo;return r.state={name:i.name||"",email:i.email||"",team:i.team||"",role:i.role||"",oldPassword:"",newPassword:"",againPassword:"",mfaMode:0,mfaQRCodeData:"",mfaSecret:"",mfaCode1:"",mfaCode2:"",error:{}},r.checkBaseInfo=se.stateValidator(Object(N.a)(r),[{name:"name",passPattern:/^\S+$/,errorMessage:r.props.intl.formatMessage({id:"message.error._S_empty"},{s:r.props.intl.formatMessage({id:"label.userName"})})},{name:"name",passPattern:/^.{2,50}$/,errorMessage:r.props.intl.formatMessage({id:"message.error.within_N1_to_N2_characters"},{n1:2,n2:50})},{name:"email",passPattern:/^.+$/,errorMessage:r.props.intl.formatMessage({id:"message.error._S_empty"},{s:r.props.intl.formatMessage({id:"label.email"})})},{name:"email",passPattern:/^[^@]+@[^@]+\.[^@]+$/,errorMessage:r.props.intl.formatMessage({id:"message.error._S_invalid"},{s:r.props.intl.formatMessage({id:"label.email"})})},{name:"team",passPattern:/^.{0,50}$/,errorMessage:r.props.intl.formatMessage({id:"message.error.noMoreThan_N_characters"},{n:50})},{name:"role",passPattern:/^.{0,50}$/,errorMessage:r.props.intl.formatMessage({id:"message.error.noMoreThan_N_characters"},{n:50})}]),r.checkBaseResponse=se.codeValidator(Object(N.a)(r),[{name:"data",exceptionCode:1029,errorMessage:r.props.intl.formatMessage({id:"message.error.updateFail"})}]),r.checkPWDResponse=se.codeValidator(Object(N.a)(r),[{name:"oldPassword",exceptionCode:1040,errorMessage:r.props.intl.formatMessage({id:"message.error._S_invalid"},{s:r.props.intl.formatMessage({id:"label.password"})})}]),r.checkMFAInput=se.stateValidator(Object(N.a)(r),[{name:"mfaCode1",passPattern:/^\d{6}$/,errorMessage:r.props.intl.formatMessage({id:"message.error._S_invalid"},{s:r.props.intl.formatMessage({id:"label.mfaCode"})})},{name:"mfaCode2",passPattern:/^\d{6}$/,errorMessage:r.props.intl.formatMessage({id:"message.error._S_invalid"},{s:r.props.intl.formatMessage({id:"label.mfaCode"})})}]),r.checkResponse=se.codeValidator(Object(N.a)(r),[{name:"mfaCode1",exceptionCode:1041,errorMessage:r.props.intl.formatMessage({id:"message.error._S_invalid"},{s:r.props.intl.formatMessage({id:"label.mfaCode"})})},{name:"mfaCode2",exceptionCode:1042,errorMessage:r.props.intl.formatMessage({id:"message.error._S_invalid"},{s:r.props.intl.formatMessage({id:"label.mfaCode"})})}]),r}return Object(d.a)(a,[{key:"checkPWDInput",value:function(){var e=[{name:"oldPassword",passPattern:/^.{6,}$/,errorMessage:this.props.intl.formatMessage({id:"message.error._S_empty"},{s:this.props.intl.formatMessage({id:"label.oldPassword"})})},{name:"newPassword",passPattern:/^.{6,50}$/,errorMessage:this.props.intl.formatMessage({id:"message.error.within_N1_to_N2_characters"},{n1:6,n2:50})},{name:"againPassword",passPattern:new RegExp("^"+this.state.newPassword+"$"),errorMessage:this.props.intl.formatMessage({id:"message.error.inputNotSame"})}];return se.stateValidator(this,e)()}},{key:"componentDidMount",value:function(){this.mountedFlag=!0,this.updateUserInfo()}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.currentUserInfo.name===e.currentUserInfo.name&&this.props.currentUserInfo.email===e.currentUserInfo.email&&this.props.currentUserInfo.team===e.currentUserInfo.team&&this.props.currentUserInfo.role===e.currentUserInfo.role||this.setState({name:e.currentUserInfo.name||"",email:e.currentUserInfo.email||"",team:e.currentUserInfo.team||"",role:e.currentUserInfo.role||""}),!0}},{key:"componentWillUnmount",value:function(){this.mountedFlag=!1}},{key:"avatarUploaded",value:function(e){e.code||(this.props.dispatchEvent(ae.NewNotification(this.props.intl.formatMessage({id:"message.updated"}),0)),this.updateUserInfo())}},{key:"updateUserInfo",value:function(){var e=this;te.getUserInfo().then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){t.code||(e.props.dispatchEvent({type:"data.currentUserInfo.update",data:t.data}),t.data.mfaEnabled||e.prepareMFADeviceSetup())}))}},{key:"updateBasicInfo",value:function(){var e=this;if(!this.checkBaseInfo())return!1;te.updateBasicInfo({name:this.state.name,email:this.state.email,team:this.state.team,role:this.state.role}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){if(t.code){if(!e.checkBaseResponse(t.code))return!1}else e.props.dispatchEvent(ae.NewNotification(e.props.intl.formatMessage({id:"message.updated"}),0)),e.updateUserInfo()}))}},{key:"updatePassword",value:function(){var e=this,t=this.state,a=t.oldPassword,r=t.newPassword;if(!this.checkPWDInput())return!1;te.updatePassword({current:a,new:r}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){if(t.code){if(!e.checkPWDResponse(t.code))return!1;t.code>1024&&e.props.dispatchEvent(ae.NewNotification(e.props.intl.formatMessage({id:"message.error.updateFail"}),2))}else e.props.dispatchEvent(ae.NewNotification(e.props.intl.formatMessage({id:"message.updated"}),0)),e.updateUserInfo(),e.clearPWD()}))}},{key:"clearPWD",value:function(){this.setState({oldPassword:"",newPassword:"",againPassword:""})}},{key:"prepareMFADeviceSetup",value:function(){var e=this;this.setState({MFAPending:!0}),te.getMFAData().then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){e.setState({MFAPending:!1}),t&&!t.code&&t.data&&e.setState({mfaMode:1,mfaQRCodeData:t.data.image,mfaSecret:t.data.secret,mfaCode1:"",mfaCode2:""})}))}},{key:"revokeMFADevice",value:function(){var e=this;this.setState({MFAPending:!0}),te.revokeMFAData().then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){e.setState({MFAPending:!1}),t&&!t.code&&t.data&&(e.updateUserInfo(),e.props.dispatchEvent(ae.NewNotification(e.props.intl.formatMessage({id:"message.removed"}),0)))}))}},{key:"updateMFADevice",value:function(){var e=this;return!!this.checkMFAInput()&&(this.state.mfaCode1===this.state.mfaCode2?(this.setState({error:Object(y.a)(Object(y.a)({},this.state.error),{},{mfaCode2:this.props.intl.formatMessage({id:"message.error.inputSame"})})}),!1):(this.setState({MFAPending:!0}),void te.updateMFAData({secret:this.state.mfaSecret,code1:this.state.mfaCode1,code2:this.state.mfaCode2}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){if(e.setState({MFAPending:!1}),t.code){if(!e.checkResponse(t.code))return!1;t.code>1024&&e.props.dispatchEvent(ae.NewNotification(e.props.intl.formatMessage({id:"message.error.updateFail"}),2))}else e.props.dispatchEvent(ae.NewNotification(e.props.intl.formatMessage({id:"message.updated"}),0)),e.setState({mfaMode:0,mfaSecret:"",mfaCode1:"",mfaCode2:""}),e.updateUserInfo()}))))}},{key:"render",value:function(){var e=this,t=this.props,a=t.currentUserInfo,r=t.classes,n=t.intl;return Object(oe.jsxs)(k.a,{container:!0,spacing:2,className:r.paper,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"h6",component:"div",gutterBottom:!0,className:[r.header,r.noMarginTop].join(" "),children:n.formatMessage({id:"menu.profile"})})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsxs)(k.a,{container:!0,children:[Object(oe.jsxs)(k.a,{item:!0,xs:12,sm:5,children:[Object(oe.jsx)(k.a,{item:!0,xs:10,className:r.mainMarginBottom,children:Object(oe.jsx)(w.a,{variant:"body1",component:"div",className:r.fold,children:n.formatMessage({id:"label.userName"})})}),Object(oe.jsx)(k.a,{item:!0,xs:10,children:Object(oe.jsx)(E.a,{fullWidth:!0,variant:"outlined",placeholder:n.formatMessage({id:"message.error._S_empty"},{s:n.formatMessage({id:"label.userName"})}),value:this.state.name,error:!!this.state.error.name,helperText:this.state.error.name,onChange:function(t){var a=t.target.value;e.setState({name:a,error:{}})}})}),Object(oe.jsx)(k.a,{item:!0,xs:10,className:r.title,children:Object(oe.jsx)(w.a,{variant:"body1",component:"div",className:r.fold,children:n.formatMessage({id:"label.email"})})}),Object(oe.jsx)(k.a,{item:!0,xs:10,children:Object(oe.jsx)(E.a,{fullWidth:!0,variant:"outlined",placeholder:n.formatMessage({id:"message.error._S_empty"},{s:n.formatMessage({id:"label.email"})}),value:this.state.email,error:!!this.state.error.email,helperText:this.state.error.email,onChange:function(t){var a=t.target.value;e.setState({email:a,error:{}})}})}),Object(oe.jsx)(k.a,{item:!0,xs:10,className:r.title,children:Object(oe.jsx)(w.a,{variant:"body1",component:"div",className:r.fold,children:n.formatMessage({id:"label.team"})})}),Object(oe.jsx)(k.a,{item:!0,xs:10,children:Object(oe.jsx)(E.a,{fullWidth:!0,variant:"outlined",placeholder:n.formatMessage({id:"message.error._S_empty"},{s:n.formatMessage({id:"label.team"})}),value:this.state.team,error:!!this.state.error.team,helperText:this.state.error.team,onChange:function(t){var a=t.target.value;e.setState({team:a,error:{}})}})}),Object(oe.jsx)(k.a,{item:!0,xs:10,className:r.title,children:Object(oe.jsx)(w.a,{variant:"body1",component:"div",className:r.fold,children:n.formatMessage({id:"label.role"})})}),Object(oe.jsx)(k.a,{item:!0,xs:10,children:Object(oe.jsx)(E.a,{fullWidth:!0,variant:"outlined",placeholder:n.formatMessage({id:"message.error._S_empty"},{s:n.formatMessage({id:"label.role"})}),value:this.state.role,error:!!this.state.error.role,helperText:this.state.error.role,onChange:function(t){var a=t.target.value;e.setState({role:a,error:{}})}})}),Object(oe.jsx)(k.a,{item:!0,xs:10,className:r.mainMarginTop,children:Object(oe.jsx)(_.a,{variant:"contained",color:"primary",disabled:this.state.pending,onClick:function(){return e.updateBasicInfo()},children:n.formatMessage({id:"label.save"})})})]}),Object(oe.jsxs)(k.a,{item:!0,xs:12,sm:7,children:[Object(oe.jsx)(k.a,{item:!0,xs:10,className:r.mainMarginBottom,children:Object(oe.jsx)(w.a,{variant:"body1",component:"div",className:r.fold,children:n.formatMessage({id:"label.userAvatar"})})}),Object(oe.jsx)(k.a,{item:!0,xs:10,children:Object(oe.jsx)(qe,{name:"avatar",type:"avatar",appendData:{},src:D.HOSTS.PGYER_AVATAR_HOST+a.icon,onUpdate:function(t){return e.avatarUploaded(t)},dataProvider:te.uploadAvatar})})]})]})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"h6",component:"div",gutterBottom:!0,className:r.header,children:n.formatMessage({id:"label.security"})})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(k.a,{container:!0,children:Object(oe.jsxs)(k.a,{item:!0,xs:12,sm:5,children:[Object(oe.jsx)(k.a,{item:!0,xs:10,className:r.mainMarginBottom,children:Object(oe.jsx)(w.a,{variant:"body1",component:"div",className:r.fold,children:n.formatMessage({id:"label.oldPassword"})})}),Object(oe.jsx)(k.a,{item:!0,xs:10,children:Object(oe.jsx)(E.a,{fullWidth:!0,type:"password",variant:"outlined",placeholder:n.formatMessage({id:"message.error._S_empty"},{s:n.formatMessage({id:"label.oldPassword"})}),value:this.state.oldPassword,error:!!this.state.error.oldPassword,helperText:this.state.error.oldPassword,onChange:function(t){var a=t.target.value;e.setState({oldPassword:a,error:{}})}})}),Object(oe.jsx)(k.a,{item:!0,xs:10,className:r.title,children:Object(oe.jsx)(w.a,{variant:"body1",component:"div",className:r.fold,children:n.formatMessage({id:"label.newPassword"})})}),Object(oe.jsx)(k.a,{item:!0,xs:10,children:Object(oe.jsx)(E.a,{fullWidth:!0,type:"password",variant:"outlined",placeholder:n.formatMessage({id:"message.error._S_empty"},{s:n.formatMessage({id:"label.newPassword"})}),value:this.state.newPassword,error:!!this.state.error.newPassword,helperText:this.state.error.newPassword,onChange:function(t){var a=t.target.value;e.setState({newPassword:a,error:{}})}})}),Object(oe.jsx)(k.a,{item:!0,xs:10,className:r.title,children:Object(oe.jsx)(w.a,{variant:"body1",component:"div",className:r.fold,children:n.formatMessage({id:"label.newPasswordConfirm"})})}),Object(oe.jsx)(k.a,{item:!0,xs:10,children:Object(oe.jsx)(E.a,{fullWidth:!0,type:"password",variant:"outlined",placeholder:n.formatMessage({id:"message.error._S_retype"},{s:n.formatMessage({id:"label.newPassword"})}),value:this.state.againPassword,error:!!this.state.error.againPassword,helperText:this.state.error.againPassword,onChange:function(t){var a=t.target.value;e.setState({againPassword:a,error:{}})}})}),Object(oe.jsx)(k.a,{item:!0,xs:10,className:r.mainMarginTop,children:Object(oe.jsx)(_.a,{variant:"contained",color:"primary",disabled:this.state.pending,onClick:function(){return e.updatePassword()},children:n.formatMessage({id:"label.save"})})})]})})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"h6",component:"div",gutterBottom:!0,className:r.header,children:n.formatMessage({id:"label.twoFactorAuthentication"})})}),Object(oe.jsx)(k.a,{item:!0,xs:12,sm:8}),0===this.state.mfaMode&&a.mfaEnabled&&Object(oe.jsxs)(k.a,{item:!0,xs:5,children:[Object(oe.jsx)(_.a,{variant:"outlined",color:"primary",className:r.btn,disabled:this.state.MFAPending,onClick:function(){return e.prepareMFADeviceSetup()},children:n.formatMessage({id:"label.changeMFADevice"})}),"\xa0\xa0",Object(oe.jsx)(_.a,{variant:"contained",color:"primary",disabled:this.state.MFAPending,onClick:function(){return e.revokeMFADevice()},children:n.formatMessage({id:"label.removeMFADevice"})})]}),(1===this.state.mfaMode||!a.mfaEnabled)&&Object(oe.jsxs)(i.a.Fragment,{children:[Object(oe.jsx)(k.a,{item:!0,xs:7,children:Object(oe.jsx)(w.a,{variant:"body2",component:"div",gutterBottom:!0,children:n.formatMessage({id:"message.mfaGuide"})})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:this.state.MFAPending?Object(oe.jsx)(he.a,{}):Object(oe.jsx)("img",{width:150,height:150,src:this.state.mfaQRCodeData})}),Object(oe.jsx)(k.a,{item:!0,xs:12,sm:7,children:Object(oe.jsx)(E.a,{fullWidth:!0,variant:"outlined",value:this.state.mfaCode1,error:!!this.state.error.mfaCode1,helperText:this.state.error.mfaCode1,placeholder:n.formatMessage({id:"label.mfaCode"}),onChange:function(t){return e.setState({mfaCode1:t.target.value})}})}),Object(oe.jsx)(k.a,{item:!0,xs:12,sm:7,children:Object(oe.jsx)(E.a,{fullWidth:!0,variant:"outlined",value:this.state.mfaCode2,error:!!this.state.error.mfaCode2,helperText:this.state.error.mfaCode2,placeholder:n.formatMessage({id:"label.mfaCode"}),onChange:function(t){return e.setState({mfaCode2:t.target.value})}})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(_.a,{variant:"contained",color:"primary",disabled:this.state.MFAPending,onClick:function(){return e.updateMFADevice()},children:n.formatMessage({id:"label.save"})})})]})]})}}]),a}(i.a.Component),We=Object(R.b)(Object(C.a)((function(e){return{header:{lineHeight:e.spacing(5)+"px",borderBottom:"1px solid "+e.palette.border,fontSize:"18px",marginTop:e.spacing(4)},mainMarginTop:{marginTop:e.spacing(3)},mainMarginBottom:{marginBottom:e.spacing(1)},noMarginTop:{marginTop:"unset"},title:{marginTop:e.spacing(3),marginBottom:e.spacing(1)},pl:{paddingLeft:e.spacing(4)+"px !important"},btn:{color:e.palette.primary.main,cursor:"pointer"},paper:{paddingBottom:e.spacing(10)},fold:{fontWeight:500},flexRow:{display:"flex",flexFlow:"row nowrap",justifyContent:"flex-start",alignItems:"center"},flexRowCenter:{display:"flex",flexFlow:"row nowrap",alignItems:"center",padding:e.spacing(1.5)+"px "+e.spacing(1)+"px",marginLeft:e.spacing(4)},loading:{paddingTop:e.spacing(16),paddingBottom:e.spacing(16),justifyContent:"center"}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentUserInfo:e.DataStore.currentUserInfo}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(ze)))),Ve=a(547),Je=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.theme,r=e.icon,i=e.text,n=e.color,s=e.background,o={containedInfo:{main:a.palette.primary.contrastText,lighter:a.palette.secondary.main}},c=void 0===s||s,l=n?(a.palette[n]?a.palette:o)[n]:a.palette.primary;return r?Object(oe.jsxs)("span",{className:[t.root,t.iconPadding].join(" "),style:{backgroundColor:c?l.lighter:"",color:l.main},children:[Object(oe.jsx)("div",{className:t.icon,children:Object(oe.jsx)(fe.a,{icon:r})}),i]}):Object(oe.jsx)("span",{className:t.root,style:{backgroundColor:c?l.lighter:"",color:l.main},children:i})}}]),a}(i.a.Component),Ke=Object(ge.a)(Object(C.a)((function(e){return{root:{padding:e.spacing(.5)+"px",lineHeight:1.5,fontSize:e.spacing(1.5)+"px",fontWeight:"normal",display:"inline",borderRadius:e.spacing(.5)},iconPadding:{paddingLeft:e.spacing(1)+"px"},icon:{width:0,left:"-14px",position:"relative",display:"inline-block",verticalAlign:"middle"}}}))(Je)),$e=["classes"],Ze=Object(C.a)((function(e){return{root:{padding:0,width:e.spacing(6),height:e.spacing(3),margin:e.spacing(1),marginRight:e.spacing(4.5)},disabled:{"& + $track":{cursor:"not-allowed !important"}},switchBase:{padding:1,"&$checked":{transform:"translateX(24px)",color:e.palette.primary.contrastText,"& + $track":{opacity:1,border:"none"}},"&$focusVisible $thumb":{color:e.palette.primary.light,border:"6px solid "+e.palette.border}},thumb:{width:"22px",height:"22px"},track:{opacity:1,borderRadius:"12px",boxSizing:"border-box",backgroundColor:e.palette.text.lighter,transition:e.transitions.create(["background-color","border"])},checked:{},focusVisible:{}}}))((function(e){var t=e.classes,a=Object(Te.a)(e,$e);return Object(oe.jsx)(Ve.a,Object(y.a)({color:"primary",focusVisibleClassName:t.focusVisible,disableRipple:!0,classes:{root:t.root,disabled:t.disabled,switchBase:t.switchBase,thumb:t.thumb,track:t.track,checked:t.checked}},a))})),Ye=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={pending:!1,refusedList:null,openSet:{},groupFold:{},otherRepository:!1},r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.getData()}},{key:"shouldComponentUpdate",value:function(e,t){return JSON.stringify(this.props.currentUserInfo)===JSON.stringify(e.currentUserInfo)&&JSON.stringify(this.props.groupList)===JSON.stringify(e.groupList)&&JSON.stringify(this.props.repositoryList)===JSON.stringify(e.repositoryList)&&JSON.stringify(this.state.refusedList)===JSON.stringify(t.refusedList)||(this.changeOpenSet(e,t),!1)}},{key:"changeOpenSet",value:function(e,t){var a=this,r=e.currentUserInfo,i=e.groupList,n=e.repositoryList,s=t.refusedList,o=t.openSet,c=!1;r.id&&(o[D.notificationStatus.mr]=this.isUserNotificationOpen(D.notificationStatus.mr,r.notification),o[D.notificationStatus.email]=this.isUserNotificationOpen(D.notificationStatus.email,r.notification)),s&&(n.length&&n.map((function(e,r){return o[e.id]=a.isTargetOpen(t,e.id),i.length&&0===i.filter(U.id(e.group.id)).length&&(c=!0),!0})),i.length&&i.map((function(e,r){if(o[e.id]=a.isTargetOpen(t,e.id),o[e.id]&&n.length){var i=n.filter(U.group(e.id));if(i.length){var s=i.filter((function(e,t){return!o[e.id]||e.role<L.Role.DEVELOPER}));o[e.id]=!(i.length===s.length)}}return!0}))),this.setState({openSet:o,otherRepository:c})}},{key:"isUserNotificationOpen",value:function(e,t){return!(t>>e-1&1)}},{key:"isTargetOpen",value:function(e,t){return!e.refusedList.filter(U.target(t)).length}},{key:"getData",value:function(){var e=this;this.setState({pending:!0}),te.notificationRefused({}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){e.setState({pending:!1,refusedList:t.code?[]:t.data})}))}},{key:"reloadUserInfo",value:function(){var e=this;te.getUserInfo().then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){t.code||e.props.dispatchEvent({type:"data.currentUserInfo.update",data:t.data})}))}},{key:"updated",value:function(e,t,a){var r=this.props,i=r.dispatchEvent,n=r.intl;this.setState({pending:!1}),t.code?i(ae.NewNotification(n.formatMessage({id:"message.error.updateFail"}),2)):a?this.reloadUserInfo():this.getData()}},{key:"userNotificationSetting",value:function(e){var t=this,a=this.state,r=a.pending,i=a.openSet;if(r||!e)return!1;var n=i[e]=!i[e];this.setState({pending:!0,openSet:i}),te.userNotificationSetting({offset:e}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(e){t.updated(n,e,!0)}))}},{key:"setGroupOrRepoNotification",value:function(e,t){var a=this,r=this.state,i=r.pending,n=r.openSet;if(i||!t||!e)return!1;var s=n[e]=!n[e];this.setState({pending:!0,openSet:n}),te.setGroupOrRepoNotification({type:t,target:e,open:s?1:0}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(e){a.updated(s,e,!1)}))}},{key:"tableFold",value:function(e){var t=this.state.groupFold;t[e]=!t[e],this.setState({groupFold:t})}},{key:"getTableRow",value:function(e,t){var a=this,r=this.props,i=r.classes,n=r.intl,s=this.state,o=s.openSet,c=s.groupFold,l=!!e.group,p=e.role<L.Role.DEVELOPER;return[Object(oe.jsxs)(w.a,{variant:"body1",component:"div",children:[l&&Object(oe.jsx)("span",{className:t,children:e.group.displayName+"/"}),e.displayName," \xa0\xa0",Object(oe.jsx)(Ke,{color:e.role===L.Role.OWNER?"containedInfo":"info",text:n.formatMessage({id:"label.roleID_"+e.role})})]}),Object(oe.jsx)(Ze,{checked:!p&&o[e.id],disabled:p,onChange:function(t){return a.setGroupOrRepoNotification(e.id,l?D.notificationRefuseType.repository:D.notificationRefuseType.group)}}),l?"":Object(oe.jsx)(Ie,{icon:je.b,onClick:function(t){return a.tableFold(e.id)},className:[i.icon,c[e.id]?i.fold:""].join(" ")})]}},{key:"getRepositoryTable",value:function(){var e=this,t=this.props,a=t.repositoryList,r=t.groupList,i=[["auto","auto","50px"],["label.repository","label.notificationReceiveStatus",""]];return a.map((function(t,a){return 0===r.filter(U.id(t.group.id)).length&&i.push(e.getTableRow(t,"")),!0})),i}},{key:"render",value:function(){var e=this,t=this.props,a=t.currentUserInfo,r=t.groupList,n=t.repositoryList,s=t.classes,o=t.intl,c=this.state,l=c.refusedList,p=c.openSet,d=c.groupFold,u=c.otherRepository;return Object(oe.jsxs)(k.a,{container:!0,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"h6",component:"div",className:s.header,children:o.formatMessage({id:"label.notification"})})}),l?Object(oe.jsxs)(i.a.Fragment,{children:[a.id&&Object(oe.jsxs)(i.a.Fragment,{children:[Object(oe.jsxs)(k.a,{container:!0,className:s.content,children:[Object(oe.jsxs)(k.a,{item:!0,xs:5,children:[Object(oe.jsx)(w.a,{variant:"subtitle1",component:"div",className:s.subtitle,children:o.formatMessage({id:"message.mergeRequestNotification"})}),Object(oe.jsx)(w.a,{variant:"body2",component:"span",className:s.desc,children:o.formatMessage({id:"message.mergeRequestNotificationDesc"})})]}),Object(oe.jsx)(k.a,{item:!0,xs:2,className:s.switch,children:Object(oe.jsx)(Ze,{checked:p[D.notificationStatus.mr],onChange:function(t){return e.userNotificationSetting(D.notificationStatus.mr)}})})]}),Object(oe.jsxs)(k.a,{container:!0,className:s.content,children:[Object(oe.jsxs)(k.a,{item:!0,xs:5,children:[Object(oe.jsx)(w.a,{variant:"subtitle1",component:"div",className:s.subtitle,children:o.formatMessage({id:"message.emailNotification"})}),Object(oe.jsx)(w.a,{variant:"body2",component:"span",className:s.desc,children:o.formatMessage({id:"message.emailNotificationDesc"})})]}),Object(oe.jsx)(k.a,{item:!0,xs:2,className:s.switch,children:Object(oe.jsx)(Ze,{checked:p[D.notificationStatus.email],onChange:function(t){return e.userNotificationSetting(D.notificationStatus.email)}})})]})]}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"subtitle1",component:"div",className:s.title,children:o.formatMessage({id:"label.repository"})})}),r.length>0&&n.length>0&&r.map((function(t,a){var r=[["auto","auto","50px"],e.getTableRow(t,"")];return n.filter(U.group(t.id)).map((function(t,a){return r.push(e.getTableRow(t,s.span)),!0})),Object(oe.jsx)(k.a,{item:!0,xs:7,className:[s.title,d[t.id]||2===r.length?s.tableFold:""].join(" "),children:Object(oe.jsx)(ke,{data:r})},a)})),u&&Object(oe.jsx)(k.a,{item:!0,xs:7,className:[s.title,s.otherRepository].join(" "),children:Object(oe.jsx)(ke,{data:this.getRepositoryTable()})})]}):Object(oe.jsx)(k.a,{container:!0,className:s.loading,children:Object(oe.jsx)(he.a,{})})]})}}]),a}(i.a.Component),Xe=Object(R.b)(Object(C.a)((function(e){return{loading:{paddingTop:e.spacing(16),paddingBottom:e.spacing(16),justifyContent:"center"},header:{lineHeight:e.spacing(5)+"px",marginBottom:e.spacing(4),borderBottom:"1px solid "+e.palette.border,fontSize:"18px"},content:{paddingBottom:e.spacing(4),marginBottom:e.spacing(4),borderBottom:"1px solid "+e.palette.border},subtitle:{marginBottom:"14px"},desc:{fontSize:"14px"},title:{marginBottom:e.spacing(3),"&:last-child":{marginBottom:0},"& table tr th:nth-of-type(2), & table tr td:nth-of-type(2)":{textAlign:"right"}},tableFold:{"& table th":{border:"0px"},"& table tbody":{display:"none"}},switch:{display:"flex",justifyContent:"flex-end",alignItems:"center",paddingRight:e.spacing(12.5)},icon:{"& svg":{height:"12px !important",color:e.palette.text.light,transform:"rotate(180deg)",transition:"transform .3s"}},span:{marginLeft:e.spacing(2)},fold:{"& svg":{transform:"rotate(0deg)"}},otherRepository:{"& table thead":{display:"none"},"& table tr td:last-child":{width:"50px"}}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentUserInfo:e.DataStore.currentUserInfo,repositoryList:e.DataStore.repositoryList,groupList:e.DataStore.groupList}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(Ye))));var Qe={userList:function(e){return ee.POST("/api/admin/userList",e)},updateUserStatus:function(e){return ee.POST("/api/admin/updateUserStatus",e)},closeUserMFA:function(e){return ee.POST("/api/admin/closeUserMFA",e)},resetPassword:function(e){return ee.POST("/api/admin/resetPassword",e)},checkPassword:function(e){return ee.POST("/api/admin/checkPassword",e)},setAdministrator:function(e){return ee.POST("/api/admin/setAdministrator",e)},addUser:function(e){return ee.POST("/api/admin/addUser",e)},groupList:function(e){return ee.POST("/api/admin/groupList",e)},groupMembers:function(e){return ee.POST("/api/admin/groupMembers",e)},groupAddMember:function(e){return ee.POST("/api/admin/groupAddMember",e)},groupRemoveMember:function(e){return ee.POST("/api/admin/groupRemoveMember",e)},setGroupOwner:function(e){return ee.POST("/api/admin/setGroupOwner",e)},repositoryList:function(e){return ee.POST("/api/admin/repositoryList",e)},repositoryMembers:function(e){return ee.POST("/api/admin/repositoryMembers",e)},repositoryAddMember:function(e){return ee.POST("/api/admin/repositoryAddMember",e)},repositoryRemoveMember:function(e){return ee.POST("/api/admin/repositoryRemoveMember",e)},systemStatus:function(){return ee.GET("/api/admin/systemStatus")},getConfig:function(){return ee.GET("/api/admin/config")},setConfig:function(e){return ee.POST("/api/admin/config",e)}},et=a(40),tt=a(548),at=a(549),rt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.paletteName,r=e.theme,n=e.title,s=e.icon,o=e.label,c=e.unit,l=e.numbericValue,p=e.to,d=e.intl,u=e.history,m=a&&r.palette[a]?r.palette[a]:{},h=l,g=c;if("fromValue"===a&&(m="number"===typeof l?l>=85?r.palette.error:l>=70?r.palette.warning:r.palette.success:"Running"===l?r.palette.success:r.palette.error),h&&(h=(l===parseFloat(l)?z(l):l)||"NaN"),g){var b=function(e,t){var a,r,i,n,s,o,c=["p","u","m","","k","M","G","T","P"];return t&&e?(e=e.toString().trim(),a=(t=t.toString().trim()).slice(0,1),r=t,(i=c.indexOf(a))>-1?r=t.slice(1):(i=3,a=""),n=e.slice(-1),s=e,(o=c.indexOf(n))>-1?s=e.slice(0,-1):(o=3,n=""),[s,c[o+i-3]+r]):[e,t]}(h,g),f=Object(et.a)(b,2);h=f[0],g=f[1]}return Object(oe.jsx)(tt.a,{className:[t.card,p&&t.clickable].join(" "),style:{backgroundColor:m&&m.main},onClick:function(){p&&u.push(p)},children:Object(oe.jsx)(at.a,{className:t.content,style:{paddingBottom:r.spacing(2)},component:"div",children:Object(oe.jsxs)(k.a,{container:!0,spacing:0,children:[Object(oe.jsxs)(k.a,{item:!0,xs:8,children:[Object(oe.jsx)(w.a,{className:t.title,variant:"subtitle1",component:"h1",style:{color:m&&m.contrastText,fontSize:16},children:n||(o?d.formatMessage({id:o}):"-")}),Object(oe.jsx)(w.a,{variant:"h5",component:"h1",style:{color:m&&m.contrastText,fontSize:24},children:l||0===l?Object(oe.jsxs)(i.a.Fragment,{children:[h," ",g||""]}):Object(oe.jsx)(he.a,{size:24,style:{color:m&&m.light}})})]}),Object(oe.jsx)(k.a,{item:!0,xs:4,children:Object(oe.jsx)(w.a,{className:t.icon,variant:"h4",component:"div",children:Object(oe.jsx)(fe.a,{icon:s,style:{color:m&&m.dark,fontSize:32}})})})]})})})}}]),a}(r.Component),it=Object(R.b)(Object(ge.a)(Object(C.a)((function(e){return{card:{minWidth:e.spacing(22),height:e.spacing(14)},content:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},title:{marginBottom:e.spacing(2)},icon:{textAlign:"right",marginTop:e.spacing(1)},clickable:{cursor:"pointer"}}}))(Object(h.f)(Object(l.b)((function(e,t){return{}}),(function(e,t){return{}}))(rt))))),nt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).mountedFlag=!1,r.state={pending:!0,data:null},r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.mountedFlag=!0,this.getData()}},{key:"componentWillUnmount",value:function(){this.mountedFlag=!1}},{key:"shouldComponentUpdate",value:function(e,t){return JSON.stringify(this.state)!==JSON.stringify(this.nextState)}},{key:"getData",value:function(){var e=this;this.setState({pending:!0}),Qe.systemStatus().then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){t&&!t.code&&t.data&&e.setState({pending:!1,data:t.data})}))}},{key:"render",value:function(){var e=this.props.intl,t=this.state.pending;return Object(oe.jsxs)(k.a,{container:!0,spacing:2,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsxs)(w.a,{variant:"h6",component:"div",gutterBottom:!0,children:[" ",e.formatMessage({id:"label.statistic"})," "]})}),Object(oe.jsx)(k.a,{item:!0,sm:6,md:3,children:Object(oe.jsx)(it,{label:"label.user_pl",paletteName:"info",icon:je.Z,numbericValue:t?null:this.state.data.usage.user,to:"/admin/users"})}),Object(oe.jsx)(k.a,{item:!0,sm:6,md:3,children:Object(oe.jsx)(it,{label:"label.group_pl",paletteName:"info",icon:je.fb,numbericValue:t?null:this.state.data.usage.group,to:"/admin/groups"})}),Object(oe.jsx)(k.a,{item:!0,sm:6,md:3,children:Object(oe.jsx)(it,{label:"label.repository_pl",paletteName:"info",icon:je.eb,numbericValue:t?null:this.state.data.usage.repository,to:"/admin/repositories"})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsxs)(w.a,{variant:"h6",component:"div",gutterBottom:!0,children:[" ",e.formatMessage({id:"label.systemResources"})," "]})}),Object(oe.jsx)(k.a,{item:!0,sm:6,md:3,children:Object(oe.jsx)(it,{title:"CPU",paletteName:"fromValue",icon:je.bb,numbericValue:t?null:this.state.data.vm.cpu,unit:"%"})}),Object(oe.jsx)(k.a,{item:!0,sm:6,md:3,children:Object(oe.jsx)(it,{title:"RAM",paletteName:"fromValue",icon:je.bb,numbericValue:t?null:this.state.data.vm.memory,unit:"%"})}),!t&&this.state.data.vm.disk.length>0&&Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsxs)(w.a,{variant:"h6",component:"div",gutterBottom:!0,children:[" ",e.formatMessage({id:"label.diskUsgae"})," "]})}),!t&&this.state.data.vm.disk.map((function(e,t){return Object(oe.jsx)(k.a,{item:!0,sm:6,md:3,children:Object(oe.jsx)(it,{title:e.name,paletteName:"fromValue",icon:je.U,numbericValue:e.usage,unit:"%"})},t)})),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsxs)(w.a,{variant:"h6",component:"div",gutterBottom:!0,children:[" ",e.formatMessage({id:"label.serviceStatus"})," "]})}),Object(oe.jsx)(k.a,{item:!0,sm:6,md:3,children:Object(oe.jsx)(it,{title:"CodeFever",paletteName:"fromValue",icon:je.db,numbericValue:t?null:this.state.data.service.codefever?"Running":"Stopped"})}),Object(oe.jsx)(k.a,{item:!0,sm:6,md:3,children:Object(oe.jsx)(it,{title:"Nginx",paletteName:"fromValue",icon:je.db,numbericValue:t?null:this.state.data.service.nginx?"Running":"Stopped"})}),Object(oe.jsx)(k.a,{item:!0,sm:6,md:3,children:Object(oe.jsx)(it,{title:"PHP-FPM",paletteName:"fromValue",icon:je.db,numbericValue:t?null:this.state.data.service.php?"Running":"Stopped"})})]})}}]),a}(i.a.Component),st=Object(R.b)(Object(C.a)((function(e){return{}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentUserInfo:e.DataStore.currentUserInfo}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(nt)))),ot=a(300),ct=a(553),lt=a(551),pt=a(574),dt=a(554),ut=a(552),mt=a(555),ht=a(573),gt=a(550),bt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.tabs,a=e.onChange,r=e.currentTab,i=e.children,n=e.classes;return Object(oe.jsxs)(k.a,{container:!0,className:n.background,justifyContent:"space-between",children:[Object(oe.jsx)(k.a,{item:!0,children:Object(oe.jsx)(ht.a,{value:r||0,indicatorColor:"primary",textColor:"primary",onChange:a,children:t.map((function(e,t){return Object(oe.jsx)(gt.a,{value:t,label:e},t)}))})}),Object(oe.jsx)(k.a,{item:!0,children:i})]})}}]),a}(i.a.Component),ft=Object(R.b)(Object(ge.a)(Object(C.a)((function(e){return{background:{backgroundColor:e.palette.background.light}}}))(Object(h.f)(Object(l.b)((function(e,t){return{}}),(function(e,t){return{}}))(bt))))),jt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={pending:!0,count:0,list:[],category:0,keyword:"",sort:"name",page:1,pagesize:20,settingAnchor:null,settingUser:null,password1:"",password2:"",resetPassword:!1,error:{},settingAdmin:!1,password:"",addUser:!1,name:"",email:"",newPassword:""},r.mountedFlag=!1,r.timeout=null,r.checkPasswordInput=se.stateValidator(Object(N.a)(r),[{name:"password1",passPattern:/^.{6,50}$/,errorMessage:r.props.intl.formatMessage({id:"message.error.within_N1_to_N2_characters"},{n1:6,n2:50})}]),r.checkEmailInput=se.stateValidator(Object(N.a)(r),[{name:"name",passPattern:/^.{1,15}$/,errorMessage:r.props.intl.formatMessage({id:"message.error.within_N1_to_N2_characters"},{n1:1,n2:15})},{name:"email",passPattern:/^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/,errorMessage:r.props.intl.formatMessage({id:"message.error._S_invalid"},{s:r.props.intl.formatMessage({id:"label.email"})})}]),r.checkEmailResponse=se.codeValidator(Object(N.a)(r),[{name:"email",exceptionCode:1030,errorMessage:r.props.intl.formatMessage({id:"message.error._S_duplicate"},{s:r.props.intl.formatMessage({id:"label.email"})})},{name:"email",exceptionCode:1029,errorMessage:r.props.intl.formatMessage({id:"message.error.AddFail"})}]),r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.mountedFlag=!0,this.getData(this.state)}},{key:"componentWillUnmount",value:function(){this.mountedFlag=!1}},{key:"shouldComponentUpdate",value:function(e,t){var a=this;return this.state.category===t.category&&this.state.keyword===t.keyword&&this.state.sort===t.sort&&this.state.page===t.page||(this.state.page===t.page&&this.setState({page:1}),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){return a.getData(t)}),200)),!0}},{key:"getData",value:function(e){var t=this,a=e.category,r=e.keyword,i=e.sort,n=e.page,s=e.pagesize;this.setState({pending:!0}),Qe.userList({category:a,keyword:r,sort:i,page:n,pagesize:s}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(e){t.setState({pending:!1}),!e.code&&t.setState({count:e.data.count,list:e.data.list})}))}},{key:"getTableData",value:function(){var e=this,t=this.props,a=t.classes,r=t.intl,i=this.state.list,n=[];return i.map((function(t){return n.push([Object(oe.jsxs)(k.a,{className:a.name,children:[Object(oe.jsx)(Le.a,{src:D.HOSTS.PGYER_AVATAR_HOST+t.avatar,className:a.icon}),Object(oe.jsxs)(k.a,{children:[Object(oe.jsx)(w.a,{variant:"h6",component:"div",children:t.name}),Object(oe.jsx)(w.a,{variant:"body1",component:"div",children:t.email})]})]}),Object(oe.jsx)(w.a,{variant:"body1",component:"div",children:t.projects}),Object(oe.jsx)(w.a,{variant:"body1",component:"div",children:t.created}),Object(oe.jsxs)(k.a,{className:a.tag,children:[t.mfaEnabled&&Object(oe.jsx)(Ke,{color:"success",text:"2FA"}),t.admin&&Object(oe.jsx)(Ke,{color:"info",text:r.formatMessage({id:"label.administrator"})}),!t.status&&Object(oe.jsx)(Ke,{color:"error",text:r.formatMessage({id:"message.disabled"})})]}),Object(oe.jsx)(Ie,{label:"label.setting",onClick:function(a){return e.setState({settingAnchor:a.target,settingUser:t})},icon:je.gb})]),!0})),[["auto","auto","auto","auto","auto"],["label.name","label.repository","label.requestCreated","",""]].concat(n)}},{key:"updateUserStatusConfirm",value:function(){var e=this,t=this.props.intl,a=this.state.settingUser;if(this.setState({settingAnchor:null}),!a)return!1;this.props.dispatchEvent(ae.addComformation("setting_user_status",{title:t.formatMessage({id:a.status?"message.userStatusDisabled":"message.userStatusEnabled"}),description:t.formatMessage({id:a.status?"message.userStatusDisabled_N":"message.userStatusEnabled_N"},{n:a.name}),reject:function(){return!0},accept:function(){return e.updateUserStatus()}}))}},{key:"updateUserStatus",value:function(){var e=this,t=this.props.intl,a=this.state.settingUser;Qe.updateUserStatus({user:a.id,status:a.status?D.commonStatus.delete:D.commonStatus.normal}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(r){e.props.dispatchEvent(ae.cancelComformation()),r.code||(e.props.dispatchEvent(ae.NewNotification(t.formatMessage({id:a.status?"message.disabled":"message.enabled"}),0)),e.getData(e.state))}))}},{key:"closeUserMFAConfirm",value:function(){var e=this,t=this.props.intl,a=this.state.settingUser;if(this.setState({settingAnchor:null}),!a)return!1;this.props.dispatchEvent(ae.addComformation("disable_user_mfa",{title:t.formatMessage({id:"message.closeMFA"}),description:t.formatMessage({id:"message.closeMFA_N"},{n:a.name}),reject:function(){return!0},accept:function(){return e.closeUserMFA()}}))}},{key:"closeUserMFA",value:function(){var e=this,t=this.props.intl,a=this.state.settingUser;Qe.closeUserMFA({user:a.id}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(a){e.props.dispatchEvent(ae.cancelComformation()),a.code||(e.props.dispatchEvent(ae.NewNotification(t.formatMessage({id:"message.closed"}),0)),e.getData(e.state))}))}},{key:"resetPassword",value:function(){var e=this,t=this.props.intl,a=this.state,r=a.settingUser,i=a.password1,n=a.password2;return!!this.checkPasswordInput()&&(n!==i?(this.props.dispatchEvent(ae.NewNotification(t.formatMessage({id:"message.error.inputNotSame"}),2)),!1):void Qe.resetPassword({user:r.id,password:i}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(a){e.setState({resetPassword:!1}),e.props.dispatchEvent(ae.cancelComformation()),a.code||e.props.dispatchEvent(ae.NewNotification(t.formatMessage({id:"message.reseted"}),0))})))}},{key:"checkPassword",value:function(){var e=this,t=this.props.intl,a=this.state.password;Qe.checkPassword({password:a}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(a){a.code?e.props.dispatchEvent(ae.NewNotification(t.formatMessage({id:"message.error._S_invalid"},{s:t.formatMessage({id:"label.password"})}),2)):e.setAdministrator()}))}},{key:"setAdministrator",value:function(){var e=this,t=this.props.intl,a=this.state.settingUser;this.setState({settingAdmin:!1}),Qe.setAdministrator({user:a.id,admin:a.admin?0:1}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(a){a.code||(e.props.dispatchEvent(ae.NewNotification(t.formatMessage({id:"message.updated"}),0)),e.getData(e.state))}))}},{key:"addUser",value:function(){var e=this,t=this.state,a=t.name,r=t.email;if(!this.checkEmailInput())return!1;Qe.addUser({name:a,email:r}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){if(t.code){if(!e.checkEmailResponse(t.code))return!1}else e.setState({addUser:!1,newPassword:t.data.password}),e.getData(e.state)}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,r=t.intl,i=this.state,n=i.pending,s=i.count,o=i.category,c=i.keyword,l=i.sort,p=i.page,d=i.pagesize,u=i.settingAnchor,m=i.settingUser,h=i.resetPassword,g=i.password1,b=i.password2,f=i.error,j=i.settingAdmin,v=i.password,O=i.addUser,y=i.name,x=i.email,S=i.newPassword;return Object(oe.jsxs)(k.a,{container:!0,spacing:3,children:[Object(oe.jsx)(k.a,{item:!0,xs:8,children:Object(oe.jsx)(ft,{currentTab:o,onChange:function(t,a){return!n&&e.setState({category:a})},tabs:[r.formatMessage({id:"label.all"}),r.formatMessage({id:"label.enabledMFA"}),r.formatMessage({id:"label.disabledMFA"}),r.formatMessage({id:"label.blocked"})]})}),Object(oe.jsx)(k.a,{item:!0,xs:4,align:"right",children:Object(oe.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(t){return e.setState({addUser:!0,name:"",email:"",error:{}})},children:r.formatMessage({id:"label.addUser"})})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsxs)(k.a,{className:a.search,children:[Object(oe.jsx)(E.a,{className:a.keyword,variant:"outlined",placeholder:r.formatMessage({id:"message.searchByName"}),value:c,onChange:function(t){return e.setState({keyword:t.target.value})}}),Object(oe.jsx)(w.a,{variant:"h6",component:"span",className:a.sortLabel,children:r.formatMessage({id:"label.sort"})}),Object(oe.jsxs)(E.a,{select:!0,variant:"outlined",value:l,onChange:function(t){return e.setState({sort:t.target.value})},children:[Object(oe.jsx)(lt.a,{value:"name",children:r.formatMessage({id:"label.name"})}),Object(oe.jsx)(lt.a,{value:"email",children:r.formatMessage({id:"label.email"})}),Object(oe.jsx)(lt.a,{value:"created",children:r.formatMessage({id:"label.createTime"})})]})]})}),n?Object(oe.jsx)(k.a,{item:!0,xs:12,align:"center",children:Object(oe.jsx)(he.a,{})}):s?Object(oe.jsxs)(oe.Fragment,{children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(ke,{data:this.getTableData()})}),Object(oe.jsx)(k.a,{item:!0,xs:12,className:a.page,children:Object(oe.jsx)(pt.a,{count:Math.ceil(s/d),page:p,onChange:function(t,a){return e.setState({page:a})},shape:"rounded",color:"primary"})})]}):Object(oe.jsx)(k.a,{item:!0,xs:12,align:"center",children:Object(oe.jsx)(w.a,{variant:"caption",component:"span",children:r.formatMessage({id:"label.noMore"})})}),m&&Object(oe.jsxs)(oe.Fragment,{children:[Object(oe.jsxs)(ot.a,{anchorEl:u,anchorOrigin:{horizontal:"right",vertical:"bottom"},transformOrigin:{horizontal:"right",vertical:"top"},PaperProps:{className:a.menu},getContentAnchorEl:null,transitionDuration:0,open:Boolean(u),onClose:function(t){return e.setState({settingAnchor:null})},children:[Object(oe.jsx)(lt.a,{onClick:function(t){return e.updateUserStatusConfirm()},children:Object(oe.jsx)(ut.a,{disableTypography:!0,primary:r.formatMessage({id:m.status?"label.disable":"label.enable"})})}),m.status&&Object(oe.jsx)(lt.a,{onClick:function(t){return e.setState({resetPassword:!0,settingAnchor:null})},children:Object(oe.jsx)(ut.a,{disableTypography:!0,primary:r.formatMessage({id:"message.resetPassword"})})}),m.status&&m.mfaEnabled&&Object(oe.jsx)(lt.a,{onClick:function(t){return e.closeUserMFAConfirm()},children:Object(oe.jsx)(ut.a,{disableTypography:!0,primary:r.formatMessage({id:"message.closeMFA"})})}),m.status&&Object(oe.jsx)(lt.a,{onClick:function(t){return e.setState({settingAdmin:!0,settingAnchor:null,password:""})},children:Object(oe.jsx)(ut.a,{disableTypography:!0,primary:r.formatMessage({id:m.admin?"message.cancelAdministrator":"message.setAdministrator"})})})]}),Object(oe.jsxs)(ct.a,{maxWidth:"sm",open:h,fullWidth:Boolean(!0),onClose:function(t){return e.setState({resetPassword:!1})},children:[Object(oe.jsx)(dt.a,{children:Object(oe.jsx)(w.a,{variant:"h6",component:"div",children:r.formatMessage({id:"message.reset_N_Password"},{n:m.name})})}),Object(oe.jsx)(mt.a,{children:Object(oe.jsxs)(k.a,{container:!0,spacing:2,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(E.a,{fullWidth:!0,type:"password",variant:"outlined",placeholder:r.formatMessage({id:"message.error._S_empty"},{s:r.formatMessage({id:"label.newPassword"})}),value:g,error:!!f.password1,helperText:f.password1,onChange:function(t){return e.setState({password1:t.target.value})}})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(E.a,{fullWidth:!0,type:"password",variant:"outlined",placeholder:r.formatMessage({id:"message.error._S_retype"},{s:r.formatMessage({id:"label.newPassword"})}),value:b,onChange:function(t){return e.setState({password2:t.target.value})}})}),Object(oe.jsxs)(k.a,{item:!0,xs:12,align:"right",children:[Object(oe.jsx)(_.a,{variant:"outlined",color:"primary",onClick:function(t){return e.setState({resetPassword:!1})},children:r.formatMessage({id:"label.cancel"})}),"\u2003",Object(oe.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(t){return e.resetPassword()},children:r.formatMessage({id:"label.ok"})})]})]})})]}),Object(oe.jsxs)(ct.a,{maxWidth:"sm",open:j,fullWidth:Boolean(!0),onClose:function(t){return e.setState({settingAdmin:!1})},children:[Object(oe.jsx)(dt.a,{children:Object(oe.jsx)(w.a,{variant:"h6",component:"div",children:r.formatMessage({id:m.admin?"message.cancelAdministrator":"message.setAdministrator"})})}),Object(oe.jsx)(mt.a,{children:Object(oe.jsxs)(k.a,{container:!0,spacing:2,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(E.a,{fullWidth:!0,type:"password",variant:"outlined",placeholder:r.formatMessage({id:"message.error._S_empty"},{s:r.formatMessage({id:"label.password"})}),value:v,onChange:function(t){return e.setState({password:t.target.value})}})}),Object(oe.jsxs)(k.a,{item:!0,xs:12,align:"right",children:[Object(oe.jsx)(_.a,{variant:"outlined",color:"primary",onClick:function(t){return e.setState({settingAdmin:!1})},children:r.formatMessage({id:"label.cancel"})}),"\u2003",Object(oe.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(t){return e.checkPassword()},children:r.formatMessage({id:"label.ok"})})]})]})})]})]}),Object(oe.jsxs)(ct.a,{maxWidth:"sm",open:O,fullWidth:Boolean(!0),onClose:function(t){return e.setState({addUser:!1})},children:[Object(oe.jsx)(dt.a,{children:Object(oe.jsx)(w.a,{variant:"h6",component:"div",children:r.formatMessage({id:"label.addUser"})})}),Object(oe.jsx)(mt.a,{children:Object(oe.jsxs)(k.a,{container:!0,spacing:2,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(E.a,{fullWidth:!0,variant:"outlined",placeholder:r.formatMessage({id:"message.error._S_empty"},{s:r.formatMessage({id:"label.name"})}),value:y,error:!!f.name,helperText:f.name,onChange:function(t){return e.setState({name:t.target.value})}})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(E.a,{fullWidth:!0,variant:"outlined",placeholder:r.formatMessage({id:"message.error._S_empty"},{s:r.formatMessage({id:"label.email"})}),value:x,error:!!f.email,helperText:f.email,onChange:function(t){return e.setState({email:t.target.value})}})}),Object(oe.jsxs)(k.a,{item:!0,xs:12,align:"right",children:[Object(oe.jsx)(_.a,{variant:"outlined",color:"primary",onClick:function(t){return e.setState({addUser:!1})},children:r.formatMessage({id:"label.cancel"})}),"\u2003",Object(oe.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(t){return e.addUser()},children:r.formatMessage({id:"label.ok"})})]})]})})]}),Object(oe.jsxs)(ct.a,{maxWidth:"sm",open:!!S,fullWidth:Boolean(!0),onClose:function(t){return e.setState({newPassword:""})},children:[Object(oe.jsx)(dt.a,{children:Object(oe.jsx)(w.a,{variant:"h6",component:"div",children:r.formatMessage({id:"message.successAddUser"})})}),Object(oe.jsx)(mt.a,{children:Object(oe.jsxs)(k.a,{container:!0,spacing:2,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsxs)(w.a,{variant:"body1",component:"div",children:[r.formatMessage({id:"label.name"}),":\u2003",y,"\u2003"]})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsxs)(w.a,{variant:"body1",component:"div",children:[r.formatMessage({id:"label.email"}),":\u2003",x,"\u2003"]})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsxs)(w.a,{variant:"body1",component:"div",children:[r.formatMessage({id:"label.newPassword"}),":\u2003",S,"\u2003",Object(oe.jsx)(Ie,{label:"label.copy",onClick:function(t){return X(S,(function(){return e.props.dispatchEvent(ae.NewNotification(r.formatMessage({id:"message.copied"}),0))}),t.target.parentElement)},icon:je.k})]})}),Object(oe.jsx)(k.a,{item:!0,xs:12,align:"right",children:Object(oe.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(t){return e.setState({newPassword:""})},children:r.formatMessage({id:"label.ok"})})})]})})]})]})}}]),a}(i.a.Component),vt=Object(R.b)(Object(C.a)((function(e){return{search:{display:"flex"},keyword:{flexGrow:1},sortLabel:{lineHeight:e.spacing(4)+"px",padding:"0px "+e.spacing(2)+"px"},name:{display:"flex",textAlign:"left",alignItems:"center",margin:e.spacing(1)+"px 0px"},icon:{margin:e.spacing(1)},tag:{"& > *":{marginRight:e.spacing(1)}},page:{display:"flex",justifyContent:"flex-end"}}}))(Object(l.b)((function(e,t){return{}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(jt))),Ot=a(25),yt=a(158),xt=a(584),St=a(95),Ct=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.currentLanguage,a=e.timestamp,r=e.absolute,i=e.relative,n="zh-cn"===t?O.a:St.a;a*=a<31536e6?1e3:1;var s=(new Date).getTime();return r||i||(Math.abs(a-s)<6048e5?i=!0:r=!0),Object(oe.jsxs)(w.a,{variant:"body2",component:"span",children:[r&&a>0&&Object(yt.a)(a,"yyyy-MM-dd HH:mm:ss",{locale:n}),i&&!r&&a>0&&Object(xt.a)(a,s,{locale:n})]})}}]),a}(r.Component),Nt=Object(R.b)(Object(h.f)(Object(l.b)((function(e,t){return{currentLanguage:e.DataStore.currentLanguage}}),(function(e,t){return{}}))(Ct))),Rt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={pending:!0,count:0,list:[],keyword:"",sort:"name",page:1,pagesize:20,settingAnchor:null,settingGroup:null,members:[],memberManage:!1,email:"",error:{}},r.mountedFlag=!1,r.timeout=null,r.checkAddResponse=se.codeValidator(Object(N.a)(r),[{name:"email",exceptionCode:1031,errorMessage:r.props.intl.formatMessage({id:"message.error._S_notFound"},{s:r.props.intl.formatMessage({id:"label.email"})})},{name:"email",exceptionCode:1032,errorMessage:r.props.intl.formatMessage({id:"message.error.canNotAddCreatorAsMember"})}]),r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.mountedFlag=!0,this.getData(this.state)}},{key:"componentWillUnmount",value:function(){this.mountedFlag=!1}},{key:"shouldComponentUpdate",value:function(e,t){var a=this;return this.state.keyword===t.keyword&&this.state.sort===t.sort&&this.state.page===t.page||(this.state.page===t.page&&this.setState({page:1}),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){return a.getData(t)}),200)),!0}},{key:"getData",value:function(e){var t=this,a=e.keyword,r=e.sort,i=e.page,n=e.pagesize;this.setState({pending:!0}),Qe.groupList({keyword:a,sort:r,page:i,pagesize:n}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(e){t.setState({pending:!1}),!e.code&&t.setState({count:e.data.count,list:e.data.list})}))}},{key:"getTableData",value:function(){var e=this,t=this.props,a=t.classes,r=t.intl,i=this.state.list,n=[];return i.map((function(t){return n.push([Object(oe.jsxs)(k.a,{className:a.name,children:[t.icon?Object(oe.jsx)(Le.a,{src:D.HOSTS.PGYER_AVATAR_HOST+t.icon,className:a.icon}):Object(oe.jsx)(Le.a,{className:a.icon,children:t.name[0].substr(0,1).toUpperCase()}),Object(oe.jsx)(w.a,{variant:"body1",component:"div",children:t.displayName})]}),Object(oe.jsx)(Nt,{timestamp:t.created}),t.status===D.commonStatus.normal?Object(oe.jsx)(Ie,{label:"label.setting",onClick:function(a){return e.setState({settingAnchor:a.target,settingGroup:t})},icon:je.gb}):Object(oe.jsx)(Ke,{color:"error",text:r.formatMessage({id:"message.deleted"})})]),!0})),[["auto","auto","auto"],["label.group","label.requestCreated",""]].concat(n)}},{key:"openMemberManage",value:function(){var e=this,t=this.state.settingGroup;if(this.setState({memberManage:!0,settingAnchor:null}),!t)return!1;Qe.groupMembers({group:t.id}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){return e.setState({members:t.data})}))}},{key:"getMembersTable",value:function(){var e,t=this,a=this.props,r=a.classes,i=a.intl,n=this.state.members,s=[],o=(e={},Object(Ot.a)(e,L.Role.GUEST,"label.guest"),Object(Ot.a)(e,L.Role.REPORTER,"label.reporter"),Object(Ot.a)(e,L.Role.DEVELOPER,"label.developer"),Object(Ot.a)(e,L.Role.MAINTAINER,"label.maintianer"),Object(Ot.a)(e,L.Role.OWNER,"label.owner"),e);return n.map((function(e){return s.push([Object(oe.jsxs)(k.a,{className:r.name,children:[Object(oe.jsx)(Le.a,{src:D.HOSTS.PGYER_AVATAR_HOST+e.icon,className:r.icon}),Object(oe.jsxs)(k.a,{children:[Object(oe.jsx)(w.a,{variant:"h6",component:"div",children:e.name}),Object(oe.jsx)(w.a,{variant:"body1",component:"div",children:e.email})]})]}),Object(oe.jsx)(Ke,{color:"info",text:i.formatMessage({id:o[e.role]})}),e.creatorFlag&&Object(oe.jsx)(Ke,{color:"success",text:i.formatMessage({id:"label.creator"})}),Object(oe.jsx)(Nt,{timestamp:e.joined}),Object(oe.jsx)(k.a,{className:r.tag,children:e.deleteFlag||e.status===D.commonStatus.delete?Object(oe.jsx)(Ke,{color:"error",text:i.formatMessage({id:"message.deleted"})}):!e.creatorFlag&&e.role<L.Role.OWNER&&Object(oe.jsxs)(oe.Fragment,{children:[Object(oe.jsx)(Ie,{label:"message.roleToOwner",onClick:function(a){return t.setRoleConfirm(e)},icon:je.Y}),Object(oe.jsx)(Ie,{label:"label.delete",onClick:function(a){return t.removeMemberConfirm(e)},icon:je.H})]})})]),!0})),[["auto","auto","auto","auto","auto"],["label.name","label.role","","label.joinedAt",""]].concat(s)}},{key:"addMember",value:function(){var e=this,t=this.props.intl,a=this.state,r=a.settingGroup,i=a.email;if(!r||!i)return!1;Qe.groupAddMember({email:i,group:r.id}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(a){if(a.code){if(!e.checkAddResponse(a.code))return!1}else e.props.dispatchEvent(ae.NewNotification(t.formatMessage({id:"message.Added"}),0)),e.openMemberManage()}))}},{key:"removeMemberConfirm",value:function(e){var t=this,a=this.props.intl;if(!e)return!1;this.props.dispatchEvent(ae.addComformation("remove_group_member",{title:a.formatMessage({id:"message.memberRemoveConfirm"}),description:a.formatMessage({id:"message.confirmDelete"},{s:" '"+e.name+"'"}),reject:function(){return!0},accept:function(){return t.removeMember(e)}}))}},{key:"removeMember",value:function(e){var t=this,a=this.props,r=a.intl,i=a.dispatchEvent,n=this.state.settingGroup;Qe.groupRemoveMember({group:n.id,user:e.id}).then(ne.withEventdispatcher(i)(ne.getJSONData)).then((function(e){i(ae.cancelComformation()),e.code?e.code>1024&&i(ae.NewNotification(r.formatMessage({id:"message.error.removeFail"}),2)):(i(ae.NewNotification(r.formatMessage({id:"message.removed"}),0)),t.openMemberManage())}))}},{key:"setRoleConfirm",value:function(e){var t=this,a=this.props.intl;if(!e)return!1;this.props.dispatchEvent(ae.addComformation("set_group_member_role",{title:a.formatMessage({id:"message.setGroupOwner_S"},{s:" '"+e.name+"'"}),description:"",reject:function(){return!0},accept:function(){return t.setGroupOwner(e)}}))}},{key:"setGroupOwner",value:function(e){var t=this,a=this.props,r=a.intl,i=a.dispatchEvent,n=this.state.settingGroup;Qe.setGroupOwner({group:n.id,user:e.id}).then(ne.withEventdispatcher(i)(ne.getJSONData)).then((function(e){i(ae.cancelComformation()),e.code?e.code>1024&&i(ae.NewNotification(r.formatMessage({id:"message.error.updateFail"}),2)):(i(ae.NewNotification(r.formatMessage({id:"message.updated"}),0)),t.openMemberManage())}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,r=t.intl,i=this.state,n=i.pending,s=i.count,o=i.keyword,c=i.sort,l=i.page,p=i.pagesize,d=i.settingAnchor,u=i.memberManage,m=i.email,h=i.error;return Object(oe.jsxs)(k.a,{container:!0,spacing:3,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsxs)(k.a,{className:a.search,children:[Object(oe.jsx)(E.a,{className:a.keyword,variant:"outlined",placeholder:r.formatMessage({id:"message.searchGroup"}),value:o,onChange:function(t){return e.setState({keyword:t.target.value})}}),Object(oe.jsx)(w.a,{variant:"h6",component:"span",className:a.sortLabel,children:r.formatMessage({id:"label.sort"})}),Object(oe.jsxs)(E.a,{select:!0,variant:"outlined",value:c,onChange:function(t){return e.setState({sort:t.target.value})},children:[Object(oe.jsx)(lt.a,{value:"name",children:r.formatMessage({id:"label.name"})}),Object(oe.jsx)(lt.a,{value:"created",children:r.formatMessage({id:"label.createTime"})})]})]})}),n?Object(oe.jsx)(k.a,{item:!0,xs:12,align:"center",children:Object(oe.jsx)(he.a,{})}):s?Object(oe.jsxs)(oe.Fragment,{children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(ke,{data:this.getTableData()})}),Object(oe.jsx)(k.a,{item:!0,xs:12,className:a.page,children:Object(oe.jsx)(pt.a,{count:Math.ceil(s/p),page:l,onChange:function(t,a){return e.setState({page:a})},shape:"rounded",color:"primary"})})]}):Object(oe.jsx)(k.a,{item:!0,xs:12,align:"center",children:Object(oe.jsx)(w.a,{variant:"caption",component:"span",children:r.formatMessage({id:"label.noMore"})})}),Object(oe.jsx)(ot.a,{anchorEl:d,anchorOrigin:{horizontal:"right",vertical:"bottom"},transformOrigin:{horizontal:"right",vertical:"top"},PaperProps:{className:a.menu},getContentAnchorEl:null,transitionDuration:0,open:Boolean(d),onClose:function(t){return e.setState({settingAnchor:null})},children:Object(oe.jsx)(lt.a,{onClick:function(t){return e.openMemberManage()},children:Object(oe.jsx)(ut.a,{disableTypography:!0,primary:r.formatMessage({id:"label.memberManage"})})})}),Object(oe.jsxs)(ct.a,{maxWidth:"md",open:u,fullWidth:Boolean(!0),onClose:function(t){return e.setState({memberManage:!1})},children:[Object(oe.jsx)(dt.a,{children:Object(oe.jsx)(w.a,{variant:"h6",component:"div",children:r.formatMessage({id:"label.memberManage"})})}),Object(oe.jsx)(mt.a,{children:Object(oe.jsxs)(k.a,{container:!0,spacing:2,children:[Object(oe.jsxs)(k.a,{item:!0,xs:12,className:a.search,children:[Object(oe.jsx)(E.a,{className:a.keyword,variant:"outlined",placeholder:r.formatMessage({id:"message.plsInputInvitedEmail"}),value:m,error:!!h.email,helperText:h.email,onChange:function(t){return e.setState({email:t.target.value})}}),"\u2003",Object(oe.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(t){return e.addMember()},children:r.formatMessage({id:"label.invite"})})]}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(ke,{data:this.getMembersTable()})}),Object(oe.jsx)(k.a,{item:!0,xs:12,align:"right",children:Object(oe.jsx)(_.a,{variant:"outlined",color:"primary",onClick:function(t){return e.setState({memberManage:!1})},children:r.formatMessage({id:"label.cancel"})})})]})})]})]})}}]),a}(i.a.Component),Mt=Object(R.b)(Object(C.a)((function(e){return{search:{display:"flex"},keyword:{flexGrow:1},sortLabel:{lineHeight:e.spacing(4)+"px",padding:"0px "+e.spacing(2)+"px"},name:{display:"flex",textAlign:"left",alignItems:"center",margin:e.spacing(1)+"px 0px"},icon:{margin:e.spacing(1)},page:{display:"flex",justifyContent:"flex-end"},tag:{"& > *":{marginLeft:e.spacing(1)}}}}))(Object(l.b)((function(e,t){return{}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(Rt))),wt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={pending:!0,count:0,list:[],keyword:"",sort:"name",page:1,pagesize:20,settingAnchor:null,settingRepository:null,members:[],memberManage:!1,email:"",error:{}},r.mountedFlag=!1,r.timeout=null,r.checkAddResponse=se.codeValidator(Object(N.a)(r),[{name:"email",exceptionCode:1031,errorMessage:r.props.intl.formatMessage({id:"message.error._S_notFound"},{s:r.props.intl.formatMessage({id:"label.email"})})},{name:"email",exceptionCode:1032,errorMessage:r.props.intl.formatMessage({id:"message.error.canNotAddCreatorAsMember"})}]),r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.mountedFlag=!0,this.getData(this.state)}},{key:"componentWillUnmount",value:function(){this.mountedFlag=!1}},{key:"shouldComponentUpdate",value:function(e,t){var a=this;return this.state.keyword===t.keyword&&this.state.sort===t.sort&&this.state.page===t.page||(this.state.page===t.page&&this.setState({page:1}),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){return a.getData(t)}),200)),!0}},{key:"getData",value:function(e){var t=this,a=e.keyword,r=e.sort,i=e.page,n=e.pagesize;this.setState({pending:!0}),Qe.repositoryList({keyword:a,sort:r,page:i,pagesize:n}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(e){t.setState({pending:!1}),!e.code&&t.setState({count:e.data.count,list:e.data.list})}))}},{key:"getTableData",value:function(){var e=this,t=this.props,a=t.classes,r=t.intl,i=this.state.list,n=[];return i.map((function(t){return n.push([Object(oe.jsxs)(k.a,{className:a.name,children:[t.icon?Object(oe.jsx)(Le.a,{src:D.HOSTS.PGYER_AVATAR_HOST+t.icon,className:a.icon}):Object(oe.jsx)(Le.a,{className:a.icon,children:t.name[0].substr(0,1).toUpperCase()}),Object(oe.jsxs)(w.a,{variant:"body1",component:"div",children:[t.group.displayName," / ",t.displayName]})]}),Object(oe.jsx)(Nt,{timestamp:t.created}),t.status===D.commonStatus.normal?Object(oe.jsx)(Ie,{label:"label.setting",onClick:function(a){return e.setState({settingAnchor:a.target,settingRepository:t})},icon:je.gb}):Object(oe.jsx)(Ke,{color:"error",text:r.formatMessage({id:"message.deleted"})})]),!0})),[["auto","auto","auto"],["label.repository","label.requestCreated",""]].concat(n)}},{key:"openMemberManage",value:function(){var e=this,t=this.state.settingRepository;if(this.setState({memberManage:!0,settingAnchor:null}),!t)return!1;Qe.repositoryMembers({repository:t.id}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){return e.setState({members:t.data})}))}},{key:"getMembersTable",value:function(){var e,t=this,a=this.props,r=a.classes,i=a.intl,n=this.state.members,s=[],o=(e={},Object(Ot.a)(e,L.Role.GUEST,"label.guest"),Object(Ot.a)(e,L.Role.REPORTER,"label.reporter"),Object(Ot.a)(e,L.Role.DEVELOPER,"label.developer"),Object(Ot.a)(e,L.Role.MAINTAINER,"label.maintianer"),Object(Ot.a)(e,L.Role.OWNER,"label.owner"),e);return n.map((function(e){return s.push([Object(oe.jsxs)(k.a,{className:r.name,children:[Object(oe.jsx)(Le.a,{src:D.HOSTS.PGYER_AVATAR_HOST+e.icon,className:r.icon}),Object(oe.jsxs)(k.a,{children:[Object(oe.jsx)(w.a,{variant:"h6",component:"div",children:e.name}),Object(oe.jsx)(w.a,{variant:"body1",component:"div",children:e.email})]})]}),Object(oe.jsx)(Ke,{color:"info",text:i.formatMessage({id:o[e.role]})}),Object(oe.jsxs)(k.a,{children:[e.creatorFlag&&Object(oe.jsx)(Ke,{color:"success",text:i.formatMessage({id:"label.creator"})}),e.groupMember&&Object(oe.jsx)(Ke,{color:"success",text:i.formatMessage({id:"label.group"})+i.formatMessage({id:"label.member"})})]}),Object(oe.jsx)(Nt,{timestamp:e.joined}),Object(oe.jsxs)(k.a,{className:r.tag,children:[(e.deleteFlag||e.status===D.commonStatus.delete)&&Object(oe.jsx)(Ke,{color:"error",text:i.formatMessage({id:"message.deleted"})}),!e.creatorFlag&&!e.groupMember&&e.role<L.Role.OWNER&&Object(oe.jsx)(Ie,{label:"label.delete",onClick:function(a){return t.removeMemberConfirm(e)},icon:je.H})]})]),!0})),[["auto","auto","auto","auto","auto"],["label.name","label.role","","label.joinedAt",""]].concat(s)}},{key:"addMember",value:function(){var e=this,t=this.props.intl,a=this.state,r=a.settingRepository,i=a.email;if(!r||!i)return!1;Qe.repositoryAddMember({email:i,repository:r.id}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(a){if(a.code){if(!e.checkAddResponse(a.code))return!1}else e.props.dispatchEvent(ae.NewNotification(t.formatMessage({id:"message.Added"}),0)),e.openMemberManage()}))}},{key:"removeMemberConfirm",value:function(e){var t=this,a=this.props.intl;if(!e)return!1;this.props.dispatchEvent(ae.addComformation("remove_repository_member",{title:a.formatMessage({id:"message.memberRemoveConfirm"}),description:a.formatMessage({id:"message.confirmDelete"},{s:" '"+e.name+"'"}),reject:function(){return!0},accept:function(){return t.removeMember(e)}}))}},{key:"removeMember",value:function(e){var t=this,a=this.props,r=a.intl,i=a.dispatchEvent,n=this.state.settingRepository;Qe.repositoryRemoveMember({repository:n.id,user:e.id}).then(ne.withEventdispatcher(i)(ne.getJSONData)).then((function(e){i(ae.cancelComformation()),e.code?e.code>1024&&i(ae.NewNotification(r.formatMessage({id:"message.error.removeFail"}),2)):(i(ae.NewNotification(r.formatMessage({id:"message.removed"}),0)),t.openMemberManage())}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,r=t.intl,i=this.state,n=i.pending,s=i.count,o=i.keyword,c=i.sort,l=i.page,p=i.pagesize,d=i.settingAnchor,u=i.memberManage,m=i.email,h=i.error;return Object(oe.jsxs)(k.a,{container:!0,spacing:3,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsxs)(k.a,{className:a.search,children:[Object(oe.jsx)(E.a,{className:a.keyword,variant:"outlined",placeholder:r.formatMessage({id:"message.searchRepository"}),value:o,onChange:function(t){return e.setState({keyword:t.target.value})}}),Object(oe.jsx)(w.a,{variant:"h6",component:"span",className:a.sortLabel,children:r.formatMessage({id:"label.sort"})}),Object(oe.jsxs)(E.a,{select:!0,variant:"outlined",value:c,onChange:function(t){return e.setState({sort:t.target.value})},children:[Object(oe.jsx)(lt.a,{value:"name",children:r.formatMessage({id:"label.name"})}),Object(oe.jsx)(lt.a,{value:"created",children:r.formatMessage({id:"label.createTime"})})]})]})}),n?Object(oe.jsx)(k.a,{item:!0,xs:12,align:"center",children:Object(oe.jsx)(he.a,{})}):s?Object(oe.jsxs)(oe.Fragment,{children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(ke,{data:this.getTableData()})}),Object(oe.jsx)(k.a,{item:!0,xs:12,className:a.page,children:Object(oe.jsx)(pt.a,{count:Math.ceil(s/p),page:l,onChange:function(t,a){return e.setState({page:a})},shape:"rounded",color:"primary"})})]}):Object(oe.jsx)(k.a,{item:!0,xs:12,align:"center",children:Object(oe.jsx)(w.a,{variant:"caption",component:"span",children:r.formatMessage({id:"label.noMore"})})}),Object(oe.jsx)(ot.a,{anchorEl:d,anchorOrigin:{horizontal:"right",vertical:"bottom"},transformOrigin:{horizontal:"right",vertical:"top"},PaperProps:{className:a.menu},getContentAnchorEl:null,transitionDuration:0,open:Boolean(d),onClose:function(t){return e.setState({settingAnchor:null})},children:Object(oe.jsx)(lt.a,{onClick:function(t){return e.openMemberManage()},children:Object(oe.jsx)(ut.a,{disableTypography:!0,primary:r.formatMessage({id:"label.memberManage"})})})}),Object(oe.jsxs)(ct.a,{maxWidth:"md",open:u,fullWidth:Boolean(!0),onClose:function(t){return e.setState({memberManage:!1})},children:[Object(oe.jsx)(dt.a,{children:Object(oe.jsx)(w.a,{variant:"h6",component:"div",children:r.formatMessage({id:"label.memberManage"})})}),Object(oe.jsx)(mt.a,{children:Object(oe.jsxs)(k.a,{container:!0,spacing:2,children:[Object(oe.jsxs)(k.a,{item:!0,xs:12,className:a.search,children:[Object(oe.jsx)(E.a,{className:a.keyword,variant:"outlined",placeholder:r.formatMessage({id:"message.plsInputInvitedEmail"}),value:m,error:!!h.email,helperText:h.email,onChange:function(t){return e.setState({email:t.target.value})}}),"\u2003",Object(oe.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(t){return e.addMember()},children:r.formatMessage({id:"label.invite"})})]}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(ke,{data:this.getMembersTable()})}),Object(oe.jsx)(k.a,{item:!0,xs:12,align:"right",children:Object(oe.jsx)(_.a,{variant:"outlined",color:"primary",onClick:function(t){return e.setState({memberManage:!1})},children:r.formatMessage({id:"label.cancel"})})})]})})]})]})}}]),a}(i.a.Component),kt=Object(R.b)(Object(C.a)((function(e){return{search:{display:"flex"},keyword:{flexGrow:1},sortLabel:{lineHeight:e.spacing(4)+"px",padding:"0px "+e.spacing(2)+"px"},name:{display:"flex",textAlign:"left",alignItems:"center",margin:e.spacing(1)+"px 0px"},icon:{margin:e.spacing(1)},page:{display:"flex",justifyContent:"flex-end"},tag:{"& > *":{marginLeft:e.spacing(1)}}}}))(Object(l.b)((function(e,t){return{}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(wt))),_t=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).mountedFlag=!1,r.state={allowRegister:!1,host:"",email_from:"",email_name:"",pending:!0,error:{}},r.checkInput=se.stateValidator(Object(N.a)(r),[{name:"host",passPattern:/^.+$/,errorMessage:r.props.intl.formatMessage({id:"message.error._S_empty"},{s:r.props.intl.formatMessage({id:"label.url"})})},{name:"host",passPattern:/^http(s)?:\/\/[^/]+$/,errorMessage:r.props.intl.formatMessage({id:"message.error._S_invalid"},{s:r.props.intl.formatMessage({id:"label.url"})})},{name:"email_name",passPattern:/^.+$/,errorMessage:r.props.intl.formatMessage({id:"message.error._S_empty"},{s:r.props.intl.formatMessage({id:"label.name"})})},{name:"email_from",passPattern:/^.+$/,errorMessage:r.props.intl.formatMessage({id:"message.error._S_empty"},{s:r.props.intl.formatMessage({id:"label.email"})})},{name:"email_from",passPattern:/^[^@]+@[^@]+\.[^@]+$/,errorMessage:r.props.intl.formatMessage({id:"message.error._S_invalid"},{s:r.props.intl.formatMessage({id:"label.email"})})}]),r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.mountedFlag=!0,this.getData()}},{key:"componentWillUnmount",value:function(){this.mountedFlag=!1}},{key:"getData",value:function(){var e=this;this.setState({pending:!0}),Qe.getConfig().then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){t.code||e.setState({pending:!1,host:t.data.host,allowRegister:t.data.allowRegister,email_from:t.data.email.from,email_name:t.data.email.name})}))}},{key:"updateConfig",value:function(){var e=this;if(!this.checkInput())return!1;var t={host:this.state.host,allowRegister:this.state.allowRegister,email:{name:this.state.email_name,from:this.state.email_from}},a={data:JSON.stringify(t)};this.setState({pending:!0}),Qe.setConfig(a).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){e.setState({pending:!1}),t.code||(e.props.dispatchEvent(ae.NewNotification(e.props.intl.formatMessage({id:"message.updated"}),0)),e.getData())}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,r=t.intl;return Object(oe.jsxs)(k.a,{container:!0,spacing:2,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"h6",component:"div",gutterBottom:!0,children:r.formatMessage({id:"label.setting"})})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(M.a,{className:a.paper,children:Object(oe.jsxs)(k.a,{container:!0,spacing:2,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsxs)(w.a,{variant:"h6",component:"div",gutterBottom:!0,children:[" ",r.formatMessage({id:"label.host"})," "]})}),Object(oe.jsx)(k.a,{item:!0,xs:12,mg:9,lg:8,children:Object(oe.jsxs)(k.a,{container:!0,spacing:2,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsxs)(w.a,{variant:"subtitle1",component:"div",gutterBottom:!0,children:[" ",r.formatMessage({id:"label.url"})," "]})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(E.a,{fullWidth:!0,variant:"outlined",value:this.state.host,error:!!this.state.error.host,helperText:this.state.error.host,placeholder:r.formatMessage({id:"label.url"}),onChange:function(t){return e.setState({host:t.target.value})}})})]})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:"\xa0"}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"h6",component:"div",gutterBottom:!0,children:" SMTP "})}),Object(oe.jsx)(k.a,{item:!0,xs:12,mg:9,lg:8,children:Object(oe.jsxs)(k.a,{container:!0,spacing:2,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsxs)(w.a,{variant:"subtitle1",component:"div",gutterBottom:!0,children:[" ",r.formatMessage({id:"label.senderName"})," "]})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(E.a,{fullWidth:!0,variant:"outlined",value:this.state.email_name,error:!!this.state.error.email_name,helperText:this.state.error.email_name,placeholder:r.formatMessage({id:"label.name"}),onChange:function(t){return e.setState({email_name:t.target.value})}})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsxs)(w.a,{variant:"subtitle1",component:"div",gutterBottom:!0,children:[" ",r.formatMessage({id:"label.senderAddress"})," "]})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(E.a,{fullWidth:!0,variant:"outlined",value:this.state.email_from,error:!!this.state.error.email_from,helperText:this.state.error.email_from,placeholder:r.formatMessage({id:"label.email"}),onChange:function(t){return e.setState({email_from:t.target.value})}})})]})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:"\xa0"}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsxs)(w.a,{variant:"h6",component:"div",gutterBottom:!0,children:[" ",r.formatMessage({id:"label.register"})," "]})}),Object(oe.jsx)(k.a,{item:!0,xs:12,mg:9,lg:8,children:Object(oe.jsxs)(k.a,{container:!0,spacing:2,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsxs)(w.a,{variant:"subtitle1",component:"div",gutterBottom:!0,children:[" ",r.formatMessage({id:"label.allowRegister"})," "]})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(Ve.a,{checked:this.state.allowRegister,onChange:function(){e.setState({allowRegister:!e.state.allowRegister})},inputProps:{"aria-label":"secondary checkbox"}})})]})})]})})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(_.a,{variant:"contained",color:"primary",disabled:this.state.pending,onClick:function(){return e.updateConfig()},children:r.formatMessage({id:"label.save"})})})]})}}]),a}(i.a.Component),Et=Object(R.b)(Object(C.a)((function(e){return{paper:{padding:e.spacing(2)}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentUserInfo:e.DataStore.currentUserInfo}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(_t)))),Tt=a(576),At=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.history,r=e.repositoryInfo,i=e.intl;return Object(oe.jsxs)(k.a,{container:!0,spacing:0,alignContent:"center",className:t.container,onClick:function(e){a.push(W(r.group.name,r.name))},children:[Object(oe.jsx)(k.a,{item:!0,xs:6,md:5,children:Object(oe.jsxs)(k.a,{container:!0,spacing:2,children:[Object(oe.jsx)(k.a,{item:!0,children:r.icon?Object(oe.jsx)(Le.a,{variant:"square",className:t.icon,src:D.HOSTS.STATIC_AVATAR_PREFIX+r.icon}):Object(oe.jsx)(Le.a,{variant:"square",className:t.icon,children:r.name.substr(0,1).toUpperCase()})}),Object(oe.jsxs)(k.a,{item:!0,xs:8,className:t.baseInfo,children:[Object(oe.jsxs)(w.a,{variant:"body1",component:"div",style:{lineHeight:"22px",height:"22px"},children:[r.group.displayName+"/",Object(oe.jsxs)(w.a,{variant:"subtitle1",component:"span",children:[r.displayName,"\xa0\xa0\xa0\xa0",Object(oe.jsx)(Ke,{color:r.role===L.Role.OWNER?"containedInfo":"info",text:i.formatMessage({id:"label.roleID_"+r.role})})]})]}),r.description&&Object(oe.jsx)(w.a,{variant:"caption",component:"div",className:"text-overflow",style:{lineHeight:"20px",height:"18px"},children:r.description})]})]})}),Object(oe.jsxs)(k.a,{item:!0,xs:5,md:3,container:!0,alignItems:"center",className:t.counts,children:[Object(oe.jsx)(k.a,{item:!0,children:Object(oe.jsxs)(w.a,{variant:"body2",component:"span",style:{lineHeight:1},children:[Object(oe.jsx)(fe.a,{icon:je.r}),"\xa0\xa0",r.forkCount]})}),Object(oe.jsx)(k.a,{item:!0,children:Object(oe.jsxs)(w.a,{variant:"body2",component:"span",style:{lineHeight:1},children:[Object(oe.jsx)(fe.a,{icon:je.y}),"\xa0\xa0",r.mergeRequestCount.open]})}),Object(oe.jsx)(k.a,{item:!0,children:Object(oe.jsxs)(w.a,{variant:"body2",component:"span",style:{lineHeight:1},children:[Object(oe.jsx)(fe.a,{icon:je.v}),"\xa0\xa0",r.members.length]})})]}),Object(oe.jsx)(Tt.a,{mdDown:!0,children:Object(oe.jsx)(k.a,{item:!0,md:3,container:!0,alignItems:"center",children:Object(oe.jsxs)(w.a,{variant:"body2",component:"span",children:[i.formatMessage({id:"label.updatedIn"}),": ",Object(oe.jsx)(Nt,{timestamp:r.updated})]})})}),Object(oe.jsx)(k.a,{item:!0,xs:1,style:{alignSelf:"center"},children:Object(oe.jsx)(Ie,{label:"label.setting",icon:je.E,onClick:function(e){e.stopPropagation(),a.push(W(r.group.name,r.name,"settings"))}})})]})}}]),a}(r.Component),Dt=Object(R.b)(Object(ge.a)(Object(C.a)((function(e){return{container:{height:e.spacing(9),padding:e.spacing(2)+"px "+e.spacing(3)+"px",border:"1px solid "+e.palette.border,marginBottom:"-1px",borderLeft:"none",borderRight:"none",cursor:"pointer","&:hover":{backgroundColor:e.palette.background.dark}},item:{height:e.spacing(5)},icon:{width:e.spacing(5),height:e.spacing(5)},baseInfo:{display:"flex",flexFlow:"column wrap",justifyContent:"center"},avatar:{width:e.spacing(4),height:e.spacing(4),marginRight:"-"+e.spacing(1)+"px",border:"1px solid "+e.palette.border},counts:{"& > div":{width:e.spacing(6)}}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentGroupConfig:e.DataStore.currentGroupConfig}}),(function(e,t){return{}}))(At))))),It=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.imageName,r=e.title,n=e.notice,s=e.children,o=e.pending;return Object(oe.jsxs)(k.a,{container:!0,spacing:4,className:t.container,children:[o&&Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(k.a,{container:!0,className:t.loading,children:Object(oe.jsx)(he.a,{})})}),!o&&Object(oe.jsxs)(i.a.Fragment,{children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)("img",{className:[t.img,t.alignBlock].join(" "),src:D.HOSTS.STATIC_HOST+"static/"+D.STATIC_VERSION+"/images/"+a})}),Object(oe.jsxs)(k.a,{item:!0,xs:12,children:[Object(oe.jsx)(w.a,{className:[t.text,t.alignBlock].join(" "),variant:"body2",children:r}),Object(oe.jsx)("br",{}),Object(oe.jsx)(w.a,{className:[t.text,t.alignBlock,t.lighter].join(" "),variant:"body2",children:n})]}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)("div",{className:t.alignBlock,children:s})})]})]})}}]),a}(r.Component),Pt=Object(R.b)(Object(ge.a)(Object(C.a)((function(e){return{container:{marginTop:"10vh"},alignBlock:{textAlign:"center",margin:"0 auto",display:"block"},loading:{paddingTop:e.spacing(16),paddingBottom:e.spacing(16),justifyContent:"center"},img:{width:e.spacing(20)},text:{maxWidth:e.spacing(60)},lighter:{color:e.palette.text.lighter}}}))(Object(h.f)(Object(l.b)((function(e,t){return{}}),(function(e,t){return{}}))(It))))),Ft=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={popoverAnchor:null,popoverTab:0},r}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.groupConfig,r=e.repositoryList,i=e.intl,n=e.history;return Object(oe.jsx)(M.a,{elevation:1,className:t.content,children:a&&a.group&&a.group.id?Object(oe.jsxs)(k.a,{container:!0,spacing:3,justifyContent:"space-between",children:[Object(oe.jsx)(k.a,{item:!0,children:Object(oe.jsxs)(k.a,{container:!0,spacing:3,className:"width-auto",children:[Object(oe.jsx)(k.a,{item:!0,children:a.group.icon?Object(oe.jsx)(Le.a,{variant:"square",className:t.icon,src:D.HOSTS.STATIC_AVATAR_PREFIX+a.group.icon}):Object(oe.jsx)(Le.a,{variant:"square",className:t.icon,children:a.group.name.substr(0,1).toUpperCase()})}),Object(oe.jsxs)(k.a,{item:!0,children:[Object(oe.jsxs)(w.a,{variant:"h6",className:t.text,children:[a.group.displayName," \xa0\xa0"]}),Object(oe.jsx)(w.a,{variant:"caption",component:"div",className:t.subtext,children:a.group.description})]})]})}),Object(oe.jsx)(k.a,{item:!0,children:Object(oe.jsx)(k.a,{container:!0,spacing:2,justifyContent:"flex-end",children:Object(oe.jsx)(k.a,{item:!0,children:Object(oe.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(e){return n.push(W("groups",a.group.name,"repositories","new"))},children:i.formatMessage({id:"label.newRepository"})})})})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsxs)(w.a,{variant:"body2",className:t.iconBar,children:[Object(oe.jsx)(fe.a,{icon:je.B}),"\xa0 ",i.formatMessage({id:"label._N_repository"},{n:r.filter(U.group(a.group.id)).length})," \xa0\xa0\xa0\xa0",Object(oe.jsx)(fe.a,{icon:je.y}),"\xa0",i.formatMessage({id:"label._N_mergeRequest"},{n:r.filter(U.group(a.group.id)).reduce((function(e,t){return e+t.mergeRequestCount.open}),0)})," \xa0\xa0\xa0\xa0",Object(oe.jsx)(fe.a,{icon:je.v}),"\xa0 ",i.formatMessage({id:"label._N_member"},{n:a.count.member})]})})]}):Object(oe.jsx)(k.a,{container:!0,spacing:2,justifyContent:"space-between",children:Object(oe.jsx)(he.a,{})})})}}]),a}(r.Component),Lt=Object(R.b)(Object(ge.a)(Object(C.a)((function(e){return{content:{height:e.spacing(15.5),boxSizing:"border-box",borderBottom:"1px solid "+e.palette.border,borderRadius:0},icon:{height:e.spacing(5),width:e.spacing(5)},text:{height:e.spacing(3),lineHeight:e.spacing(3)+"px",overflow:"hidden"},subtext:{paddingTop:e.spacing(.5),height:e.spacing(1.5),lineHeight:e.spacing(1.5)+"px"},iconBar:{height:e.spacing(3),lineHeight:e.spacing(3)+"px"},clonePopvoer:{width:e.spacing(50)+"px"},cloneContent:{padding:e.spacing(2)}}}))(Object(h.f)(Object(l.b)((function(e,t){return{repositoryList:e.DataStore.repositoryList}}),(function(e,t){return{}}))(Ft))))),Bt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={currentTab:0},r}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.currentUserInfo,r=t.currentGroupKey,i=t.currentGroupConfig,n=t.repositoryList,s=t.repositoryListPending,o=t.match,c=t.intl;n.sort((function(e,t){return t.updated-e.updated}));var l=n.filter(U.withPermission(L.PermissionCode.REPO_READ)),p=[c.formatMessage({id:"label.all"}),c.formatMessage({id:"label.IJoined"}),c.formatMessage({id:"label.ICreated"})],d=[function(){return!0},U.not(U.creator(a.id)),U.creator(a.id)];if(r)p[0]=c.formatMessage({id:"label.repository"}),l=l.filter(U.group(r));else if(o.params.repositoryID){var u=n.filter(U.id(o.params.repositoryID))[0];l=l.filter(U.fork(o.params.repositoryID)),p[0]=u?c.formatMessage({id:"label.forkFrom_S"},{s:[u.group.displayName,u.displayName].join("/")}):c.formatMessage({id:"label.forkFrom_S"},{s:c.formatMessage({id:"label.unknownRepository"})})}return l=l.filter(d[this.state.currentTab]),Object(oe.jsxs)(k.a,{container:!0,spacing:i.group?0:3,children:[i.group&&Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(Lt,{groupConfig:i})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(ft,{tabs:p,currentTab:this.state.currentTab,onChange:function(t,a){e.setState({currentTab:a})},children:!i.group&&!o.params.repositoryID&&Object(oe.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(){e.props.history.push(i.group?W("groups",i.group.name,"repositories","new"):W("repositories","new"))},children:c.formatMessage({id:"label.newRepository"})})})}),Object(oe.jsxs)(k.a,{item:!0,xs:12,children:[l.map((function(e,t){return Object(oe.jsx)(Dt,{repositoryInfo:e},t)})),0===l.length&&Object(oe.jsx)(Pt,{imageName:"repositories-empty.png",title:c.formatMessage({id:"message._S_listEmpty"},{s:c.formatMessage({id:"label.repository"})}),pending:s,notice:c.formatMessage({id:"message.repositoryListEmptyNotice"}),children:Object(oe.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(){e.props.history.push(i.group?W("groups",i.group.name,"repositories","new"):W("repositories","new"))},children:c.formatMessage({id:"label.newRepository"})})})]})]})}}]),a}(i.a.Component),Ut=Object(R.b)(Object(C.a)((function(e){return{}}))(Object(l.b)((function(e,t){return{currentUserInfo:e.DataStore.currentUserInfo,currentGroupKey:e.DataStore.currentGroupKey,currentGroupConfig:e.DataStore.currentGroupConfig,repositoryList:e.DataStore.repositoryList,repositoryListPending:e.DataStore.repositoryListPending}}),(function(e,t){return{}}))(Bt))),Gt=a(556);var Ht={list:function(){return ee.GET("/api/repository/list")},create:function(e){return ee.POST("/api/repository/create",e)},fork:function(e){return ee.POST("/api/repository/fork",e)},config:function(e){return ee.GET("/api/repository/config",null,e)},uploadAvatar:function(e){return ee.POST("/api/repository/uploadAvatar",e)},update:function(e){return ee.POST("/api/repository/update",e)},updateName:function(e){return ee.POST("/api/repository/updateName",e)},defaultBranch:function(e){return ee.POST("/api/repository/defaultBranch",e)},protectedBranchRules:function(e){return ee.GET("/api/repository/protectedBranchRules",null,e)},createProtectedBranchRule:function(e){return ee.POST("/api/repository/createProtectedBranchRule",e)},updateProtectedBranchRule:function(e){return ee.POST("/api/repository/updateProtectedBranchRule",e)},deleteProtectedBranchRule:function(e){return ee.POST("/api/repository/deleteProtectedBranchRule",e)},addMember:function(e){return ee.POST("/api/repository/addMember",e)},changeMemberRole:function(e){return ee.POST("/api/repository/changeMemberRole",e)},removeMember:function(e){return ee.POST("/api/repository/removeMember",e)},changeOwner:function(e){return ee.POST("/api/repository/changeOwner",e)},deleteRepository:function(e){return ee.POST("/api/repository/deleteRepository",e)},activities:function(e){return ee.GET("/api/repository/activities",null,e)},mergeRequests:function(e){return ee.GET("/api/repository/mergeRequests",null,e)},mergeRequestClose:function(e){return ee.POST("/api/repository/mergeRequestClose",e)},mergeRequestCommits:function(e){return ee.GET("/api/repository/mergeRequestCommits",null,e)},mergeRequestReview:function(e){return ee.POST("/api/repository/mergeRequestReview",e)},assignReviewer:function(e){return ee.POST("/api/repository/assignReviewer",e)},deleteReviewer:function(e){return ee.POST("/api/repository/deleteReviewer",e)},object:function(e){return ee.GET("/api/repository/object",null,e)},pathStack:function(e){return ee.GET("/api/repository/pathStack",null,e)},fileContent:function(e){return ee.GET("/api/repository/fileContent",null,e)},commitList:function(e){return ee.GET("/api/repository/commitList",null,e)},commitDetail:function(e){return ee.GET("/api/repository/commitDetail",null,e)},fileChanges:function(e){return ee.GET("/api/repository/fileChanges",null,e)},refListContainSHA:function(e){return ee.GET("/api/repository/refListContainSHA",null,e)},branchList:function(e){return ee.GET("/api/repository/branchList",null,e)},createBranch:function(e){return ee.POST("/api/repository/createBranch",e)},deleteBranch:function(e){return ee.POST("/api/repository/deleteBranch",e)},tagList:function(e){return ee.GET("/api/repository/tagList",null,e)},createTag:function(e){return ee.POST("/api/repository/createTag",e)},deleteTag:function(e){return ee.POST("/api/repository/deleteTag",e)},targetRepository:function(e){return ee.GET("/api/repository/targetRepository",null,e)},lastCommitLog:function(e){return ee.GET("/api/repository/lastCommitLog",null,e)},getBlameInfo:function(e){return ee.GET("/api/repository/blameInfo",null,e)},createMergeRequest:function(e){return ee.POST("/api/repository/createMergeRequest",e)},mergeRequestDetail:function(e){return ee.GET("/api/repository/mergeRequestDetail",null,e)},checkMergeType:function(e){return ee.POST("/api/repository/checkMergeType",e)},mergeBranch:function(e){return ee.POST("/api/repository/mergeBranch",e)},mergeRequestVersionList:function(e){return ee.GET("/api/repository/mergeRequestVersionList",null,e)},relatedMergeRequests:function(e){return ee.GET("/api/repository/relatedMergeRequests",null,e)},getWebhook:function(e){return ee.POST("/api/repository/getWebhook",e)},webhooks:function(e){return ee.POST("/api/repository/webhooks",e)},editWebhook:function(e){return ee.POST("/api/repository/editWebhook",e)},deleteWebhook:function(e){return ee.POST("/api/repository/deleteWebhook",e)},getRepositoryWebhookLogs:function(e){return ee.POST("/api/repository/getRepositoryWebhookLogs",e)},getRepositoryWebhookLogData:function(e){return ee.POST("/api/repository/getRepositoryWebhookLogData",e)}},qt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={pending:!0,name:"",group:"",slug:"",description:"",error:{}},r.mountedFlag=!1,r.checkInput=se.stateValidator(Object(N.a)(r),[{name:"group",passPattern:/^[0-9a-f]{32}$/,errorMessage:r.props.intl.formatMessage({id:"message.error._S_notChoose"},{s:r.props.intl.formatMessage({id:"label.group"})})},{name:"name",passPattern:/^.+$/,errorMessage:r.props.intl.formatMessage({id:"message.error._S_empty"},{s:r.props.intl.formatMessage({id:"label.repositoryName"})})},{name:"name",passPattern:/^.{0,30}$/,errorMessage:r.props.intl.formatMessage({id:"message.error.noMoreThan_N_characters"},{n:30})},{name:"name",passPattern:/^[0-9a-zA-Z\\._-]+$/,errorMessage:r.props.intl.formatMessage({id:"message.error._S_has_illegal_character"},{s:r.props.intl.formatMessage({id:"label.repositoryName"})})},{name:"slug",passPattern:/^.+$/,errorMessage:r.props.intl.formatMessage({id:"message.error._S_empty"},{s:r.props.intl.formatMessage({id:"label.repositorySlug"})})},{name:"slug",passPattern:/^[0-9a-zA-z_]+$/,errorMessage:r.props.intl.formatMessage({id:"message.error.requireCombinationOfCharactersNumbersAndUnderscore"})},{name:"slug",passPattern:/^.{0,30}$/,errorMessage:r.props.intl.formatMessage({id:"message.error.noMoreThan_N_characters"},{n:30})},{name:"description",passPattern:/^.{0,200}$/,errorMessage:r.props.intl.formatMessage({id:"message.error.noMoreThan_N_characters"},{n:200})}]),r.checkResponse=se.codeValidator(Object(N.a)(r),[{name:"slug",exceptionCode:1025,errorMessage:r.props.intl.formatMessage({id:"message.error._S_duplicate"},{s:r.props.intl.formatMessage({id:"label.repositorySlug"})})},{name:"name",exceptionCode:1026,errorMessage:r.props.intl.formatMessage({id:"message.error._S_duplicate"},{s:r.props.intl.formatMessage({id:"label.repositoryName"})})}]),r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.mountedFlag=!0}},{key:"shouldComponentUpdate",value:function(e,t){var a=this;if(!e.groupListPending&&e.currentUserInfo.id&&(!e.groupList.filter(U.creator(e.currentUserInfo.id)).filter(U.userGroup()).length&&!e.history.location.pathname.match(/^\/groups\/new/i)))return e.dispatchEvent(ae.cancelComformation()),e.dispatchEvent(ae.addComformation("default_group_create_confirm",{title:this.props.intl.formatMessage({id:"message.defaultGroupReqiured"}),description:this.props.intl.formatMessage({id:"message.defaultGroupReqiuredDescription"}),reject:function(){e.history.push("/repositories")},accept:function(){e.history.push("/groups/new"),a.props.dispatchEvent(ae.cancelComformation())}})),!0;if(!t.group&&e.currentGroupKey)this.setState({group:e.currentGroupKey,pending:!1});else if(!t.group){var r=e.groupList.filter(U.withPermission(L.PermissionCode.GROUP_CREATE_REPO)).filter(U.creator(e.currentUserInfo.id)).filter(U.userGroup());r[0]&&this.setState({group:r[0].id,pending:!1})}return!(this.state.description!==t.description&&t.description.length<201)||(this.setState({error:{}}),!1)}},{key:"componentWillUnmount",value:function(){this.mountedFlag=!1}},{key:"createRepository",value:function(){var e=this;if(!this.checkInput())return!0;var t={group:this.state.group,name:this.state.slug,displayName:this.state.name,description:this.state.description};return this.setState({pending:!0}),Ht.create(t).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){if(t.code)e.checkResponse(t.code)?t.code>1024&&(e.props.dispatchEvent(ae.NewNotification(e.props.intl.formatMessage({id:"message.error.createRepositoryFail"}),2)),e.setState({pending:!1})):e.setState({pending:!1});else{var a=t.data;Ht.list().then(ne.withEventdispatcher(e.props.dispatchEvent)(ne.getJSONData)).then((function(t){t.code||(e.setState({pending:!1}),e.props.dispatchEvent({type:"data.repositoryList.update",data:t.data}),e.props.history.push(W(a.group.name,a.name)))}))}})),!0}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,r=t.intl,i=t.groupList,n=t.currentGroupKey,s=t.currentUserInfo,o=i.filter(U.withPermission(L.PermissionCode.GROUP_CREATE_REPO));return Object(oe.jsxs)(k.a,{container:!0,spacing:2,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"h6",component:"div",gutterBottom:!0,children:r.formatMessage({id:"label.newRepository"})})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(M.a,{className:a.paper,children:Object(oe.jsx)(k.a,{container:!0,spacing:2,children:Object(oe.jsx)(k.a,{item:!0,xs:7,children:Object(oe.jsxs)(k.a,{container:!0,spacing:2,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"subtitle1",component:"div",children:r.formatMessage({id:"label.repositoryName"})})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(E.a,{fullWidth:!0,variant:"outlined",placeholder:r.formatMessage({id:"message.error.input_S_placeholder"},{s:r.formatMessage({id:"label.repositoryName"})}),value:this.state.name,error:!!this.state.error.name,helperText:this.state.error.name,onChange:function(t){var a=t.target.value,r=ne.makeSlug(a);e.setState({name:a,slug:r,error:{}})}})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"subtitle1",component:"div",children:r.formatMessage({id:"label.repositoryURL"})})}),Object(oe.jsx)(k.a,{item:!0,xs:8,children:Object(oe.jsx)(E.a,{fullWidth:!0,select:!0,variant:"outlined",value:this.state.group,error:!!this.state.error.group,helperText:this.state.error.group,onChange:function(t){return e.setState({group:t.target.value})},disabled:!!n.length,InputProps:{startAdornment:Object(oe.jsxs)(Gt.a,{position:"start",children:[ne.getHost(s),"/"]}),endAdornment:Object(oe.jsx)(Gt.a,{position:"end",children:"/"})},className:a.svg,children:o.map((function(e){return Object(oe.jsx)(lt.a,{value:e.id,children:e.name},e.id)}))})}),Object(oe.jsx)(k.a,{item:!0,xs:4,children:Object(oe.jsx)(E.a,{fullWidth:!0,variant:"outlined",placeholder:r.formatMessage({id:"label.repositorySlug"}),value:this.state.slug,error:!!this.state.error.slug,helperText:this.state.error.slug,onChange:function(t){var a=ne.makeSlug(t.target.value);e.setState({slug:a})}})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"subtitle1",component:"div",children:r.formatMessage({id:"label.repositoryDescription"})})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(E.a,{fullWidth:!0,variant:"outlined",multiline:!0,rows:5,error:!!this.state.error.description,helperText:this.state.error.description,value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})}})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(k.a,{container:!0,justifyContent:"flex-end",children:Object(oe.jsx)(k.a,{item:!0,xs:3,className:a.textRight,children:Object(oe.jsxs)(w.a,{variant:"subtitle1",component:"div",className:this.state.description.length>200?a.outRange:"",children:[this.state.description.length,"/200"]})})})}),Object(oe.jsxs)(k.a,{item:!0,xs:12,align:"right",children:[Object(oe.jsx)(_.a,{variant:"outlined",color:"primary",disableElevation:!0,className:a.btn,disabled:this.state.pending,onClick:function(t){return e.props.history.push("/repositories")},children:r.formatMessage({id:"label.cancel"})}),Object(oe.jsx)(_.a,{variant:"contained",color:"primary",disableElevation:!0,className:a.btn,disabled:this.state.pending,onClick:function(t){return e.createRepository()},children:r.formatMessage({id:"label.ok"})})]})]})})})})})]})}}]),a}(i.a.Component),zt=Object(R.b)(Object(C.a)((function(e){return{paper:{padding:e.spacing(2)},btn:{marginLeft:e.spacing(2)},svg:{"& svg":{right:e.spacing(3)}},textRight:{textAlign:"right"},outRange:{color:e.palette.error.main}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentUserInfo:e.DataStore.currentUserInfo,currentGroupKey:e.DataStore.currentGroupKey,groupListPending:e.DataStore.groupListPending,groupList:e.DataStore.groupList}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(qt)))),Wt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={pending:!0,forkID:"",name:"",group:"",slug:"",description:"",error:{}},r.observed={forkRepositoryInfo:""},r.mountedFlag=!1,r.checkInput=se.stateValidator(Object(N.a)(r),[{name:"group",passPattern:/^[0-9a-f]{32}$/,errorMessage:r.props.intl.formatMessage({id:"message.error._S_notChoose"},{s:r.props.intl.formatMessage({id:"label.group"})})},{name:"name",passPattern:/^.+$/,errorMessage:r.props.intl.formatMessage({id:"message.error._S_empty"},{s:r.props.intl.formatMessage({id:"label.repositoryName"})})},{name:"name",passPattern:/^.{0,30}$/,errorMessage:r.props.intl.formatMessage({id:"message.error.noMoreThan_N_characters"},{n:30})},{name:"slug",passPattern:/^.+$/,errorMessage:r.props.intl.formatMessage({id:"message.error._S_empty"},{s:r.props.intl.formatMessage({id:"label.repositorySlug"})})},{name:"slug",passPattern:/^[0-9a-zA-z_]+$/,errorMessage:r.props.intl.formatMessage({id:"message.error.requireCombinationOfCharactersNumbersAndUnderscore"})},{name:"slug",passPattern:/^.{0,30}$/,errorMessage:r.props.intl.formatMessage({id:"message.error.noMoreThan_N_characters"},{n:30})}]),r.checkResponse=se.codeValidator(Object(N.a)(r),[{name:"slug",exceptionCode:1025,errorMessage:r.props.intl.formatMessage({id:"message.error._S_duplicate"},{s:r.props.intl.formatMessage({id:"label.repositorySlug"})})},{name:"name",exceptionCode:1026,errorMessage:r.props.intl.formatMessage({id:"message.error._S_duplicate"},{s:r.props.intl.formatMessage({id:"label.repositoryName"})})}]),r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.mountedFlag=!0}},{key:"shouldComponentUpdate",value:function(e,t){if(!e.groupListPending&&e.currentUserInfo.id&&(!e.groupList.filter(U.creator(e.currentUserInfo.id)).filter(U.userGroup()).length&&!e.history.location.pathname.match(/^\/groups\/new/i)))return e.dispatchEvent(ae.cancelComformation()),e.dispatchEvent(ae.addComformation("default_group_create_confirm",{title:this.props.intl.formatMessage({id:"message.defaultGroupReqiured"}),description:this.props.intl.formatMessage({id:"message.defaultGroupReqiuredDescription"}),reject:function(){e.history.push("/repositories")},accept:function(){e.history.push("/groups/new")}})),!0;var a=e.match.params.repositoryID,r=(e.repositoryList||[]).filter(U.id(a))[0];this.observed.forkRepositoryInfo!==JSON.stringify(r)&&(this.observed.forkRepositoryInfo=JSON.stringify(r),r&&this.setState({forkID:a,name:r.displayName,slug:r.name,description:r.description}));var i=e.groupList.filter(U.withPermission(L.PermissionCode.GROUP_CREATE_REPO));if(!t.group){var n=i.filter(U.creator(e.currentUserInfo.id)).filter(U.userGroup());n&&n[0]&&n[0].id&&this.setState({group:n[0].id,pending:!1})}return!0}},{key:"componentWillUnmount",value:function(){this.mountedFlag=!1}},{key:"forkRepository",value:function(){var e=this;if(!this.checkInput())return!0;var t={forkID:this.state.forkID,group:this.state.group,name:this.state.slug,displayName:this.state.name,description:this.state.description};return this.setState({pending:!0}),Ht.fork(t).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){if(t.code)e.checkResponse(t.code)?t.code>1024&&(e.props.dispatchEvent(ae.NewNotification(e.props.intl.formatMessage({id:"message.error.forkRepositoryFail"}),2)),e.setState({pending:!1})):e.setState({pending:!1});else{var a=t.data;Ht.list().then(ne.withEventdispatcher(e.props.dispatchEvent)(ne.getJSONData)).then((function(t){t.code||(e.setState({pending:!1}),e.props.dispatchEvent({type:"data.repositoryList.update",data:t.data}),e.props.history.push(W(a.group.name,a.name)))}))}})),!0}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,r=t.intl,i=t.match,n=t.repositoryList,s=t.groupList,o=t.currentUserInfo,c=s.filter(U.withPermission(L.PermissionCode.GROUP_CREATE_REPO)),l=i.params.repositoryID,p=n.filter(U.id(l))[0];return Object(oe.jsxs)(k.a,{container:!0,spacing:2,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"h6",component:"div",gutterBottom:!0,children:r.formatMessage({id:"label.forkRepository"})})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(M.a,{className:a.paper,children:Object(oe.jsx)(k.a,{container:!0,spacing:2,children:Object(oe.jsx)(k.a,{item:!0,xs:7,children:p?Object(oe.jsxs)(k.a,{container:!0,spacing:2,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"body1",component:"div",gutterBottom:!0,children:r.formatMessage({id:"label.forkFrom_S"},{s:ne.getHost(o)+W(p.group.name,p.name)+" ("+p.group.displayName+"/"+p.displayName+")"})})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"subtitle1",component:"div",children:r.formatMessage({id:"label.repositoryName"})})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(E.a,{fullWidth:!0,variant:"outlined",value:this.state.name,error:!!this.state.error.name,helperText:this.state.error.name,onChange:function(t){var a=t.target.value,r=ne.makeSlug(a);e.setState({name:a,slug:r})}})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"subtitle1",component:"div",children:r.formatMessage({id:"label.repositoryURL"})})}),Object(oe.jsx)(k.a,{item:!0,xs:8,children:Object(oe.jsx)(E.a,{fullWidth:!0,variant:"outlined",select:!0,value:this.state.group,error:!!this.state.error.group,helperText:this.state.error.group,onChange:function(t){return e.setState({group:t.target.value})},InputProps:{startAdornment:Object(oe.jsxs)(Gt.a,{position:"start",children:[ne.getHost(o),"/"]}),endAdornment:Object(oe.jsx)(Gt.a,{position:"end",children:"/"})},className:a.svg,children:c.map((function(e){return Object(oe.jsx)(lt.a,{value:e.id,children:e.name},e.id)}))})}),Object(oe.jsx)(k.a,{item:!0,xs:4,children:Object(oe.jsx)(E.a,{fullWidth:!0,variant:"outlined",value:this.state.slug,error:!!this.state.error.slug,helperText:this.state.error.slug,onChange:function(t){var a=ne.makeSlug(t.target.value);e.setState({slug:a})}})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"subtitle1",component:"div",children:r.formatMessage({id:"label.repositoryDescription"})})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(E.a,{fullWidth:!0,variant:"outlined",multiline:!0,rows:5,value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})}})}),Object(oe.jsxs)(k.a,{item:!0,xs:12,align:"right",children:[Object(oe.jsxs)(_.a,{variant:"outlined",color:"primary",disableElevation:!0,className:a.btn,disabled:this.state.pending,onClick:function(t){return e.props.history.push("/repositories")},children:[Object(oe.jsx)(fe.a,{icon:Ge.k}),"\xa0 ",r.formatMessage({id:"label.cancel"})," \xa0"]}),Object(oe.jsxs)(_.a,{variant:"contained",color:"primary",disableElevation:!0,className:a.btn,disabled:this.state.pending,onClick:function(t){return e.forkRepository()},children:[this.state.pending?Object(oe.jsx)(he.a,{size:"1rem",color:"inherit"}):Object(oe.jsx)(fe.a,{icon:Ge.h}),"\xa0 ",r.formatMessage({id:"label.fork"})," \xa0"]})]})]}):Object(oe.jsx)(k.a,{container:!0,spacing:2,children:Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(he.a,{})})})})})})})]})}}]),a}(i.a.Component),Vt=Object(R.b)(Object(C.a)((function(e){return{paper:{padding:e.spacing(2)},btn:{marginRight:e.spacing(2)},svg:{"& svg":{right:e.spacing(3)}}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentUserInfo:e.DataStore.currentUserInfo,repositoryList:e.DataStore.repositoryList,groupListPending:e.DataStore.groupListPending,groupList:e.DataStore.groupList}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(Wt)))),Jt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={pending:!1,name:"",description:"",error:{}},r.mountedFlag=!1,r.checkInput=se.stateValidator(Object(N.a)(r),[{name:"name",passPattern:/^.+$/,errorMessage:r.props.intl.formatMessage({id:"message.error._S_empty"},{s:r.props.intl.formatMessage({id:"label.repositoryName"})})},{name:"name",passPattern:/^.{0,30}$/,errorMessage:r.props.intl.formatMessage({id:"message.error.noMoreThan_N_characters"},{n:30})},{name:"name",passPattern:/^[0-9a-zA-Z\\._-]+$/,errorMessage:r.props.intl.formatMessage({id:"message.error._S_has_illegal_character"},{s:r.props.intl.formatMessage({id:"label.groupName"})})},{name:"description",passPattern:/^.{0,200}$/,errorMessage:r.props.intl.formatMessage({id:"message.error.noMoreThan_N_characters"},{n:200})}]),r.checkResponse=se.codeValidator(Object(N.a)(r),[{name:"name",exceptionCode:1026,errorMessage:r.props.intl.formatMessage({id:"message.error._S_duplicate"},{s:r.props.intl.formatMessage({id:"label.repositoryName"})})}]),r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.mountedFlag=!0,this.props.currentRepositoryConfig.repository&&this.setState({name:this.props.currentRepositoryConfig.repository.displayName,description:this.props.currentRepositoryConfig.repository.description})}},{key:"shouldComponentUpdate",value:function(e,t){return JSON.stringify(e.currentRepositoryConfig)!==JSON.stringify(this.props.currentRepositoryConfig)&&e.currentRepositoryConfig.repository?(this.setState({name:e.currentRepositoryConfig.repository.displayName,description:e.currentRepositoryConfig.repository.description}),!1):!(this.state.description!==t.description&&t.description.length<201)||(this.setState({error:{}}),!1)}},{key:"componentWillUnmount",value:function(){this.mountedFlag=!1}},{key:"updateRepository",value:function(){var e=this;if(!this.checkInput())return!0;var t={repository:this.props.currentRepositoryConfig.repository.id,displayName:this.state.name,description:this.state.description};return this.setState({pending:!0}),Ht.update(t).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){t.code?e.checkResponse(t.code)?t.code>1024&&(e.props.dispatchEvent(ae.NewNotification(e.props.intl.formatMessage({id:"message.error.updateFail"}),2)),e.setState({pending:!1})):e.setState({pending:!1}):(e.setState({pending:!1}),e.props.dispatchEvent(ae.NewNotification(e.props.intl.formatMessage({id:"message.updated"}),0)),e.reloadRepositoryData())})),!0}},{key:"avatarUploaded",value:function(e){e.code||(this.props.dispatchEvent(ae.NewNotification(this.props.intl.formatMessage({id:"message.updated"}),0)),this.reloadRepositoryData())}},{key:"reloadRepositoryData",value:function(){var e=this;Ht.list().then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){t.code||e.props.dispatchEvent({type:"data.repositoryList.update",data:t.data})})),Ht.config({rKey:this.props.currentRepositoryConfig.repository.id}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){t.code||e.props.dispatchEvent({type:"data.currentRepositoryConfig.update",data:t.data})}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.currentRepositoryConfig,r=t.classes,n=t.intl;return Object(oe.jsxs)(k.a,{container:!0,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"h6",component:"div",gutterBottom:!0,className:r.header,children:n.formatMessage({id:"menu.general"})})}),a.repository?Object(oe.jsxs)(k.a,{container:!0,spacing:2,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"subtitle1",component:"div",gutterBottom:!0,children:n.formatMessage({id:"label.repositoryAvatar"})})}),Object(oe.jsx)(k.a,{item:!0,xs:7,children:Object(oe.jsx)(qe,{name:"avatar",appendData:{repository:a.repository.id},src:a.repository.icon?D.HOSTS.STATIC_AVATAR_PREFIX+a.repository.icon:a.repository.name.substr(0,1).toUpperCase(),onUpdate:function(t){return e.avatarUploaded(t)},dataProvider:Ht.uploadAvatar})}),Object(oe.jsx)(k.a,{item:!0,xs:3}),Object(oe.jsx)(k.a,{item:!0,xs:7,children:Object(oe.jsxs)(k.a,{container:!0,spacing:2,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"subtitle1",component:"div",children:n.formatMessage({id:"label.repositoryName"})})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(E.a,{fullWidth:!0,variant:"outlined",placeholder:n.formatMessage({id:"message.error.input_S_placeholder"},{s:n.formatMessage({id:"label.repositoryName"})}),value:this.state.name,error:!!this.state.error.name,helperText:this.state.error.name,onChange:function(t){var a=t.target.value,r=ne.makeSlug(a);e.setState({name:a,slug:r,error:{}})}})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"subtitle1",component:"div",children:n.formatMessage({id:"label.repositoryDescription"})})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(E.a,{fullWidth:!0,variant:"outlined",multiline:!0,rows:5,value:this.state.description,error:!!this.state.error.description,helperText:this.state.error.description,onChange:function(t){return e.setState({description:t.target.value})}})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(k.a,{container:!0,justifyContent:"flex-end",children:Object(oe.jsx)(k.a,{item:!0,xs:3,className:r.textRight,children:Object(oe.jsxs)(w.a,{variant:"subtitle1",component:"div",className:this.state.description.length>200?r.outRange:"",children:[this.state.description.length,"/200"]})})})}),Object(oe.jsxs)(k.a,{item:!0,xs:12,style:{textAlign:"right"},children:[Object(oe.jsxs)(_.a,{variant:"outlined",color:"primary",disableElevation:!0,disabled:this.state.pending,onClick:function(t){return e.props.history.push("/"+a.group.name+"/"+a.repository.name+"/files")},children:["\xa0 ",n.formatMessage({id:"label.cancel"})," \xa0"]}),Object(oe.jsxs)(_.a,{variant:"contained",color:"primary",disableElevation:!0,className:r.btn,disabled:this.state.pending,onClick:function(t){return e.updateRepository()},children:[this.state.pending&&Object(oe.jsx)(he.a,{size:"1rem",color:"inherit"}),"\xa0 ",n.formatMessage({id:"label.update"})," \xa0"]})]})]})}),Object(oe.jsx)(k.a,{item:!0,xs:4})]}):Object(oe.jsx)(i.a.Fragment,{children:Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(he.a,{})})})]})}}]),a}(i.a.Component),Kt=Object(R.b)(Object(C.a)((function(e){return{header:{lineHeight:e.spacing(5)+"px",marginBottom:e.spacing(4),borderBottom:"1px solid "+e.palette.border,fontSize:"18px"},paper:{padding:e.spacing(2)},btn:{marginLeft:e.spacing(2)},textRight:{textAlign:"right"},outRange:{color:e.palette.error.main}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentRepositoryConfig:e.DataStore.currentRepositoryConfig}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(Jt)))),$t=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={pending:!1,branch:e.currentRepositoryConfig.repository?e.currentRepositoryConfig.repository.defaultBranch:"",rules:null,updateRuleId:null,rule:"",rolePush:L.Role.OWNER,roleMerge:L.Role.OWNER,error:{}},r.checkInput=se.stateValidator(Object(N.a)(r),[{name:"rule",passPattern:/^.+$/,errorMessage:r.props.intl.formatMessage({id:"message.error._S_empty"},{s:r.props.intl.formatMessage({id:"label.rule"})})},{name:"rule",passPattern:/^([0-9a-zA-Z/]{1,30}|\/\^?.{1,30}\$?\/[igm]*)$/,errorMessage:r.props.intl.formatMessage({id:"message.error._S_invalid"},{s:r.props.intl.formatMessage({id:"label.rule"})})}]),r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.getData(this.props)}},{key:"shouldComponentUpdate",value:function(e,t){return!(JSON.stringify(e.currentRepositoryConfig)!==JSON.stringify(this.props.currentRepositoryConfig)&&!this.props.currentRepositoryConfig.repository)||(this.setState({branch:e.currentRepositoryConfig.repository.defaultBranch}),this.getData(e),!1)}},{key:"getData",value:function(e){var t=this,a=e.currentRepositoryConfig;if(!a.repository)return!1;this.setState({pending:!0}),Ht.protectedBranchRules({repository:a.repository.id}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(e){t.cancelForm(),e.code||t.setState({pending:!1,rules:e.data})}))}},{key:"getTableData",value:function(){var e=this,t=this.props.classes,a=this.state,r=a.rules,n=a.updateRuleId,s=[];return!!r&&(r.map((function(a,r){return"create"===a||a.id===n?s.push(e.createForm()):s.push([Object(oe.jsx)(w.a,{variant:"body1",component:"div",children:a.rule}),Object(oe.jsx)(w.a,{variant:"body1",component:"div",children:e.getAllowRoler(a.rolePush)}),Object(oe.jsx)(w.a,{variant:"body1",component:"div",children:e.getAllowRoler(a.roleMerge)}),Object(oe.jsxs)(i.a.Fragment,{children:[Object(oe.jsx)(Ie,{label:"label.modification",icon:je.m,className:t.icon,onClick:function(t){return e.editRule(a)}}),Object(oe.jsx)(Ie,{label:"label.delete",className:[t.btn,t.icon].join(" "),onClick:function(t){return e.deleteConfirm(a.id,a.rule)},icon:je.H})]})]),!0})),[["150px","200px","200px","150px"],["label.branchRule","label.allowPush","label.allowMerge","label.operating"]].concat(s))}},{key:"getAllowRoler",value:function(e){var t=this.props.intl;return[t.formatMessage({id:"message.noBodyAllow"}),t.formatMessage({id:"label.owner"}),t.formatMessage({id:"label.maintianer"}),t.formatMessage({id:"label.developer"})].slice(e===L.Role.NOBODY?0:1,L.Role.NOBODY-e+1).join(" + ")}},{key:"createForm",value:function(){var e=this,t=this.props,a=t.classes,r=t.intl;return[Object(oe.jsx)(E.a,{fullWidth:!0,variant:"outlined",value:this.state.rule,placeholder:r.formatMessage({id:"message.inputBranchOrRegexp"}),error:!!this.state.error.rule,helperText:this.state.error.rule,onChange:function(t){return e.setState({rule:t.target.value})}}),Object(oe.jsxs)(E.a,{fullWidth:!0,select:!0,variant:"outlined",value:this.state.rolePush,error:!!this.state.error.rolePush,helperText:this.state.error.rolePush,onChange:function(t){return e.setState({rolePush:t.target.value})},children:[Object(oe.jsx)(lt.a,{value:L.Role.OWNER,children:this.getAllowRoler(L.Role.OWNER)}),Object(oe.jsx)(lt.a,{value:L.Role.MAINTAINER,children:this.getAllowRoler(L.Role.MAINTAINER)}),Object(oe.jsx)(lt.a,{value:L.Role.DEVELOPER,children:this.getAllowRoler(L.Role.DEVELOPER)}),Object(oe.jsx)(lt.a,{value:L.Role.NOBODY,children:this.getAllowRoler(L.Role.NOBODY)})]}),Object(oe.jsxs)(E.a,{fullWidth:!0,select:!0,variant:"outlined",value:this.state.roleMerge,error:!!this.state.error.roleMerge,helperText:this.state.error.roleMerge,onChange:function(t){return e.setState({roleMerge:t.target.value})},children:[Object(oe.jsx)(lt.a,{value:L.Role.OWNER,children:this.getAllowRoler(L.Role.OWNER)}),Object(oe.jsx)(lt.a,{value:L.Role.MAINTAINER,children:this.getAllowRoler(L.Role.MAINTAINER)}),Object(oe.jsx)(lt.a,{value:L.Role.NOBODY,children:this.getAllowRoler(L.Role.NOBODY)})]}),Object(oe.jsxs)(i.a.Fragment,{children:[Object(oe.jsx)(Ie,{label:"label.ok",icon:je.e,onClick:function(t){return e.createProtectedBranchRule()},className:a.ok}),Object(oe.jsx)(Ie,{label:"label.cancel",icon:je.g,onClick:function(t){return e.cancelForm()},className:a.cancel})]})]}},{key:"settingDefaultBranch",value:function(){var e=this,t=this.props.currentRepositoryConfig,a=this.state.branch;if(!t.repository||a===t.repository.defaultBranch)return!1;this.setState({pending:!0}),Ht.defaultBranch({repository:t.repository.id,old:t.repository.defaultBranch,branch:a}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){t.code?e.props.dispatchEvent(ae.NewNotification(e.props.intl.formatMessage({id:"message.error.updateFail"}),2)):(e.props.dispatchEvent(ae.NewNotification(e.props.intl.formatMessage({id:"message.updated"}),0)),e.reloadRepositoryData()),e.setState({pending:!1})}))}},{key:"reloadRepositoryData",value:function(){var e=this;Ht.list().then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){t.code||e.props.dispatchEvent({type:"data.repositoryList.update",data:t.data})})),Ht.config({rKey:this.props.currentRepositoryConfig.repository.id}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){t.code||e.props.dispatchEvent({type:"data.currentRepositoryConfig.update",data:t.data})}))}},{key:"cancelForm",value:function(){var e=this.state.rules;e&&e.length&&"create"===e[e.length-1]&&(e=e.slice(0,e.length-1)),this.setState({rules:e,updateRuleId:null,rule:"",rolePush:L.Role.OWNER,roleMerge:L.Role.OWNER,error:{}})}},{key:"createRule",value:function(){var e=this.state.rules;e.length&&"create"===e[e.length-1]||(this.cancelForm(),this.setState({rules:[].concat(Object(T.a)(e),["create"])}))}},{key:"editRule",value:function(e){this.cancelForm(),this.setState({updateRuleId:e.id,rule:e.rule,rolePush:e.rolePush,roleMerge:e.roleMerge})}},{key:"deleteConfirm",value:function(e,t){var a=this,r=this.props.intl;this.cancelForm(),this.props.dispatchEvent(ae.addComformation("delete_protected_branch_rule",{title:r.formatMessage({id:"message.confirmDelete"},{s:r.formatMessage({id:"label.rule"})+" '"+t+"' "}),description:"",reject:function(){return!0},accept:function(){a.deleteRule(e,t)}}))}},{key:"createProtectedBranchRule",value:function(){var e=this,t=this.props,a=t.currentRepositoryConfig,r=t.intl,i=this.state,n=i.rules,s=i.rule,o=i.rolePush,c=i.roleMerge,l=i.updateRuleId;if(!a.repository||!this.checkInput())return!1;var p=n.filter(U.rule(s));if(p.length>0&&(!l||l&&l!==p[0].id))return this.setState({error:{rule:r.formatMessage({id:"message.error._S_duplicate"},{s:r.formatMessage({id:"label.rule"})})}}),!1;var d={repository:a.repository.id,rule:s,rolePush:o,roleMerge:c};this.setState({pending:!0}),l?Ht.updateProtectedBranchRule(Object(y.a)(Object(y.a)({},d),{},{id:l})).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){t.code?e.props.dispatchEvent(ae.NewNotification(e.props.intl.formatMessage({id:"message.error.updateFail"}),2)):(e.props.dispatchEvent(ae.NewNotification(e.props.intl.formatMessage({id:"message.updated"}),0)),e.getData(e.props)),e.setState({pending:!1})})):Ht.createProtectedBranchRule(Object(y.a)({},d)).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){t.code?e.props.dispatchEvent(ae.NewNotification(e.props.intl.formatMessage({id:"message.error.createProtectedBrancheRuleFail"}),2)):(e.props.dispatchEvent(ae.NewNotification(e.props.intl.formatMessage({id:"message.created"}),0)),e.getData(e.props)),e.setState({pending:!1})}))}},{key:"deleteRule",value:function(e,t){var a=this,r=this.props.currentRepositoryConfig;if(!r.repository||!e||!t)return!1;this.setState({pending:!0}),Ht.deleteProtectedBranchRule({repository:r.repository.id,id:e,rule:t}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(e){e.code?a.props.dispatchEvent(ae.NewNotification(a.props.intl.formatMessage({id:"message.error.deleteFail"}),2)):(a.props.dispatchEvent(ae.NewNotification(a.props.intl.formatMessage({id:"message.deleted"}),0)),a.getData(a.props)),a.props.dispatchEvent(ae.cancelComformation()),a.setState({pending:!1})}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.currentRepositoryConfig,r=t.classes,i=t.intl,n=this.state,s=n.pending,o=n.branch,c=n.rules;return Object(oe.jsxs)(k.a,{container:!0,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"h6",component:"div",className:r.header,children:i.formatMessage({id:"label.branchSetting"})})}),Object(oe.jsxs)(k.a,{item:!0,xs:12,className:r.border,children:[Object(oe.jsx)(w.a,{variant:"subtitle1",component:"div",className:r.title,children:i.formatMessage({id:"label.defaultBranch"})}),Object(oe.jsx)(w.a,{variant:"body2",component:"div",children:i.formatMessage({id:"message.defaultBranchDescription"})}),Object(oe.jsx)(k.a,{className:r.content,children:a.repository&&Object(oe.jsxs)(k.a,{container:!0,children:[Object(oe.jsx)(k.a,{item:!0,xs:3,children:Object(oe.jsxs)(E.a,{select:!0,fullWidth:!0,variant:"outlined",value:null!==o?o:"0",onChange:function(t){return e.setState({branch:t.target.value})},children:[!a.repository.defaultBranch&&null===o&&Object(oe.jsx)(lt.a,{value:0,children:i.formatMessage({id:"message.settingDefaultBranch"})}),a.branches.map((function(e,t){return Object(oe.jsx)(lt.a,{value:e.name,children:e.name},t)}))]})}),Object(oe.jsx)(k.a,{item:!0,xs:9,children:Object(oe.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(t){return e.settingDefaultBranch()},className:r.btn,disabled:s,children:i.formatMessage({id:"message.settingToDefaultBranch"})})})]})})]}),Object(oe.jsx)(k.a,{item:!0,xs:7,children:Object(oe.jsxs)(k.a,{container:!0,children:[Object(oe.jsxs)(k.a,{item:!0,xs:8,children:[Object(oe.jsx)(w.a,{variant:"subtitle1",component:"div",className:r.title,children:i.formatMessage({id:"label.protectedBranch"})}),Object(oe.jsx)(w.a,{variant:"body2",component:"div",children:i.formatMessage({id:"message.protectedBranchDescription"})})]}),Object(oe.jsx)(k.a,{item:!0,xs:4,align:"right",children:Object(oe.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(t){return e.createRule()},disabled:s,className:r.create,children:i.formatMessage({id:"message.createProtectedBranchRule"})})}),Object(oe.jsx)(k.a,{item:!0,xs:12,className:r.table,children:null!==c?0!==c.length?Object(oe.jsx)(ke,{data:this.getTableData()}):Object(oe.jsx)(Pt,{imageName:"branch-rules-empty.png",title:i.formatMessage({id:"message.protectedBranchRuleEmpty"}),notice:""}):Object(oe.jsx)(k.a,{container:!0,spacing:2,className:r.loading,children:Object(oe.jsx)(he.a,{})})})]})})]})}}]),a}(i.a.Component),Zt=Object(R.b)(Object(C.a)((function(e){return{loading:{paddingTop:e.spacing(16),paddingBottom:e.spacing(16),justifyContent:"center"},header:{lineHeight:e.spacing(5)+"px",marginBottom:e.spacing(4),borderBottom:"1px solid "+e.palette.border,fontSize:"18px"},title:{lineHeight:e.spacing(3)+"px",paddingBottom:e.spacing(2)},content:{paddingTop:e.spacing(3),paddingBottom:e.spacing(5)},create:{marginTop:e.spacing(1)},size:{fontSize:"12px"},btn:{marginLeft:e.spacing(1)},border:{borderBottom:"1px solid "+e.palette.border,marginBottom:e.spacing(3)},icon:{color:e.palette.text.light,"& svg":{width:"16px !important",height:"16px !important"}},ok:{"& svg":{color:e.palette.success.main+" !important"}},cancel:{marginLeft:e.spacing(1),"& svg":{width:"14px !important",height:"14px !important",padding:"2px",color:e.palette.error.main+" !important"}},table:{marginTop:e.spacing(3),"& tbody tr":{"&:hover":{background:e.palette.background.light+" !important"}},"& td":{lineHeight:e.spacing(6)+"px","& > div":{verticalAlign:"middle"}}}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentRepositoryConfig:e.DataStore.currentRepositoryConfig}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))($t)))),Yt=a(577),Xt=a(586),Qt=a(557),ea=a(579),ta=[{event:"hook:postReceive",title:"label.pushEvent",checked:!0},{event:"repo:fork",title:"label.forkRepository",checked:!1},{event:"repo:updateAvator",title:["label.update_S_","label.repositoryAvatar"],checked:!1},{event:"repo:updateName",title:["label.update_S_","label.repositoryName"],checked:!1},{event:"repo:updateDescription",title:["label.update_S_","label.repositoryDescription"],checked:!1},{event:"repo:addMember",title:"label.inviteMember",checked:!1},{event:"repo:changeMemberRole",title:"label.changeMemberRole",checked:!1},{event:"repo:removeMember",title:"label.removeMember",checked:!1},{event:"repo:changeOwner",title:["label.update_S_","label.owner"],checked:!1},{event:"repo:changeURL",title:["label.update_S_","label.repositoryURL"],checked:!1},{event:"repo:remove",title:"label.deleteRepository",checked:!1},{event:"branch:create",title:"label.newBranch",checked:!1},{event:"branch:remove",title:"label.deleteBranch",checked:!1},{event:"branch:changeDefaultBranch",title:["label.update_S_","label.defaultBranch"],checked:!1},{event:"branch:createProtectedBranchRule",title:"label.createProtectedBranchRule",checked:!1},{event:"branch:changeProtectedBranchRule",title:"label.changeProtectedBranchRule",checked:!1},{event:"branch:removeProtectedBranchRule",title:"label.removeProtectedBranchRule",checked:!1},{event:"tag:create",title:"label.newTag",checked:!1},{event:"tag:remove",title:"label.deleteTag",checked:!1},{event:"mergeRequest:create",title:"label.createMergeRequest",checked:!1},{event:"mergeRequest:close",title:"label.closeMergeRequest",checked:!1},{event:"mergeRequest:merge",title:"label.mergeRequest",checked:!1},{event:"mergeRequestReviewer:create",title:"message.selectReviewer",checked:!1},{event:"mergeRequestReviewer:delete",title:"message.deleteReviewer",checked:!1},{event:"mergeRequestReviewer:review",title:"label.reviewReviewer",checked:!1}],aa=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.children,r=e.classes;return Object(oe.jsxs)(k.a,{container:!0,className:r.list,children:[t&&Object(oe.jsx)(k.a,{item:!0,xs:12,className:r.title,children:Object(oe.jsx)(w.a,{variant:"body1",component:"div",children:t})}),Object(oe.jsx)(k.a,{item:!0,xs:12,className:t?"":r.list2,children:a})]})}}]),a}(i.a.Component),ra=Object(C.a)((function(e){return{list:{border:"1px solid "+e.palette.border,borderRadius:e.spacing(.5)+"px "},title:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3),background:e.palette.background.main,borderRadius:e.spacing(.5)+"px "+e.spacing(.5)+"px 0px 0px","& > div":{lineHeight:e.spacing(5)+"px"}},list2:{"& div:nth-child(1), & li:nth-child(1)":{border:"0px"}}}}))(Object(h.f)(Object(l.b)((function(e,t){return{}}),(function(e,t){return{}}))(aa))),ia=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={webhookTab:0,webhookId:"",logData:null},r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){}},{key:"getData",value:function(e){var t=this;if(!e)return!1;this.setState({webhookTab:0,webhookId:e,logData:null}),Ht.getRepositoryWebhookLogData({id:e}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(e){e.code||t.setState({logData:e.data})}))}},{key:"getTime",value:function(e,t){return Math.floor(100*(t-e))/100}},{key:"render",value:function(){var e=this,t=this.props,a=t.list,r=t.classes,i=t.intl,n=this.state,s=n.webhookTab,o=n.webhookId,c=n.logData;return Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(ra,{title:"",children:a.map((function(t){return Object(oe.jsxs)(k.a,{container:!0,className:r.webhook,children:[Object(oe.jsxs)(k.a,{item:!0,xs:8,className:r.subline,children:[Object(oe.jsx)(fe.a,{icon:t.success?je.P:je.R,className:t.success?r.success:r.error}),Object(oe.jsx)(w.a,{variant:"body1",component:"span",className:r.webhookid,children:t.id}),Object(oe.jsx)(Ie,{label:"label.copy",onClick:function(e){return X(t.id)},icon:je.k})]}),Object(oe.jsxs)(k.a,{item:!0,xs:4,className:[r.subline,r.date].join(" "),children:[Object(oe.jsx)(w.a,{variant:"body1",component:"span",children:t.created}),o===t.id?Object(oe.jsx)(Ie,{label:"label.close",onClick:function(t){return e.setState({webhookId:""})},icon:je.g,className:r.more}):Object(oe.jsx)(Ie,{label:"label.detail",onClick:function(a){return e.getData(t.id)},icon:je.cb,className:r.more})]}),o&&o===t.id&&c&&Object(oe.jsx)(k.a,{item:!0,xs:12,className:r.detail,children:Object(oe.jsxs)(k.a,{container:!0,spacing:2,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(ft,{tabs:[i.formatMessage({id:"label.request"}),Object(oe.jsxs)(k.a,{children:[i.formatMessage({id:"label.response"}),"\u2003",Object(oe.jsx)(Ke,{color:t.success?"success":"error",text:t.status+""})]})],currentTab:s,onChange:function(t,a){return e.setState({webhookTab:a})},children:Object(oe.jsxs)(w.a,{variant:"body1",component:"div",className:r.time,children:[Object(oe.jsx)(fe.a,{icon:je.f}),"\xa0",i.formatMessage({id:"message.useTime_n"},{n:e.getTime(t.start,t.end)})]})})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"h5",component:"div",children:i.formatMessage({id:"label.httpHeaders"})})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(k.a,{className:r.code,children:0===s?Object.keys(c.request.headers).map((function(e){return Object(oe.jsxs)(k.a,{children:[Object(oe.jsxs)(w.a,{variant:"subtitle1",component:"span",children:[e,":"]}),"\u2003",Object(oe.jsx)(w.a,{variant:"body1",component:"span",children:c.request.headers[e]})]},e)})):Object.keys(c.response.headers).map((function(e){return Object(oe.jsxs)(k.a,{children:[Object(oe.jsxs)(w.a,{variant:"subtitle1",component:"span",children:[e,":"]}),"\u2003",Object(oe.jsx)(w.a,{variant:"body1",component:"span",children:c.response.headers[e]})]},e)}))})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsxs)(w.a,{variant:"h5",component:"div",children:[0===s?i.formatMessage({id:"label.httpPayload"}):i.formatMessage({id:"label.httpBody"}),"\xa0",0===s&&Object(oe.jsx)(Oe,{type:"icon",doc:"/repo/webhooks.md"})]})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(k.a,{className:r.code,children:Object(oe.jsx)("pre",{children:Object(oe.jsx)(w.a,{variant:"body1",component:"div",children:0===s?JSON.stringify(JSON.parse(c.request.body),null,4):c.response.body})})})})]})})]},t.id)}))})})}}]),a}(i.a.Component),na=Object(R.b)(Object(C.a)((function(e){return{webhook:{borderTop:"1px solid "+e.palette.border},subline:{display:"flex",alignItems:"center",height:e.spacing(6),padding:"0px "+e.spacing(3)+"px"},date:{justifyContent:"flex-end"},success:{color:e.palette.success.main},error:{color:e.palette.error.main},webhookid:{marginLeft:e.spacing(2),marginRight:e.spacing(1),borderRadius:e.spacing(.5),background:e.palette.background.dark,padding:e.spacing(.5)+"px "+e.spacing(1)+"px"},more:{marginLeft:e.spacing(2)},detail:{padding:e.spacing(3),paddingTop:0},time:{lineHeight:e.spacing(5)+"px"},code:{overflowX:"auto",padding:e.spacing(1),borderRadius:e.spacing(.5),background:e.palette.background.main,border:"1px solid "+e.palette.border}}}))(Object(l.b)((function(e,t){return{}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(ia))),sa=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={pending:!1,webhooks:null,webhook:null,pushEvent:"hook:postReceive",edit:!1,webhookLogs:null,isShowWebhookForm:!!window.location.search,url:"",secret:"",trigger:"1",active:"1",error:{},events:JSON.parse(JSON.stringify(ta))},r.checkInput=se.stateValidator(Object(N.a)(r),[{name:"url",passPattern:/^.+$/,errorMessage:r.props.intl.formatMessage({id:"message.error._S_empty"},{s:r.props.intl.formatMessage({id:"label.url"})})},{name:"url",passPattern:/^http(s)?:\/\/.+/,errorMessage:r.props.intl.formatMessage({id:"message.error._S_invalid"},{s:r.props.intl.formatMessage({id:"label.url"})})},{name:"url",passPattern:/^\S{0,255}$/,errorMessage:r.props.intl.formatMessage({id:"message.error.noMoreThan_N_characters"},{n:255})},{name:"secret",passPattern:/^\S{0,255}$/,errorMessage:r.props.intl.formatMessage({id:"message.error.noMoreThan_N_characters"},{n:255})}]),r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.getData(this.props)}},{key:"shouldComponentUpdate",value:function(e,t){return JSON.stringify(e.currentRepositoryKey)===JSON.stringify(this.props.currentRepositoryKey)||(this.getData(e),!1)}},{key:"getData",value:function(e){var t=this,a=e.currentRepositoryKey;if(!a)return!1;this.setState({pending:!0}),Ht.webhooks({repository:a}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(e){if(!e.code){var a=e.data;a.map((function(e,a){return e.events=t.getEvents(e.events),!0})),t.setState({pending:!1,webhooks:a})}}))}},{key:"getWebhookLogs",value:function(e){var t=this;if(!e)return!1;Ht.getRepositoryWebhookLogs({webhook:e}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(e){e.code||t.setState({webhookLogs:e.data})}))}},{key:"editWebhook",value:function(){var e=this,t=this.props,a=t.intl,r=t.currentRepositoryKey,i=this.state,n=i.pending,s=i.isShowWebhookForm,o=i.trigger,c=i.url,l=i.secret,p=i.webhook,d=i.edit,u=i.active;if(n||!s||!this.checkInput())return!1;var m="1"===o?this.state.pushEvent:this.getCheckedEvents();m||this.props.dispatchEvent(ae.NewNotification(a.formatMessage({id:"message.webhookEventsNeed"}),1)),this.setState({pending:!0}),Ht.editWebhook({repository:r,rwKey:p?p.id:"",url:c,secret:l,events:m,active:u}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){e.setState({pending:!1}),t.code||(e.props.dispatchEvent(ae.NewNotification(a.formatMessage({id:d?"message.updated":"message.created"}),0)),e.initData(),e.setState({isShowWebhookForm:!1}),e.getData(e.props))}))}},{key:"updateWebhook",value:function(e){var t=this,a=this.props.currentRepositoryKey;if(!a)return!1;this.setState({pending:!0}),Ht.getWebhook({repository:a,rwKey:e.id}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(e){if(!e.code){var a=e.data;t.setState({pending:!1,edit:!0,webhook:a,isShowWebhookForm:!0,url:a.url,secret:a.secret,trigger:a.events===t.state.pushEvent?"1":"2",events:t.getEvents(a.events),active:a.active})}}))}},{key:"deleteWebhook",value:function(e){var t=this,a=this.props,r=a.currentRepositoryKey,i=a.intl;this.props.dispatchEvent(ae.addComformation("delete_webhook",{title:i.formatMessage({id:"message.confirmDelete"},{s:i.formatMessage({id:"label.webhook"})}),description:"",reject:function(){return!0},accept:function(){Ht.deleteWebhook({repository:r,rwKey:e.id}).then(ne.withEventdispatcher(t.props.dispatchEvent)(ne.getJSONData)).then((function(e){t.props.dispatchEvent(ae.cancelComformation()),e.code||(t.props.dispatchEvent(ae.NewNotification(t.props.intl.formatMessage({id:"message.deleted"}),0)),t.getData(t.props))}))}}))}},{key:"getTableData",value:function(){var e=this,t=this.props,a=t.classes,r=t.intl,i=this.state.webhooks,n=[];return i.map((function(t){var i=0;return n.push([Object(oe.jsx)(be.a,{title:r.formatMessage({id:"1"===t.active?"label.enable":"label.disable"}),placement:"top",children:Object(oe.jsx)("div",{className:[a.dot,a.cursorPointer,"1"===t.active?"":a.close].join(" ")})}),Object(oe.jsx)(w.a,{variant:"body1",component:"div",children:t.user}),Object(oe.jsx)(be.a,{title:t.url,placement:"top",children:Object(oe.jsx)(w.a,{variant:"body1",component:"div",className:a.cursorPointer,onClick:function(a){return X(t.url,(function(){return e.props.dispatchEvent(ae.NewNotification(r.formatMessage({id:"label.copied"}),0))}))},children:t.url.substr(0,40)})}),Object(oe.jsx)(be.a,{title:t.secret,placement:"top",children:Object(oe.jsx)(w.a,{variant:"body1",component:"div",className:a.cursorPointer,onClick:function(a){return X(t.secret,(function(){return e.props.dispatchEvent(ae.NewNotification(r.formatMessage({id:"label.copied"}),0))}))},children:t.secret.substr(0,20)})}),Object(oe.jsx)(w.a,{variant:"body1",component:"div",children:t.events.map((function(e,t){return e.checked?4===++i?"...":i>4?"":("string"===typeof e.title?r.formatMessage({id:e.title}):r.formatMessage({id:e.title[0]},{s:r.formatMessage({id:e.title[1]})}))+"; ":""}))}),Object(oe.jsx)(w.a,{variant:"body1",component:"div",children:Object(oe.jsx)(Nt,{timestamp:1*t.updated})}),Object(oe.jsxs)(w.a,{children:[Object(oe.jsx)(Ie,{label:"label.update",icon:je.m,className:a.icon,onClick:function(a){return e.updateWebhook(t)}}),Object(oe.jsx)(Ie,{label:"label.delete",icon:je.H,className:a.icon,onClick:function(a){return e.deleteWebhook(t)}}),Object(oe.jsx)(Ie,{label:"label.log",icon:je.X,className:a.icon,onClick:function(a){return e.getWebhookLogs(t.id)}})]})]),!0})),[["10px","auto","auto","auto","auto","auto","auto"],["","label.creator","label.url","label.webhookSecret","label.webhookTrigger","label.updateTime",""]].concat(n)}},{key:"initData",value:function(){this.setState({edit:!1,webhook:null,url:"",secret:"",trigger:"1",events:JSON.parse(JSON.stringify(ta)),active:"1"})}},{key:"getEvents",value:function(e){var t=JSON.parse(JSON.stringify(ta));return e=e.split(","),t.map((function(t){return e.indexOf(t.event)>-1?t.checked=!0:t.checked=!1,!0})),t}},{key:"changeEvent",value:function(e){var t=this.state.events,a=!1;e.target.checked&&(a=!0),t.map((function(t){return t.event===e.target.value&&(t.checked=a),!0})),this.setState({events:t})}},{key:"getCheckedEvents",value:function(){var e=this.state.events,t=[];return e.map((function(e){return e.checked&&t.push(e.event),!0})),t.join(",")}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,r=t.intl,n=this.state,s=n.pending,o=n.webhooks,c=n.webhookLogs,l=n.isShowWebhookForm,p=n.url,d=n.secret,u=n.trigger,m=n.events,h=n.edit,g=n.active,b=n.error;return Object(oe.jsxs)(k.a,{container:!0,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsxs)(w.a,{variant:"h6",component:"div",className:a.header,children:[r.formatMessage({id:"label.webhookSetting"}),!l&&Object(oe.jsx)(_.a,{color:"primary",disableElevation:!0,variant:"contained",disabled:s,onClick:function(t){return e.setState({isShowWebhookForm:!0})},children:r.formatMessage({id:"label.createWebhook"})})]})}),l&&Object(oe.jsxs)(i.a.Fragment,{children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"h6",component:"div",children:r.formatMessage({id:h?"label.updateWebhook":"label.createWebhook"})})}),Object(oe.jsxs)(k.a,{container:!0,className:a.webhookForm,children:[Object(oe.jsx)(k.a,{item:!0,xs:3}),Object(oe.jsx)(k.a,{item:!0,xs:6,children:Object(oe.jsxs)(k.a,{container:!0,spacing:2,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsxs)(w.a,{variant:"subtitle1",component:"div",children:[r.formatMessage({id:"label.url"})," ",Object(oe.jsx)("span",{className:a.need,children:"*"})]})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(E.a,{fullWidth:!0,variant:"outlined",placeholder:r.formatMessage({id:"message.error._S_empty"},{s:r.formatMessage({id:"label.url"})}),value:p,error:!!b.url,helperText:b.url,onChange:function(t){return e.setState({url:t.target.value})}})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"subtitle1",component:"div",children:r.formatMessage({id:"label.contentType"})})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"body1",component:"div",children:"application/json"})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsxs)(w.a,{variant:"subtitle1",component:"div",children:[r.formatMessage({id:"label.webhookSecret"}),"\xa0",Object(oe.jsx)(Oe,{type:"icon",doc:"/repo/webhooks.md"})]})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(E.a,{fullWidth:!0,variant:"outlined",placeholder:r.formatMessage({id:"message.error._S_empty"},{s:r.formatMessage({id:"label.webhookSecret"})}),value:d,error:!!b.secret,helperText:b.secret,onChange:function(t){return e.setState({secret:t.target.value})}})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"subtitle1",component:"div",children:r.formatMessage({id:"label.webhookTrigger"})})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsxs)(Xt.a,{value:u,onChange:function(t){return e.setState({trigger:t.target.value})},children:[Object(oe.jsx)(Qt.a,{value:"1",control:Object(oe.jsx)(Yt.a,{}),label:r.formatMessage({id:"label.pushTrigger"})}),Object(oe.jsx)(Qt.a,{value:"2",control:Object(oe.jsx)(Yt.a,{}),label:Object(oe.jsxs)(i.a.Fragment,{children:[Object(oe.jsx)(w.a,{variant:"body1",component:"span",children:r.formatMessage({id:"label.customeTrigger"})}),"\xa0",Object(oe.jsx)(Oe,{type:"icon",doc:"/repo/webhooks.md"})]})})]})}),"2"===u&&Object(oe.jsx)(k.a,{item:!0,xs:12,children:m.map((function(t,a){return Object(oe.jsx)(Qt.a,{control:Object(oe.jsx)(ea.a,{checked:t.checked,onChange:function(t){return e.changeEvent(t)},value:t.event}),label:"string"===typeof t.title?r.formatMessage({id:t.title}):r.formatMessage({id:t.title[0]},{s:r.formatMessage({id:t.title[1]})})})}))}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"subtitle1",component:"div",children:r.formatMessage({id:"label.status"})})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsxs)(Xt.a,{value:g,onChange:function(t){e.setState({active:t.target.value})},row:!0,children:[Object(oe.jsx)(Qt.a,{value:"1",control:Object(oe.jsx)(Yt.a,{}),label:r.formatMessage({id:"label.enable"})}),Object(oe.jsx)(Qt.a,{value:"2",control:Object(oe.jsx)(Yt.a,{}),label:r.formatMessage({id:"label.disable"})})]})}),Object(oe.jsxs)(k.a,{item:!0,xs:12,align:"right",children:[Object(oe.jsx)(_.a,{color:"primary",variant:"outlined",disableElevation:!0,disabled:s,onClick:function(t){h&&e.initData(),e.setState({isShowWebhookForm:!1})},children:r.formatMessage({id:"label.cancel"})}),Object(oe.jsxs)(_.a,{color:"primary",variant:"contained",disableElevation:!0,className:a.btn,disabled:s,onClick:function(t){return e.editWebhook()},children:[s&&Object(oe.jsx)(he.a,{size:"1rem",color:"inherit"}),r.formatMessage({id:h?"label.update":"label.create"})]})]})]})})]})]}),!l&&Object(oe.jsxs)(i.a.Fragment,{children:[Object(oe.jsxs)(k.a,{container:!0,spacing:2,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"h6",component:"div",children:r.formatMessage({id:"label.webhookList"})})}),o?o.length>0?Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(ke,{data:this.getTableData()})}):Object(oe.jsx)(k.a,{container:!0,spacing:2,className:a.loading,children:Object(oe.jsx)(w.a,{variant:"body2",component:"div",children:r.formatMessage({id:"message.webhookListEmpty"})})}):Object(oe.jsx)(k.a,{container:!0,spacing:2,className:a.loading,children:Object(oe.jsx)(he.a,{})})]}),c&&Object(oe.jsxs)(k.a,{container:!0,spacing:2,className:a.logs,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsxs)(w.a,{variant:"h5",component:"div",children:[r.formatMessage({id:"label.webhookLog"}),"\xa0\xa0",Object(oe.jsxs)(w.a,{variant:"body2",component:"span",children:["(",r.formatMessage({id:"message.show_n_record"},{n:30}),")"]})]})}),Object(oe.jsx)(na,{list:c})]})]})]})}}]),a}(i.a.Component),oa=Object(R.b)(Object(C.a)((function(e){return{loading:{paddingTop:e.spacing(16),paddingBottom:e.spacing(16),justifyContent:"center"},header:{display:"flex",marginBottom:e.spacing(4),justifyContent:"space-between",lineHeight:e.spacing(5)+"px",borderBottom:"1px solid "+e.palette.border,fontSize:"18px"},webhookForm:{paddingTop:e.spacing(6),marginBottom:e.spacing(2),paddingBottom:e.spacing(6)},btn:{verticalAlign:"bottom",marginTop:e.spacing(2),marginLeft:e.spacing(3)},icon:{color:e.palette.text.light},need:{color:"red"},logs:{marginTop:e.spacing(3)},dot:{width:e.spacing(1),height:e.spacing(1),borderRadius:"50%",backgroundColor:e.palette.primary.main},close:{backgroundColor:e.palette.error.main},cursorPointer:{cursor:"pointer"}}}))(Object(l.b)((function(e,t){return{currentRepositoryKey:e.DataStore.currentRepositoryKey}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(sa))),ca=a(560),la=a(558),pa=a(559),da=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.currentUserInfo,a=e.item,r=e.classes,i=e.intl;return Object(oe.jsxs)(k.a,{container:!0,spacing:2,children:[Object(oe.jsx)(k.a,{item:!0,children:Object(oe.jsx)(Le.a,{src:D.HOSTS.PGYER_AVATAR_HOST+a.icon,className:r.avatar})}),Object(oe.jsx)(k.a,{item:!0,children:Object(oe.jsxs)(w.a,{variant:"body1",component:"div",className:r.userName,children:[a.name," \xa0",t.id===a.id&&Object(oe.jsx)(Ke,{text:i.formatMessage({id:"label.yourself"})})]})})]})}}]),a}(i.a.Component),ua=Object(R.b)(Object(ge.a)(Object(C.a)((function(e){return{avatar:{width:e.spacing(4),height:e.spacing(4)},userName:{lineHeight:e.spacing(4)+"px"}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentUserInfo:e.DataStore.currentUserInfo}}),(function(e,t){return{}}))(da))))),ma=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"update",value:function(e){"number"===typeof e?this.props.onUpdate(e):this.props.onRemove(e)}},{key:"render",value:function(){var e=this,t=this.props,a=t.item,r=t.intl,n=t.disabled,s=t.classes;return n=n||a.creatorFlag||a.deleteFlag,Object(oe.jsxs)(i.a.Fragment,{children:[Object(oe.jsx)(Ne.a,{children:Object(oe.jsx)(ua,{item:a})}),Object(oe.jsx)(Ne.a,{children:a.email}),Object(oe.jsx)(Ne.a,{className:s.padding,align:"right",children:Object(oe.jsxs)(E.a,{select:!0,disabled:n,className:n?s.disabled:"",value:a.role,onChange:function(t){return t.target.value&&e.update(t.target.value)},align:"right",InputProps:{classes:{underline:s.underline}},children:[Object(oe.jsx)(la.a,{disableSticky:!0,children:r.formatMessage({id:"label.role"})}),Object(oe.jsx)(lt.a,{value:L.Role.GUEST,children:r.formatMessage({id:"label.guest"})},L.Role.GUEST),Object(oe.jsx)(lt.a,{value:L.Role.REPORTER,children:r.formatMessage({id:"label.reporter"})},L.Role.REPORTER),Object(oe.jsx)(lt.a,{value:L.Role.DEVELOPER,children:r.formatMessage({id:"label.developer"})},L.Role.DEVELOPER),Object(oe.jsx)(lt.a,{value:L.Role.MAINTAINER,children:r.formatMessage({id:"label.maintianer"})},L.Role.MAINTAINER),Object(oe.jsx)(lt.a,{value:L.Role.OWNER,children:r.formatMessage({id:"label.owner"})},L.Role.OWNER),Object(oe.jsx)(pa.a,{className:s.split}),Object(oe.jsxs)(lt.a,{value:a.id,className:s.deleteMember,children:[Object(oe.jsx)(fe.a,{icon:je.H}),"\xa0\xa0",r.formatMessage({id:"label.removeMember"})]},a.id)]})})]})}}]),a}(i.a.Component),ha=Object(R.b)(Object(ge.a)(Object(C.a)((function(e){return{padding:{paddingRight:e.spacing(1)},underline:{"&&&:before":{borderBottom:"none"},"&&:after":{borderBottom:"none"}},backgroundColor:{"&&&:focus":{backgroundColor:"none"}},deleteMember:{color:e.palette.error.main},split:{margin:e.spacing(1)+"px 0px"},disabled:{"& svg":{opacity:0}}}}))(Object(h.f)(Object(l.b)((function(e,t){return{}}),(function(e,t){return{}}))(ma))))),ga=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"deleteConfirm",value:function(e,t){var a=this,r=this.props,i=r.intl,n=r.removeMember,s=r.isRepository,o=r.currentConfig;this.props.dispatchEvent(ae.addComformation("branch_remove",{title:i.formatMessage({id:"message.confirmDelete"},{s:i.formatMessage({id:"label.member"})+" '"+t+"' "}),description:"",reject:function(){return!0},accept:function(){n(s?o.repository.id:o.group.id,e),a.props.dispatchEvent(ae.cancelComformation())}}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.intl,r=t.classes,n=t.currentConfig,s=t.changeMemberRole,o=t.isRepository,c=t.groupMember,l=t.currentUserInfo,p=c?n.members.filter(U.notDeleted()).filter(U.groupMember()):n.members.filter(U.notDeleted()).filter(U.notGroupMember()),d=n.members.filter(U.id(l.id))[0];return Object(oe.jsx)(i.a.Fragment,{children:n?Object(oe.jsx)(ca.a,{component:M.a,children:Object(oe.jsxs)(Se.a,{children:[Object(oe.jsx)(Re.a,{children:Object(oe.jsxs)(Me.a,{className:r.textMain,children:[Object(oe.jsx)(Ne.a,{width:"40%",children:c?a.formatMessage({id:"label.groupMember"}):a.formatMessage({id:"label.repositoryMember"})}),Object(oe.jsx)(Ne.a,{width:"40%",children:a.formatMessage({id:"label.email"})}),Object(oe.jsxs)(Ne.a,{width:"20%",align:"right",children:[a.formatMessage({id:"label.role"})," ",Object(oe.jsx)(Oe,{doc:"/common/role.md",type:"icon"})]})]})}),Object(oe.jsx)(Ce.a,{children:p.map((function(t,a){return Object(oe.jsx)(Me.a,{className:r.tableRow,children:Object(oe.jsx)(ha,{item:t,disabled:d.role<L.Role.MAINTAINER,onUpdate:function(e){return s(o?n.repository.id:n.group.id,t.id,e)},onRemove:function(a){return e.deleteConfirm(a,t.name)}},a)},a)}))})]})}):Object(oe.jsx)(k.a,{container:!0,spacing:2,className:r.empty,children:a.formatMessage({id:"message.repositoryEmpty"})})})}}]),a}(i.a.Component),ba=Object(R.b)(Object(C.a)((function(e){return{textMain:{"& a":{color:e.palette.text.main+" !important"}},textLight:{"& a":{color:e.palette.text.light+" !important"}},empty:{paddingTop:e.spacing(16),paddingBottom:e.spacing(16),justifyContent:"center"},tableRow:{height:e.spacing(7)}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentUserInfo:e.DataStore.currentUserInfo}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(ga)))),fa=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={pending:!1,groupConfig:{},email:"",error:{}},r.mountedFlag=!1,r.checkInput=se.stateValidator(Object(N.a)(r),[{name:"email",passPattern:/^.+$/,errorMessage:r.props.intl.formatMessage({id:"message.error._S_empty"},{s:r.props.intl.formatMessage({id:"label.email"})})},{name:"email",passPattern:/^.+@[^.]+\..+$/,errorMessage:r.props.intl.formatMessage({id:"message.error._S_invalid"},{s:r.props.intl.formatMessage({id:"label.email"})})}]),r.checkResponse=se.codeValidator(Object(N.a)(r),[{name:"email",exceptionCode:1031,errorMessage:r.props.intl.formatMessage({id:"message.error._S_notFound"},{s:r.props.intl.formatMessage({id:"label.email"})})},{name:"email",exceptionCode:1032,errorMessage:r.props.intl.formatMessage({id:"message.error.canNotAddCreatorAsMember"})}]),r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.mountedFlag=!0}},{key:"shouldComponentUpdate",value:function(e,t){return this.state.email===t.email||0!==t.email.length||(this.setState({error:{}}),!1)}},{key:"componentWillUnmount",value:function(){this.mountedFlag=!1}},{key:"addMembers",value:function(){var e=this;if(!this.checkInput())return!0;var t={repository:this.props.currentRepositoryConfig.repository.id,email:this.state.email};return this.setState({pending:!0}),Ht.addMember(t).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){t.code?e.checkResponse(t.code)?t.code>1024&&(e.props.dispatchEvent(ae.NewNotification(e.props.intl.formatMessage({id:"message.error.AddFail"}),2)),e.setState({pending:!1})):e.setState({pending:!1}):(e.setState({pending:!1,email:""}),e.props.dispatchEvent(ae.NewNotification(e.props.intl.formatMessage({id:"message.Added"}),0)),e.reloadRepositoryData())})),!0}},{key:"changeMemberRole",value:function(e,t,a){var r=this,i={repository:e,userID:t,roleID:a};Ht.changeMemberRole(i).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(e){e.code?e.code>1024&&r.props.dispatchEvent(ae.NewNotification(r.props.intl.formatMessage({id:"message.error.updateFail"}),2)):(r.props.dispatchEvent(ae.NewNotification(r.props.intl.formatMessage({id:"message.updated"}),0)),r.reloadRepositoryData())}))}},{key:"removeMember",value:function(e,t){var a=this,r={repository:e,userID:t};Ht.removeMember(r).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(e){e.code?e.code>1024&&a.props.dispatchEvent(ae.NewNotification(a.props.intl.formatMessage({id:"message.error.removeFail"}),2)):(a.props.dispatchEvent(ae.NewNotification(a.props.intl.formatMessage({id:"message.removed"}),0)),a.reloadRepositoryData())}))}},{key:"reloadRepositoryData",value:function(){var e=this;Ht.config({rKey:this.props.currentRepositoryConfig.repository.id}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){t.code||e.props.dispatchEvent({type:"data.currentRepositoryConfig.update",data:t.data})}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.currentRepositoryConfig,r=t.classes,i=t.intl;return Object(oe.jsxs)(k.a,{container:!0,children:[Object(oe.jsxs)(k.a,{container:!0,justifyContent:"flex-end",className:r.marginBottom,children:[Object(oe.jsx)(k.a,{item:!0,xs:3,children:Object(oe.jsx)(E.a,{fullWidth:!0,value:this.state.email,error:!!this.state.error.email,helperText:this.state.error.email,onChange:function(t){return e.setState({email:t.target.value})},onKeyDown:function(t){13===t.keyCode&&e.addMembers()},variant:"outlined",placeholder:i.formatMessage({id:"message.plsInputInvitedEmail"})})}),Object(oe.jsx)(k.a,{item:!0,children:Object(oe.jsxs)(_.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:function(t){return e.addMembers()},disabled:this.state.pending,children:[this.state.pending?[Object(oe.jsx)(he.a,{size:"1rem",color:"inherit"})," "]:"",i.formatMessage({id:"label.inviteMember"})]})})]}),Object(oe.jsx)(k.a,{container:!0,spacing:2,className:r.marginBottom,children:a.repository?Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(ba,{currentConfig:a,changeMemberRole:function(t,a,r){return e.changeMemberRole(t,a,r)},removeMember:function(t,a){return e.removeMember(t,a)},isRepository:Boolean(!0),groupMember:Boolean(!1)})}):Object(oe.jsx)(k.a,{container:!0,spacing:2,className:r.loading,children:Object(oe.jsx)(he.a,{})})}),Object(oe.jsx)(k.a,{container:!0,spacing:2,children:a.members?a.members.filter(U.notDeleted()).filter(U.groupMember()).length>0&&Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(ba,{currentConfig:a,changeMemberRole:function(t,a,r){return e.changeMemberRole(t,a,r)},removeMember:function(t,a){return e.removeMember(t,a)},isRepository:Boolean(!0),groupMember:Boolean(!0)})}):Object(oe.jsx)(k.a,{container:!0,spacing:2,className:r.loading,children:Object(oe.jsx)(he.a,{})})})]})}}]),a}(i.a.Component),ja=Object(R.b)(Object(C.a)((function(e){return{paper:{padding:e.spacing(2)},btn:{marginRight:e.spacing(2)},loading:{paddingTop:e.spacing(16),paddingBottom:e.spacing(16),justifyContent:"center"},marginBottom:{marginBottom:e.spacing(4)}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentRepositoryConfig:e.DataStore.currentRepositoryConfig}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(fa))));var va={list:function(){return ee.GET("/api/group/list")},create:function(e){return ee.POST("/api/group/create",e)},config:function(e){return ee.GET("/api/group/config",null,e)},mergeRequests:function(e){return ee.GET("/api/group/mergeRequests",null,e)},activities:function(e){return ee.GET("/api/group/activities",null,e)},uploadAvatar:function(e){return ee.POST("/api/group/uploadAvatar",e)},update:function(e){return ee.POST("/api/group/update",e)},addMember:function(e){return ee.POST("/api/group/addMember",e)},changeMemberRole:function(e){return ee.POST("/api/group/changeMemberRole",e)},removeMember:function(e){return ee.POST("/api/group/removeMember",e)},changeOwner:function(e){return ee.POST("/api/group/changeOwner",e)},updateName:function(e){return ee.POST("/api/group/updateName",e)},deleteGroup:function(e){return ee.POST("/api/group/deleteGroup",e)}},Oa=Object(C.a)((function(e){return{root:{minHeight:e.spacing(6)}}}))(lt.a),ya=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={pending:!1,groupConfig:{},slug:"",error:{}},r.mountedFlag=!1,r.checkInput=se.stateValidator(Object(N.a)(r),[{name:"slug",passPattern:/^.+$/,errorMessage:r.props.intl.formatMessage({id:"message.error._S_empty"},{s:r.props.intl.formatMessage({id:"label.repositorySlug"})})},{name:"slug",passPattern:/^[0-9a-zA-z_]+$/,errorMessage:r.props.intl.formatMessage({id:"message.error.requireCombinationOfCharactersNumbersAndUnderscore"})},{name:"slug",passPattern:/^.{0,30}$/,errorMessage:r.props.intl.formatMessage({id:"message.error.noMoreThan_N_characters"},{n:30})}]),r.checkResponse=se.codeValidator(Object(N.a)(r),[{name:"slug",exceptionCode:1025,errorMessage:r.props.intl.formatMessage({id:"message.error._S_duplicate"},{s:r.props.intl.formatMessage({id:"label.repositorySlug"})})}]),r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.mountedFlag=!0}},{key:"shouldComponentUpdate",value:function(e,t){return""!==t.slug||!e.currentRepositoryConfig.repository||(this.setState({slug:e.currentRepositoryConfig.repository.name}),!1)}},{key:"componentWillUnmount",value:function(){this.mountedFlag=!1,this.setState({slug:""})}},{key:"deleteRepository",value:function(){var e=this;this.props.dispatchEvent(ae.addComformation("repository_delete_repository",{title:this.props.intl.formatMessage({id:"label.dangerOperation"}),description:this.props.intl.formatMessage({id:"message.repositoryDeleteRepositoryNotice"}),reject:function(){return!0},accept:function(){e.deleteRepositoryConfirmed(),e.props.dispatchEvent(ae.cancelComformation())}}))}},{key:"deleteRepositoryConfirmed",value:function(){var e=this;this.props.dispatchEvent(ae.addComformation("repository_delete_repository_confirm",{title:this.props.intl.formatMessage({id:"label.dangerOperationConfirm"}),description:this.props.intl.formatMessage({id:"message.repositoryDeleteRepositoryConfirmNotice"}),reject:function(){return!0},accept:function(){var t={repository:e.props.currentRepositoryConfig.repository.id};e.setState({pending:!0}),Ht.deleteRepository(t).then(ne.withEventdispatcher(e.props.dispatchEvent)(ne.getJSONData)).then((function(t){t.code?t.code>1024&&e.props.dispatchEvent(ae.NewNotification(e.props.intl.formatMessage({id:"message.error.deleteFail"}),0)):(e.reloadRepositoryGroupList(),e.props.dispatchEvent(ae.NewNotification(e.props.intl.formatMessage({id:"message.deleted"}),0)),e.props.history.push(W("repositories"))),e.props.dispatchEvent(ae.cancelComformation()),e.setState({pending:!1})}))}}))}},{key:"changeSlug",value:function(){var e=this;if(!this.checkInput())return!1;this.props.dispatchEvent(ae.addComformation("repository_change_slug",{title:this.props.intl.formatMessage({id:"label.dangerOperation"}),description:this.props.intl.formatMessage({id:"message.repositoryChangeURLNotice"}),reject:function(){return!0},accept:function(){var t={repository:e.props.currentRepositoryConfig.repository.id,name:e.state.slug};e.setState({pending:!0}),Ht.updateName(t).then(ne.withEventdispatcher(e.props.dispatchEvent)(ne.getJSONData)).then((function(t){t.code?e.checkResponse(t.code)&&t.code>1024&&e.props.dispatchEvent(ae.NewNotification(e.props.intl.formatMessage({id:"message.error.updateFail"}),2)):(e.reloadRepositoryData(),e.reloadRepositoryGroupList(),e.props.dispatchEvent(ae.NewNotification(e.props.intl.formatMessage({id:"message.updated"}),0)),e.props.history.push(W("repositories"))),e.setState({pending:!1}),e.props.dispatchEvent(ae.cancelComformation())}))}}))}},{key:"changeOwner",value:function(e){var t=this;this.props.dispatchEvent(ae.addComformation("repository_change_creator",{title:this.props.intl.formatMessage({id:"label.dangerOperation"}),description:this.props.intl.formatMessage({id:"message.repositoryChangeCreatorNotice"}),reject:function(){return!0},accept:function(){var a={repository:t.props.currentRepositoryConfig.repository.id,userID:e};t.setState({pending:!0}),Ht.changeOwner(a).then(ne.withEventdispatcher(t.props.dispatchEvent)(ne.getJSONData)).then((function(e){e.code?e.code>1024&&t.props.dispatchEvent(ae.NewNotification(t.props.intl.formatMessage({id:"message.updateFail"}),2)):(t.reloadRepositoryData(),t.props.dispatchEvent(ae.NewNotification(t.props.intl.formatMessage({id:"message.updated"}),0))),t.props.dispatchEvent(ae.cancelComformation()),t.setState({pending:!1})}))}}))}},{key:"reloadRepositoryData",value:function(){var e=this;Ht.config({rKey:this.props.currentRepositoryConfig.repository.id}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){t.code||e.props.dispatchEvent({type:"data.currentRepositoryConfig.update",data:t.data})}))}},{key:"reloadRepositoryGroupList",value:function(){var e=this;Ht.list().then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){t.code||e.props.dispatchEvent({type:"data.repositoryList.update",data:t.data})})),va.list().then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){t.code||e.props.dispatchEvent({type:"data.groupList.update",data:t.data})}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.currentRepositoryConfig,r=t.currentUserInfo,i=t.classes,n=t.intl;return Object(oe.jsxs)(k.a,{container:!0,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"h6",component:"div",gutterBottom:!0,className:i.header,children:n.formatMessage({id:"label.repositoryAdvancedSetting"})})}),a.repository?Object(oe.jsxs)(k.a,{container:!0,spacing:2,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"subtitle1",component:"div",children:n.formatMessage({id:"label.updateCreator"})})}),Object(oe.jsx)(k.a,{item:!0,xs:7,children:Object(oe.jsx)(E.a,{fullWidth:!0,variant:"outlined",select:!0,value:a.repository.owner,onChange:function(t){return e.changeOwner(t.target.value)},children:a.members.map((function(e,t){return Object(oe.jsx)(Oa,{value:e.id,children:Object(oe.jsx)(ua,{item:e})},t)}))})}),Object(oe.jsx)(k.a,{item:!0,xs:12,className:i.section,children:Object(oe.jsx)(w.a,{variant:"subtitle1",component:"div",children:n.formatMessage({id:"label.updateRepositoryURL"})})}),Object(oe.jsx)(k.a,{item:!0,xs:7,children:Object(oe.jsxs)(k.a,{container:!0,spacing:2,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(E.a,{fullWidth:!0,variant:"outlined",value:this.state.slug,error:!!this.state.error.slug,helperText:this.state.error.slug,InputProps:{startAdornment:Object(oe.jsxs)(Gt.a,{position:"start",children:[ne.getHost(r),"/",a.group.name,"/"]})},onChange:function(t){var a=ne.makeSlug(t.target.value);e.setState({slug:a})}})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsxs)(_.a,{color:"primary",variant:"contained",disableElevation:!0,onClick:function(t){return e.changeSlug()},disabled:this.state.pending,children:[this.state.pending?Object(oe.jsx)(he.a,{size:"1rem",color:"inherit"}):Object(oe.jsx)(fe.a,{icon:Ge.d}),"\xa0 ",n.formatMessage({id:"label.save"})]})}),Object(oe.jsx)(k.a,{item:!0,xs:12,className:i.section,children:Object(oe.jsx)(w.a,{variant:"subtitle1",component:"div",children:n.formatMessage({id:"label.deleteRepository"})})}),Object(oe.jsxs)(k.a,{item:!0,xs:12,children:[Object(oe.jsx)(w.a,{variant:"body2",children:n.formatMessage({id:"message.repositoryDeleteTipFirst"})}),Object(oe.jsx)(w.a,{variant:"body2",children:n.formatMessage({id:"message.repositoryDeleteTipSecond"})})]}),Object(oe.jsx)(k.a,{item:!0,xs:7,children:Object(oe.jsxs)(_.a,{variant:"contained",disableElevation:!0,onClick:function(t){return e.deleteRepository()},className:i.warning,disabled:this.state.pending,children:[this.state.pending?Object(oe.jsx)(he.a,{size:"1rem",color:"inherit"}):Object(oe.jsx)(fe.a,{icon:je.H}),"\xa0 ",n.formatMessage({id:"label.deleteRepository"})]})})]})})]}):Object(oe.jsx)(k.a,{container:!0,spacing:2,className:i.loading,children:Object(oe.jsx)(he.a,{})})]})}}]),a}(i.a.Component),xa=Object(R.b)(Object(C.a)((function(e){return{header:{lineHeight:e.spacing(5)+"px",marginBottom:e.spacing(4),borderBottom:"1px solid "+e.palette.border,fontSize:"18px"},section:{marginTop:e.spacing(3)},paper:{padding:e.spacing(2)},btn:{marginRight:e.spacing(2)},loading:{paddingTop:e.spacing(16),paddingBottom:e.spacing(16),justifyContent:"center"},warning:{backgroundColor:e.palette.error.main,color:e.palette.error.contrastText}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentRepositoryConfig:e.DataStore.currentRepositoryConfig,currentUserInfo:e.DataStore.currentUserInfo}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(ya)))),Sa=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.theme,r=e.history,i=e.groupInfo,n=e.repositoryList,s=e.intl;return Object(oe.jsx)(tt.a,{className:t.card,onClick:function(){r.push(W("groups",i.name))},children:Object(oe.jsx)(at.a,{className:t.content,style:{paddingBottom:a.spacing(2)},component:"div",children:Object(oe.jsxs)(k.a,{container:!0,spacing:2,justifyContent:"space-between",children:[Object(oe.jsx)(k.a,{item:!0,children:Object(oe.jsxs)(k.a,{container:!0,spacing:3,className:"width-auto",children:[Object(oe.jsx)(k.a,{item:!0,children:i.icon?Object(oe.jsx)(Le.a,{variant:"square",className:t.icon,src:D.HOSTS.STATIC_AVATAR_PREFIX+i.icon}):Object(oe.jsx)(Le.a,{variant:"square",className:t.icon,children:i.name.substr(0,1).toUpperCase()})}),Object(oe.jsxs)(k.a,{item:!0,className:t.title,children:[Object(oe.jsx)(w.a,{variant:"subtitle1",component:"div",className:"text-overflow",children:i.displayName}),Object(oe.jsx)(w.a,{variant:"body1",className:t.ownerMarker,children:Object(oe.jsx)(Ke,{color:i.role===L.Role.OWNER?"containedInfo":"info",text:s.formatMessage({id:"label.roleID_"+i.role})})})]})]})}),Object(oe.jsx)(k.a,{item:!0,children:Object(oe.jsx)(Ie,{label:"label.setting",icon:je.E,onClick:function(e){e.stopPropagation(),r.push(W("groups",i.name,"settings"))}})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"caption",component:"div",className:[t.description,"text-overflow"].join(" "),children:i.description||"..."})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsxs)(w.a,{variant:"body2",component:"span",children:[Object(oe.jsx)(fe.a,{icon:je.B,className:t.listIcon})," \xa0",n.filter(U.group(i.id)).length," \xa0\xa0\xa0\xa0",Object(oe.jsx)(fe.a,{icon:je.v,className:t.listIcon})," \xa0",i.members.length]})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(pa.a,{})}),Object(oe.jsx)(k.a,{container:!0,item:!0,xs:12,children:i.members.map((function(e,a){return e.icon?Object(oe.jsx)(Le.a,{className:t.avatar,src:D.HOSTS.PGYER_AVATAR_HOST+e.icon},a):Object(oe.jsx)(Le.a,{className:t.avatar,children:e.name.substr(0,1).toUpperCase()},a)}))})]})})})}}]),a}(r.Component),Ca=Object(R.b)(Object(ge.a)(Object(C.a)((function(e){return{card:{cursor:"pointer",transition:e.transitions.create("box-shadow"),boxShadow:e.boxShadow.card,"&:hover":{boxShadow:e.boxShadow.cardHover}},content:{padding:e.spacing(3),paddingBottom:e.spacing(2)},icon:{width:e.spacing(6),height:e.spacing(6)},title:{maxWidth:e.spacing(16),overflow:"hidden"},ownerMarker:{lineHeight:e.spacing(3)+"px"},description:{height:e.spacing(1.5),lineHeight:e.spacing(1.5)+"px"},avatar:{marginRight:e.spacing(1),width:e.spacing(3),height:e.spacing(3)}}}))(Object(h.f)(Object(l.b)((function(e,t){return{repositoryList:e.DataStore.repositoryList}}),(function(e,t){return{}}))(Sa))))),Na=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={currentTab:0},r}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.groupList,r=t.currentUserInfo,i=t.classes,n=t.intl,s=[n.formatMessage({id:"label.all"}),n.formatMessage({id:"label.IJoined"}),n.formatMessage({id:"label.ICreated"})],o=[function(){return!0},U.not(U.creator(r.id)),U.creator(r.id)],c=a.filter(U.withPermission(L.PermissionCode.REPO_READ)).filter(o[this.state.currentTab]);return Object(oe.jsxs)(k.a,{container:!0,spacing:3,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(ft,{tabs:s,currentTab:this.state.currentTab,onChange:function(t,a){e.setState({currentTab:a})},children:Object(oe.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(){e.props.history.push(W("groups","new"))},children:n.formatMessage({id:"label.newGroup"})})})}),c.map((function(e,t){return Object(oe.jsx)(k.a,{item:!0,xs:12,sm:6,md:4,lg:3,className:i.container,children:Object(oe.jsx)(Ca,{groupInfo:e},t)},t)})),0===c.length&&Object(oe.jsx)(Pt,{imageName:"repositories-empty.png",title:n.formatMessage({id:"message._S_listEmpty"},{s:n.formatMessage({id:"label.group"})}),notice:n.formatMessage({id:"message.groupListEmptyNotice"}),children:Object(oe.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(){e.props.history.push(W("groups","new"))},children:n.formatMessage({id:"label.newGroup"})})})]})}}]),a}(i.a.Component),Ra=Object(R.b)(Object(C.a)((function(e){return{container:{minWidth:e.spacing(40)}}}))(Object(l.b)((function(e,t){return{groupList:e.DataStore.groupList,currentUserInfo:e.DataStore.currentUserInfo}}),(function(e,t){return{}}))(Na))),Ma=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={pending:!0,personalGroupCreateFlag:!1,groupList:null,groupListChecked:!1,name:"",slug:"",description:"",error:{}},r.observed={forkRepositoryInfo:""},r.mountedFlag=!1,r.checkInput=se.stateValidator(Object(N.a)(r),[{name:"name",passPattern:/^.+$/,errorMessage:r.props.intl.formatMessage({id:"message.error._S_empty"},{s:r.props.intl.formatMessage({id:"label.groupName"})})},{name:"name",passPattern:/^.{5,30}$/,errorMessage:r.props.intl.formatMessage({id:"message.error.within_N1_to_N2_characters"},{n1:5,n2:30})},{name:"name",passPattern:/^[0-9a-zA-Z\\._-]+$/,errorMessage:r.props.intl.formatMessage({id:"message.error._S_has_illegal_character"},{s:r.props.intl.formatMessage({id:"label.groupName"})})},{name:"slug",passPattern:/^.+$/,errorMessage:r.props.intl.formatMessage({id:"message.error._S_empty"},{s:r.props.intl.formatMessage({id:"label.groupURL"})})},{name:"slug",passPattern:/^.{5,30}$/,errorMessage:r.props.intl.formatMessage({id:"message.error.within_N1_to_N2_characters"},{n1:5,n2:30})},{name:"slug",passPattern:/^[0-9a-zA-z_]+$/,errorMessage:r.props.intl.formatMessage({id:"message.error.requireCombinationOfCharactersNumbersAndUnderscore"})},{name:"description",passPattern:/^.{0,200}$/,errorMessage:r.props.intl.formatMessage({id:"message.error.noMoreThan_N_characters"},{n:200})}]),r.checkResponse=se.codeValidator(Object(N.a)(r),[{name:"slug",exceptionCode:1027,errorMessage:r.props.intl.formatMessage({id:"message.error._S_duplicate"},{s:r.props.intl.formatMessage({id:"label.groupURL"})})},{name:"name",exceptionCode:1028,errorMessage:r.props.intl.formatMessage({id:"message.error._S_duplicate"},{s:r.props.intl.formatMessage({id:"label.groupName"})})}]),r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.mountedFlag=!0,va.list().then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){t.code||(e.props.dispatchEvent({type:"data.groupList.update",data:t.data}),e.setState({groupList:t.data}))}))}},{key:"shouldComponentUpdate",value:function(e,t){if(e.currentUserInfo&&e.currentUserInfo.id&&null!==t.groupList&&!t.groupListChecked)if(t.groupList.filter(U.creator(e.currentUserInfo.id)).filter(U.userGroup()).length)this.setState({groupListChecked:!0,personalGroupCreateFlag:!1,pending:!1});else{var a=e.currentUserInfo.email.split("@");this.setState({groupListChecked:!0,personalGroupCreateFlag:!0,pending:!1,name:a[0],slug:ne.makeSlug(a[0])})}return!(this.state.description!==t.description&&t.description.length<201)||(this.setState({error:{}}),!1)}},{key:"componentWillUnmount",value:function(){this.mountedFlag=!1}},{key:"createGroup",value:function(){var e=this;if(!this.checkInput())return!0;var t={name:this.state.slug,type:this.state.personalGroupCreateFlag?B.USER:B.NORMAL,displayName:this.state.name,description:this.state.description};return this.setState({pending:!0}),va.create(t).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){if(t.code)e.checkResponse(t.code)?t.code>1024&&(e.props.dispatchEvent(ae.NewNotification(e.props.intl.formatMessage({id:"message.error.createGroupFail"}),2)),e.setState({pending:!1})):e.setState({pending:!1});else{var a=t.data;va.list().then(ne.withEventdispatcher(e.props.dispatchEvent)(ne.getJSONData)).then((function(t){t.code||(e.setState({pending:!1}),e.props.dispatchEvent({type:"data.groupList.update",data:t.data}),e.props.history.push(W("groups",a.name)))}))}})),!0}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,r=t.intl,i=t.currentUserInfo;return Object(oe.jsxs)(k.a,{container:!0,spacing:2,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"h6",component:"div",gutterBottom:!0,children:r.formatMessage({id:"label.newGroup"})})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(M.a,{className:a.paper,children:null!==this.state.groupList?Object(oe.jsxs)(k.a,{container:!0,spacing:2,children:[Object(oe.jsx)(k.a,{item:!0,xs:7,children:Object(oe.jsxs)(k.a,{container:!0,spacing:2,children:[this.state.personalGroupCreateFlag&&Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"body1",component:"div",gutterBottom:!0,children:r.formatMessage({id:"message.createPersonalGroupNotice"})})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"subtitle1",component:"div",children:r.formatMessage({id:"label.groupName"})})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(E.a,{fullWidth:!0,variant:"outlined",placeholder:r.formatMessage({id:"message.error.input_S_placeholder"},{s:r.formatMessage({id:"label.groupName"})}),value:this.state.name,error:!!this.state.error.name,helperText:this.state.error.name,onChange:function(t){var a=t.target.value,r=ne.makeSlug(a);e.setState({name:a,slug:r,error:{}})}})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"subtitle1",component:"div",children:r.formatMessage({id:"label.groupURL"})})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(E.a,{fullWidth:!0,variant:"outlined",placeholder:r.formatMessage({id:"message._S_empty"},{s:r.formatMessage({id:"label.path"})}),value:this.state.slug,error:!!this.state.error.slug,helperText:this.state.error.slug,InputProps:{startAdornment:Object(oe.jsxs)(Gt.a,{position:"start",children:[ne.getHost(i),"/"]})},onChange:function(t){var a=ne.makeSlug(t.target.value);e.setState({slug:a})}})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"subtitle1",component:"div",children:r.formatMessage({id:"label.groupDescription"})})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(E.a,{fullWidth:!0,variant:"outlined",multiline:!0,rows:5,value:this.state.description,error:!!this.state.error.description,helperText:this.state.error.description,onChange:function(t){return e.setState({description:t.target.value})}})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(k.a,{container:!0,justifyContent:"flex-end",children:Object(oe.jsx)(k.a,{item:!0,xs:3,className:a.textRight,children:Object(oe.jsxs)(w.a,{variant:"subtitle1",component:"div",className:this.state.description.length>200?a.outRange:"",children:[this.state.description.length,"/200"]})})})}),Object(oe.jsxs)(k.a,{item:!0,xs:12,align:"right",children:[Object(oe.jsxs)(_.a,{variant:"outlined",color:"primary",disableElevation:!0,className:a.btn,disabled:this.state.pending,onClick:function(t){return e.props.history.push("/groups")},children:[Object(oe.jsx)(fe.a,{icon:Ge.k}),"\xa0 ",r.formatMessage({id:"label.cancel"})," \xa0"]}),Object(oe.jsxs)(_.a,{variant:"contained",color:"primary",disableElevation:!0,className:a.btn,disabled:this.state.pending,onClick:function(t){return e.createGroup()},children:[this.state.pending?Object(oe.jsx)(he.a,{size:"1rem",color:"inherit"}):Object(oe.jsx)(fe.a,{icon:Ge.h}),"\xa0 ",r.formatMessage({id:"label.ok"})," \xa0"]})]})]})}),Object(oe.jsx)(k.a,{item:!0,xs:3})]}):Object(oe.jsx)(k.a,{container:!0,spacing:2,children:Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(he.a,{})})})})})]})}}]),a}(i.a.Component),wa=Object(R.b)(Object(C.a)((function(e){return{paper:{padding:e.spacing(2)},btn:{marginLeft:e.spacing(2)},textRight:{textAlign:"right"},outRange:{color:e.palette.error.main}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentUserInfo:e.DataStore.currentUserInfo}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(Ma)))),ka=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={pending:!1,name:"",description:"",error:{}},r.mountedFlag=!1,r.checkInput=se.stateValidator(Object(N.a)(r),[{name:"name",passPattern:/^.+$/,errorMessage:r.props.intl.formatMessage({id:"message.error._S_empty"},{s:r.props.intl.formatMessage({id:"label.groupName"})})},{name:"name",passPattern:/^.{5,30}$/,errorMessage:r.props.intl.formatMessage({id:"message.error.within_N1_to_N2_characters"},{n1:5,n2:30})},{name:"name",passPattern:/^[0-9a-zA-Z\\._-]+$/,errorMessage:r.props.intl.formatMessage({id:"message.error._S_has_illegal_character"},{s:r.props.intl.formatMessage({id:"label.groupName"})})},{name:"description",passPattern:/^.{0,200}$/,errorMessage:r.props.intl.formatMessage({id:"message.error.noMoreThan_N_characters"},{n:200})}]),r.checkResponse=se.codeValidator(Object(N.a)(r),[{name:"name",exceptionCode:1028,errorMessage:r.props.intl.formatMessage({id:"message.error._S_duplicate"},{s:r.props.intl.formatMessage({id:"label.groupName"})})}]),r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.mountedFlag=!0,this.props.currentGroupConfig.group&&this.setState({name:this.props.currentGroupConfig.group.displayName,description:this.props.currentGroupConfig.group.description})}},{key:"shouldComponentUpdate",value:function(e,t){return JSON.stringify(e.currentGroupConfig)!==JSON.stringify(this.props.currentGroupConfig)&&e.currentGroupConfig.group?(this.setState({name:e.currentGroupConfig.group.displayName,description:e.currentGroupConfig.group.description}),!1):!(this.state.description!==t.description&&t.description.length<201)||(this.setState({error:{}}),!1)}},{key:"componentWillUnmount",value:function(){this.mountedFlag=!1}},{key:"updateGroup",value:function(){var e=this;if(!this.checkInput())return!0;var t={group:this.props.currentGroupConfig.group.id,displayName:this.state.name,description:this.state.description};return this.setState({pending:!0}),va.update(t).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){t.code?e.checkResponse(t.code)?t.code>1024&&(e.props.dispatchEvent(ae.NewNotification(e.props.intl.formatMessage({id:"message.error.updateFail"}),2)),e.setState({pending:!1})):e.setState({pending:!1}):(e.setState({pending:!1}),e.props.dispatchEvent(ae.NewNotification(e.props.intl.formatMessage({id:"message.updated"}),0)),e.reloadGroupData())})),!0}},{key:"avatarUploaded",value:function(e){e.code||(this.props.dispatchEvent(ae.NewNotification(this.props.intl.formatMessage({id:"message.updated"}),0)),this.reloadGroupData())}},{key:"reloadGroupData",value:function(){var e=this;Ht.list().then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){t.code||e.props.dispatchEvent({type:"data.repositoryList.update",data:t.data})})),va.list().then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){t.code||e.props.dispatchEvent({type:"data.groupList.update",data:t.data})})),va.config({gKey:this.props.currentGroupConfig.group.id}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){t.code||e.props.dispatchEvent({type:"data.currentGroupConfig.update",data:t.data})}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.currentGroupConfig,r=t.classes,i=t.intl;return Object(oe.jsxs)(k.a,{container:!0,spacing:2,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"h6",component:"div",gutterBottom:!0,className:r.header,children:i.formatMessage({id:"menu.general"})})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:a.group?Object(oe.jsxs)(k.a,{container:!0,spacing:2,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"subtitle1",component:"div",gutterBottom:!0,children:i.formatMessage({id:"label.groupAvatar"})})}),Object(oe.jsx)(k.a,{item:!0,xs:7,children:Object(oe.jsx)(qe,{name:"avatar",appendData:{group:a.group.id},src:a.group.icon?D.HOSTS.STATIC_AVATAR_PREFIX+a.group.icon:a.group.name.substr(0,1).toUpperCase(),onUpdate:function(t){return e.avatarUploaded(t)},dataProvider:va.uploadAvatar})}),Object(oe.jsx)(k.a,{item:!0,xs:3}),Object(oe.jsx)(k.a,{item:!0,xs:7,children:Object(oe.jsxs)(k.a,{container:!0,spacing:2,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"subtitle1",component:"div",children:i.formatMessage({id:"label.groupName"})})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(E.a,{fullWidth:!0,variant:"outlined",placeholder:i.formatMessage({id:"message.error._S_empty"},{s:i.formatMessage({id:"label.groupName"})}),value:this.state.name,error:!!this.state.error.name,helperText:this.state.error.name,onChange:function(t){var a=t.target.value,r=ne.makeSlug(a);e.setState({name:a,slug:r,error:{}})}})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"subtitle1",component:"div",children:i.formatMessage({id:"label.groupDescription"})})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(E.a,{fullWidth:!0,variant:"outlined",multiline:!0,rows:5,error:!!this.state.error.description,helperText:this.state.error.description,value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})}})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(k.a,{container:!0,justifyContent:"flex-end",children:Object(oe.jsx)(k.a,{item:!0,xs:3,className:r.textRight,children:Object(oe.jsxs)(w.a,{variant:"subtitle1",component:"div",className:this.state.description.length>200?r.outRange:"",children:[this.state.description.length,"/200"]})})})}),Object(oe.jsxs)(k.a,{item:!0,xs:12,style:{textAlign:"right"},children:[Object(oe.jsxs)(_.a,{variant:"contained",color:"primary",disableElevation:!0,className:r.btn,disabled:this.state.pending,onClick:function(t){return e.updateGroup()},children:[this.state.pending&&Object(oe.jsx)(he.a,{size:"1rem",color:"inherit"}),"\xa0 ",i.formatMessage({id:"label.update"})," \xa0"]}),Object(oe.jsxs)(_.a,{variant:"outlined",color:"primary",disableElevation:!0,className:r.btn,disabled:this.state.pending,onClick:function(t){return e.props.history.push("/groups")},children:["\xa0 ",i.formatMessage({id:"label.cancel"})," \xa0"]})]})]})}),Object(oe.jsx)(k.a,{item:!0,xs:3})]}):Object(oe.jsx)(k.a,{container:!0,spacing:2,children:Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(he.a,{})})})})]})}}]),a}(i.a.Component),_a=Object(R.b)(Object(C.a)((function(e){return{header:{lineHeight:e.spacing(5)+"px",marginBottom:e.spacing(1),borderBottom:"1px solid "+e.palette.border,fontSize:"18px"},paper:{padding:e.spacing(2)},btn:{marginLeft:e.spacing(2)},textRight:{textAlign:"right"},outRange:{color:e.palette.error.main}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentGroupConfig:e.DataStore.currentGroupConfig}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(ka)))),Ea=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={pending:!1,groupConfig:{},email:"",error:{}},r.mountedFlag=!1,r.checkInput=se.stateValidator(Object(N.a)(r),[{name:"email",passPattern:/^.+$/,errorMessage:r.props.intl.formatMessage({id:"message.error._S_empty"},{s:r.props.intl.formatMessage({id:"label.email"})})},{name:"email",passPattern:/^.+@[^.]+\..+$/,errorMessage:r.props.intl.formatMessage({id:"message.error._S_invalid"},{s:r.props.intl.formatMessage({id:"label.email"})})}]),r.checkResponse=se.codeValidator(Object(N.a)(r),[{name:"email",exceptionCode:1031,errorMessage:r.props.intl.formatMessage({id:"message.error._S_notFound"},{s:r.props.intl.formatMessage({id:"label.email"})})},{name:"email",exceptionCode:1032,errorMessage:r.props.intl.formatMessage({id:"message.error.canNotAddCreatorAsMember"})}]),r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.mountedFlag=!0}},{key:"shouldComponentUpdate",value:function(e,t){return this.state.email===t.email||0!==t.email.length||(this.setState({error:{}}),!1)}},{key:"componentWillUnmount",value:function(){this.mountedFlag=!1}},{key:"addMembers",value:function(){var e=this;if(!this.checkInput())return!0;var t={group:this.props.currentGroupConfig.group.id,email:this.state.email};return this.setState({pending:!0}),va.addMember(t).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){t.code?e.checkResponse(t.code)?t.code>1024&&(e.props.dispatchEvent(ae.NewNotification(e.props.intl.formatMessage({id:"message.error.AddFail"}),2)),e.setState({pending:!1})):e.setState({pending:!1}):(e.setState({pending:!1,email:""}),e.props.dispatchEvent(ae.NewNotification(e.props.intl.formatMessage({id:"message.Added"}),0)),e.reloadGroupData())})),!0}},{key:"changeMemberRole",value:function(e,t,a){var r=this,i={group:e,userID:t,roleID:a};va.changeMemberRole(i).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(e){e.code?e.code>1024&&r.props.dispatchEvent(ae.NewNotification(r.props.intl.formatMessage({id:"message.error.updateFail"}),2)):(r.props.dispatchEvent(ae.NewNotification(r.props.intl.formatMessage({id:"message.updated"}),0)),r.reloadGroupData())}))}},{key:"removeMember",value:function(e,t){var a=this,r={group:e,userID:t};va.removeMember(r).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(e){e.code?e.code>1024&&a.props.dispatchEvent(ae.NewNotification(a.props.intl.formatMessage({id:"message.error.removeFail"}),2)):(a.props.dispatchEvent(ae.NewNotification(a.props.intl.formatMessage({id:"message.removed"}),0)),a.reloadGroupData())}))}},{key:"reloadGroupData",value:function(){var e=this;Ht.list().then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){t.code||e.props.dispatchEvent({type:"data.repositoryList.update",data:t.data})})),va.config({gKey:this.props.currentGroupConfig.group.id}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){t.code||e.props.dispatchEvent({type:"data.currentGroupConfig.update",data:t.data})}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.currentGroupConfig,r=t.classes,i=t.intl;return Object(oe.jsxs)(k.a,{container:!0,children:[Object(oe.jsxs)(k.a,{container:!0,justifyContent:"flex-end",className:r.marginBottom,children:[Object(oe.jsx)(k.a,{item:!0,xs:3,children:Object(oe.jsx)(E.a,{fullWidth:!0,value:this.state.email,error:!!this.state.error.email,helperText:this.state.error.email,onChange:function(t){return e.setState({email:t.target.value})},onKeyDown:function(t){13===t.keyCode&&e.addMembers()},variant:"outlined",placeholder:i.formatMessage({id:"message.plsInputInvitedEmail"})})}),Object(oe.jsx)(k.a,{item:!0,children:Object(oe.jsxs)(_.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:function(t){return e.addMembers()},disabled:this.state.pending,children:[this.state.pending?[Object(oe.jsx)(he.a,{size:"1rem",color:"inherit"})," "]:"",i.formatMessage({id:"label.inviteMember"})]})})]}),Object(oe.jsx)(k.a,{container:!0,spacing:2,children:a.group?Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(ba,{currentConfig:a,changeMemberRole:function(t,a,r){return e.changeMemberRole(t,a,r)},removeMember:function(t,a){return e.removeMember(t,a)},isRepository:Boolean(!1),groupMember:Boolean(!0)})}):Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(he.a,{})})})]})}}]),a}(i.a.Component),Ta=Object(R.b)(Object(C.a)((function(e){return{btn:{marginRight:e.spacing(2)},loading:{paddingTop:e.spacing(16),paddingBottom:e.spacing(16),justifyContent:"center"},marginBottom:{marginBottom:e.spacing(4)}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentGroupConfig:e.DataStore.currentGroupConfig}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(Ea)))),Aa=Object(C.a)((function(e){return{root:{minHeight:e.spacing(6)}}}))(lt.a),Da=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={pending:!1,slug:"",error:{}},r.mountedFlag=!1,r.checkInput=se.stateValidator(Object(N.a)(r),[{name:"slug",passPattern:/^.+$/,errorMessage:r.props.intl.formatMessage({id:"message.error._S_empty"},{s:r.props.intl.formatMessage({id:"label.groupSlug"})})},{name:"slug",passPattern:/^[0-9a-zA-z_]+$/,errorMessage:r.props.intl.formatMessage({id:"message.error.requireCombinationOfCharactersNumbersAndUnderscore"})},{name:"slug",passPattern:/^.{0,30}$/,errorMessage:r.props.intl.formatMessage({id:"message.error.noMoreThan_N_characters"},{n:30})}]),r.checkResponse=se.codeValidator(Object(N.a)(r),[{name:"slug",exceptionCode:1027,errorMessage:r.props.intl.formatMessage({id:"message.error._S_duplicate"},{s:r.props.intl.formatMessage({id:"label.groupURL"})})},{exceptionCode:1033,errorMessage:r.props.intl.formatMessage({id:"message.error.canNotDeleteUserGroup"})},{exceptionCode:1034,errorMessage:r.props.intl.formatMessage({id:"message.error.canNotDeleteNonEmptyGroup"})},{exceptionCode:1035,errorMessage:r.props.intl.formatMessage({id:"message.error.canNotChangeOwnerOfUserGroup"})}]),r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.mountedFlag=!0}},{key:"shouldComponentUpdate",value:function(e,t){return""!==t.slug||!e.currentGroupConfig.group||(this.setState({slug:e.currentGroupConfig.group.name}),!1)}},{key:"componentWillUnmount",value:function(){this.mountedFlag=!1,this.setState({slug:""})}},{key:"deleteGroup",value:function(){var e=this;this.props.dispatchEvent(ae.addComformation("group_delete_group",{title:this.props.intl.formatMessage({id:"label.dangerOperation"}),description:this.props.intl.formatMessage({id:"message.groupDeleteRepositoryNotice"}),reject:function(){return!0},accept:function(){e.deleteGroupConfirmed(),e.props.dispatchEvent(ae.cancelComformation())}}))}},{key:"deleteGroupConfirmed",value:function(){var e=this;this.props.dispatchEvent(ae.addComformation("group_delete_group_confirm",{title:this.props.intl.formatMessage({id:"label.dangerOperationConfirm"}),description:this.props.intl.formatMessage({id:"message.groupDeleteRepositoryConfirmNotice"}),reject:function(){return!0},accept:function(){var t={group:e.props.currentGroupConfig.group.id};e.setState({pending:!0}),va.deleteGroup(t).then(ne.withEventdispatcher(e.props.dispatchEvent)(ne.getJSONData)).then((function(t){t.code?e.checkResponse(t.code)&&t.code>1024&&e.props.dispatchEvent(ae.NewNotification(e.props.intl.formatMessage({id:"message.error.deleteFail"}),2)):(e.reloadRepositoryGroupList(),e.props.dispatchEvent(ae.NewNotification(e.props.intl.formatMessage({id:"message.deleted"}),0)),e.props.history.push(W("groups"))),e.setState({pending:!1}),e.props.dispatchEvent(ae.cancelComformation())}))}}))}},{key:"changeSlug",value:function(){var e=this;if(!this.checkInput())return!1;this.props.dispatchEvent(ae.addComformation("group_change_slug",{title:this.props.intl.formatMessage({id:"label.dangerOperation"}),description:this.props.intl.formatMessage({id:"message.groupChangeURLNotice"}),reject:function(){return!0},accept:function(){var t={group:e.props.currentGroupConfig.group.id,name:e.state.slug};e.setState({pending:!0}),va.updateName(t).then(ne.withEventdispatcher(e.props.dispatchEvent)(ne.getJSONData)).then((function(t){t.code?e.checkResponse(t.code)&&t.code>1024&&e.props.dispatchEvent(ae.NewNotification(e.props.intl.formatMessage({id:"message.error.updateFail"}),2)):(e.reloadGroupData(),e.reloadRepositoryGroupList(),e.props.dispatchEvent(ae.NewNotification(e.props.intl.formatMessage({id:"message.updated"}),0)),e.props.history.push(W("groups"))),e.setState({pending:!1}),e.props.dispatchEvent(ae.cancelComformation())}))}}))}},{key:"changeOwner",value:function(e){var t=this;this.props.dispatchEvent(ae.addComformation("group_change_creator",{title:this.props.intl.formatMessage({id:"label.dangerOperation"}),description:this.props.intl.formatMessage({id:"message.groupChangeCreatorNotice"}),reject:function(){return!0},accept:function(){var a={group:t.props.currentGroupConfig.group.id,userID:e};t.setState({pending:!0}),va.changeOwner(a).then(ne.withEventdispatcher(t.props.dispatchEvent)(ne.getJSONData)).then((function(e){e.code?t.checkResponse(e.code)&&e.code>1024&&t.props.dispatchEvent(ae.NewNotification(t.props.intl.formatMessage({id:"message.error.updateFail"}),2)):(t.reloadGroupData(),t.props.dispatchEvent(ae.NewNotification(t.props.intl.formatMessage({id:"message.updated"}),0))),t.props.dispatchEvent(ae.cancelComformation()),t.setState({pending:!1})}))}}))}},{key:"reloadGroupData",value:function(){var e=this;va.config({gKey:this.props.currentGroupConfig.group.id}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){t.code||e.props.dispatchEvent({type:"data.currentGroupConfig.update",data:t.data})}))}},{key:"reloadRepositoryGroupList",value:function(){var e=this;Ht.list().then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){t.code||e.props.dispatchEvent({type:"data.repositoryList.update",data:t.data})})),va.list().then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){t.code||e.props.dispatchEvent({type:"data.groupList.update",data:t.data})}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.currentGroupConfig,r=t.currentUserInfo,i=t.classes,n=t.intl;return Object(oe.jsxs)(k.a,{container:!0,spacing:2,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"h6",component:"div",gutterBottom:!0,className:i.header,children:n.formatMessage({id:"label.groupAdvancedSetting"})})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:a.group?Object(oe.jsxs)(k.a,{container:!0,spacing:2,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"subtitle1",component:"div",children:n.formatMessage({id:"label.updateCreator"})})}),Object(oe.jsx)(k.a,{item:!0,xs:7,children:Object(oe.jsx)(E.a,{fullWidth:!0,variant:"outlined",select:!0,value:a.group.owner,onChange:function(t){return e.changeOwner(t.target.value)},children:a.members.map((function(e,t){return Object(oe.jsx)(Aa,{value:e.id,children:Object(oe.jsx)(ua,{item:e})},t)}))})}),Object(oe.jsx)(k.a,{item:!0,xs:12,className:i.section,children:Object(oe.jsx)(w.a,{variant:"subtitle1",component:"div",children:n.formatMessage({id:"label.updateGroupURL"})})}),Object(oe.jsx)(k.a,{item:!0,xs:7,children:Object(oe.jsxs)(k.a,{container:!0,spacing:2,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(E.a,{fullWidth:!0,variant:"outlined",value:this.state.slug,error:!!this.state.error.slug,helperText:this.state.error.slug,InputProps:{startAdornment:Object(oe.jsxs)(Gt.a,{position:"start",children:[ne.getHost(r),"/"]})},onChange:function(t){var a=ne.makeSlug(t.target.value);e.setState({slug:a,error:{}})}})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsxs)(_.a,{color:"primary",variant:"contained",disableElevation:!0,onClick:function(t){return e.changeSlug()},disabled:this.state.pending,children:[this.state.pending?Object(oe.jsx)(he.a,{size:"1rem",color:"inherit"}):Object(oe.jsx)(fe.a,{icon:Ge.d}),"\xa0 ",n.formatMessage({id:"label.save"})]})})]})}),Object(oe.jsx)(k.a,{item:!0,xs:12,className:i.section,children:Object(oe.jsx)(w.a,{variant:"subtitle1",component:"div",children:n.formatMessage({id:"label.deleteGroup"})})}),Object(oe.jsx)(k.a,{item:!0,xs:7,children:Object(oe.jsxs)(_.a,{color:"secondary",variant:"contained",disableElevation:!0,onClick:function(t){return e.deleteGroup()},className:i.warning,disabled:this.state.pending,children:[this.state.pending?Object(oe.jsx)(he.a,{size:"1rem",color:"inherit"}):Object(oe.jsx)(fe.a,{icon:Ge.j}),"\xa0 ",n.formatMessage({id:"label.deleteGroup"})]})})]}):Object(oe.jsx)(k.a,{container:!0,spacing:2,children:Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(he.a,{})})})})]})}}]),a}(i.a.Component),Ia=Object(R.b)(Object(C.a)((function(e){return{header:{lineHeight:e.spacing(5)+"px",marginBottom:e.spacing(1),borderBottom:"1px solid "+e.palette.border,fontSize:"18px"},section:{marginTop:e.spacing(3)},paper:{padding:e.spacing(2)},btn:{marginRight:e.spacing(2)},warning:{backgroundColor:e.palette.error.main,color:e.palette.error.contrastText}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentGroupConfig:e.DataStore.currentGroupConfig,currentUserInfo:e.DataStore.currentUserInfo}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(Da))));var Pa,Fa={parser:function(e){var t=e.item.type,a=[],r={};if(e.currentGroupConfig.group?a=e.currentGroupConfig.members:e.currentRepositoryConfig.repository&&(a=e.currentRepositoryConfig.members),r=a.filter(U.id(e.item.creator))[0],e.relatedGroup=e.groupList.filter(U.id(e.item.group))[0],e.relatedRepository=e.repositoryList.filter(U.id(e.item.repository))[0],r||(r={icon:null,id:e.item.creator,name:"userID_"+e.item.creator.slice(0,8)}),e.relatedGroup||(e.relatedGroup={id:e.item.group,displayName:"groupID_"+e.item.group.slice(0,8),name:null}),e.relatedRepository||(e.relatedRepository={id:e.item.repository,displayName:"repositoryID_"+e.item.repository.slice(0,8),name:null,group:e.relatedGroup}),513===t){var n=e.relatedGroup.name?Object(oe.jsx)(o.b,{to:W("groups",e.relatedGroup.name),children:e.relatedGroup.displayName}):e.item.content.name;return{user:r,action:e.formatter({id:"message.activity.createdGroup"}),detail:n}}if(514===t)return{user:r,action:e.formatter({id:"message.activity.updateGroup_S_Avator"},{s:e.relatedGroup.displayName}),detail:""};if(515===t){var s=Object(oe.jsx)(i.a.Fragment,{children:e.formatter({id:"label.updateFrom_S1_To_S2"},{s1:e.item.content.from,s2:e.item.content.to})});return{user:r,action:e.formatter({id:"message.activity.updateGroup_S_Name"},{s:e.relatedGroup.displayName}),detail:s}}if(516===t)return{user:r,action:e.formatter({id:"message.activity.updateGroup_S_Description"},{s:e.relatedGroup.displayName}),detail:""};if(517===t){var c=a.filter(U.id(e.item.content.uid))[0];return{user:r,action:e.formatter({id:"message.activity.addGroup_S_Memeber"},{s:e.relatedGroup.displayName}),detail:c?c.name+" <"+c.email+">":e.item.content.name+" <"+e.item.content.email+">"}}if(518===t){var l=a.filter(U.id(e.item.content.uid))[0],p=e.formatter({id:"label.roleID_"+e.item.content.to});return{user:r,action:e.formatter({id:"message.activity.changeGroup_S_MemebrRole"},{s:e.relatedGroup.displayName}),detail:(l?l.name+" <"+l.email+">":e.item.content.name+" <"+e.item.content.email+">")+": "+p}}if(519===t){var d=a.filter(U.id(e.item.content.uid))[0];return{user:r,action:e.formatter({id:"message.activity.removeGroup_S_Memebr"},{s:e.relatedGroup.displayName}),detail:d?d.name+" <"+d.email+">":e.item.content.name+" <"+e.item.content.email+">"}}if(520===t){var u=a.filter(U.id(e.item.content.uid))[0];return{user:r,action:e.formatter({id:"message.activity.setGroup_S_Creator"},{s:e.relatedGroup.displayName}),detail:u?u.name+" <"+u.email+">":e.item.content.name+" <"+e.item.content.email+">"}}if(521===t){var m=Object(oe.jsx)(i.a.Fragment,{children:e.formatter({id:"label.updateFrom_S1_To_S2"},{s1:W("groups",e.item.content.from),s2:W("groups",e.item.content.to)})});return{user:r,action:e.formatter({id:"message.activity.setGroup_S_URL"},{s:e.relatedGroup.displayName}),detail:m}}if(769===t){var h=e.relatedRepository.name&&e.relatedGroup.name?Object(oe.jsxs)(o.b,{to:W(e.relatedGroup.name,e.relatedRepository.name),children:[e.relatedGroup.displayName,"/",e.relatedRepository.displayName]}):e.item.content.name;return{user:r,action:e.formatter({id:"message.activity.createdRepository"}),detail:h}}if(770===t){var g=e.relatedRepository.name&&e.relatedGroup.name?Object(oe.jsxs)(o.b,{to:W(e.relatedGroup.name,e.relatedRepository.name),children:[e.relatedGroup.displayName,"/",e.relatedRepository.displayName]}):e.item.content.name,b=Object(oe.jsxs)(i.a.Fragment,{children:[g," ",e.formatter({id:"label.forkFrom_S"},{s:e.item.content.sourceName})]});return{user:r,action:e.formatter({id:"message.activity.forkRepository"}),detail:b}}if(771===t)return{user:r,action:e.formatter({id:"message.activity.updateRepository_S_Avator"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:""};if(772===t){var f=Object(oe.jsx)(i.a.Fragment,{children:e.formatter({id:"label.updateFrom_S1_To_S2"},{s1:e.item.content.from,s2:e.item.content.to})});return{user:r,action:e.formatter({id:"message.activity.updateRepository_S_Name"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:f}}if(773===t)return{user:r,action:e.formatter({id:"message.activity.updateRepository_S_Description"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:""};if(774===t){var j=a.filter(U.id(e.item.content.uid))[0];return{user:r,action:e.formatter({id:"message.activity.addRepository_S_Memeber"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:j?j.name+" <"+j.email+">":e.item.content.name+" <"+e.item.content.email+">"}}if(775===t){var v=a.filter(U.id(e.item.content.uid))[0],O=e.formatter({id:"label.roleID_"+e.item.content.to});return{user:r,action:e.formatter({id:"message.activity.changeRepository_S_MemebrRole"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:(v?v.name+" <"+v.email+">":e.item.content.name+" <"+e.item.content.email+">")+": "+O}}if(776===t){var y=a.filter(U.id(e.item.content.uid))[0];return{user:r,action:e.formatter({id:"message.activity.removeRepository_S_Memebr"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:y?y.name+" <"+y.email+">":e.item.content.name+" <"+e.item.content.email+">"}}if(777===t){var x=a.filter(U.id(e.item.content.uid))[0];return{user:r,action:e.formatter({id:"message.activity.setRepository_S_Creator"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:x?x.name+" <"+x.email+">":e.item.content.name+" <"+e.item.content.email+">"}}if(778===t){var S=Object(oe.jsx)(i.a.Fragment,{children:e.formatter({id:"label.updateFrom_S1_To_S2"},{s1:W(e.relatedGroup.name,e.item.content.from),s2:W(e.relatedGroup.name,e.item.content.to)})});return{user:r,action:e.formatter({id:"message.activity.setRepository_S_URL"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:S}}if(779===t)return{user:r,action:e.formatter({id:"message.activity.deleteRepository"}),detail:e.item.content.name};if(1025===t){var C=e.relatedRepository.name&&e.relatedGroup.name?Object(oe.jsx)(o.b,{to:W(e.relatedGroup.name,e.relatedRepository.name,"files",e.item.content.name),children:e.item.content.name}):e.item.content.name,N=e.relatedRepository.name&&e.relatedGroup.name?Object(oe.jsx)(o.b,{to:W(e.relatedGroup.name,e.relatedRepository.name,"commit",e.item.content.from.slice(0,8)),children:e.item.content.from.slice(0,8)}):e.item.content.from.slice(0,8),R=e.relatedRepository.name&&e.relatedGroup.name?Object(oe.jsx)(o.b,{to:W(e.relatedGroup.name,e.relatedRepository.name,"commit",e.item.content.to.slice(0,8)),children:e.item.content.to.slice(0,8)}):e.item.content.to.slice(0,8),M=Object(oe.jsxs)(i.a.Fragment,{children:[N," .. ",R," -> ",C]});return{user:r,action:e.formatter({id:"message.activity.pushTo_S_Branch"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:M}}if(1026===t){var w=e.relatedRepository.name&&e.relatedGroup.name?Object(oe.jsx)(o.b,{to:W(e.relatedGroup.name,e.relatedRepository.name,"files",e.item.content.name),children:e.item.content.name}):e.item.content.name,k=e.relatedRepository.name&&e.relatedGroup.name?Object(oe.jsx)(o.b,{to:W(e.relatedGroup.name,e.relatedRepository.name,"commit",e.item.content.to.slice(0,8)),children:e.item.content.to.slice(0,8)}):e.item.content.to.slice(0,8),_=Object(oe.jsxs)(i.a.Fragment,{children:[k," -> ",w]});return{user:r,action:e.formatter({id:"message.activity.pushTo_S_NewBranch"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:_}}if(1027===t){var E=e.relatedRepository.name&&e.relatedGroup.name?Object(oe.jsx)(o.b,{to:W(e.relatedGroup.name,e.relatedRepository.name,"files",encodeURIComponent(e.item.content.name),""),children:e.item.content.name}):e.item.content.name,T=Object(oe.jsxs)(i.a.Fragment,{children:[e.formatter({id:"label.newBranch"})," ",E]});return{user:r,action:e.formatter({id:"message.activity.created_S_NewBranch"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:T}}if(1028===t)return{user:r,action:e.formatter({id:"message.activity.delete_S_Branch"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:e.formatter({id:"label.deleteBranch"})+" "+e.item.content.name};if(1029===t)return{user:r,action:e.formatter({id:"message.activity.update_S_DefaultBranch"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:Object(oe.jsxs)(i.a.Fragment,{children:[e.formatter({id:"message.updateDefaultBranch"}),"\xa0",e.item.content.from&&Object(oe.jsxs)(i.a.Fragment,{children:[Object(oe.jsx)(o.b,{to:W(e.relatedGroup.name,e.relatedRepository.name,"files",encodeURIComponent(e.item.content.from)),children:e.item.content.from})," ->\xa0"]}),Object(oe.jsx)(o.b,{to:W(e.relatedGroup.name,e.relatedRepository.name,"files",encodeURIComponent(e.item.content.to)),children:e.item.content.to})]})};if(1030===t)return{user:r,action:e.formatter({id:"message.activity.created_S_ProtectedBranchRule"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:Object(oe.jsxs)(i.a.Fragment,{children:[e.formatter({id:"message.createProtectedBranchRule"}),"\xa0",Object(oe.jsx)(o.b,{to:W(e.relatedGroup.name,e.relatedRepository.name,"settings/branch"),children:e.item.content.name})]})};if(1031===t)return{user:r,action:e.formatter({id:"message.activity.update_S_ProtectedBranchRule"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:Object(oe.jsxs)(i.a.Fragment,{children:[e.formatter({id:"message.updateProtectedBranchRule"}),"\xa0",Object(oe.jsx)(o.b,{to:W(e.relatedGroup.name,e.relatedRepository.name,"settings/branch"),children:e.item.content.name})]})};if(1032===t)return{user:r,action:e.formatter({id:"message.activity.delete_S_ProtectedBranchRule"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:Object(oe.jsxs)(i.a.Fragment,{children:[e.formatter({id:"message.deleteProtectedBranchRule"}),"\xa0",e.item.content.name]})};if(1281===t){var A=e.relatedRepository.name&&e.relatedGroup.name?Object(oe.jsx)(o.b,{to:W(e.relatedGroup.name,e.relatedRepository.name,"files",e.item.content.name),children:e.item.content.name}):e.item.content.name,D=e.relatedRepository.name&&e.relatedGroup.name?Object(oe.jsx)(o.b,{to:W(e.relatedGroup.name,e.relatedRepository.name,"commit",e.item.content.from.slice(0,8)),children:e.item.content.from.slice(0,8)}):e.item.content.from.slice(0,8),I=e.relatedRepository.name&&e.relatedGroup.name?Object(oe.jsx)(o.b,{to:W(e.relatedGroup.name,e.relatedRepository.name,"commit",e.item.content.to.slice(0,8)),children:e.item.content.to.slice(0,8)}):e.item.content.to.slice(0,8),P=Object(oe.jsxs)(i.a.Fragment,{children:[D," .. ",I," -> ",A]});return{user:r,action:e.formatter({id:"message.activity.pushTo_S_Tag"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:P}}if(1282===t){var F=e.relatedRepository.name&&e.relatedGroup.name?Object(oe.jsx)(o.b,{to:W(e.relatedGroup.name,e.relatedRepository.name,"files",e.item.content.name),children:e.item.content.name}):e.item.content.name,L=e.relatedRepository.name&&e.relatedGroup.name?Object(oe.jsx)(o.b,{to:W(e.relatedGroup.name,e.relatedRepository.name,"commit",e.item.content.to.slice(0,8)),children:e.item.content.to.slice(0,8)}):e.item.content.to.slice(0,8),B=Object(oe.jsxs)(i.a.Fragment,{children:[L," -> ",F]});return{user:r,action:e.formatter({id:"message.activity.pushTo_S_NewTag"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:B}}if(1283===t){var G=e.relatedRepository.name&&e.relatedGroup.name?Object(oe.jsx)(o.b,{to:W(e.relatedGroup.name,e.relatedRepository.name,"files",e.item.content.name,""),children:e.item.content.name}):e.item.content.name,H=Object(oe.jsxs)(i.a.Fragment,{children:[e.formatter({id:"label.newTag"})," ",G]});return{user:r,action:e.formatter({id:"message.activity.created_S_NewTag"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:H}}if(1284===t)return{user:r,action:e.formatter({id:"message.activity.delete_S_Tag"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:e.formatter({id:"label.deleteTag"})+" "+e.item.content.name};if(1793===t){var q=e.relatedRepository.name&&e.relatedGroup.name?Object(oe.jsxs)(o.b,{to:W(e.relatedGroup.name,e.relatedRepository.name,"mergerequests",e.item.content.id),children:["!",e.item.content.id]}):e.item.content.id,z=Object(oe.jsxs)(i.a.Fragment,{children:[e.formatter({id:"label.openMergeRequest"})," ",q]});return{user:r,action:e.formatter({id:"message.activity.open_S_MergeRquest"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:z}}if(1794===t){var V=e.relatedRepository.name&&e.relatedGroup.name?Object(oe.jsxs)(o.b,{to:W(e.relatedGroup.name,e.relatedRepository.name,"mergerequests",e.item.content.id),children:["!",e.item.content.id]}):e.item.content.id,J=Object(oe.jsxs)(i.a.Fragment,{children:[e.formatter({id:"label.closeMergeRequest"})," ",V]});return{user:r,action:e.formatter({id:"message.activity.close_S_MergeRquest"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:J}}if(1795===t){var K=e.relatedRepository.name&&e.relatedGroup.name?Object(oe.jsxs)(o.b,{to:W(e.relatedGroup.name,e.relatedRepository.name,"mergerequests",e.item.content.id),children:["!",e.item.content.id]}):e.item.content.id,$=Object(oe.jsxs)(i.a.Fragment,{children:[e.formatter({id:"label.mergeRequest"})," ",K]});return{user:r,action:e.formatter({id:"message.activity.merge_S_MergeRquest"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:$}}if(1796===t){var Z=a.filter(U.id(e.item.content.reviewer))[0],Y=e.relatedRepository.name&&e.relatedGroup.name?Object(oe.jsxs)(o.b,{to:W(e.relatedGroup.name,e.relatedRepository.name,"mergerequests",e.item.content.id),children:["!",e.item.content.id]}):e.item.content.id;return{user:r,action:e.formatter({id:"message.activity.assign_S_Reviewer"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:e.formatter({id:"message.assign_N_M_Reviewer"},{n:Z.name,m:Y})}}if(1797===t){var X=a.filter(U.id(e.item.content.reviewer))[0],Q=e.relatedRepository.name&&e.relatedGroup.name?Object(oe.jsxs)(o.b,{to:W(e.relatedGroup.name,e.relatedRepository.name,"mergerequests",e.item.content.id),children:["!",e.item.content.id]}):e.item.content.id;return{user:r,action:e.formatter({id:"message.activity.delete_S_Reviewer"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:e.formatter({id:"message.delete_M_N_Reviewer"},{n:X.name,m:Q})}}if(1798===t){var ee=e.relatedRepository.name&&e.relatedGroup.name?Object(oe.jsxs)(o.b,{to:W(e.relatedGroup.name,e.relatedRepository.name,"mergerequests",e.item.content.id),children:["!",e.item.content.id]}):e.item.content.id;return{user:r,action:e.formatter({id:"message.activity.review_S_Reviewer"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:e.formatter({id:"message.review_M_Reviewer"},{m:ee})}}return 2305===t?{user:r,action:e.formatter({id:"message.activity.create_S_Webhook"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:Object(oe.jsx)(i.a.Fragment,{children:e.formatter({id:"label.createWebhook"})})}:2306===t?{user:r,action:e.formatter({id:"message.activity.update_S_Webhook"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:Object(oe.jsx)(i.a.Fragment,{children:e.formatter({id:"label.updateWebhook"})})}:2307===t?{user:r,action:e.formatter({id:"message.activity.delete_S_Webhook"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:Object(oe.jsx)(i.a.Fragment,{children:e.formatter({id:"label.deleteWebhook"})})}:{user:r,action:"",detail:""}}},La=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.item,a=e.groupList,r=e.currentGroupConfig,i=e.repositoryList,n=e.currentRepositoryConfig,s=e.intl,o=e.classes,c={item:t,groupList:a,repositoryList:i,currentGroupConfig:r,currentRepositoryConfig:n,formatter:s.formatMessage},l=Fa.parser(c);return Object(oe.jsx)(k.a,{item:!0,xs:12,className:o.item,children:Object(oe.jsxs)(k.a,{container:!0,justifyContent:"space-between",alignItems:"center",children:[Object(oe.jsx)(k.a,{item:!0,children:Object(oe.jsxs)(k.a,{container:!0,spacing:2,className:"width-auto",children:[Object(oe.jsx)(k.a,{item:!0,children:Object(oe.jsx)(Le.a,{src:D.HOSTS.PGYER_AVATAR_HOST+l.user.icon,className:o.avatar})}),Object(oe.jsxs)(k.a,{item:!0,children:[Object(oe.jsxs)(w.a,{variant:"body1",className:o.action,children:[" ",l.user.name," ",l.action]}),Object(oe.jsxs)(w.a,{variant:"body2",className:o.paddingRight2,children:[" ",l.detail," "]})]})]})}),Object(oe.jsx)(k.a,{item:!0,children:Object(oe.jsxs)(w.a,{variant:"body2",children:[s.formatMessage({id:"label.editIn"}),":\xa0",Object(oe.jsx)(Nt,{timestamp:t.time})]})})]})})}}]),a}(i.a.Component),Ba=Object(R.b)(Object(ge.a)(Object(C.a)((function(e){return{avatar:{width:e.spacing(3),height:e.spacing(3)},item:{border:"1px solid "+e.palette.border,marginBottom:"-1px",padding:e.spacing(2)+"px "+e.spacing(3)+"px","&:first-child":{borderRadius:"4px 4px 0px 0px"},"&:last-child":{borderRadius:"0px 0px 4px 4px"}},action:{lineHeight:e.spacing(3)+"px"},paddingRight2:{paddingRight:e.spacing(2),lineHeight:e.spacing(3)+"px"}}}))(Object(h.f)(Object(l.b)((function(e,t){return{repositoryList:e.DataStore.repositoryList,currentRepositoryConfig:e.DataStore.currentRepositoryConfig,groupList:e.DataStore.groupList,currentGroupConfig:e.DataStore.currentGroupConfig}}),(function(e,t){return{}}))(La))))),Ua=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={activityList:[],page:1,listFinshed:!1,pending:!0,category:0,keyword:""},r.observed={keyword:""},r.mountedFlag=!1,r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.setState({page:1,listFinshed:!1,pending:!0,activityList:[]}),this.getData(this.props,this.state),this.mountedFlag=!0}},{key:"componentWillUnmount",value:function(){this.mountedFlag=!1}},{key:"shouldComponentUpdate",value:function(e,t){return JSON.stringify(this.props.currentGroupConfig)!==JSON.stringify(e.currentGroupConfig)||JSON.stringify(this.props.currentRepositoryConfig)!==JSON.stringify(e.currentRepositoryConfig)?(this.setState({page:1,listFinshed:!1,pending:!0,activityList:[]}),this.getData(e,t),!1):this.state.page===t.page||t.pending?this.state.category===t.category||(this.setState({pending:!0,page:1,activityList:[]}),this.getData(e,t),!1):(this.setState({pending:!0}),this.getData(e,t),!1)}},{key:"getData",value:function(e,t){var a=this;this.observed.keyword=t.keyword,e.currentRepositoryConfig.repository?Ht.activities({repository:e.currentRepositoryKey,category:t.category,keyword:t.keyword,page:t.page,pagesize:20}).then(ne.withEventdispatcher(e.dispatchEvent)(ne.getJSONData)).then((function(e){if(!e.code){var t=e.data.length<20;a.setState({pending:!1,activityList:[].concat(Object(T.a)(a.state.activityList),Object(T.a)(e.data)),listFinshed:t})}})):e.currentGroupConfig.group&&va.activities({group:e.currentGroupKey,category:t.category,keyword:t.keyword,page:t.page,pagesize:20}).then(ne.withEventdispatcher(e.dispatchEvent)(ne.getJSONData)).then((function(e){if(!e.code){var t=e.data.length<20;a.setState({pending:!1,activityList:[].concat(Object(T.a)(a.state.activityList),Object(T.a)(e.data)),listFinshed:t})}}))}},{key:"searchActivity",value:function(){this.observed.keyword!==this.state.keyword&&(this.setState({activityList:[]}),this.getData(this.props,this.state))}},{key:"render",value:function(){var e=this,t=this.props,a=t.intl,r=t.classes,i=D.activityCategory,n=[];return n[i.all]=a.formatMessage({id:"label.all"}),n[i.commit]=a.formatMessage({id:"label.commitActivity"}),n[i.mergeRequest]=a.formatMessage({id:"label.mergeRequestActivity"}),n[i.member]=a.formatMessage({id:"label.memberActivity"}),Object(oe.jsxs)(k.a,{container:!0,spacing:3,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(ft,{tabs:n,currentTab:this.state.category,onChange:function(t,a){return e.setState({category:a})},children:Object(oe.jsx)(E.a,{variant:"outlined",className:r.input,placeholder:"",defaultValue:this.state.keyword,onChange:function(t){return e.setState({keyword:t.target.value})},onKeyDown:function(t){13===t.keyCode&&e.searchActivity()},InputProps:{startAdornment:Object(oe.jsx)(Gt.a,{position:"start",children:Object(oe.jsx)(fe.a,{icon:je.D})})}})})}),Object(oe.jsxs)(k.a,{item:!0,xs:12,children:[Object(oe.jsx)(k.a,{container:!0,children:this.state.activityList.length>0&&this.state.activityList.map((function(e,t){return Object(oe.jsx)(Ba,{item:e},t)}))}),Object(oe.jsx)(k.a,{container:!0,justifyContent:"center",className:r.marginTop3,children:Object(oe.jsx)(k.a,{item:!0,children:this.state.pending?Object(oe.jsx)(he.a,{}):this.state.listFinshed?Object(oe.jsx)(_.a,{size:"small",disabled:!0,children:a.formatMessage({id:"label.noMore"})}):Object(oe.jsxs)(_.a,{variant:"contained",color:"primary",size:"small",disableElevation:!0,onClick:function(t){return e.setState({page:e.state.page+1})},children:[a.formatMessage({id:"label.more"})," \xa0\xa0",Object(oe.jsx)(fe.a,{icon:Ge.a})]})})})]})]})}}]),a}(i.a.Component),Ga=Object(R.b)(Object(C.a)((function(e){return{input:{width:e.spacing(30),maxWidth:"100%"},icon:{color:e.palette.text.light},marginTop3:{marginTop:e.spacing(3)}}}))(Object(l.b)((function(e,t){return{currentGroupKey:e.DataStore.currentGroupKey,currentGroupConfig:e.DataStore.currentGroupConfig,currentRepositoryKey:e.DataStore.currentRepositoryKey,currentRepositoryConfig:e.DataStore.currentRepositoryConfig}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(Ua))),Ha=a(561),qa=a(538),za=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={popoverAnchor:null,popoverTab:0},r}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,r=t.repositoryConfig,i=t.intl,n=t.history,s=t.repositoryList,c=t.currentUserInfo,l=s.filter(U.id(r&&r.repository&&r.repository.forkFrom||""))[0];return Object(oe.jsx)(M.a,{elevation:1,className:a.content,children:r&&r.repository&&r.repository.id?Object(oe.jsxs)(k.a,{container:!0,spacing:3,justifyContent:"space-between",children:[Object(oe.jsx)(k.a,{item:!0,children:Object(oe.jsxs)(k.a,{container:!0,spacing:3,className:"width-auto",children:[Object(oe.jsx)(k.a,{item:!0,children:r.repository.icon?Object(oe.jsx)(Le.a,{variant:"square",className:a.icon,src:D.HOSTS.STATIC_AVATAR_PREFIX+r.repository.icon}):Object(oe.jsx)(Le.a,{variant:"square",className:a.icon,children:r.repository.name.substr(0,1).toUpperCase()})}),Object(oe.jsxs)(k.a,{item:!0,children:[Object(oe.jsxs)(w.a,{variant:"h6",className:a.text,children:[r.group.displayName,"/",r.repository.displayName," \xa0\xa0",l?Object(oe.jsx)(w.a,{variant:"body2",component:"span",className:a.text,children:Object(oe.jsx)(o.b,{to:W(l.group.name,l.name),children:i.formatMessage({id:"label.forkFrom_S"},{s:l.group.displayName+"/"+l.displayName})})}):""]}),Object(oe.jsx)(w.a,{variant:"caption",component:"div",className:a.subtext,children:r.repository.description})]})]})}),Object(oe.jsx)(k.a,{item:!0,children:Object(oe.jsxs)(k.a,{container:!0,spacing:2,justifyContent:"flex-end",className:"width-auto",children:[Object(oe.jsx)(k.a,{item:!0,children:Object(oe.jsxs)(Ha.a,{variant:"outlined",className:a.border,children:[Object(oe.jsxs)(_.a,{onClick:function(e){return n.push(W("repositories/fork",r.repository.id))},children:[Object(oe.jsx)(fe.a,{icon:je.r}),"\xa0 ",i.formatMessage({id:"label.fork"})]}),Object(oe.jsx)(_.a,{disabled:!r.repository.forkCount,onClick:function(e){return n.push(W("repositories/forklist",r.repository.id))},children:r.repository.forkCount})]})}),Object(oe.jsxs)(k.a,{item:!0,children:[Object(oe.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(t){e.state.popoverAnchor?e.setState({popoverAnchor:null}):e.setState({popoverAnchor:t.currentTarget})},children:i.formatMessage({id:"label.clone"})}),Object(oe.jsx)(qa.a,{elevation:2,open:!!this.state.popoverAnchor,anchorEl:this.state.popoverAnchor,TransitionProps:{timeout:0},onClose:function(t){e.state.popoverAnchor?e.setState({popoverAnchor:null}):e.setState({popoverAnchor:t.currentTarget})},anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:Object(oe.jsxs)(M.a,{className:a.clonePopvoer,children:[Object(oe.jsx)(M.a,{className:a.cloneHeader,children:Object(oe.jsx)(ft,{tabs:["HTTPS","SSH"],currentTab:this.state.popoverTab,onChange:function(t,a){e.setState({popoverTab:a})}})}),0===this.state.popoverTab&&Object(oe.jsxs)(M.a,{className:a.cloneContent,children:[Object(oe.jsxs)(w.a,{variant:"body2",gutterBottom:!0,children:[i.formatMessage({id:"message.differenceBetweenHTTPSAndSSH"})," \xa0",Object(oe.jsx)(Oe,{doc:"/common/clone_method.md"})]}),Object(oe.jsx)(E.a,{fullWidth:!0,variant:"outlined",value:ne.getHost(c)+W(r.group.name,r.repository.name)+".git",InputProps:{id:"repsoditory-http-url-text",readOnly:!0,endAdornment:Object(oe.jsx)(Gt.a,{position:"end",className:a.copy,children:Object(oe.jsx)(Ie,{label:"label.copy",icon:je.k,onClick:function(e){var t=document.getElementById("repsoditory-http-url-text");t.select(),document.execCommand("Copy"),t.blur()}})})}})]}),1===this.state.popoverTab&&Object(oe.jsxs)(M.a,{className:a.cloneContent,children:[Object(oe.jsxs)(w.a,{variant:"body2",gutterBottom:!0,children:[i.formatMessage({id:"message.generateAndSetSSHKey"})," \xa0",Object(oe.jsx)(Oe,{doc:"/common/ssh_key.md"})]}),Object(oe.jsx)(E.a,{fullWidth:!0,variant:"outlined",value:ne.getSSHHost(c)+":"+[r.group.name,r.repository.name].join("/")+".git",InputProps:{id:"repsoditory-ssh-url-text",readOnly:!0,endAdornment:Object(oe.jsx)(Gt.a,{position:"end",className:a.copy,children:Object(oe.jsx)(Ie,{label:"label.copy",icon:je.k,onClick:function(e){var t=document.getElementById("repsoditory-ssh-url-text");t.select(),document.execCommand("Copy"),t.blur()}})})}})]})]})})]})]})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsxs)(w.a,{variant:"body2",className:a.iconBar,children:[Object(oe.jsx)(fe.a,{icon:je.i}),"\xa0 ",i.formatMessage({id:"label._N_commit"},{n:r.count.commit})," \xa0\xa0\xa0\xa0",Object(oe.jsx)(fe.a,{icon:je.d}),"\xa0 ",i.formatMessage({id:"label._N_branch"},{n:r.count.branch})," \xa0\xa0\xa0\xa0",Object(oe.jsx)(fe.a,{icon:je.G}),"\xa0 ",i.formatMessage({id:"label._N_tag"},{n:r.count.tag})," \xa0\xa0\xa0\xa0",Object(oe.jsx)(fe.a,{icon:je.p}),"\xa0 ",i.formatMessage({id:"label._N_byte"},{n:z(r.count.file)})," \xa0\xa0\xa0\xa0",Object(oe.jsx)(fe.a,{icon:je.y}),"\xa0 ",i.formatMessage({id:"label._N_mergeRequest"},{n:r.repository.mergeRequestCount.open})," \xa0\xa0\xa0\xa0",Object(oe.jsx)(fe.a,{icon:je.v}),"\xa0 ",i.formatMessage({id:"label._N_member"},{n:r.members.length})]})})]}):Object(oe.jsx)(k.a,{container:!0,spacing:2,justifyContent:"space-between",children:Object(oe.jsx)(he.a,{})})})}}]),a}(r.Component),Wa=Object(R.b)(Object(ge.a)(Object(C.a)((function(e){return{content:{height:e.spacing(15.5),boxSizing:"border-box",borderBottom:"1px solid "+e.palette.border,borderRadius:0},icon:{height:e.spacing(5),width:e.spacing(5)},text:{height:e.spacing(3),lineHeight:e.spacing(3)+"px",overflow:"hidden"},subtext:{paddingTop:e.spacing(.5),height:e.spacing(1.5),lineHeight:e.spacing(1.5)+"px"},iconBar:{height:e.spacing(3),lineHeight:e.spacing(3)+"px"},clonePopvoer:{width:e.spacing(50)+"px"},cloneContent:{padding:e.spacing(2)},cloneHeader:{padding:"0px "+e.spacing(2)+"px"},border:{"& button":{borderColor:e.palette.border,padding:"2px "+e.spacing(2)+"px"}},copy:{marginLeft:"2px","& button":{position:"relative",right:"-14px",borderLeft:"1px solid "+e.palette.border,borderRadius:"0px 4px 4px 0px"}}}}))(Object(h.f)(Object(l.b)((function(e,t){return{repositoryList:e.DataStore.repositoryList,currentUserInfo:e.DataStore.currentUserInfo}}),(function(e,t){return{}}))(za))))),Va=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"composeOptions",value:function(e,t){var a=this,r=[];return e&&(e.branches||e.tags)&&(e.branches&&e.branches.length&&(r.push(Object(oe.jsx)(la.a,{disableSticky:!0,children:this.props.intl.formatMessage({id:"label.branch"})},"b")),r=r.concat(e.branches.map((function(e,t){return Object(oe.jsxs)(lt.a,{value:e.id,children:[Object(oe.jsx)(fe.a,{icon:je.d,className:a.props.classes.icon}),"\xa0\xa0",e.name]},"b"+t)})))),e.tags&&e.tags.length&&(r.push(Object(oe.jsx)(la.a,{disableSticky:!0,disabled:!0,children:this.props.intl.formatMessage({id:"label.tag"})},"t")),r=r.concat(e.tags.map((function(e,t){return Object(oe.jsxs)(lt.a,{value:e.id,children:[Object(oe.jsx)(fe.a,{icon:je.G,className:a.props.classes.icon}),"\xa0\xa0",e.name]},"t"+t)})))),e.branches.filter(U.id(t)).length||e.tags.filter(U.id(t)).length||(r.push(Object(oe.jsx)(la.a,{disableSticky:!0,disabled:!0,children:this.props.intl.formatMessage({id:"label.commit"})},"c")),r.push(Object(oe.jsxs)(lt.a,{value:t,children:[Object(oe.jsx)(fe.a,{icon:je.i,className:this.props.classes.icon}),"\xa0\xa0",t]},"c0")))),r}},{key:"render",value:function(){var e=this.props,t=e.currentRevision,a=e.revisionList,r=e.onChange,i=e.classes;return Object(oe.jsx)(E.a,{select:!0,value:t,variant:"outlined",onChange:function(e){return e.target.value&&r(e.target.value)},className:i.select,children:this.composeOptions(a,t)})}}]),a}(i.a.Component),Ja=Object(R.b)(Object(C.a)((function(e){return{select:{"& > div > svg":{width:e.spacing(3),height:e.spacing(3)}},icon:{color:e.palette.text.light}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentRepositoryConfig:e.DataStore.currentRepositoryConfig}}),(function(e,t){return{}}))(Va)))),Ka=a(295),$a=a.n(Ka),Za=a(98),Ya=a.n(Za),Xa=(a(226),a(227),a(228),a(229),a(230),a(231),a(232),a(233),a(234),a(235),a(236),a(237),a(238),a(239),a(240),a(241),a(242),a(243),a(244),a(245),a(246),a(247),a(248),a(249),a(250),a(251),a(252),a(253),a(254),a(255),a(256),a(257),a(258),a(259),a(260),a(261),a(262),a(263),a(264),a(265),a(266),a(267),a(268),a(269),a(270),a(271),a(272),a(273),a(274),a(275),a(276),a(277),a(278),a(279),a(280),a(281),a(282),a(283),a(284),a(285),a(286),a(287),a(181)),Qa=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).code=i.a.createRef(),r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.refreshCodeLine()}},{key:"componentDidUpdate",value:function(){this.refreshCodeLine()}},{key:"refreshCodeLine",value:function(){if("string"===typeof this.props.htmlCode){var e=document.createElement("span");if(e.innerHTML=this.props.htmlCode,"string"===typeof this.props.original){for(var t=Object(Xa.a)(this.props.original,this.props.code),a=0,r=[],i=0;i<t.length;i++)if(t[i].added||t[i].removed){if(t[i].added)for(var n=0;n<t[i].count;n++)r.push(a),a++}else a+=t[i].count;this.highlightWord(e,this.props.classes.addition,r)}else if("string"===typeof this.props.modified){for(var s=Object(Xa.a)(this.props.code,this.props.modified),o=0,c=[],l=0;l<s.length;l++)if(s[l].added||s[l].removed){if(s[l].removed)for(var p=0;p<s[l].count;p++)c.push(o),o++}else o+=s[l].count;this.highlightWord(e,this.props.classes.deletion,c)}this.code.current.innerHTML=e.innerHTML}}},{key:"highlightWord",value:function(e,t,a){for(var r=null,i=null,n=null,s=0;s<a.length;s++){var o=this.findOffset(e,a[s]);r||(r=o[0],i=o[1],n=o[1]-1),r===o[0]?o[1]===n+1?n=o[1]:(this.highlight(r,t,i,n),r=null,s--):(this.highlight(r,t,i,n),r=null,s--)}return r&&this.highlight(r,t,i,n),!0}},{key:"highlight",value:function(e,t,a,r){var i=document.createRange(),n=document.createElement("span");n.className=t,i.setStart(e,a),i.setEnd(e,r+1),i.surroundContents(n)}},{key:"findOffset",value:function(e,t){for(var a=0,r=0;r<e.childNodes.length;r++){var i=e.childNodes.item(r);if("#text"===i.nodeName){var n=i.length;if(t-a>=n){a+=n;continue}return[i,t-a]}var s=i.innerText.length;if(!(t-a>=s))return this.findOffset(i,t-a);a+=s}}},{key:"render",value:function(){return Object(oe.jsx)("pre",{children:Object(oe.jsx)("code",{ref:this.code,children:this.props.code})})}}]),a}(i.a.Component),er=Object(R.b)(Object(C.a)((function(e){return{addition:{backgroundColor:e.palette.background.additionDarker},deletion:{backgroundColor:e.palette.background.deletionDarker}}}))(Object(h.f)(Object(l.b)((function(e,t){return{}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(Qa)))),tr=a(487),ar=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.to,a=e.children;return Object(r.createElement)(o.b,Object(y.a)(Object(y.a)({},this.props),{},{key:"origin_child",to:t}),a)}}]),a}(i.a.Component),rr=ar,ir=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={copyHash:"label.copyHash"},r}return Object(d.a)(a,[{key:"copyHash",value:function(){var e=window.document.createElement("input");e.setAttribute("value",this.props.hash),e.setAttribute("type","text"),window.document.body.appendChild(e),e.select(),document.execCommand("Copy"),window.document.body.removeChild(e),this.setState({copyHash:"label.copied"})}},{key:"render",value:function(){var e=this,t=this.props,a=t.hash,r=t.classes,i=this.state.copyHash;return Object(oe.jsxs)(Ha.a,{"aria-label":"outlined button group",children:[Object(oe.jsx)(_.a,{disabled:!0,id:"hashValue",className:r.disabledBtn,children:a}),Object(oe.jsx)(Ie,{label:i,icon:je.k,className:r.icon,onClick:function(t){return e.copyHash(t)},onMouseLeave:function(){window.setTimeout((function(){return e.setState({copyHash:"label.copyHash"})}),150)}})]})}}]),a}(r.Component),nr=Object(R.b)(Object(C.a)((function(e){return{disabledBtn:{"&:disabled":{color:e.palette.text.main,border:"1px solid "+e.palette.border}},icon:{color:e.palette.primary.main,border:"1px solid "+e.palette.border,borderLeft:"0px",borderRadius:"0px 4px 4px 0px"}}}))(ir)),sr=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.intl,a=e.classes,r=e.data,n=e.linkPathBase,s=e.currentRepositoryConfig,o=e.showBorder,c=e.blameMode,l=e.path,p=r||{},d={};if(s){var u=Z(s.members,p.email);u&&((d=u).hash=p.sha,d.commitContent=p.commit,d.commitTime=p.time)}return Object(oe.jsxs)(tr.a,{className:o?a.listItem:"",children:[Object(oe.jsx)(ut.a,{primary:Object(oe.jsx)(i.a.Fragment,{children:Object(oe.jsxs)(w.a,{component:"span",variant:"body2",color:"textPrimary",children:[Object(oe.jsx)(rr,{to:n+"/"+d.hash.substr(0,8)+(l||""),children:d.commitContent?d.commitContent:""}),c&&Object(oe.jsx)(rr,{style:{display:"inline-block",float:"right"},to:n+"/"+d.hash.substr(0,8),children:d.hash.substr(0,8)})]})}),secondary:Object(oe.jsx)(i.a.Fragment,{children:Object(oe.jsxs)(k.a,{container:!0,spacing:1,className:a.secondaryWrap,component:"span",children:[Object(oe.jsx)(k.a,{item:!0,component:"span",children:Object(oe.jsx)(Le.a,{src:d.icon?D.HOSTS.PGYER_AVATAR_HOST+d.icon:"/static/images/default_avatar.png",className:a.avatar,component:"span"})}),Object(oe.jsx)(k.a,{item:!0,component:"span",children:Object(oe.jsxs)(w.a,{component:"span",variant:"body2",children:[d.name?d.name:"",d.temporary&&Object(oe.jsxs)(i.a.Fragment,{children:["\xa0",Object(oe.jsx)(Oe,{type:"icon",doc:"/common/multiple_email.md",tooltip:t.formatMessage({id:"message.itsMyEmail"})})]})]})}),Object(oe.jsx)(k.a,{item:!0,component:"span",children:Object(oe.jsxs)(w.a,{component:"span",variant:"body2",children:[t.formatMessage({id:"label.editIn"}),":",Object(oe.jsx)(Nt,{timestamp:Number(d.commitTime)})]})})]})})}),!c&&Object(oe.jsx)(nr,{hash:d.hash.substr(0,8)})]},d.hash)}}]),a}(r.Component),or=Object(R.b)(Object(ge.a)(Object(C.a)((function(e){return{listItem:{borderTop:"1px solid "+e.palette.border,paddingLeft:e.spacing(3),paddingRight:e.spacing(3)},avatar:{width:e.spacing(3),height:e.spacing(3)},secondaryWrap:{padding:e.spacing(1),paddingLeft:0,paddingBottom:0}}}))(Object(h.f)(Object(l.b)((function(e,t){return{}}),(function(e,t){return{}}))(sr))))),cr=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;Object(p.a)(this,a),r=t.call(this,e);var n=window.location.href.match(/^.*#(\d+)$/);return r.state={lineNumber:n?parseInt(n[1]):-1},r.ref=i.a.createRef(),r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){if(this.ref.current){for(var e=this.ref.current,t=0;e;)t+=e.offsetTop,e=e.offsetParent;document.querySelector(".app-content").scrollTop=t-64-105}return!0}},{key:"shouldComponentUpdate",value:function(e,t){return!0}},{key:"componentDidUpdate",value:function(e,t){return!0}},{key:"render",value:function(){var e=this,t=this.props,a=t.object,r=t.blame,i=t.currentRepositoryConfig,n=t.match,s=t.classes,o=t.fragment,c=this.state.lineNumber,l=$(a.path),p=o?a.object:a.object.raw.split("\n"),d=Ya.a.highlight(p.join("\n"),Ya.a.languages[l]||Ya.a.languages.markdown,l).split("\n"),u=[];if(r&&r.length){var m=0;u=p.map((function(e,t){var a=null,o=r.filter((function(e){return e.start===t+1}));return o&&o[0]&&(m=o[0].length,a=Object(oe.jsx)("td",{className:s.blame,rowSpan:o[0].length,children:Object(oe.jsx)(or,{data:o[0].commit,linkPathBase:W(n.params.groupName,n.params.repositoryName,"commit"),currentRepositoryConfig:i,blameMode:!0},t)})),Object(oe.jsxs)("tr",{className:a&&s.topBorder,children:[t===p.length-1&&0===p[t].length||m--<1?Object(oe.jsx)("td",{className:s.blame}):a,Object(oe.jsx)("td",{className:s.lineNumber,children:Object(oe.jsx)("code",{children:t+1})}),Object(oe.jsx)("td",{className:s.code,children:Object(oe.jsx)(er,{code:e,htmlCode:d[t]})})]},t)}))}else u="blame"===n.params.type?p.map((function(e,t){return Object(oe.jsxs)("tr",{children:[0===t&&Object(oe.jsx)("td",{className:s.blameLoading,rowSpan:p.length,children:Object(oe.jsx)(he.a,{size:24})}),Object(oe.jsx)("td",{className:s.lineNumber,children:Object(oe.jsx)("code",{children:t+1})}),Object(oe.jsx)("td",{className:s.code,children:Object(oe.jsx)(er,{code:e,htmlCode:d[t]})})]},t)})):p.map((function(t,a){var r={};return o&&o[a]&&(r={color:"#fff",background:o[a]}),Object(oe.jsxs)("tr",{ref:a+1===c?e.ref:null,children:[Object(oe.jsx)("td",{className:s.lineNumber,style:r,children:Object(oe.jsx)("code",{children:a+1})}),Object(oe.jsx)("td",{className:s.code,children:Object(oe.jsx)(er,{code:t,htmlCode:d[a]})})]},a)}));return Object(oe.jsx)("table",{className:s.table,children:Object(oe.jsx)("tbody",{children:u})})}}]),a}(i.a.Component),lr=Object(R.b)(Object(C.a)((function(e){return{table:{width:"100%",tableLayout:"fixed",borderCollapse:"collapse","& tr:first-child":{border:"none"}},topBorder:{borderTop:"1px solid "+e.palette.border},blame:{width:e.spacing(40),verticalAlign:"middle"},blameLoading:{width:e.spacing(40),verticalAlign:"top",textAlign:"center",paddingTop:e.spacing(10)},lineNumber:{lineHeight:e.spacing(2)+"px",width:e.spacing(4),padding:"0 "+e.spacing(1)+"px",textAlign:"right",verticalAlign:"middle",userSelect:"none",color:e.palette.text.lighter,backgroundColor:e.palette.background.main},code:{verticalAlign:"middle",overflowWrap:"break-word"}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentRepositoryConfig:e.DataStore.currentRepositoryConfig}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(cr)))),pr=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={mdSourceShow:!1,copyAnchor:null},r}return Object(d.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return!0}},{key:"copySomething",value:function(e){this.setState({copyAnchor:null}),window.setTimeout((function(){var t=window.document.createElement("textarea");t.innerHTML=e,window.document.body.appendChild(t),t.select(),document.execCommand("copy"),window.document.body.removeChild(t)}),0)}},{key:"getDisplayMode",value:function(e){return e.object.oversize?D.obejctDisplayType.oversize:e.object.size<=0?D.obejctDisplayType.empty:e.object.mime&&(e.object.mime.match(/^text/)||"application/xml"===e.object.mime)?e.path&&e.path.match(/.*\.md$/i)?D.obejctDisplayType.markdown:D.obejctDisplayType.text:e.object.mime&&e.object.mime.match(/^image/)?D.obejctDisplayType.image:"video/mp4"===e.object.mime?D.obejctDisplayType.video:D.obejctDisplayType.unknown}},{key:"getObjectIcon",value:function(e){return je.p}},{key:"render",value:function(){var e=this,t=this.props,a=t.currentRepositoryConfig,r=t.object,n=t.blame,s=t.classes,o=t.match,c=t.history,l=t.intl,p=this.state.mdSourceShow,d=this.getDisplayMode(r);return Object(oe.jsxs)(k.a,{container:!0,children:[Object(oe.jsxs)(k.a,{item:!0,xs:12,container:!0,className:s.fileInfo,children:[Object(oe.jsxs)(k.a,{item:!0,xs:8,children:[Object(oe.jsx)(fe.a,{icon:this.getObjectIcon(r.object.mime),className:s.icon}),"\xa0\xa0",Object(oe.jsx)(w.a,{variant:"body1",component:"div",children:r.path}),"\xa0",Object(oe.jsxs)(w.a,{variant:"body2",component:"div",children:[" \xa0|\xa0 ",z(r.object.size,"Bytes")]}),"\xa0\xa0",Object(oe.jsx)(Ie,{label:"label.copy",icon:je.k,onClick:function(t){return e.setState({copyAnchor:t.target})},className:s.icon2}),Object(oe.jsxs)(ot.a,{anchorEl:this.state.copyAnchor,transitionDuration:0,open:!!this.state.copyAnchor,onClose:function(t){return e.setState({copyAnchor:null})},children:[Object(oe.jsx)(lt.a,{value:"0",onClick:function(t){return e.copySomething(r.path)},children:l.formatMessage({id:"label.copyPath"})}),(d===D.obejctDisplayType.text||d===D.obejctDisplayType.markdown)&&Object(oe.jsx)(lt.a,{value:"1",onClick:function(t){return e.copySomething(r.object.raw)},children:l.formatMessage({id:"label.copyCode"})})]}),d===D.obejctDisplayType.markdown&&Object(oe.jsx)(i.a.Fragment,{children:p?Object(oe.jsx)(Ie,{label:"message.displayRendereFile",icon:je.p,onClick:function(){return e.setState({mdSourceShow:!1})}}):Object(oe.jsx)(Ie,{label:"message.displaySource",icon:je.h,onClick:function(){return e.setState({mdSourceShow:!0})}})})]}),o.params.path&&Object(oe.jsx)(k.a,{item:!0,xs:4,className:s.blame,children:Object(oe.jsxs)(Ha.a,{size:"small","aria-label":"small outlined button group",children:[Object(oe.jsx)(_.a,{onClick:function(e){return c.push(W(a.group.name,a.repository.name,"commits",encodeURIComponent(o.params.rev)+o.params.path))},children:l.formatMessage({id:"label.history"})}),(d===D.obejctDisplayType.text||d===D.obejctDisplayType.markdown)&&Object(oe.jsx)(_.a,{onClick:function(e){return c.push(W(a.group.name,a.repository.name,"blame"===o.params.type?"files":"blame",encodeURIComponent(o.params.rev)+o.params.path))},children:"blame"===o.params.type?"Normal":"Blame"})]})})]}),Object(oe.jsxs)(k.a,{item:!0,xs:12,className:[s.detail,d===D.obejctDisplayType.text||p?s.editorBg:""].join(" "),children:[d===D.obejctDisplayType.text&&Object(oe.jsx)(lr,{object:r,blame:n}),d===D.obejctDisplayType.markdown&&Object(oe.jsxs)(k.a,{container:!0,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,className:p?"":s.height0,children:Object(oe.jsx)(lr,{object:r,blame:n})}),Object(oe.jsxs)(k.a,{item:!0,xs:12,className:[p?s.height0:s.markdown,"markdown-body"].join(" "),children:[Object(oe.jsx)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/4.0.0/github-markdown.min.css"}),Object(oe.jsx)($a.a,{children:r.object.raw})]})]}),d===D.obejctDisplayType.image&&Object(oe.jsx)("img",{src:"data:"+r.object.mime+";base64,"+r.object.base64Encoded,className:s.mediaFile}),d===D.obejctDisplayType.video&&Object(oe.jsx)("div",{className:s.mediaFile,children:Object(oe.jsx)("video",{width:"100%",controls:!0,children:Object(oe.jsx)("source",{src:"data:"+r.object.mime+";base64,"+r.object.base64Encoded,type:r.object.mime})})}),d===D.obejctDisplayType.unknown&&Object(oe.jsx)(w.a,{variant:"body1",component:"div",className:s.unknown,children:l.formatMessage({id:"message.fileTypeNotSupport"})}),d===D.obejctDisplayType.empty&&Object(oe.jsx)(w.a,{variant:"body1",component:"div",className:s.unknown,children:l.formatMessage({id:"message.fileContentEmpty"})}),d===D.obejctDisplayType.oversize&&Object(oe.jsx)(w.a,{variant:"body1",component:"div",className:s.unknown,children:l.formatMessage({id:"message.fileContentOversize"})})]})]})}}]),a}(i.a.Component),dr=Object(R.b)(Object(C.a)((function(e){return{icon:{color:e.palette.text.lighter},icon2:{color:e.palette.primary.main},fileInfo:{lineHeight:e.spacing(5)+"px",paddingLeft:e.spacing(3),paddingRight:e.spacing(3),background:e.palette.background.main,border:"1px solid "+e.palette.border,borderRadius:e.spacing(.5)+"px "+e.spacing(.5)+"px 0 0","& > div":{display:"flex",alignItems:"center"}},blame:{justifyContent:"flex-end","& button":{background:e.palette.background.light,borderColor:e.palette.border}},editorBg:{background:e.palette.background.light},detail:{overflowX:"hidden",border:"1px solid "+e.palette.border,borderRadius:"0 0 "+e.spacing(.5)+"px "+e.spacing(.5)+"px",borderTop:"0px"},mediaFile:{display:"block",margin:"auto",marginTop:e.spacing(5),marginBottom:e.spacing(5),maxWidth:"80%"},oldImage:{display:"block",marginTop:e.spacing(5),marginBottom:e.spacing(3),border:"1px solid "+e.palette.error.main,padding:e.spacing(2),marginLeft:"auto",marginRight:"auto",maxWidth:"80%"},newImage:{display:"block",marginTop:e.spacing(5),marginBottom:e.spacing(3),border:"1px solid "+e.palette.success.dark,marginLeft:"auto",padding:e.spacing(2),marginRight:"auto",maxWidth:"80%"},height0:{height:"0px",paddingTop:"0px !important",paddingBottom:"0px !important",overflow:"hidden"},unknown:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:e.spacing(32)},markdown:{boxSizing:"border-box",minWidth:"200px",maxWidth:"980px",margin:"0 auto",padding:"45px"}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentRepositoryConfig:e.DataStore.currentRepositoryConfig}}),(function(e,t){return{}}))(pr)))),ur=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.currentRepositoryConfig,a=e.currentUserInfo,r=e.classes,i=e.intl;if(!t.repository)return null;var n="git remote add origin "+a.host+"/"+t.group.name+"/"+t.repository.name+".git",s=['echo "# '+t.repository.name+'" >> README.md',"git init","git add README.md",'git commit -m "first commit"',"git branch -M main",n,"git push -u origin main"],o=[n,"git branch -M main","git push -u origin main"];return Object(oe.jsxs)(k.a,{item:!0,xs:12,children:[Object(oe.jsxs)(k.a,{className:r.setup,children:[Object(oe.jsx)(w.a,{variant:"h1",component:"div",children:i.formatMessage({id:"message.createNewRepository"})}),Object(oe.jsxs)(k.a,{className:r.code,children:[Object(oe.jsx)(Ie,{className:r.icon,label:"label.copy",onClick:function(e){return X(s.join("\n"))},icon:je.k}),s.map((function(e,t){return Object(oe.jsx)(w.a,{variant:"body1",component:"div",children:Object(oe.jsx)("code",{children:e})},t)}))]})]}),Object(oe.jsxs)(k.a,{className:[r.setup,r.noBorder].join(" "),children:[Object(oe.jsx)(w.a,{variant:"h1",component:"div",children:i.formatMessage({id:"message.pushRepository"})}),Object(oe.jsxs)(k.a,{className:r.code,children:[Object(oe.jsx)(Ie,{className:r.icon,label:"label.copy",onClick:function(e){return X(o.join("\n"))},icon:je.k}),o.map((function(e,t){return Object(oe.jsx)(w.a,{variant:"body1",component:"div",children:Object(oe.jsx)("code",{children:e})},t)}))]})]})]})}}]),a}(i.a.Component),mr=Object(R.b)(Object(C.a)((function(e){return{setup:{padding:e.spacing(3)+"px",borderRadius:"4px 4px 0px 0px",border:"1px solid "+e.palette.border},noBorder:{borderTop:0,borderRadius:"0px 0px 4px 4px"},code:{position:"relative",marginTop:e.spacing(1),padding:e.spacing(1.5)+"px",borderRadius:e.spacing(.5)+"px",background:e.palette.background.main},icon:{top:e.spacing(1.5)+"px",right:e.spacing(1.5)+"px",position:"absolute"}}}))(Object(l.b)((function(e,t){return{currentRepositoryConfig:e.DataStore.currentRepositoryConfig,currentUserInfo:e.DataStore.currentUserInfo}}),(function(e,t){return{}}))(ur))),hr=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={pending:!0,pathStack:[],search:"",objectData:{},blameData:null,readmeFile:{}},r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.getPathStack(this.props,this.state)}},{key:"shouldComponentUpdate",value:function(e,t){return JSON.stringify(this.props.match.params)!==JSON.stringify(e.match.params)?this.props.match.params.type!==e.match.params.type&&this.props.match.params.rev===e.match.params.rev&&this.props.match.params.path===e.match.params.path?(this.getObject(e,t),!1):(this.getPathStack(e,t),!1):JSON.stringify(this.props.currentRepositoryConfig)!==JSON.stringify(e.currentRepositoryConfig)?(this.getPathStack(e,t),!1):JSON.stringify(this.state.pathStack)===JSON.stringify(t.pathStack)||(this.getObject(e,t),!1)}},{key:"getPathStack",value:function(e,t){var a=this;return!e.currentRepositoryKey||!e.currentRepositoryConfig.repository||(e.match.params.path&&"/"!==e.match.params.path||0!==t.pathStack.length?(this.setState({objectData:{},pending:!0}),Ht.pathStack({repository:e.currentRepositoryKey,revision:e.match.params.rev&&decodeURIComponent(e.match.params.rev)||Y(e.currentRepositoryConfig),path:e.match.params.path||"/"}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(e){e.code||a.setState({pending:!1,pathStack:e.data})})),!0):(this.getObject(e,t),!0))}},{key:"getObject",value:function(e,t){var a=this;if(!e.currentRepositoryConfig.branches||!e.currentRepositoryConfig.branches.length)return this.setState({blameData:null,objectData:{},pending:!1}),!0;t.pathStack.length>0&&"blob"===t.pathStack[t.pathStack.length-1].type&&"blame"===e.match.params.type&&this.getBlame(e,t);var r=t.pathStack.reduce((function(e,t){return(e?e+"/":"")+t.name}),"");this.setState({blameData:null,objectData:{},pending:!0}),Ht.object({repository:e.currentRepositoryKey,parent:t.pathStack.length&&t.pathStack[t.pathStack.length-1].object||e.match.params.rev&&decodeURIComponent(e.match.params.rev)||Y(e.currentRepositoryConfig),revision:e.match.params.rev&&decodeURIComponent(e.match.params.rev)||Y(e.currentRepositoryConfig),path:r||"/"}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(e){e.code?a.setState({pending:!1}):(a.setState({pending:!1,search:"",objectData:e.data}),a.getReadmeFile(e.data))}))}},{key:"getBlame",value:function(e,t){var a=this;this.setState({blameData:null});var r=t.pathStack.reduce((function(e,t){return(e?e+"/":"")+t.name}),"");Ht.getBlameInfo({repository:e.currentRepositoryKey,revision:e.match.params.rev&&decodeURIComponent(e.match.params.rev)||Y(e.currentRepositoryConfig),path:r||"/"}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(e){e.code||a.setState({search:"",blameData:e.data.blame})}))}},{key:"getReadmeFile",value:function(e){var t=this;if("blob"!==e.type){var a=e.object.filter((function(e){return"readme.md"===e.name.toLowerCase()}));a[0]&&Ht.object({repository:this.props.currentRepositoryKey,parent:a[0].object,revision:this.props.match.params.rev&&decodeURIComponent(this.props.match.params.rev)||Y(this.props.currentRepositoryConfig),path:e.path+"/"+a[0].name}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(e){e.code||t.setState({readmeFile:e.data})}))}this.setState({readmeFile:{}})}},{key:"makeFileListData",value:function(e){var t=this,a=this.state.pathStack.reduce((function(e,t){return(e?e+"/":"")+t.name}),""),r=e.sort((function(e,t){return e.type===t.type?0:"blob"===e.type?1:-1})).map((function(e){return[Object(oe.jsxs)(w.a,{variant:"body1",children:[Object(oe.jsx)(fe.a,{icon:"blob"===e.type?je.p:je.U})," \xa0\xa0",Object(oe.jsx)(o.b,{className:t.props.classes.linkObjectName,to:W(t.props.currentRepositoryConfig.group.name,t.props.currentRepositoryConfig.repository.name,"files",encodeURIComponent(t.props.match.params.rev||Y(t.props.currentRepositoryConfig)),a?a+"/"+e.name:e.name),children:e.name})]}),Object(oe.jsx)(o.b,{className:t.props.classes.linkCommitMessage,to:W(t.props.currentRepositoryConfig.group.name,t.props.currentRepositoryConfig.repository.name,"commit",e.commit.sha.slice(0,8)),children:e.commit.commit}),Object(oe.jsx)(Nt,{timestamp:e.commit.time})]}));return[["30%","auto","auto"],["label.name","label.lastCommit","label.lastUpdate"]].concat(Object(T.a)(r))}},{key:"composePathBreadCrumb",value:function(){for(var e=[this.props.currentRepositoryConfig.group.name,this.props.currentRepositoryConfig.repository.name,"files",encodeURIComponent(this.props.match.params.rev||Y(this.props.currentRepositoryConfig))],t=[Object(oe.jsx)(w.a,{variant:"body2",component:"div",children:Object(oe.jsx)(o.b,{to:W.apply(void 0,e),className:this.props.classes.linkCommitMessage,children:this.props.currentRepositoryConfig.repository.name})},"p")],a=0;a<this.state.pathStack.length;a++)e.push(this.state.pathStack[a].name),t.push(Object(oe.jsxs)(w.a,{variant:"body2",component:"div",children:["\xa0\xa0/\xa0\xa0",Object(oe.jsx)(o.b,{to:W.apply(void 0,e),className:a===this.state.pathStack.length-1?this.props.classes.linkObjectName:this.props.classes.linkCommitMessage,children:this.state.pathStack[a].name})]},"p"+a));return t}},{key:"render",value:function(){var e=this,t=this.props,a=t.currentRepositoryError,r=t.currentRepositoryConfig,i=t.history,n=t.match,s=t.intl,o=t.classes;return a?Object(oe.jsx)(k.a,{container:!0,spacing:2,children:Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(Pt,{imageName:"commits-empty.png",notice:s.formatMessage({id:"message.noRepositoryFind"})})})}):Object(oe.jsxs)(k.a,{container:!0,spacing:2,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(Wa,{repositoryConfig:r})}),Y(r)&&Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsxs)(k.a,{container:!0,justifyContent:"space-between",children:[Object(oe.jsx)(k.a,{item:!0,children:Object(oe.jsxs)(k.a,{container:!0,spacing:2,alignItems:"center",className:"width-auto",children:[Object(oe.jsx)(k.a,{item:!0,children:Object(oe.jsx)(Ja,{currentRevision:this.props.match.params.rev&&decodeURIComponent(this.props.match.params.rev)||Y(r),revisionList:{branches:r.branches,tags:r.tags},onChange:function(e){return i.push(W(r.group.name,r.repository.name,"files",encodeURIComponent(e)))}})}),Object(oe.jsx)(k.a,{item:!0,children:Object(oe.jsx)(k.a,{container:!0,children:this.composePathBreadCrumb()})})]})}),Object(oe.jsx)(k.a,{item:!0,xs:2,children:Object(oe.jsx)(E.a,{fullWidth:!0,variant:"outlined",value:this.state.search,onChange:function(t){return e.setState({search:t.target.value})},InputProps:{startAdornment:Object(oe.jsx)(Gt.a,{position:"start",children:Object(oe.jsx)(fe.a,{icon:je.D})})}})})]})}),!this.state.pending&&Y(r)&&this.state.objectData.commit&&Object(oe.jsx)(k.a,{item:!0,xs:12,className:o.commit,children:Object(oe.jsx)(or,{showBorder:Boolean(!1),data:this.state.objectData.commit,linkPathBase:W(n.params.groupName,n.params.repositoryName,"commit"),currentRepositoryConfig:r})}),!this.state.pending&&Y(r)&&this.state.objectData.commit&&Object(oe.jsx)(k.a,{item:!0,xs:12,children:"blob"===this.state.objectData.type?Object(oe.jsx)(dr,{object:this.state.objectData,blame:this.state.blameData}):Object(oe.jsx)(ke,{data:this.makeFileListData(this.state.objectData.object.filter(U.search(this.state.search,["name"])))})}),!this.state.pending&&Y(r)&&"blob"!==this.state.objectData.type&&this.state.readmeFile.object&&Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(dr,{object:this.state.readmeFile})}),this.state.pending&&Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(k.a,{container:!0,className:o.loading,children:Object(oe.jsx)(he.a,{})})}),!this.state.pending&&(!this.state.objectData.object||0===this.state.objectData.object.length)&&Object(oe.jsx)(mr,{})]})}}]),a}(i.a.Component),gr=Object(R.b)(Object(C.a)((function(e){return{loading:{paddingTop:e.spacing(16),paddingBottom:e.spacing(16),justifyContent:"center"},linkObjectName:{color:e.palette.text.main+" !important"},linkCommitMessage:{color:e.palette.text.light+" !important"},commit:{"& > li":{border:"1px solid "+e.palette.border,borderRadius:e.spacing(.5)+"px"}}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentRepositoryKey:e.DataStore.currentRepositoryKey,currentRepositoryError:e.DataStore.currentRepositoryError,currentRepositoryConfig:e.DataStore.currentRepositoryConfig}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(hr)))),br=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={commitList:[],page:1,pending:!1,listFinshed:!1,searchInput:"",search:""},r.pageSize=20,r.mountedFlag=!1,r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.mountedFlag=!0,this.setState({page:1,listFinshed:!1,commitList:[],searchInput:"",search:""}),this.getData(this.props,this.state)}},{key:"componentWillUnmount",value:function(){this.mountedFlag=!1}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.currentRepositoryKey!==e.currentRepositoryKey||this.props.match.params.rev!==e.match.params.rev||JSON.stringify(this.props.currentRepositoryConfig)!==JSON.stringify(e.currentRepositoryConfig)?(this.setState({page:1,listFinshed:!1,commitList:[],searchInput:"",search:""}),1===t.page&&""===t.search&&this.getData(e,t),!1):this.state.search!==t.search?(this.setState({page:1,listFinshed:!1,commitList:[]}),1===t.page&&this.getData(e,t),!1):this.state.page===t.page||(this.getData(e,t),!1)}},{key:"getData",value:function(e,t){var a=this;if(!e.currentRepositoryConfig.repository||t.pending||!this.mountedFlag)return!1;if(!e.currentRepositoryConfig.branches||!e.currentRepositoryConfig.branches.length)return!1;var r=e.intl;this.setState({pending:!0}),Ht.commitList({repository:e.currentRepositoryKey,revision:e.match.params.rev&&decodeURIComponent(e.match.params.rev)||Y(e.currentRepositoryConfig),path:e.match.params.path?decodeURIComponent(e.match.params.path):"",page:t.page,pagesize:this.pageSize,keyword:t.search}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(i){if(i.code)e.dispatchEvent(ae.NewNotification(r.formatMessage({id:"message.error.showCommitListFailed"}),2));else{var n=i.data,s=[],o=0,c="";if(s[o]={date:"",list:[]},n.length){n.map((function(e,t){return c?(new j.a).format(1e3*Number(e.time),"yyyy-MM-dd")===c?(s[o].date=c,s[o].list.push(e)):(s[o+=1]={date:"",list:[]},c=(new j.a).format(1e3*Number(e.time),"yyyy-MM-dd"),s[o].date=c,s[o].list.push(e)):(c=(new j.a).format(1e3*Number(e.time),"yyyy-MM-dd"),s[o].date=c,s[o].list.push(e)),!0}));var l=n.length<a.pageSize;s.map((function(e,a){if(t.commitList.length>0){var r=!1;t.commitList.map((function(a,i){return a.date===e.date?(r=!0,a.list=[].concat(Object(T.a)(a.list),Object(T.a)(e.list)),a):(r||i!==t.commitList.length-1||t.commitList.push(e),!0)}))}return!0})),t.commitList.length&&1!==t.page?a.setState({pending:!1,commitList:Object(T.a)(a.state.commitList),listFinshed:l}):a.setState({pending:!1,commitList:[].concat(s),listFinshed:l})}else a.setState({pending:!1,listFinshed:!0,commitList:[]})}}))}},{key:"pageReload",value:function(e,t,a){t&&a||(t=this.state.refType,a=this.state.ref);var r=this.props,i=r.currentRepositoryConfig,n=r.history,s=W(i.repository.group.name,i.repository.name,"commits",t,encodeURIComponent(a));return e?n.push(s):s}},{key:"filterCommits",value:function(e){e?(this.observed.keyword=e,this.setState({page:1}),this.getData(this.props,this.state)):(this.observed.keyword="",this.setState({page:1}))}},{key:"render",value:function(){var e=this,t=this.state.commitList,a=this.props,r=a.currentRepositoryConfig,i=a.match,n=a.history,s=a.classes,o=a.intl;return Object(oe.jsxs)(k.a,{container:!0,spacing:3,children:[r.branches&&0!==r.branches.length&&Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsxs)(k.a,{container:!0,justifyContent:"space-between",children:[Object(oe.jsxs)(k.a,{item:!0,children:[Object(oe.jsx)(Ja,{currentRevision:i.params.rev&&decodeURIComponent(i.params.rev)||Y(r),revisionList:{branches:r.branches,tags:r.tags},onChange:function(e){return n.push(W(r.group.name,r.repository.name,"commits",encodeURIComponent(e)))}}),"\xa0\xa0",Object(oe.jsx)(w.a,{variant:"body1",component:"span",className:s.path,children:i.params.path?i.params.path.substr(1):""})]}),Object(oe.jsx)(k.a,{item:!0,xs:2,children:Object(oe.jsx)(E.a,{fullWidth:!0,variant:"outlined",disabled:this.state.pending,value:this.state.searchInput,onChange:function(t){return e.setState({searchInput:t.target.value})},onKeyDown:function(t){13===t.keyCode&&e.setState({search:t.target.value})},InputProps:{startAdornment:Object(oe.jsx)(Gt.a,{position:"start",children:Object(oe.jsx)(fe.a,{icon:je.D})})}})})]})}),this.state.commitList.length>0&&Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(k.a,{container:!0,spacing:3,children:t.map((function(e,t){var a=e.date+" ["+o.formatMessage({id:"label._N_commit"},{n:e.list.length})+"]";return Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(ra,{title:a,children:e.list.map((function(e,t){return Object(oe.jsx)(or,{showBorder:!0,path:i.params.path,data:e,linkPathBase:W(i.params.groupName,i.params.repositoryName,i.params.path?"files":"commit"),currentRepositoryConfig:r},t)}))})},t)}))})}),!this.state.pending&&this.state.commitList.length>0&&Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(k.a,{container:!0,spacing:2,justifyContent:"center",children:this.state.pending?Object(oe.jsxs)(_.a,{color:"primary",size:"small",disabled:!0,disableElevation:!0,children:[Object(oe.jsx)(he.a,{size:"1rem",color:"inherit"})," \xa0\xa0",o.formatMessage({id:"label.processing"})]}):this.state.listFinshed?t.length>0?Object(oe.jsx)(_.a,{size:"small",disabled:!0,children:o.formatMessage({id:"label.noMore"})}):"":Object(oe.jsxs)(_.a,{variant:"contained",color:"primary",size:"small",disableElevation:!0,onClick:function(t){return e.setState({page:e.state.page+1})},children:[o.formatMessage({id:"label.more"})," \xa0\xa0",Object(oe.jsx)(fe.a,{icon:Ge.a})]})})}),0===this.state.commitList.length&&Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(Pt,{imageName:"commits-empty.png",notice:o.formatMessage({id:"message.noCommitRecord"}),pending:this.state.pending})})]})}}]),a}(i.a.Component),fr=Object(R.b)(Object(h.f)(Object(ge.a)(Object(C.a)((function(e){return{path:{lineHeight:e.spacing(4)+"px"}}}))(Object(l.b)((function(e,t){return{currentRepositoryKey:e.DataStore.currentRepositoryKey,currentRepositoryConfig:e.DataStore.currentRepositoryConfig}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(br))))),jr=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={keyword:e.match.params.tag?e.match.params.tag:e.match.params.branch?e.match.params.branch:""},r}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.refType,a=e.pending,r=e.searchRef,i=e.sortDesc,n=e.sortSwitch,s=e.children,o=e.tabValue,c=e.tabChange,l=e.currentRepositoryConfig,p=e.history,d=e.classes,u=e.intl;return Object(oe.jsxs)(k.a,{item:!0,xs:12,children:[Object(oe.jsxs)(ft,{currentTab:o,onChange:function(e,t){return c(t)},tabs:"branch"===t?[u.formatMessage({id:"label.all"}),u.formatMessage({id:"label.active"}),u.formatMessage({id:"label.inactive"})]:[],children:[Object(oe.jsx)(E.a,{variant:"outlined",className:d.input,placeholder:u.formatMessage({id:"message.input_S_name"},{s:u.formatMessage({id:"label."+t})}),defaultValue:this.state.keyword,onChange:function(e){return r(e.target.value)},InputProps:{startAdornment:Object(oe.jsx)(Gt.a,{position:"start",children:Object(oe.jsx)(fe.a,{icon:je.D})})}}),"\xa0",Object(oe.jsx)(Ie,{label:"label.sort",onClick:n,className:[d.icon,i?"":d.transform].join(" "),icon:je.F}),l.branches&&l.branches.length>0&&Object(oe.jsx)(_.a,{variant:"contained",color:"primary",className:d.button,disabled:a,onClick:function(){return p.push(W(l.repository.group.name,l.repository.name,"tag"===t?"tags":"branches","new"))},children:u.formatMessage({id:"tag"===t?"label.newTag":"label.newBranch"})})]}),Object(oe.jsx)(k.a,{container:!0,spacing:2,children:Object(oe.jsx)(k.a,{item:!0,xs:12,children:s})})]})}}]),a}(i.a.Component),vr=Object(R.b)(Object(C.a)((function(e){return{input:{width:e.spacing(30),maxWidth:"100%"},button:{marginLeft:e.spacing(4)},icon:{color:e.palette.text.light},transform:{transform:"rotateX(180deg)"}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentRepositoryConfig:e.DataStore.currentRepositoryConfig}}),(function(e,t){return{}}))(jr)))),Or=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={page:1,perpage:10,anchor:[]},r}return Object(d.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.repage!==e.repage&&this.setState({page:1}),!0}},{key:"refListsDeal",value:function(e){var t=this.props,a=t.currentRepositoryConfig,r=t.history;e.map((function(e){return e.map((function(e,t){var i=W(a.repository.group.name,a.repository.name,"files",encodeURIComponent(e.name),"");if(e.nameA=Object(oe.jsx)(rr,{to:i,onClick:function(){return r.push(i)},children:e.name}),e.commit.sha){var n=W(a.repository.group.name,a.repository.name,"commit",e.commit.sha.substring(0,8));e.shaA=Object(oe.jsx)(rr,{to:n,onClick:function(){return r.push(n)},children:e.commit.sha.substring(0,8)}),e.logA=Object(oe.jsx)(rr,{to:n,onClick:function(){return r.push(n)},children:e.commit.commit})}return e.commit.email&&(e.updater=Z(a.members,e.commit.email)),!0})),!0}))}},{key:"openRefItemMenu",value:function(e,t){var a=this.state.anchor;a[e]=t.target,this.setState({anchor:a})}},{key:"closeRefItemMenu",value:function(e){var t=this.state.anchor;t[e]=null,this.setState({anchor:t})}},{key:"refListItem",value:function(e,t,a){var r=this,n=this.props,s=n.currentRepositoryConfig,o=n.refType,c=n.deleteRef,l=n.tabValue,p=n.classes,d=n.intl,u=this.state,m=u.page,h=u.perpage,g=Y(s);return!(0===l&&!t.length)&&Object(oe.jsxs)(k.a,{container:!0,className:p.refListItem,children:[t.length>0&&Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(ra,{title:e?d.formatMessage({id:"label."+e}):"",children:t.slice(0,m*h).map((function(t,a){return Object(oe.jsxs)(k.a,{container:!0,className:p.refItem,children:[Object(oe.jsxs)(k.a,{item:!0,xs:11,children:[Object(oe.jsxs)(w.a,{variant:"body1",component:"div",className:p.oneline,children:[Object(oe.jsx)(fe.a,{className:p.icon,icon:"tag"===o?je.G:je.d}),"\xa0\xa0\xa0",Object(oe.jsx)(w.a,{component:"span",className:p.refName,children:t.nameA}),"\xa0\xa0",Object(oe.jsx)(w.a,{component:"span",className:p.refLog,children:t.detail}),"\xa0\xa0","branch"===o&&t.protected&&Object(oe.jsx)(fe.a,{className:p.icon2,icon:je.C}),"branch"===o&&t.name===g&&Object(oe.jsxs)(i.a.Fragment,{children:[Object(oe.jsx)(Ke,{color:"secondary",text:d.formatMessage({id:"label.default"})})," \xa0\xa0\xa0"]}),"branch"===o&&t.name!==g&&!!t.isMerge&&Object(oe.jsx)(Ke,{color:"success",icon:je.P,text:d.formatMessage({id:"message.merged"})})]}),Object(oe.jsxs)(w.a,{variant:"body1",component:"div",className:p.oneline,children:[Object(oe.jsx)(fe.a,{className:p.icon,icon:je.i}),"\xa0\xb7\xa0",Object(oe.jsx)(w.a,{component:"span",className:p.refSha,children:t.shaA}),"\xa0\xb7\xa0",Object(oe.jsx)(w.a,{component:"span",className:p.refLog,children:t.logA}),"\xa0\xb7\xa0",Object(oe.jsxs)(w.a,{variant:"body2",component:"span",className:p.refUpdate,children:[t.updater.name,"\xa0",d.formatMessage({id:"label.updatedIn"}),"\xa0"]}),Object(oe.jsx)(Nt,{timestamp:1*t.commit.time})]})]}),Object(oe.jsxs)(k.a,{item:!0,xs:1,className:p.delete,children:["branch"===o&&t.name!==g&&Object(oe.jsxs)(i.a.Fragment,{children:[Object(oe.jsx)(Ie,{label:"label.more",onClick:function(t){return r.openRefItemMenu(e+a,t)},icon:je.cb}),Object(oe.jsx)(ot.a,{anchorEl:r.state.anchor[e+a],transitionDuration:0,open:!!r.state.anchor[e+a],onClose:function(t){return r.closeRefItemMenu(e+a)},children:Object(oe.jsxs)(lt.a,{onClick:function(){r.closeRefItemMenu(e+a),c(t.name)},children:[Object(oe.jsx)(fe.a,{className:p.icon,icon:je.H}),"\xa0\xa0",d.formatMessage({id:"label.delete"})]})})]}),"tag"===o&&Object(oe.jsx)(Ie,{label:"label.delete",className:p.icon,onClick:function(){return c(t.name)},icon:je.H})]})]},a)}))})}),0!==l&&Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(k.a,{container:!0,className:p.more,justifyContent:"center",children:Object(oe.jsx)(k.a,{item:!0,children:m*h>=t.length?Object(oe.jsx)(_.a,{size:"small",disabled:!0,children:d.formatMessage({id:"label.noMore"})}):Object(oe.jsxs)(_.a,{variant:"contained",color:"primary",size:"small",disableElevation:!0,onClick:function(e){return r.setState({page:r.state.page+1})},children:[d.formatMessage({id:"label.more"})," \xa0\xa0",Object(oe.jsx)(fe.a,{icon:Ge.a})]})})})})]},a)}},{key:"render",value:function(){var e=this,t=this.props,a=t.refType,r=t.count,n=t.refTitles,s=t.refLists,o=t.pending,c=t.currentRepositoryConfig,l=t.classes,p=t.history,d=t.intl;this.refListsDeal(s);var u=0;return s&&s.map((function(e,t){return u+=e.length,!0})),Object(oe.jsx)(i.a.Fragment,{children:r?u?s.map((function(t,a){return e.refListItem(n[a],t,a)})):Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(k.a,{container:!0,className:l.more,justifyContent:"center",children:Object(oe.jsx)(k.a,{item:!0,children:Object(oe.jsx)(_.a,{disabled:!0,children:d.formatMessage({id:"label.noMore"})})})})}):Object(oe.jsx)(k.a,{item:!0,children:Object(oe.jsx)(Pt,{imageName:"tag"===a?"branches-empty.png":"tags-empty.png",title:d.formatMessage({id:"message.repository_S_empty"},{s:d.formatMessage({id:"label."+a})}),notice:d.formatMessage({id:"tag"===a?"message.repositoryTagEmpty":"message.repositoryBranchEmpty"}),children:"tag"===a?c.branches&&c.branches.length>0&&Object(oe.jsx)(_.a,{variant:"contained",color:"primary",disabled:o,onClick:function(){return p.push(W(c.repository.group.name,c.repository.name,"tags","new"))},children:d.formatMessage({id:"label.newTag"})}):Object(oe.jsx)(Oe,{type:"button",doc:"/git/create_branch.md",title:d.formatMessage({id:"label.newBranch"})})})})})}}]),a}(i.a.Component),yr=Object(R.b)(Object(C.a)((function(e){return{refListItem:{marginTop:e.spacing(3)},oneline:{display:"flex",height:e.spacing(3),alignItems:"center"},refItem:{padding:e.spacing(1.5)+"px "+e.spacing(3)+"px",borderTop:"1px solid "+e.palette.border},refName:{"& a":{color:e.palette.text.main+" !important",fontWeight:600}},refLog:{display:"flex",alignItems:"center",maxWidth:"35%","& a":{display:"inline-block",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",color:e.palette.text.main+" !important"}},refUpdate:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},refSha:{"& a":{color:e.palette.secondary.main+" !important"}},delete:{display:"flex",justifyContent:"flex-end",alignItems:"center"},more:{paddingTop:e.spacing(2)},icon:{color:e.palette.text.light},icon2:{color:e.palette.success.main,marginRight:e.spacing(2.5)}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentRepositoryConfig:e.DataStore.currentRepositoryConfig}}),(function(e,t){return{}}))(Or)))),xr=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).observed={keyword:r.props.match.params.branch?r.props.match.params.branch:"",tabValue:0,data:null},r.state={refTitles:[],branchLists:null,pending:!0,repage:0,sortDesc:!0},r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.getData(this.props)}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.currentRepositoryKey!==e.currentRepositoryKey||JSON.stringify(this.props.currentRepositoryConfig)!==JSON.stringify(e.currentRepositoryConfig)?(this.getData(e),!1):this.state.sortDesc===t.sortDesc||(this.dataSort(t.sortDesc),!1)}},{key:"getData",value:function(e){var t=this;if(!e.currentRepositoryKey||!e.currentRepositoryConfig.repository)return!1;Ht.branchList({repository:e.currentRepositoryKey}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(e){t.setState({pending:!1}),e.code||(t.observed.data=e.data,t.dataSort(t.state.sortDesc))}))}},{key:"dataSort",value:function(e){this.observed.data&&(this.observed.data.sort((function(t,a){return e?a.commit.time-t.commit.time:t.commit.time-a.commit.time})),this.dataFilter(this.observed.tabValue))}},{key:"dataFilter",value:function(e){var t=this.observed,a=t.data,r=t.keyword;this.observed.tabValue=e;var i=null;i=null!==a&&a.length?r?a.filter(U.nameLikes(r)):a:[];var n=[],s=[],o=Math.floor((new Date).getTime()/1e3),c=7776e3;i.map((function(t,a){return o-t.commit.time<=c&&(0===e||1===e)?n.push(t):o-t.commit.time>c&&(0===e||2===e)&&s.push(t),!0}));var l=[],p=[];0===e?(l.push("active","inactive"),p.push(n,s)):1===e?(l.push("active"),p.push(n)):2===e&&(l.push("inactive"),p.push(s)),this.setState({refTitles:l,branchLists:p,repage:this.state.repage+1})}},{key:"filterBranch",value:function(e){this.observed.keyword=e,this.dataFilter(this.observed.tabValue)}},{key:"deleteBranch",value:function(e){var t=this,a=this.props,r=a.currentRepositoryKey,i=a.intl;if(!r||!e)return!1;Ht.deleteBranch({repository:r,branch:e}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(a){a.code?t.props.dispatchEvent(ae.NewNotification(i.formatMessage({id:"message.error.deleteFail"}),2)):(t.observed.data=t.observed.data.filter((function(t,a){return t.name!==e})),t.props.dispatchEvent(ae.NewNotification(i.formatMessage({id:"message.deleted"}),0)),t.dataFilter(t.observed.tabValue)),t.props.dispatchEvent(ae.cancelComformation())}))}},{key:"deleteConfirm",value:function(e){var t=this,a=this.props.intl;this.props.dispatchEvent(ae.addComformation("branch_remove",{title:a.formatMessage({id:"message.confirmDelete"},{s:a.formatMessage({id:"label.branch"})+" '"+e+"' "}),description:"",reject:function(){return!0},accept:function(){t.deleteBranch(e)}}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.refTitles,r=t.branchLists,i=t.pending,n=t.repage,s=t.sortDesc;return Object(oe.jsx)(k.a,{container:!0,spacing:3,children:Object(oe.jsx)(vr,{refType:"branch",pending:i,tabValue:this.observed.tabValue,tabChange:function(t){return e.dataFilter(t)},searchRef:function(t){return e.filterBranch(t)},sortDesc:s,sortSwitch:function(){return e.setState({sortDesc:!s})},children:r?Object(oe.jsx)(yr,{refType:"branch",count:this.observed.data?this.observed.data.length:0,refTitles:a,refLists:r,deleteRef:function(t){return e.deleteConfirm(t)},repage:n,pending:i,tabValue:this.observed.tabValue}):Object(oe.jsx)(k.a,{container:!0,spacing:2,className:this.props.classes.loading,children:Object(oe.jsx)(he.a,{})})})})}}]),a}(r.Component),Sr=Object(R.b)(Object(C.a)((function(e){return{loading:{paddingTop:e.spacing(16),paddingBottom:e.spacing(16),justifyContent:"center"}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentRepositoryKey:e.DataStore.currentRepositoryKey,currentRepositoryConfig:e.DataStore.currentRepositoryConfig}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(xr)))),Cr=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).observed={keyword:r.props.match.params.tag?r.props.match.params.tag:"",data:null},r.state={tagList:null,pending:!0,repage:0,sortDesc:!0},r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.getData(this.props)}},{key:"getData",value:function(e){var t=this;if(!e.currentRepositoryKey||!e.currentRepositoryConfig.repository)return!1;Ht.tagList({repository:e.currentRepositoryKey}).then(ne.withEventdispatcher(e.dispatchEvent)(ne.getJSONData)).then((function(e){t.setState({pending:!1}),e.code||(t.observed.data=e.data,t.dataSort(t.state.sortDesc))}))}},{key:"dataSort",value:function(e){this.observed.data&&(this.observed.data.sort((function(t,a){return e?a.commit.time-t.commit.time:t.commit.time-a.commit.time})),this.dataFilter())}},{key:"dataFilter",value:function(){var e=this.observed,t=e.data,a=e.keyword,r=null;r=null!==t&&t.length?a?t.filter(U.nameLikes(a)):t:[],this.setState({tagList:[r],repage:this.state.repage+1})}},{key:"filterTag",value:function(e){this.observed.keyword=e,this.dataFilter()}},{key:"deleteTag",value:function(e){var t=this,a=this.props,r=a.currentRepositoryKey,i=a.intl;if(!r||!e)return!1;Ht.deleteTag({repository:r,tag:e}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(a){a.code?t.props.dispatchEvent(ae.NewNotification(i.formatMessage({id:"message.error.deleteFail"}),2)):(t.observed.data=t.observed.data.filter((function(t,a){return t.name!==e})),t.props.dispatchEvent(ae.NewNotification(i.formatMessage({id:"message.deleted"}),0)),t.dataFilter()),t.props.dispatchEvent(ae.cancelComformation())}))}},{key:"deleteConfirm",value:function(e){var t=this,a=this.props.intl;this.props.dispatchEvent(ae.addComformation("tag_remove",{title:a.formatMessage({id:"message.confirmDelete"},{s:a.formatMessage({id:"label.tag"})+" '"+e+"' "}),description:"",reject:function(){return!0},accept:function(){t.deleteTag(e)}}))}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.currentRepositoryKey!==e.currentRepositoryKey||JSON.stringify(this.props.currentRepositoryConfig)!==JSON.stringify(e.currentRepositoryConfig)?(this.getData(e),!1):this.state.sortDesc===t.sortDesc||(this.dataSort(t.sortDesc),!1)}},{key:"render",value:function(){var e=this,t=this.state,a=t.tagList,r=t.pending,i=t.repage,n=t.sortDesc;return Object(oe.jsx)(k.a,{container:!0,spacing:3,children:Object(oe.jsx)(vr,{refType:"tag",pending:r,searchRef:function(t){return e.filterTag(t)},sortDesc:n,sortSwitch:function(){return e.setState({sortDesc:!n})},children:null!==a?Object(oe.jsx)(yr,{refType:"tag",count:this.observed.data?this.observed.data.length:0,refTitles:[""],refLists:a,deleteRef:function(t){return e.deleteConfirm(t)},repage:i,pending:r}):Object(oe.jsx)(k.a,{container:!0,spacing:2,className:this.props.classes.loading,children:Object(oe.jsx)(he.a,{})})})})}}]),a}(i.a.Component),Nr=Object(R.b)(Object(C.a)((function(e){return{loading:{paddingTop:e.spacing(16),paddingBottom:e.spacing(16),justifyContent:"center"}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentRepositoryKey:e.DataStore.currentRepositoryKey,currentRepositoryConfig:e.DataStore.currentRepositoryConfig}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(Cr)))),Rr=a(123),Mr=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={pending:!0,name:"",origin:"",description:"",error:{}},r.checkInput=se.stateValidator(Object(N.a)(r),[{name:"name",passPattern:/^.+$/,errorMessage:r.props.intl.formatMessage({id:"message.error._S_empty"},{s:r.props.intl.formatMessage({id:"label.tagName"})})},{name:"name",passPattern:/^.{0,30}$/,errorMessage:r.props.intl.formatMessage({id:"message.error.noMoreThan_N_characters"},{n:30})},{name:"name",passPattern:/^\w+(\.\w+)*$/,errorMessage:r.props.intl.formatMessage({id:"message.error._S_invalid"},{s:r.props.intl.formatMessage({id:"label.tagName"})})},{name:"origin",passPattern:/^.{0,40}$/,errorMessage:r.props.intl.formatMessage({id:"message.error.noMoreThan_N_characters"},{n:40})},{name:"description",passPattern:/^[\S\n]{0,30}$/,errorMessage:r.props.intl.formatMessage({id:"message.error.noMoreThan_N_characters"},{n:30})}]),r.checkResponse=se.codeValidator(Object(N.a)(r),[{name:"name",exceptionCode:1027,errorMessage:r.props.intl.formatMessage({id:"message.error._S_invalid"},{s:r.props.intl.formatMessage({id:"label.tagName"})})},{name:"name",exceptionCode:1030,errorMessage:r.props.intl.formatMessage({id:"message.error._S_duplicate"},{s:r.props.intl.formatMessage({id:"label.tagName"})})},{name:"origin",exceptionCode:1036,errorMessage:r.props.intl.formatMessage({id:"message.error._S_notFound"},{s:r.props.intl.formatMessage({id:"label.createOrigin"})})}]),r}return Object(d.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return this.state.pending&&this.props.currentRepositoryKey&&void 0!==this.props.currentRepositoryConfig.repository&&this.setState({pending:!1}),this.state.pending&&void 0!==this.props.currentRepositoryConfig.repository&&this.props.currentRepositoryKey!==e.currentRepositoryKey&&this.setState({pending:!1}),this.state.pending&&this.props.currentRepositoryKey&&JSON.stringify(this.props.currentRepositoryConfig)!==JSON.stringify(e.currentRepositoryConfig)&&this.setState({pending:!1}),!0}},{key:"createTag",value:function(){var e=this,t=this.props,a=t.currentRepositoryKey,r=t.currentRepositoryConfig,i=t.history,n=t.intl,s=this.state,o=s.name,c=s.origin,l=s.description;if(!a||!r.repository||!this.checkInput())return!1;if("new"===o||".git"===o.slice(o.length-4))return this.setState({error:{name:n.formatMessage({id:"message.error._S_invalid"},{s:this.props.intl.formatMessage({id:"label.tagName"})})}}),!1;var p,d=Object(Rr.a)(r.branches);try{for(d.s();!(p=d.n()).done;){var u=p.value;if(o===u.name)return this.setState({error:{name:n.formatMessage({id:"message.error._S_duplicate"},{s:this.props.intl.formatMessage({id:"label.tagName"})})}}),!1}}catch(b){d.e(b)}finally{d.f()}var m,h=Object(Rr.a)(r.tags);try{for(h.s();!(m=h.n()).done;){var g=m.value;if(o===g.name)return this.setState({error:{name:n.formatMessage({id:"message.error._S_duplicate"},{s:this.props.intl.formatMessage({id:"label.tagName"})})}}),!1}}catch(b){h.e(b)}finally{h.f()}this.setState({pending:!0}),Ht.createTag({repository:a,name:o,origin:c,description:l}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){t.code?e.checkResponse(t.code)?(e.props.dispatchEvent(ae.NewNotification(e.props.intl.formatMessage({id:"message.error.createTagFail"}),2)),e.setState({pending:!1})):e.setState({pending:!1}):(r.tags.push({id:o,name:o}),++r.count.tag,i.push(W(r.repository.group.name,r.repository.name,"tags")))}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.currentRepositoryConfig,r=t.history,i=t.classes,n=t.intl;return Object(oe.jsxs)(k.a,{container:!0,spacing:2,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"h6",component:"div",className:i.title,children:n.formatMessage({id:"label.newTag"})})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsxs)(k.a,{container:!0,spacing:2,children:[Object(oe.jsx)(k.a,{item:!0,xs:6,children:Object(oe.jsxs)(k.a,{container:!0,spacing:2,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"subtitle1",component:"div",gutterBottom:!0,children:n.formatMessage({id:"label.tagName"})})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(E.a,{fullWidth:!0,variant:"outlined",placeholder:n.formatMessage({id:"message.error.input_S_placeholder"},{s:n.formatMessage({id:"label.tagName"})}),value:this.state.name,error:!!this.state.error.name,helperText:this.state.error.name,onChange:function(t){e.setState({name:t.target.value,error:{}})}})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"subtitle1",component:"div",gutterBottom:!0,children:n.formatMessage({id:"label.choseCreateOrigin"})})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsxs)(E.a,{fullWidth:!0,select:!0,variant:"outlined",value:this.state.origin,error:!!this.state.error.origin,helperText:this.state.error.origin,onChange:function(t){return e.setState({origin:t.target.value})},children:[Object(oe.jsx)(lt.a,{disabled:!0,children:n.formatMessage({id:"label.branch"})}),a.branches&&a.branches.map((function(e,t){return Object(oe.jsxs)(lt.a,{value:e.name,children:[Object(oe.jsx)(fe.a,{className:i.icon,icon:je.d}),"\xa0\xa0",e.name]},t)})),Object(oe.jsx)(lt.a,{disabled:!0,children:n.formatMessage({id:"label.tag"})}),a.tags&&a.tags.map((function(e,t){return Object(oe.jsxs)(lt.a,{value:e.name,children:[Object(oe.jsx)(fe.a,{className:i.icon,icon:je.G}),"\xa0\xa0",e.name]},t)}))]})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"subtitle1",component:"div",gutterBottom:!0,children:n.formatMessage({id:"label.tagDescription"})})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(E.a,{fullWidth:!0,variant:"outlined",multiline:!0,rows:5,value:this.state.description,error:!!this.state.error.description,helperText:this.state.error.description,onChange:function(t){e.setState({description:t.target.value})}})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(k.a,{container:!0,justifyContent:"flex-end",children:Object(oe.jsx)(k.a,{item:!0,xs:3,className:i.textRight,children:Object(oe.jsxs)(w.a,{variant:"subtitle1",component:"div",className:this.state.description.length>30?i.outRange:"",children:[this.state.description.length,"/30"]})})})}),Object(oe.jsxs)(k.a,{item:!0,xs:12,align:"right",children:[Object(oe.jsx)(_.a,{variant:"outlined",color:"primary",className:i.mr16,disabled:this.state.pending,onClick:function(){return r.push(W(a.repository.group.name,a.repository.name,"tags"))},children:n.formatMessage({id:"label.cancel"})}),Object(oe.jsxs)(_.a,{variant:"contained",color:"primary",disabled:this.state.pending,onClick:function(){return e.createTag()},children:[this.state.pending?Object(oe.jsx)(he.a,{size:"1rem",color:"inherit",className:i.mr16}):"",n.formatMessage({id:"label.ok"})]})]})]})}),Object(oe.jsx)(k.a,{item:!0,xs:6,children:"\xa0"})]})})]})}}]),a}(i.a.Component),wr=Object(R.b)(Object(C.a)((function(e){return{title:{lineHeight:e.spacing(5)+"px",marginBottom:e.spacing(3),borderBottom:"1px solid "+e.palette.border},icon:{color:e.palette.text.light},textRight:{textAlign:"right"},outRange:{color:e.palette.error.main},mr16:{marginRight:e.spacing(2)}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentRepositoryKey:e.DataStore.currentRepositoryKey,currentRepositoryConfig:e.DataStore.currentRepositoryConfig}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(Mr)))),kr=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={pending:!0,name:"",origin:"",error:{}},r.checkInput=se.stateValidator(Object(N.a)(r),[{name:"name",passPattern:/^.+$/,errorMessage:r.props.intl.formatMessage({id:"message.error._S_empty"},{s:r.props.intl.formatMessage({id:"label.branchName"})})},{name:"name",passPattern:/^.{1,30}$/,errorMessage:r.props.intl.formatMessage({id:"message.error.noMoreThan_N_characters"},{n:30})},{name:"name",passPattern:/^\w[\w/-\\.]+$/,errorMessage:r.props.intl.formatMessage({id:"message.error._S_invalid"},{s:r.props.intl.formatMessage({id:"label.branchName"})})},{name:"origin",passPattern:/^.+$/,errorMessage:r.props.intl.formatMessage({id:"message.error._S_notChoose"},{s:r.props.intl.formatMessage({id:"label.createOrigin"})})},{name:"origin",passPattern:/^.{1,40}$/,errorMessage:r.props.intl.formatMessage({id:"message.error.noMoreThan_N_characters"},{n:40})}]),r.checkResponse=se.codeValidator(Object(N.a)(r),[{name:"name",exceptionCode:1027,errorMessage:r.props.intl.formatMessage({id:"message.error._S_invalid"},{s:r.props.intl.formatMessage({id:"label.branchName"})})},{name:"name",exceptionCode:1030,errorMessage:r.props.intl.formatMessage({id:"message.error._S_duplicate"},{s:r.props.intl.formatMessage({id:"label.branchName"})})},{name:"origin",exceptionCode:1036,errorMessage:r.props.intl.formatMessage({id:"message.error._S_notFound"},{s:r.props.intl.formatMessage({id:"label.createOrigin"})})}]),r}return Object(d.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return this.state.pending&&this.props.currentRepositoryKey&&void 0!==this.props.currentRepositoryConfig.repository&&this.setState({pending:!1}),this.state.pending&&void 0!==this.props.currentRepositoryConfig.repository&&this.props.currentRepositoryKey!==e.currentRepositoryKey&&this.setState({pending:!1}),this.state.pending&&this.props.currentRepositoryKey&&JSON.stringify(this.props.currentRepositoryConfig)!==JSON.stringify(e.currentRepositoryConfig)&&this.setState({pending:!1}),!0}},{key:"createBranch",value:function(){var e=this,t=this.props,a=t.currentRepositoryKey,r=t.currentRepositoryConfig,i=t.history,n=t.intl,s=this.state,o=s.name,c=s.origin;if(!a||!r.repository||!this.checkInput())return!1;if("new"===o||".git"===o.slice(o.length-4))return this.setState({error:{name:n.formatMessage({id:"message.error._S_invalid"},{s:this.props.intl.formatMessage({id:"label.branchName"})})}}),!1;var l,p=Object(Rr.a)(r.branches);try{for(p.s();!(l=p.n()).done;){var d=l.value;if(o===d.name)return this.setState({error:{name:n.formatMessage({id:"message.error._S_duplicate"},{s:this.props.intl.formatMessage({id:"label.branchName"})})}}),!1}}catch(g){p.e(g)}finally{p.f()}var u,m=Object(Rr.a)(r.tags);try{for(m.s();!(u=m.n()).done;){var h=u.value;if(o===h.name)return this.setState({error:{name:n.formatMessage({id:"message.error._S_duplicate"},{s:this.props.intl.formatMessage({id:"label.branchName"})})}}),!1}}catch(g){m.e(g)}finally{m.f()}this.setState({pending:!0}),Ht.createBranch({repository:a,name:o,origin:c}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){t.code?e.checkResponse(t.code)?(e.props.dispatchEvent(ae.NewNotification(e.props.intl.formatMessage({id:"message.error.createBranchFail"}),2)),e.setState({pending:!1})):e.setState({pending:!1}):(r.branches.push({id:o,name:o}),++r.count.branch,i.push(W(r.repository.group.name,r.repository.name,"branches")))}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.currentRepositoryConfig,r=t.history,i=t.classes,n=t.intl;return Object(oe.jsxs)(k.a,{container:!0,spacing:2,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"h6",component:"div",className:i.title,children:n.formatMessage({id:"label.newBranch"})})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsxs)(k.a,{container:!0,spacing:2,children:[Object(oe.jsx)(k.a,{item:!0,xs:6,children:Object(oe.jsxs)(k.a,{container:!0,spacing:2,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"subtitle1",component:"div",gutterBottom:!0,children:n.formatMessage({id:"label.branchName"})})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(E.a,{fullWidth:!0,variant:"outlined",value:this.state.name,placeholder:n.formatMessage({id:"message.error.input_S_placeholder"},{s:n.formatMessage({id:"label.branchName"})}),error:!!this.state.error.name,helperText:this.state.error.name,onChange:function(t){return e.setState({name:t.target.value})}})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"subtitle1",component:"div",gutterBottom:!0,children:n.formatMessage({id:"label.choseCreateOrigin"})})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsxs)(E.a,{fullWidth:!0,select:!0,variant:"outlined",value:this.state.origin,error:!!this.state.error.origin,helperText:this.state.error.origin,onChange:function(t){return e.setState({origin:t.target.value})},children:[Object(oe.jsx)(lt.a,{disabled:!0,children:n.formatMessage({id:"label.branch"})}),a.branches&&a.branches.map((function(e,t){return Object(oe.jsxs)(lt.a,{value:e.name,children:[Object(oe.jsx)(fe.a,{className:i.icon,icon:je.d}),"\xa0\xa0",e.name]},t)})),Object(oe.jsx)(lt.a,{disabled:!0,children:n.formatMessage({id:"label.tag"})}),a.tags&&a.tags.map((function(e,t){return Object(oe.jsxs)(lt.a,{value:e.name,children:[Object(oe.jsx)(fe.a,{className:i.icon,icon:je.G}),"\xa0\xa0",e.name]},t)}))]})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:"\xa0"}),Object(oe.jsxs)(k.a,{item:!0,xs:12,align:"right",children:[Object(oe.jsx)(_.a,{variant:"outlined",color:"primary",className:i.mr16,disabled:this.state.pending,onClick:function(){return r.push(W(a.repository.group.name,a.repository.name,"branches"))},children:n.formatMessage({id:"label.cancel"})}),Object(oe.jsxs)(_.a,{variant:"contained",color:"primary",disabled:this.state.pending,onClick:function(){return e.createBranch()},children:[this.state.pending?Object(oe.jsx)(he.a,{size:"1rem",color:"inherit",className:i.mr16}):"",n.formatMessage({id:"label.ok"})]})]})]})}),Object(oe.jsx)(k.a,{item:!0,xs:6,children:"\xa0"})]})})]})}}]),a}(i.a.Component),_r=Object(R.b)(Object(C.a)((function(e){return{title:{lineHeight:e.spacing(5)+"px",marginBottom:e.spacing(3),borderBottom:"1px solid "+e.palette.border},icon:{color:e.palette.text.light},mr16:{marginRight:e.spacing(2)}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentRepositoryKey:e.DataStore.currentRepositoryKey,currentRepositoryConfig:e.DataStore.currentRepositoryConfig}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(kr)))),Er=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={pending:!0,refList:[],refTotal:0},r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.mountedFlag=!0,this.getData(this.props)}},{key:"componentWillUnmount",value:function(){this.mountedFlag=!1}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.currentRepositoryKey!==e.currentRepositoryKey?(this.getData(e),!1):this.props.currentHash===e.currentHash||(this.getData(e),!1)}},{key:"getData",value:function(e){var t=this;if(!e.currentHash||!e.currentRepositoryKey)return!1;Ht.refListContainSHA({repository:e.currentRepositoryKey,hash:e.currentHash}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(e){if(!e.code){var a=[];a.branch=e.data.branch,a.tag=e.data.tag,t.setState({pending:!1,refList:a,refTotal:e.data.branch.length+e.data.tag.length})}}))}},{key:"render",value:function(){var e=this.props,t=e.show,a=e.classes,r=e.parentHash,i=e.currentGroup,n=e.currentRepository,s=e.history,c=e.intl,l=this.state,p=l.refList,d=l.refTotal;return Object(oe.jsxs)(k.a,{container:!0,className:[a.content,t?a.contentShow:""].join(" "),children:[Object(oe.jsxs)(k.a,{item:!0,xs:12,className:a.parent,children:[Object(oe.jsx)(w.a,{variant:"body1",component:"div",children:c.formatMessage({id:"label.parentNode"})}),Object(oe.jsx)(k.a,{children:r.length>0?r.map((function(e,t){return Object(oe.jsx)(o.b,{className:a.parentA,to:W(i,n,"commit",e?e.substr(0,8):""),children:e?e.substr(0,8):""},t)})):""})]}),Object(oe.jsxs)(k.a,{item:!0,xs:12,className:[a.parent,a.borderNone].join(" "),children:[Object(oe.jsx)(w.a,{variant:"body1",component:"div",className:a.versions,children:c.formatMessage({id:"message.someVersion"})}),d>0?p.branch.map((function(e,t){var r=W(i,n,"files",encodeURIComponent(e));return Object(oe.jsxs)(_.a,{variant:"outlined",color:"primary",className:a.button,onClick:function(){return s.push(r)},children:[Object(oe.jsx)(fe.a,{icon:je.d}),"\xa0",e]},t)})):Object(oe.jsxs)(_.a,{color:"primary",size:"small",disabled:!0,disableElevation:!0,children:[Object(oe.jsx)(he.a,{size:"1rem",color:"inherit"})," \xa0\xa0"]}),d>0?p.tag.map((function(e,t){var r=W(i,n,"files",encodeURIComponent(e));return Object(oe.jsxs)(_.a,{variant:"outlined",color:"primary",className:a.button,onClick:function(){return s.push(r)},children:[Object(oe.jsx)(fe.a,{icon:je.G}),"\xa0",e]},t)})):Object(oe.jsxs)(_.a,{color:"primary",size:"small",disabled:!0,disableElevation:!0,children:[Object(oe.jsx)(he.a,{size:"1rem",color:"inherit"})," \xa0\xa0"]})]})]})}}]),a}(r.Component),Tr=Object(R.b)(Object(ge.a)(Object(C.a)((function(e){return{content:{maxHeight:"0px",marginTop:e.spacing(3)+"px",overflow:"hidden",transition:"max-height .3s",border:"1px solid "+e.palette.border,borderBottom:"0px"},contentShow:{maxHeight:"1000px",border:"1px solid "+e.palette.border,borderRadius:e.spacing(.5)+"px"},parent:{padding:e.spacing(2)+"px 0px",margin:"0px "+e.spacing(2)+"px",borderBottom:"1px solid "+e.palette.border},parentA:{display:"inline-block",marginTop:e.spacing(2),marginRight:e.spacing(2)},borderNone:{border:"0px"},versions:{marginBottom:e.spacing(1)},button:{marginRight:e.spacing(1),marginTop:e.spacing(1)}}}))(Object(h.f)(Object(l.b)((function(e,t){return{}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(Er))))),Ar=a(587),Dr=a(563),Ir=a(564),Pr=a(155),Fr=a.n(Pr),Lr=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={originalHTML:[],modifiedHTML:[],original:[],modified:[],fullfileContent:[],diffContent:[]},r.checkResponse=se.codeValidator(Object(N.a)(r),[{exceptionCode:1038,errorMessage:r.props.intl.formatMessage({id:"message.error._S_notFound"},{s:r.props.intl.formatMessage({id:"phrase.file"})})}]),r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.props.showFullFile?this.makeFullDiffContent():(this.makeDiffContent(),this.state.fullfileContent.length>0&&this.buildFullFileContent())}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.showFullFile===e.showFullFile||(e.showFullFile?this.makeFullDiffContent():(this.makeDiffContent(),this.state.fullfileContent.length>0&&this.buildFullFileContent()),!1)}},{key:"getFileContent",value:function(e){var t=this;Ht.object({repository:this.props.repository,parent:this.props.fileDiffInfo.original.sha}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(a){a.code?t.checkResponse(a.code)&&t.props.dispatchEvent(ae.NewNotification(t.props.intl.formatMessage({id:"message.error.getFileFail"}),2)):(t.state.fullfileContent=a.data.object&&a.data.object.raw?a.data.object.raw.split("\n"):[],t.setState({fullfileContent:t.state.fullfileContent}),e(a))}))}},{key:"highlight",value:function(e){for(var t=$(this.props.fileDiffInfo.original.name||this.props.fileDiffInfo.modified.name||""),a=Ya.a.highlight(e.join("\n"),Ya.a.languages[t]||Ya.a.languages.markdown,t).split("\n"),r=[],i=0;i<e.length;i++)"string"===typeof e[i]&&(r[i]=a[i]);return r}},{key:"makeDiffContent",value:function(){if(this.props.fileDiffInfo&&this.props.fileDiffInfo.diff&&this.props.fileDiffInfo.diff.line.length){for(var e=this.props.fileDiffInfo.diff.line,t=[],a=[],r=[],i=[null,null],n=0;n<e.length;n++){var s=e[n],o=s.match(/^@@\s-+(\d+)(,\d+)?\s+\++(\d+)(,\d+)?\s+@@.*$/i);o?(i=[parseInt(o[1]),parseInt(o[3])],t.push([0,0,"",s])):"-"===s[0]?(t.push([i[0],null,"-"]),a[i[0]]=s.substring(1),i[0]++):"+"===s[0]?(t.push([null,i[1],"+"]),r[i[1]]=s.substring(1),i[1]++):(t.push([i[0],i[1],""]),a[i[0]]=s.substring(1),r[i[1]]=s.substring(1),i[0]++,i[1]++)}this.setState({diffContent:t,original:a,modified:r,originalHTML:this.highlight(a),modifiedHTML:this.highlight(r)})}}},{key:"makeFullDiffContent",value:function(){var e=this;if(this.state.fullfileContent.length>0){if(this.props.fileDiffInfo&&this.props.fileDiffInfo.diff&&this.props.fileDiffInfo.diff.line.length){for(var t=this.state.fullfileContent.length,a=this.props.fileDiffInfo.diff.line,r=[],i=[],n=[],s=[null,null],o=0;o<a.length;o++){var c=a[o],l=c.match(/^@@\s-+(\d+)(,\d+)?\s+\++(\d+)(,\d+)?\s+@@.*$/i);if(l){var p=[0,0];for(r.length&&(p=Object(T.a)(s)),s=[parseInt(l[1]),parseInt(l[3])];p[0]<Math.min(s[0],t)-1;)p[1]++,p[0]++,r.push([p[0],p[1],""]),i[p[0]]=this.state.fullfileContent[p[0]-1],n[p[1]]=this.state.fullfileContent[p[0]-1]}else"-"===c[0]?(r.push([s[0],null,"-"]),i[s[0]]=c.substring(1),s[0]++):"+"===c[0]?(r.push([null,s[1],"+"]),n[s[1]]=c.substring(1),s[1]++):(r.push([s[0],s[1],""]),i[s[0]]=c.substring(1),n[s[1]]=c.substring(1),s[0]++,s[1]++)}for(;s[0]<=this.state.fullfileContent.length;)r.push([s[0],s[1],""]),i[s[0]]=this.state.fullfileContent[s[0]-1],n[s[1]]=this.state.fullfileContent[s[0]-1],s[0]++,s[1]++;this.setState({diffContent:r,original:i,modified:n,originalHTML:this.highlight(i),modifiedHTML:this.highlight(n)})}}else this.getFileContent((function(t){e.makeFullDiffContent()}))}},{key:"expandCode",value:function(e,t){var a=this;if(this.state.fullfileContent.length>0){var r=this.state.diffContent,i=r[t];if("head"===e){var n=this.state.diffContent[t-1],s=this.state.diffContent[t+1];if(!n&&s[1]<=20){for(var o=[],c=s[0]-1,l=s[1]-1;l>0;l--)o.unshift([c,l,""]),c--;return r.splice.apply(r,[t,1].concat(o)),this.setState({diffContent:r}),!0}if(n&&n[1]&&n[1]+21>=s[1]){for(var p=[],d=n[0]+1,u=n[1]+1;u<s[1];u++)p.push([d,u,""]),d++;return r.splice.apply(r,[t,1].concat(p)),this.setState({diffContent:r}),!0}var m=i[3].match(/^@@\s-+(\d+)(,)?(\d+)?\s+\++(\d+)(,)?(\d+)?\s+@@.*$/i);m&&(i[3]="@@ -"+(parseInt(m[1])-20)+","+(parseInt(m[3])+20||"")+" +"+(parseInt(m[4])-20)+","+(parseInt(m[6])+20||"")+" @@");for(var h=[],g=s[0]-1,b=s[1]-1;b>=s[1]-20;b--)h.unshift([g,b,""]),g--;return r.splice.apply(r,[t+1,0].concat(h)),this.setState({diffContent:r}),!0}if("tail"===e){var f=this.state.diffContent[t-1],j=this.state.diffContent[t+1];if(!i&&f[0]+21>this.state.fullfileContent.length){for(var v=[],O=f[1]+1,y=f[0]+1;y<=this.state.fullfileContent.length;y++)v.push([y,O,""]),O++;return r.splice.apply(r,[t,1].concat(v)),this.setState({diffContent:r}),!0}if(i&&j&&j[1]&&f[1]+21>=j[1]){for(var x=[],S=f[0]+1,C=f[1]+1;C<j[1];C++)x.push([S,C,""]),S++;return r.splice.apply(r,[t,1].concat(x)),this.setState({diffContent:r}),!0}for(var N=[],R=f[0]+1,M=f[1]+1;M<f[1]+21;M++)N.push([R,M,""]),R++;return r.splice.apply(r,[t,0].concat(N)),this.setState({diffContent:r}),!0}}else this.getFileContent((function(r){a.buildFullFileContent(),a.expandCode(e,t)}))}},{key:"buildFullFileContent",value:function(){for(var e=this.state,t=e.original,a=e.modified,r=e.fullfileContent,i=1,n=0;n<r.length;n++)if("string"!==typeof t[n+1])t[n+1]=r[n],a[i]=r[n],i++;else for(;"string"===typeof a[i]&&i<a.length;)i++;this.setState({original:t,modified:a,originalHTML:this.highlight(t),modifiedHTML:this.highlight(a)})}},{key:"makeLines",value:function(){var e=this,t=[],a=this.props.classes;if(this.props.renderSideBySide)for(var r=null,i=null,n=function(n){var s=e.state.diffContent[n];"-"===s[2]&&null===r&&(r=t.length,i=n),"-"===s[2]&&t.push([Object(oe.jsx)("td",{className:[a.lineNumber,a.lineNumberDeletion].join(" "),children:Object(oe.jsx)("code",{children:s[0]})},0),Object(oe.jsx)("td",{className:[a.diffMarker,a.deletion].join(" "),children:Object(oe.jsx)("code",{children:"-"})},1),Object(oe.jsx)("td",{className:[a.code,a.deletion].join(" "),children:Object(oe.jsx)(er,{code:e.state.original[s[0]],htmlCode:e.state.originalHTML[s[0]]})},2),Object(oe.jsx)("td",{className:[a.lineNumber].join(" ")},3),Object(oe.jsx)("td",{className:[a.diffMarker,a.disabled].join(" ")},4),Object(oe.jsx)("td",{className:[a.code,a.disabled].join(" ")},5)]),"+"===s[2]&&"number"===typeof r&&(t[r]?(t[r][3]=Object(oe.jsx)("td",{className:[a.lineNumber,a.lineNumberAddition].join(" "),children:Object(oe.jsx)("code",{children:s[1]})},3),t[r][4]=Object(oe.jsx)("td",{className:[a.diffMarker,a.addition].join(" "),children:Object(oe.jsx)("code",{children:"+"})},4),t[r][5]=Object(oe.jsx)("td",{className:[a.code,a.addition].join(" "),children:Object(oe.jsx)(er,{code:e.state.modified[s[1]],original:e.state.original[e.state.diffContent[i][0]],htmlCode:e.state.modifiedHTML[s[1]]})},5),t[r][2]=Object(oe.jsx)("td",{className:[a.code,a.deletion].join(" "),children:Object(oe.jsx)(er,{code:e.state.original[e.state.diffContent[i][0]],modified:e.state.modified[s[1]],htmlCode:e.state.originalHTML[e.state.diffContent[i][0]]})},2),r++,i++):(r=null,i=null)),"+"===s[2]&&"number"!==typeof r&&(t.push([Object(oe.jsx)("td",{className:[a.lineNumber].join(" ")},0),Object(oe.jsx)("td",{className:[a.diffMarker,a.disabled].join(" ")},1),Object(oe.jsx)("td",{className:[a.code,a.disabled].join(" ")},2),Object(oe.jsx)("td",{className:[a.lineNumber,a.lineNumberAddition].join(" "),children:Object(oe.jsx)("code",{children:s[1]})},3),Object(oe.jsx)("td",{className:[a.diffMarker,a.addition].join(" "),children:Object(oe.jsx)("code",{children:"+"})},4),Object(oe.jsx)("td",{className:[a.code,a.addition].join(" "),children:Object(oe.jsx)(er,{code:e.state.modified[s[1]],htmlCode:e.state.modifiedHTML[s[1]]})},5)]),r=null,i=null),0===s[0]&&0===s[1]?(0===n?t.push([Object(oe.jsx)("td",{className:[a.lineLabel,a.diffLabelTop,a.lineNumberMarker].join(" "),children:Object(oe.jsx)(Ie,{icon:je.cb,className:a.lineLabelButton,onClick:function(){return e.expandCode("head",n)}})},0),Object(oe.jsx)("td",{className:[a.diffMarker,a.diffLabelTop,a.marker].join(" ")},1),Object(oe.jsx)("td",{className:[a.code,a.diffLabelTop,a.marker].join(" "),colSpan:4,children:Object(oe.jsx)(er,{code:s[3]})},2)]):t.push([Object(oe.jsxs)("td",{className:[a.lineLabel,a.diffLabel,a.lineNumberMarker].join(" "),children:[Object(oe.jsx)(Ie,{icon:je.cb,className:a.lineLabelButton,onClick:function(){return e.expandCode("tail",n)}}),Object(oe.jsx)(Ie,{icon:je.cb,className:a.lineLabelButton,onClick:function(){return e.expandCode("head",n)}})]},0),Object(oe.jsx)("td",{className:[a.diffMarker,a.diffLabel,a.marker].join(" ")},1),Object(oe.jsx)("td",{className:[a.code,a.diffLabel,a.marker].join(" "),colSpan:4,children:Object(oe.jsx)(er,{code:s[3]})},2)]),r=null,i=null):""===s[2]&&(t.push([Object(oe.jsx)("td",{className:a.lineNumber,children:Object(oe.jsx)("code",{children:s[0]})},0),Object(oe.jsx)("td",{className:a.diffMarker},1),Object(oe.jsx)("td",{className:a.code,children:Object(oe.jsx)(er,{code:e.state.original[s[0]],htmlCode:e.state.originalHTML[s[0]]})},2),Object(oe.jsx)("td",{className:a.lineNumber,children:Object(oe.jsx)("code",{children:s[1]})},3),Object(oe.jsx)("td",{className:a.diffMarker},4),Object(oe.jsx)("td",{className:a.code,children:Object(oe.jsx)(er,{code:e.state.modified[s[1]],htmlCode:e.state.modifiedHTML[s[1]]})},5)]),r=null,i=null)},s=0;s<this.state.diffContent.length;s++)n(s);else for(var o=function(r){var i=e.state.diffContent[r],n={"+":a.addition,"-":a.deletion}[i[2]],s={"+":a.lineNumberAddition,"-":a.lineNumberDeletion}[i[2]];if(0===i[0]&&0===i[1])0===r?t.push([Object(oe.jsx)("td",{className:[a.lineLabel,a.diffLabelTop,a.lineNumberMarker].join(" "),children:Object(oe.jsx)(Ie,{icon:je.cb,className:a.lineLabelButton,onClick:function(){return e.expandCode("head",r)}})},0),Object(oe.jsx)("td",{className:[a.lineNumber,a.diffLabelTop,a.marker].join(" ")},1),Object(oe.jsx)("td",{className:[a.diffMarker,a.diffLabelTop,a.marker].join(" ")},2),Object(oe.jsx)("td",{className:[a.code,a.diffLabelTop,a.marker].join(" "),children:Object(oe.jsx)(er,{code:i[3]})},3)]):t.push([Object(oe.jsxs)("td",{className:[a.lineLabel,a.diffLabel,a.lineNumberMarker].join(" "),children:[Object(oe.jsx)(Ie,{icon:je.cb,className:a.lineLabelButton,onClick:function(){return e.expandCode("tail",r)}}),Object(oe.jsx)(Ie,{icon:je.cb,className:a.lineLabelButton,onClick:function(){return e.expandCode("head",r)}})]},0),Object(oe.jsx)("td",{className:[a.lineNumber,a.diffLabel,a.marker].join(" ")},1),Object(oe.jsx)("td",{className:[a.diffMarker,a.diffLabel,a.marker].join(" ")},2),Object(oe.jsx)("td",{className:[a.code,a.diffLabel,a.marker].join(" "),children:Object(oe.jsx)(er,{code:i[3]})},3)]);else if("-"===i[2]){var o=e.state.diffContent[r-1],c=e.state.diffContent[r+1],l=e.state.diffContent[r+2];c&&"+"===c[2]&&(!l||l&&"+"!==l[2])&&(!o||o&&"+"!==o[2])?t.push([Object(oe.jsx)("td",{className:[a.lineNumber,s].join(" "),children:Object(oe.jsx)("code",{children:i[0]})},0),Object(oe.jsx)("td",{className:a.lineNumber},1),Object(oe.jsx)("td",{className:[a.diffMarker,n].join(" "),children:Object(oe.jsx)("code",{children:"-"})},2),Object(oe.jsx)("td",{className:[a.code,n].join(" "),children:Object(oe.jsx)(er,{code:e.state.original[i[0]],modified:e.state.modified[c[1]],htmlCode:e.state.originalHTML[i[0]]})},3)]):t.push([Object(oe.jsx)("td",{className:[a.lineNumber,s].join(" "),children:Object(oe.jsx)("code",{children:i[0]})},0),Object(oe.jsx)("td",{className:a.lineNumber},1),Object(oe.jsx)("td",{className:[a.diffMarker,n].join(" "),children:Object(oe.jsx)("code",{children:"-"})},2),Object(oe.jsx)("td",{className:[a.code,n].join(" "),children:Object(oe.jsx)(er,{code:e.state.original[i[0]],htmlCode:e.state.originalHTML[i[0]]})},3)])}else if("+"===i[2]){var p=e.state.diffContent[r-1],d=e.state.diffContent[r-2];p&&"-"===p[2]&&(!d||d&&"-"!==d[2])?t.push([Object(oe.jsx)("td",{className:a.lineNumber},0),Object(oe.jsx)("td",{className:[a.lineNumber,s].join(" "),children:Object(oe.jsx)("code",{children:i[1]})},1),Object(oe.jsx)("td",{className:[a.diffMarker,n].join(" "),children:Object(oe.jsx)("code",{children:"+"})},2),Object(oe.jsx)("td",{className:[a.code,n].join(" "),children:Object(oe.jsx)(er,{code:e.state.modified[i[1]],original:e.state.original[p[0]],htmlCode:e.state.modifiedHTML[i[1]]})},3)]):t.push([Object(oe.jsx)("td",{className:a.lineNumber},0),Object(oe.jsx)("td",{className:[a.lineNumber,s].join(" "),children:Object(oe.jsx)("code",{children:i[1]})},1),Object(oe.jsx)("td",{className:[a.diffMarker,n].join(" "),children:Object(oe.jsx)("code",{children:"+"})},2),Object(oe.jsx)("td",{className:[a.code,n].join(" "),children:Object(oe.jsx)(er,{code:e.state.modified[i[1]],htmlCode:e.state.modifiedHTML[i[1]]})},3)])}else t.push([Object(oe.jsx)("td",{className:[a.lineNumber,s].join(" "),children:Object(oe.jsx)("code",{children:i[0]})},0),Object(oe.jsx)("td",{className:[a.lineNumber,s].join(" "),children:Object(oe.jsx)("code",{children:i[1]})},1),Object(oe.jsx)("td",{className:[a.diffMarker,n].join(" "),children:Object(oe.jsx)("code",{children:i[2]})},2),Object(oe.jsx)("td",{className:[a.code,n].join(" "),children:Object(oe.jsx)(er,{code:e.state.modified[i[1]],htmlCode:e.state.modifiedHTML[i[1]]})},3)])},c=0;c<this.state.diffContent.length;c++)o(c);t.length>0&&(!this.state.fullfileContent.length||this.state.diffContent[this.state.diffContent.length-1][0]<this.state.fullfileContent.length-1)&&(""===this.state.diffContent[this.state.diffContent.length-1][2]&&(this.props.renderSideBySide?t.push([Object(oe.jsx)("td",{className:[a.lineLabel,a.diffLabelTop,a.lineNumberMarker].join(" "),children:Object(oe.jsx)(Ie,{icon:je.cb,className:a.lineLabelButton,onClick:function(){return e.expandCode("tail",e.state.diffContent.length)}})},0),Object(oe.jsx)("td",{className:[a.diffMarker,a.diffLabelTop,a.marker].join(" ")},1),Object(oe.jsx)("td",{className:[a.code,a.diffLabelTop,a.marker].join(" "),colSpan:4,children:Object(oe.jsx)(er,{code:""})},2)]):t.push([Object(oe.jsx)("td",{className:[a.lineLabel,a.diffLabelTop,a.lineNumberMarker].join(" "),children:Object(oe.jsx)(Ie,{icon:je.cb,className:a.lineLabelButton,onClick:function(){return e.expandCode("tail",e.state.diffContent.length)}})},0),Object(oe.jsx)("td",{className:[a.lineNumber,a.diffLabelTop,a.marker].join(" ")},1),Object(oe.jsx)("td",{className:[a.diffMarker,a.diffLabelTop,a.marker].join(" ")},2),Object(oe.jsx)("td",{className:[a.code,a.diffLabelTop,a.marker].join(" "),children:Object(oe.jsx)(er,{code:""})},3)])));return t.map((function(e,t){return Object(oe.jsx)("tr",{children:e},t)}))}},{key:"render",value:function(){var e=this.props,t=e.renderSideBySide,a=e.classes;return Object(oe.jsxs)("table",{className:a.table,children:[t?Object(oe.jsxs)("colgroup",{children:[Object(oe.jsx)("col",{className:this.props.classes.lineNumber}),Object(oe.jsx)("col",{className:this.props.classes.diffMarker}),Object(oe.jsx)("col",{}),Object(oe.jsx)("col",{className:this.props.classes.lineNumber}),Object(oe.jsx)("col",{className:this.props.classes.diffMarker}),Object(oe.jsx)("col",{})]}):Object(oe.jsxs)("colgroup",{children:[Object(oe.jsx)("col",{className:this.props.classes.lineNumber}),Object(oe.jsx)("col",{className:this.props.classes.lineNumber}),Object(oe.jsx)("col",{className:this.props.classes.diffMarker}),Object(oe.jsx)("col",{})]}),Object(oe.jsx)("tbody",{children:this.makeLines()})]})}}]),a}(i.a.Component),Br=Object(R.b)(Object(C.a)((function(e){return{table:{width:"100%",tableLayout:"fixed",borderCollapse:"collapse"},diffLabelTop:{color:e.palette.text.light},diffLabel:{height:e.spacing(4),color:e.palette.text.light,"& code":{lineHeight:e.spacing(4)+"px"}},lineLabelButton:{width:e.spacing(6),height:e.spacing(2),padding:"0 !important",overflow:"hidden",marginTop:"-5px",borderRadius:0},lineLabel:{width:e.spacing(6),padding:0,verticalAlign:"top",userSelect:"none"},lineNumber:{width:e.spacing(6),padding:"0 "+e.spacing(1)+"px",textAlign:"right",verticalAlign:"top",userSelect:"none",color:e.palette.text.lighter},diffMarker:{width:e.spacing(2),textAlign:"center",padding:"0",verticalAlign:"top",userSelect:"none",color:e.palette.text.light},code:{verticalAlign:"top",overflowWrap:"break-word"},lineNumberAddition:{backgroundColor:e.palette.background.additionDark},lineNumberDeletion:{backgroundColor:e.palette.background.deletionDark},lineNumberMarker:{backgroundColor:e.palette.background.diffLabelDark},addition:{backgroundColor:e.palette.background.addition},deletion:{backgroundColor:e.palette.background.deletion},marker:{backgroundColor:e.palette.background.diffLabel},disabled:{backgroundColor:"#fcfdfe"}}}))(Object(h.f)(Object(l.b)((function(e,t){return{expandStatus:e.DrawerStates.expandStatus}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(Lr)))),Ur=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"getDisplayMode",value:function(e){return e.original.object&&e.original.object.oversize||e.modified.object&&e.modified.object.oversize?D.obejctDiffDisplayType.oversize:e.original.name&&e.modified.name&&e.original.name!==e.modified.name||e.original.mode&&e.modified.mode&&e.original.mode!==e.modified.mode?D.obejctDiffDisplayType.infoChange:"text"===e.type?D.obejctDiffDisplayType.textChange:"binary"===e.type&&(e.original.object&&e.original.object.mime.match(/^image/)||e.modified.object&&e.modified.object.mime.match(/^image/))?D.obejctDiffDisplayType.imageChange:"oversize"===e.type?D.obejctDiffDisplayType.oversize:D.obejctDiffDisplayType.unknown}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.intl,r=e.fileDiffInfo,n=e.repository,s=e.renderSideBySide,o=e.layoutUpdateTimeStamp,c=e.showFullFile,l=this.getDisplayMode(r);return Object(oe.jsx)(k.a,{container:!0,children:Object(oe.jsxs)(k.a,{item:!0,xs:12,className:t.detail,children:[l===D.obejctDiffDisplayType.imageChange&&Object(oe.jsxs)(k.a,{container:!0,spacing:0,className:t.file,children:[Object(oe.jsx)(k.a,{item:!0,xs:6,children:r.original.object?Object(oe.jsxs)(i.a.Fragment,{children:[Object(oe.jsx)("img",{src:"data:"+r.original.object.mime+";base64,"+r.original.object.base64Encoded,className:t.oldImage}),Object(oe.jsxs)(w.a,{variant:"body2",component:"div",align:"center",className:t.imagelegend,children:[z(r.original.object.size,"Bytes")," | W: ",r.original.object.width,"px | H: ",r.original.object.height,"px"]})]}):Object(oe.jsx)(w.a,{variant:"body1",className:t.unknown,children:a.formatMessage({id:"message.fileContentEmpty"})})}),Object(oe.jsx)(k.a,{item:!0,xs:6,children:r.modified.object?Object(oe.jsxs)(i.a.Fragment,{children:[Object(oe.jsx)("img",{src:"data:"+r.modified.object.mime+";base64,"+r.modified.object.base64Encoded,className:t.newImage}),Object(oe.jsxs)(w.a,{variant:"body2",component:"div",align:"center",className:t.imagelegend,children:[z(r.modified.object.size,"Bytes")," | W: ",r.modified.object.width,"px | H: ",r.modified.object.height,"px"]})]}):Object(oe.jsx)(w.a,{variant:"body1",className:t.unknown,children:a.formatMessage({id:"message.fileContentEmpty"})})})]}),l===D.obejctDiffDisplayType.infoChange&&Object(oe.jsxs)(w.a,{variant:"body2",component:"div",align:"center",children:[r.original.name!==r.modified.name&&Object(oe.jsxs)(w.a,{variant:"body2",component:"div",align:"center",className:t.unknown,children:["File name changed from ",r.original.name," to ",r.modified.name]}),r.original.mode!==r.modified.mode&&Object(oe.jsxs)(w.a,{variant:"body2",component:"div",align:"center",className:t.unknown,children:["File mode changed from ",r.original.mode," to ",r.modified.mode]})]}),l===D.obejctDiffDisplayType.textChange&&Object(oe.jsx)(Br,{fileDiffInfo:r,repository:n,renderSideBySide:s,layoutUpdateTimeStamp:o,showFullFile:c}),l===D.obejctDiffDisplayType.unknown&&Object(oe.jsx)(w.a,{variant:"body1",component:"div",className:t.unknown,children:a.formatMessage({id:"message.fileTypeNotSupport"})}),l===D.obejctDiffDisplayType.empty&&Object(oe.jsx)(w.a,{variant:"body1",component:"div",className:t.unknown,children:a.formatMessage({id:"message.fileContentEmpty"})}),l===D.obejctDiffDisplayType.oversize&&Object(oe.jsx)(w.a,{variant:"body1",component:"div",className:t.unknown,children:a.formatMessage({id:"message.fileContentOversize"})})]})})}}]),a}(i.a.Component),Gr=Object(R.b)(Object(C.a)((function(e){return{icon:{color:e.palette.text.lighter},icon2:{color:e.palette.primary.main},fileInfo:{lineHeight:e.spacing(5)+"px",paddingLeft:e.spacing(3),paddingRight:e.spacing(3),background:e.palette.background.main,border:"1px solid "+e.palette.border,borderRadius:e.spacing(.5)+"px "+e.spacing(.5)+"px 0 0",display:"flex",alignItems:"center"},editorBg:{background:"#1e1e1e"},detail:{overflow:"hidden",border:"1px solid "+e.palette.border,borderRadius:"0 0 "+e.spacing(.5)+"px "+e.spacing(.5)+"px",borderTop:"0px"},mediaFile:{display:"block",margin:"auto",marginTop:e.spacing(5),marginBottom:e.spacing(5),maxWidth:"80%"},oldImage:{display:"block",marginTop:e.spacing(5),border:"1px solid "+e.palette.error.main,padding:e.spacing(2),marginLeft:"auto",marginRight:"auto",maxWidth:"80%"},newImage:{display:"block",marginTop:e.spacing(5),border:"1px solid "+e.palette.success.dark,marginLeft:"auto",padding:e.spacing(2),marginRight:"auto",maxWidth:"80%"},imagelegend:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:e.spacing(8)},opacity1:{color:e.palette.text.lighter,cursor:"not-allowed"},height0:{height:"0px",paddingTop:"0px !important",paddingBottom:"0px !important",overflow:"hidden"},unknown:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:e.spacing(16)},markdown:{boxSizing:"border-box",minWidth:"200px",maxWidth:"980px",margin:"0 auto",padding:"45px"}}}))(Object(h.f)(Object(l.b)((function(e,t){return{expandStatus:e.DrawerStates.expandStatus}}),(function(e,t){return{}}))(Ur)))),Hr=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;Object(p.a)(this,a),r=t.call(this,e);var i=e.intl;return r.state={panelIsOpen:!0,showFullFile:!1,copyPath:"label.copyPath",viewFile:i.formatMessage({id:"label.browserFile"}),showFullFileTitle:i.formatMessage({id:"label.expandFullFile"})},r.fileType={text:1,image:2,video:3},r}return Object(d.a)(a,[{key:"viewFileDetail",value:function(e){this.props.history.push(e)}},{key:"toggleFullFile",value:function(e){e.stopPropagation();var t=this.props.intl;this.setState({showFullFile:!this.state.showFullFile,showFullFileTitle:this.state.showFullFile?t.formatMessage({id:"label.expandFullFile"}):t.formatMessage({id:"label.showDiffOnly"})})}},{key:"copyPath",value:function(e,t){e.stopPropagation(),this.copySomething(t),this.setState({copyPath:"label.copied"})}},{key:"copySomething",value:function(e){var t=window.document.createElement("input");t.setAttribute("value",e),t.setAttribute("type","text"),window.document.body.appendChild(t),t.select(),document.execCommand("copy"),window.document.body.removeChild(t)}},{key:"fileTypeDeal",value:function(e){var t=this.fileType,a=t.unknow,r=t.text,i=t.image,n=t.video;return-1!==e.type.indexOf("text")||-1!==e.type.indexOf("application/xml")?r:-1!==e.type.indexOf("image")?i:-1!==e.type.indexOf("video/mp4")?n:a}},{key:"fileIconDeal",value:function(e){var t=this.fileType,a=t.image,r=t.video;switch(e){case a:return Ge.g;case r:return Ge.l;default:return je.p}}},{key:"togglePanel",value:function(){this.setState({panelIsOpen:!this.state.panelIsOpen})}},{key:"render",value:function(){var e=this,t=this.props,a=t.fileDiffInfo,r=t.renderSideBySide,i=t.currentRepositoryKey,n=t.modifiedRepositoryKey,s=t.classes,o=t.intl,c=t.match,l=t.layoutUpdateTimeStamp,p=t.fileTreeIsOpen,d=this.props,u=d.parentHash,m=d.hash,h=this.fileType,g=h.text,b=h.image,f=this.state,j=f.panelIsOpen,v=f.copyPath,O=f.viewFile,y=f.showFullFile,x=f.showFullFileTitle;u=u?u[0].substr(0,8):"",m=m?m.substr(0,8):"";var S=W(c.params.groupName,c.params.repositoryName,"files",u,a.original.name),C=W(c.params.groupName,c.params.repositoryName,"files",m,a.modified.name),N=this.fileTypeDeal(a);return Object(oe.jsxs)(Ar.a,{expanded:j,onChange:function(t){return e.togglePanel(t)},square:Boolean(!1),children:[Object(oe.jsx)(Dr.a,{expandIcon:Object(oe.jsx)(Fr.a,{}),"aria-controls":"panel1a-content",className:s.panelSummary,children:Object(oe.jsxs)(k.a,{container:!0,justifyContent:"space-between",children:[Object(oe.jsxs)(k.a,{item:!0,xs:p?8:7,children:[Object(oe.jsxs)(w.a,{onClick:function(e){return e.stopPropagation()},onFocus:function(e){return e.stopPropagation()},className:s.fileName,component:"span",children:[Object(oe.jsx)(fe.a,{icon:this.fileIconDeal(N)})," \xa0\xa0",a.original.name===a.modified.name?a.modified.name:a.original.name+" -> "+a.modified.name," \xa0\xa0",Object(oe.jsxs)(w.a,{variant:"body2",component:"span",children:[a.original.mode===a.modified.mode?"":a.original.mode+" -> "+a.modified.mode," \xa0"]})]}),Object(oe.jsx)(Ie,{label:v,icon:je.k,className:s.icon,onClick:function(t){e.copyPath(t,a.modified.name),t.stopPropagation()},onMouseLeave:function(){window.setTimeout((function(){return e.setState({copyPath:"label.copyPath"})}),100)}})]}),N===g&&Object(oe.jsxs)(k.a,{item:!0,children:[Object(oe.jsxs)(w.a,{variant:"body1",component:"span",className:s.add,children:["+",a.diff.additions]}),Object(oe.jsx)(w.a,{variant:"body1",component:"span",className:s.delete,children:a.diff.deletions}),Object(oe.jsx)(w.a,{variant:"body1",component:"span",className:s.separator,children:"|"}),Object(oe.jsx)(be.a,{title:x,disableFocusListener:!0,placement:"top",children:Object(oe.jsx)(_.a,{onClick:function(t){return e.toggleFullFile(t)},children:Object(oe.jsx)(fe.a,{icon:y?Ge.c:je.o})})}),i===n&&m&&Object(oe.jsx)(be.a,{title:O+"@"+m,disableFocusListener:!0,placement:"top",children:Object(oe.jsx)(_.a,{onClick:function(t){return e.viewFileDetail(C)},children:Object(oe.jsx)(fe.a,{icon:je.p})})})]}),N===b&&i===n&&u&&m&&Object(oe.jsxs)(k.a,{item:!0,children:[Object(oe.jsx)(be.a,{title:O+"@"+u,disableFocusListener:!0,placement:"top",children:Object(oe.jsxs)(_.a,{className:s.viewOldFileBtn,onClick:function(t){return e.viewFileDetail(S)},children:[Object(oe.jsx)(fe.a,{icon:je.p}),"\xa0\xa0",o.formatMessage({id:"label.browserUnchangedFIle"})," \xa0","@"+u]})}),Object(oe.jsx)(be.a,{title:O+"@"+m,disableFocusListener:!0,placement:"top",children:Object(oe.jsxs)(_.a,{className:s.viewFileBtn,onClick:function(t){return e.viewFileDetail(C)},children:[Object(oe.jsx)(fe.a,{icon:je.p}),"\xa0\xa0",o.formatMessage({id:"label.browserFile"}),"\xa0","@"+m]})})]})]})}),Object(oe.jsx)(Ir.a,{className:s.panelDetail,children:Object(oe.jsx)(Gr,{fileDiffInfo:a,repository:i,renderSideBySide:r,layoutUpdateTimeStamp:l,showFullFile:y})})]})}}]),a}(r.Component),qr=Object(R.b)(Object(C.a)((function(e){return{add:{color:e.palette.success.main,cursor:"default",marginLeft:e.spacing(3),marginRight:e.spacing(2)},delete:{color:e.palette.error.main,cursor:"default",marginLeft:e.spacing(1),marginRight:e.spacing(1)},viewFileBtn:{minWidth:e.spacing(24)},viewOldFileBtn:{minWidth:e.spacing(27)},fileName:{cursor:"default",marginTop:e.spacing(.5)},viewFile:{marginLeft:e.spacing(2)},panelSummary:{border:"1px solid "+e.palette.border,position:"sticky",top:e.spacing(16),zIndex:7},panelDetail:{zIndex:e.spacing(1),overflow:"hidden"},separator:{color:e.palette.border},icon:{color:e.palette.primary.main}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentRepositoryKey:e.DataStore.currentRepositoryKey,currentRepositoryConfig:e.DataStore.currentRepositoryConfig}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(Hr)))),zr=0,Wr=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).fileBrowser={changeFilesTmp:null,treeFiles:null,listFiles:null},r.state={count:0},r.initChangeFiles(),r.listFilesRef=i.a.createRef(),r}return Object(d.a)(a,[{key:"initChangeFiles",value:function(){var e=this.props.changeFiles;if(!e||!e.length)return!1;e.map((function(e,t){var a=e.name.lastIndexOf("/");return e.used=!1,e.dirname=-1!==a?e.name.slice(0,a):"",e.filename=-1!==a?e.name.slice(a+1):e.name,!0})),this.initTreeFiles(),this.initListFiles()}},{key:"initTreeFiles",value:function(){var e=this,t=this.props.changeFiles;return!(!t||!t.length)&&(this.fileBrowser.treeFiles={"/":!0,"/open":!0},this.fileBrowser.changeFilesTmp=Object(T.a)(t),this.fileBrowser.changeFilesTmp.sort((function(e,t){return e.dirname!==t.dirname&&e.dirname.indexOf(t.dirname)>-1?-1:0})),this.fileBrowser.changeFilesTmp.map((function(t,a){var r=e.fileBrowser.treeFiles;t.dirname&&t.dirname.split("/").map((function(e,t){return!!e&&(void 0===r[e]&&(r[e]={"/":!0,"/open":!0}),r=r[e],!0)}));return r[t.filename]=Object(y.a)({"/":!1},t),!0})),!0)}},{key:"initListFiles",value:function(){var e=this,t=this.props.changeFiles;return!(!t||!t.length)&&(this.fileBrowser.listFiles=[],t.map((function(a,r){if(a.used)return a;a.used=!0;var i={name:a.dirname,files:[a]};return t.map((function(e,t){return e.used?e:(e.dirname===i.name&&(e.used=!0,i.files.push(e)),!0)})),e.fileBrowser.listFiles.push(i),!0})),!0)}},{key:"treeFiles",value:function(e,t,a){var r=this,n=this.props,s=n.fileClick,o=n.classes,c=Object.keys(t),l=0;return!(c.length<3)&&(c.map((function(e,a){return l+="/"===e||"/open"===e||t[e]["/"]?0:1,!0})),Object(oe.jsx)(i.a.Fragment,{children:l>0||c.length>3?Object(oe.jsxs)(w.a,{component:"div",children:[Object(oe.jsxs)(w.a,{component:"div",className:o.tree,style:this.calcPadding(a,!0),onClick:function(e){t["/open"]=!t["/open"],r.setState({count:r.state.count+1})},children:[Object(oe.jsx)(fe.a,{icon:t["/open"]?Ge.f:Ge.e}),"\xa0\xa0",e]}),t["/open"]&&c.map((function(e,n){return"/"!==e&&"/open"!==e&&Object(oe.jsx)(i.a.Fragment,{children:t[e]["/"]?r.treeFiles(e,t[e],a+1):Object(oe.jsxs)(w.a,{component:"div",className:o.tree,onClick:function(a){return s(t[e].hash)},style:r.calcPadding(a,!1),children:[Object(oe.jsx)(fe.a,{icon:Ge.d}),"\xa0\xa0",t[e].filename,Object(oe.jsxs)(w.a,{component:"span",className:o.delete,children:["-",t[e].delete]}),Object(oe.jsxs)(w.a,{component:"span",className:o.add,children:["+",t[e].add,"\xa0"]})]})},n)}))]}):c.map((function(n,s){return"/"!==n&&"/open"!==n&&Object(oe.jsx)(i.a.Fragment,{children:r.treeFiles(("/"!==e?e+"/":"")+n,t[n],a)},s)}))}))}},{key:"calcPadding",value:function(e,t){return{paddingLeft:(2*e+(t?1:3))*zr+"px"}}},{key:"listFiles",value:function(){var e=this,t=this.props,a=t.fileClick,r=t.classes,i=this.fileBrowser.listFiles;return!(!i||!i.length)&&Object(oe.jsx)(w.a,{component:"div",ref:this.listFilesRef,children:i.map((function(t,i){return Object(oe.jsxs)(w.a,{component:"div",className:r.listSub,children:[Object(oe.jsxs)(w.a,{component:"div",className:r.listDir2,children:[e.calcDir(t.name),"/"]}),Object(oe.jsxs)(w.a,{component:"div",className:r.listDir,children:[t.name,"/"]}),t.files&&t.files.map((function(e,t){return Object(oe.jsxs)(w.a,{component:"div",className:r.listFile,onClick:function(t){return a(e.hash)},children:[Object(oe.jsx)(fe.a,{icon:Ge.i}),"\xa0\xa0",e.filename,Object(oe.jsxs)(w.a,{component:"span",className:r.delete,children:["-",e.delete]}),Object(oe.jsxs)(w.a,{component:"span",className:r.add,children:["+",e.add,"\xa0"]})]},t)}))]},i)}))})}},{key:"calcDir",value:function(e){if(!e)return"";for(var t=e.split("/"),a=t.length-2;t.join("/").length>32&&a>0;)t[a--]="..";return t.join("/")}},{key:"listFilesScroll",value:function(e){if(this.props.treeView)return!1;for(var t=e.target.scrollTop,a=0,r=0,i=5*zr,n=this.listFilesRef.current.children,s=0;s<n.length;s++)r+=n[s].clientHeight,t>=a&&t<r?t>r-i?(n[s].style="position: relative",n[s].children[0].style="top: "+(n[s].clientHeight-i)+"px"):(n[s].style="position: static",n[s].children[0].style="top: 0; width: "+n[s].clientWidth+"px"):(n[s].style="position: relative",n[s].children[0].style="top: 0"),a+=n[s].clientHeight}},{key:"render",value:function(){var e=this,t=this.props,a=t.treeView,r=t.classes;return this.initChangeFiles(),Object(oe.jsx)(k.a,{container:!0,className:r.fileBrowserTop,children:Object(oe.jsx)(k.a,{item:!0,xs:12,className:r.fileBrowser,onScroll:function(t){return e.listFilesScroll(t)},children:a?this.treeFiles("/",this.fileBrowser.treeFiles,0):this.listFiles()})})}}]),a}(i.a.Component),Vr=Object(R.b)(Object(C.a)((function(e){return zr=parseInt(e.spacing(1)),{fileBrowserTop:{position:"relative",height:"100%"},fileBrowser:{maxHeight:"100%",overflow:"auto",overflowX:"hidden",background:e.palette.background.light},tree:{paddingRight:e.spacing(1),lineHeight:e.spacing(4.5)+"px",cursor:"pointer","& > *":{lineHeight:e.spacing(4.5)+"px"},"&:hover":{background:e.palette.background.dark}},listSub:{position:"relative"},listDir:{lineHeight:e.spacing(5)+"px",paddingLeft:e.spacing(1),background:e.palette.background.light},listDir2:{position:"absolute",width:"100%",left:"0",top:"0",paddingLeft:e.spacing(1),lineHeight:e.spacing(5)+"px",boxSizing:"border-box",background:e.palette.background.light,overflowX:"hidden"},listFile:{lineHeight:e.spacing(5)+"px",paddingLeft:e.spacing(3),paddingRight:e.spacing(1),cursor:"pointer","& > *":{lineHeight:e.spacing(5)+"px"},"&:hover":{background:e.palette.background.dark}},add:{float:"right",color:e.palette.success.main},delete:{float:"right",color:e.palette.error.main}}}))(Object(h.f)(Object(l.b)((function(e,t){return{}}),(function(e,t){return{}}))(Wr)))),Jr=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).mountedFlag=!1,r.observed={currentRepositoryKey:null},r.state={changedFilesInfo:[],diffViwerLayoutUpdateTimestamp:0,fileTreeIsOpen:!1,fileTreeGridNumber:3,effectFileCount:0,fileDiff:[],renderSideBySide:!0,addLine:0,deleteLine:0,pending:!0,large:!1},r}return Object(d.a)(a,[{key:"toggleDiffShow",value:function(){this.setState({renderSideBySide:!this.state.renderSideBySide,diffViwerLayoutUpdateTimestamp:(new Date).getTime()})}},{key:"toggleFileTree",value:function(){this.setState({fileTreeIsOpen:!this.state.fileTreeIsOpen,renderSideBySide:this.state.fileTreeIsOpen,diffViwerLayoutUpdateTimestamp:(new Date).getTime()})}},{key:"jumpToAnchor",value:function(e){window.location.href=window.location.href.split("#")[0]+"#"+e}},{key:"componentDidMount",value:function(){this.mountedFlag=!0,this.observed.currentRepositoryKey=this.props.currentRepositoryKey,this.setState({pending:!0}),this.getData(this.props)}},{key:"getFileTreeInfo",value:function(e){for(var t=[],a=0;a<e.length;a++){var r=e[a];r.modified&&r.modified.name&&t.push({name:r.modified.name,add:r.diff.additions,delete:Math.abs(r.diff.deletions),hash:r.modified.sha})}return t}},{key:"getData",value:function(e){var t=this;if(!e.currentRepositoryKey||!e.childHash||!e.parentHash.length)return!1;Ht.fileChanges({repository:e.currentRepositoryKey,original:e.parentHash[0],modified:e.parentHash.length>1?e.parentHash[1]:e.childHash}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(e){if(e.data.large)return t.setState({effectFileCount:e.data.count,large:!0,pending:!1}),!1;var a=e.data.detail.reduce((function(e,t){return e+t.diff.additions}),0),r=e.data.detail.reduce((function(e,t){return e+t.diff.deletions}),0),i=t.getFileTreeInfo(e.data.detail);t.setState({changedFilesInfo:i,effectFileCount:e.data.count,fileDiff:e.data.detail,addLine:a,deleteLine:r,pending:!1})}))}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.currentRepositoryKey!==e.currentRepositoryKey||this.props.childHash!==e.childHash?(this.setState({pending:!0}),this.getData(e),!1):this.props.parentHash[0]===e.parentHash[0]||(this.setState({pending:!0}),this.getData(e),!1)}},{key:"render",value:function(){var e=this,t=this.state,a=t.effectFileCount,r=t.addLine,n=t.deleteLine,s=t.fileDiff,o=t.renderSideBySide,c=t.pending,l=t.fileTreeIsOpen,p=t.fileTreeGridNumber,d=t.changedFilesInfo,u=t.diffViwerLayoutUpdateTimestamp,m=t.large,h=this.props,g=h.classes,b=h.intl,f=h.childHash,j=h.parentHash,v=h.currentRepositoryKey;return Object(oe.jsxs)(i.a.Fragment,{children:[Object(oe.jsxs)(k.a,{container:!0,justifyContent:"space-between",className:g.stickyPosition,children:[Object(oe.jsx)(k.a,{item:!0,xs:6,children:Object(oe.jsxs)(w.a,{variant:"body1",className:g.diffTitle,children:[b.formatMessage({id:"label.fileModification"})," \xa0",c?"":"("+a+")"]})}),Object(oe.jsx)(k.a,{item:!0,xs:6,container:!0,justifyContent:"flex-end",alignItems:"center",children:Object(oe.jsxs)(k.a,{item:!0,className:g.content,children:[Object(oe.jsxs)(w.a,{variant:"body1",component:"span",children:[b.formatMessage({id:"label.allFiles"})," : \xa0",c?Object(oe.jsx)(he.a,{size:"12px",color:"inherit"}):a]}),Object(oe.jsx)(w.a,{variant:"body1",component:"span",className:g.add,children:c?Object(oe.jsx)(he.a,{size:"12px",color:"inherit"}):"+"+r}),Object(oe.jsx)(w.a,{variant:"body1",component:"span",className:g.delete,children:c?Object(oe.jsx)(he.a,{size:"12px",color:"inherit"}):n}),Object(oe.jsxs)(Ha.a,{variant:"outlined",color:"primary",size:"small",children:[Object(oe.jsx)(_.a,{onClick:function(t){return e.toggleDiffShow(t)},children:o?"inline":"side-by-side"}),Object(oe.jsx)(_.a,{onClick:function(t){return e.toggleFileTree(t)},children:l?b.formatMessage({id:"label.closeFileTree"}):b.formatMessage({id:"label.openFileTree"})})]})]})})]}),Object(oe.jsxs)(k.a,{container:!0,spacing:3,children:[Object(oe.jsx)(k.a,{item:!0,xs:l?p:12,className:l?g.fileTreeSticky:g.fileTreeHide,children:Object(oe.jsx)(Vr,{changeFiles:d,treeView:Boolean(!1),fileClick:function(t){return e.jumpToAnchor(t)}})}),Object(oe.jsxs)(k.a,{item:!0,xs:l?12-p:12,children:[!c&&s&&s.length>0&&Object(oe.jsx)(k.a,{container:!0,children:s.map((function(e,t){return Object(oe.jsx)(k.a,{item:!0,xs:12,id:e.modified.sha,className:g.fileDiffPanel,children:Object(oe.jsx)(qr,{modifiedRepositoryKey:v,fileDiffInfo:e,renderSideBySide:o,hash:f,parentHash:j,layoutUpdateTimeStamp:u,fileTreeIsOpen:l},t)},t)}))}),!m&&(c||!s||!s.length)&&Object(oe.jsx)(k.a,{container:!0,children:Object(oe.jsx)(Pt,{imageName:"branches-empty.png",title:b.formatMessage({id:"message._S_listEmpty"},{s:b.formatMessage({id:"label.file"})}),pending:c})}),m&&Object(oe.jsx)(k.a,{container:!0,className:g.loading,children:Object(oe.jsx)(w.a,{variant:"body1",component:"span",children:b.formatMessage({id:"message.diffFileToMany"})})})]})]})]})}}]),a}(r.Component),Kr=Object(R.b)(Object(ge.a)(Object(C.a)((function(e){return{add:{color:e.palette.success.main,marginLeft:e.spacing(3),marginRight:e.spacing(2)},delete:{color:e.palette.error.main,marginLeft:e.spacing(1),marginRight:e.spacing(1)},changedFile:{color:e.palette.primary.main,paddingBottom:e.spacing(1),backgroundColor:"transparent",fontSize:"1.25rem","&:hover":{backgroundColor:"transparent",boxShadow:"none"}},typography:{padding:e.spacing(2)},changedFileList:{width:"100%",maxWidth:e.spacing(113),backgroundColor:e.palette.background.paper},paper:{minWidth:e.spacing(38),width:"100%"},expansionMargin0:{margin:0},loading:{paddingTop:e.spacing(16),paddingBottom:e.spacing(16),justifyContent:"center"},content:{zIndex:e.spacing(1),backgroundColor:e.palette.background.light},stickyPosition:{position:"sticky",top:e.spacing(8),zIndex:e.spacing(1),padding:e.spacing(2)+"px 0px",backgroundColor:e.palette.background.light},fileTreeHide:{display:"none"},fileTreeSticky:{position:"sticky",top:e.spacing(14.5),maxHeight:window.innerHeight-116+"px"},diffTitle:{lineHeight:e.spacing(4)+"px"},fileDiffPanel:{marginBottom:e.spacing(3)}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentRepositoryKey:e.DataStore.currentRepositoryKey}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(Jr))))),$r=Object(C.a)((function(e){return{root:{width:e.spacing(3),height:e.spacing(3)}}}))(Le.a),Zr=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).mountedFlag=!1,r.state={currentGroup:e.match.params.groupName?e.match.params.groupName:"",currentRepository:e.match.params.repositoryName?e.match.params.repositoryName:"",commitDetail:{},commiterInfo:{name:""},optionAnchorEl:null,parentHash:[],parentHashShow:!1},r.mountedFlag=!1,r}return Object(d.a)(a,[{key:"openOptionPopover",value:function(e){this.setState({optionAnchorEl:e.currentTarget})}},{key:"closeOptionPopover",value:function(){this.setState({optionAnchorEl:null})}},{key:"componentDidMount",value:function(){this.mountedFlag=!0,(0,this.props.closeDrawer)(),this.getData(this.props,this.state)}},{key:"componentWillUnmount",value:function(){this.mountedFlag=!1}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.match.params.hash!==e.match.params.hash||this.props.currentRepositoryKey!==e.currentRepositoryKey?(this.getData(e,t),!1):JSON.stringify(this.props.currentRepositoryConfig)===JSON.stringify(e.currentRepositoryConfig)||(this.getData(e,t),!1)}},{key:"copyHash",value:function(e){var t=this.props.intl;this.copySomething(e),this.setState({copyHash:t.formatMessage({id:"label.copied"})})}},{key:"copySomething",value:function(e){var t=window.document.createElement("input");t.setAttribute("value",e),t.setAttribute("type","text"),window.document.body.appendChild(t),t.select(),document.execCommand("copy"),window.document.body.removeChild(t)}},{key:"getData",value:function(e,t){var a=this;if(!e.match.params.hash||!e.currentRepositoryKey||!e.currentRepositoryConfig.repository)return!1;Ht.commitDetail({repository:e.currentRepositoryKey,commitSHA:e.match.params.hash}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){var r=t.data;if(!r)return!1;if(e.currentRepositoryConfig){var i=Z(e.currentRepositoryConfig.members,r.email),n=r.parent.split(" ");a.setState({commitDetail:r,commiterInfo:i,parentHash:n})}}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.commitDetail,r=t.commiterInfo,n=t.currentRepository,s=t.currentGroup,o=t.parentHash,c=t.parentHashShow,l=this.props,p=l.classes,d=l.currentRepositoryKey,u=l.history,m=l.intl,h=l.match;return Object(oe.jsx)(i.a.Fragment,{children:Object(oe.jsx)(k.a,{container:!0,spacing:3,children:Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsxs)(M.a,{elevation:1,children:[Object(oe.jsxs)(k.a,{container:!0,justifyContent:"space-between",children:[Object(oe.jsxs)(k.a,{item:!0,children:[Object(oe.jsx)(w.a,{variant:"h6",component:"div",gutterBottom:!0,children:a.commit}),Object(oe.jsxs)(w.a,{variant:"body1",component:"div",className:p.oneline,children:[Object(oe.jsx)($r,{src:r.icon?D.HOSTS.PGYER_AVATAR_HOST+r.icon:"/static/images/default_avatar.png"}),"\xa0\xa0",Object(oe.jsxs)(w.a,{component:"span",variant:"body2",children:[r.name,"\xa0\xa0",m.formatMessage({id:"label.editIn"}),"\xa0"]}),a.time&&Object(oe.jsx)(w.a,{component:"span",variant:"body2",children:Object(oe.jsx)(Nt,{timestamp:a.time})})]})]}),Object(oe.jsxs)(k.a,{item:!0,className:p.oneline,children:[Object(oe.jsxs)(_.a,{variant:"outlined",color:"primary",onClick:function(t){return e.setState({parentHashShow:!c})},children:[m.formatMessage({id:"label.detail"}),Object(oe.jsx)(fe.a,{icon:je.L,className:[p.icon,c?p.transform:""].join(" ")})]}),a.sha&&Object(oe.jsx)(k.a,{className:p.ml16,children:Object(oe.jsx)(nr,{hash:a.sha.substr(0,8)})}),Object(oe.jsx)(_.a,{variant:"contained",color:"primary",className:p.ml16,onClick:function(){return u.push(W(s,n,"files",h.params.hash,""))},children:m.formatMessage({id:"label.browserFile"})})]})]}),Object(oe.jsx)(Tr,{show:c,parentHash:o,currentHash:h.params.hash,currentGroup:s,currentRepository:n,currentRepositoryKey:d}),Object(oe.jsx)(k.a,{container:!0,spacing:2,justifyContent:"space-between",children:Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(Kr,{id:"FileDiffDetail",parentHash:o,childHash:h.params.hash,rKey:d})})})]})})})})}}]),a}(i.a.Component),Yr=Object(R.b)(Object(ge.a)(Object(C.a)((function(e){return{oneline:{display:"flex",alignItems:"center"},ml16:{marginLeft:e.spacing(2)},icon:{marginLeft:e.spacing(1),fontSize:e.spacing(1),color:e.palette.text.main},transform:{transform:"rotate(180deg)"}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentRepositoryKey:e.DataStore.currentRepositoryKey,currentRepositoryConfig:e.DataStore.currentRepositoryConfig}}),(function(e,t){return{closeDrawer:function(){e({type:"drawer.expandStatus.close"})},dispatchEvent:function(t){e(t)}}}))(Zr))))),Xr=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.repositoryInfo,a=e.reviewers,r=e.classes;return Object(oe.jsx)(k.a,{container:!0,justifyContent:"flex-end",children:a.length>0&&a.map((function(e,a){var i=t.members.filter(U.id(e.user))[0];return Object(oe.jsxs)(k.a,{item:!0,className:r.reviewer,children:[Object(oe.jsx)(Le.a,{className:r.reviewerIcon,src:D.HOSTS.PGYER_AVATAR_HOST+i.icon}),Object(oe.jsx)(fe.a,{icon:e.isReview?je.P:je.M,className:[r.isReview,e.isReview?r.reviewed:""].join(" ")})]},a)}))})}}]),a}(i.a.Component),Qr=Object(C.a)((function(e){return{reviewer:{position:"relative"},reviewerIcon:{marginLeft:"-8px",borderRadius:"50%",boxSizing:"border-box",width:e.spacing(4),height:e.spacing(4),border:"2px solid "+e.palette.background.light+" !important"},isReview:{right:0,bottom:0,zIndex:"1",fontSize:"12px",borderRadius:"50%",position:"absolute",color:e.palette.text.light,background:e.palette.background.light,border:"2px solid "+e.palette.background.light},reviewed:{color:e.palette.success.main}}}))(Object(h.f)(Xr)),ei=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).dataDeal(),r}return Object(d.a)(a,[{key:"dataDeal",value:function(){var e=this.props,t=e.data,a=e.repositoryList,r=e.history;if(!t&&!a.length)return!1;var i=a.filter(U.id(t.targetRepository));if(i.length){var n=i[0];t.targetRepository=n;var s=W(n.group.name,n.name,"commits",encodeURIComponent(t.targetBranch));t.targetLink=Object(oe.jsx)(rr,{to:s,onClick:function(e){return r.push(s)},children:t.targetBranch});var o=W(n.group.name,n.name,"mergerequests",t.number);t.titleLink=Object(oe.jsx)(rr,{to:o,onClick:function(e){return r.push(o)},children:t.title})}else t.targetLink=t.targetBranch,t.titleLink=t.targetBranch;var c=a.filter(U.id(t.sourceRepository));if(c.length){var l=c[0];t.sourceRepository=l;var p=W(l.group.name,l.name,"commits",encodeURIComponent(t.sourceBranch));t.sourceLink=Object(oe.jsx)(rr,{to:p,onClick:function(e){return r.push(p)},children:t.sourceBranch}),t.updater=Z(l.members,t.commit.email).name}else if(t.sourceLink=t.sourceBranch,i.length){var d=i[0];t.updater=Z(d.members,t.commit.email).name}else t.updater=t.commit.email}},{key:"render",value:function(){var e=this.props,t=e.isRepository,a=e.data,r=e.classes,i=e.intl,n=D.mergeRequestStatus;return Object(oe.jsxs)(k.a,{container:!0,justifyContent:"space-between",alignItems:"center",className:r.item,children:[Object(oe.jsxs)(k.a,{item:!0,children:[Object(oe.jsxs)(w.a,{variant:"body1",component:"div",className:[r.oneline,r.title].join(" "),children:[a.titleLink,"\xa0\xa0\xa0\xa0",a.status===n.open&&Object(oe.jsx)(Ke,{color:"success",background:!1,icon:je.j,text:i.formatMessage({id:"message.opened"})}),a.status===n.merged&&Object(oe.jsx)(Ke,{color:"info",background:!1,icon:je.z,text:i.formatMessage({id:"message.merged"})}),a.status===n.closed&&Object(oe.jsx)(Ke,{color:"warning",background:!1,icon:je.q,text:i.formatMessage({id:"message.closed"})})]}),Object(oe.jsxs)(w.a,{variant:"body2",component:"div",className:r.oneline,children:[Object(oe.jsx)(w.a,{component:"span",children:!t&&a.targetRepository.name}),Object(oe.jsxs)(w.a,{component:"span",children:["!",a.number]}),"\xa0\xb7\xa0",Object(oe.jsxs)(w.a,{component:"span",className:r.textMain,children:[Object(oe.jsx)(fe.a,{icon:je.y}),"\xa0",a.sourceLink,"\xa0",Object(oe.jsx)(fe.a,{icon:Ge.b}),"\xa0",a.targetLink]}),"\xa0\xb7\xa0",Object(oe.jsxs)(w.a,{variant:"body2",component:"span",children:[a.updater,"\xa0\xa0",i.formatMessage({id:"label.editIn"}),":\xa0\xa0",Object(oe.jsx)(Nt,{timestamp:1*a.commit.time})]})]})]}),Object(oe.jsxs)(k.a,{item:!0,children:[Object(oe.jsx)(k.a,{item:!0,className:r.reviewers,children:a.reviewers.length>0?Object(oe.jsx)(Qr,{reviewers:a.reviewers,repositoryInfo:a.targetRepository}):Object(oe.jsx)(k.a,{item:!0,children:"\xa0"})}),Object(oe.jsxs)(w.a,{variant:"body2",component:"div",children:[i.formatMessage({id:"label.updateTime"}),":\xa0\xa0",Object(oe.jsx)(Nt,{timestamp:1*a.update})]})]})]})}}]),a}(i.a.Component),ti=Object(R.b)(Object(C.a)((function(e){return{item:{padding:e.spacing(1.5)+"px "+e.spacing(3)+"px",borderTop:"1px solid "+e.palette.border},oneline:{lineHeight:e.spacing(3.5)+"px"},title:{"& a":{color:e.palette.text.main+" !important",fontWeight:600}},textMain:{"& a":{color:e.palette.text.main+" !important"}},reviewers:{marginBottom:e.spacing(.5)}}}))(Object(h.f)(Object(l.b)((function(e,t){return{}}),(function(e,t){return{}}))(ei)))),ai=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={pending:!0,isGlobal:!e.match.params.groupName,isRepository:null,tabValue:0,keyword:"",sortDesc:!0,page:1,pagesize:10,noMore:!1,mrList:null,relatedRepository:[]},r.observed={keyword:""},r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.getData(this.props,this.state,!1)}},{key:"shouldComponentUpdate",value:function(e,t){return JSON.stringify(this.props.currentGroupConfig)!==JSON.stringify(e.currentGroupConfig)||JSON.stringify(this.props.currentRepositoryConfig)!==JSON.stringify(e.currentRepositoryConfig)?(this.getData(e,t,!1),!1):this.state.page===t.page||t.pending?this.state.sortDesc!==t.sortDesc?(this.getData(e,t,!0),!1):this.state.tabValue===t.tabValue||(this.getData(e,t,!0),!1):(this.setState({pending:!0}),this.getData(e,t,!1),!1)}},{key:"getData",value:function(e,t,a){var r=this;a&&(this.observed.keyword=t.keyword,this.setState({pending:!0,page:1,mrList:null}));var i={status:t.tabValue,keyword:t.keyword,sort:t.sortDesc?"desc":"asc",page:a?1:t.page,pagesize:t.pagesize};e.currentRepositoryConfig.repository?(i.repository=e.currentRepositoryConfig.repository.id,Ht.mergeRequests(i).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(e){r.getDataDeal(e,!0)}))):e.currentGroupConfig.group?(i.group=e.currentGroupConfig.group.id,va.mergeRequests(i).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(e){r.getDataDeal(e,!1)}))):t.isGlobal&&Ht.relatedMergeRequests(i).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(e){r.getDataDeal(e,!1)}))}},{key:"getDataDeal",value:function(e,t){e.code?this.setState({mrList:[]}):this.setState({pending:!1,isRepository:t,mrList:[].concat(Object(T.a)(this.state.mrList?this.state.mrList:[]),Object(T.a)(this.state.isGlobal?e.data.mergeRequests:e.data)),noMore:(this.state.isGlobal?e.data.mergeRequests.length:e.data.length)<this.state.pagesize,relatedRepository:e.data.relatedRepository})}},{key:"searchMergeRequests",value:function(){this.observed.keyword!==this.state.keyword&&this.getData(this.props,this.state,!0)}},{key:"getTabs",value:function(){var e=this.state,t=e.isRepository,a=e.isGlobal,r=e.relatedRepository,i=this.props,n=i.repositoryList,s=i.currentGroupConfig,o=i.currentRepositoryConfig,c=i.intl,l=D.mergeRequestStatus,p=[];if(p[0]=c.formatMessage({id:"label.all"}),p[l.open]=c.formatMessage({id:"message.opened"}),p[l.merged]=c.formatMessage({id:"message.merged"}),p[l.closed]=c.formatMessage({id:"message.closed"}),this.observed.keyword)return p;var d=[];return d[0]=0,d[l.open]=0,d[l.merged]=0,d[l.closed]=0,null!==t&&(t?(d[l.open]=o.repository.mergeRequestCount.open,d[l.merged]=o.repository.mergeRequestCount.merged,d[l.closed]=o.repository.mergeRequestCount.closed):a?n.map((function(e,t){return r.map((function(t){return e.id===t&&(d[l.open]+=e.mergeRequestCount.open,d[l.merged]+=e.mergeRequestCount.merged,d[l.closed]+=e.mergeRequestCount.closed),!0})),!0})):n.map((function(e,t){return e.group&&s.group&&e.group.id===s.group.id&&(d[l.open]+=e.mergeRequestCount.open,d[l.merged]+=e.mergeRequestCount.merged,d[l.closed]+=e.mergeRequestCount.closed),!0})),d[0]=d[l.open]+d[l.merged]+d[l.closed]),p[0]+="("+d[0]+")",p[l.open]+="("+d[l.open]+")",p[l.merged]+="("+d[l.merged]+")",p[l.closed]+="("+d[l.closed]+")",p}},{key:"render",value:function(){var e=this,t=this.props,a=t.repositoryList,r=t.classes,n=t.history,s=t.intl,o=this.state,c=o.pending,l=o.isRepository,p=o.tabValue,d=o.sortDesc,u=o.page,m=o.noMore,h=o.mrList;return Object(oe.jsxs)(k.a,{item:!0,xs:12,children:[Object(oe.jsxs)(ft,{tabs:this.getTabs(),onChange:function(t,a){return!c&&e.setState({tabValue:a})},currentTab:p,children:[Object(oe.jsx)(E.a,{variant:"outlined",className:r.input,placeholder:"",defaultValue:this.state.keyword,onChange:function(t){return e.setState({keyword:t.target.value})},onKeyDown:function(t){13===t.keyCode&&e.searchMergeRequests()},InputProps:{startAdornment:Object(oe.jsx)(Gt.a,{position:"start",children:Object(oe.jsx)(fe.a,{icon:je.D})})}}),"\xa0",Object(oe.jsx)(Ie,{label:"label.sort",onClick:function(t){return!c&&e.setState({sortDesc:!d})},className:[r.icon,d?"":r.transform].join(" "),icon:je.F}),Object(oe.jsx)(_.a,{variant:"contained",color:"primary",className:r.button,disabled:c,onClick:function(){return n.push(W(n.location.pathname.substr(1),"new"))},children:s.formatMessage({id:"label.createMergeRequest"})})]}),Object(oe.jsx)(k.a,{container:!0,children:Object(oe.jsx)(k.a,{item:!0,xs:12,className:r.list,children:h?h&&h.length?Object(oe.jsxs)(i.a.Fragment,{children:[Object(oe.jsx)(ra,{title:"",children:h.map((function(e,t){return Object(oe.jsx)(ti,{repositoryList:a,isRepository:l,data:e},t)}))}),Object(oe.jsx)(k.a,{container:!0,className:r.more,justifyContent:"center",children:Object(oe.jsx)(k.a,{item:!0,children:m?Object(oe.jsx)(_.a,{size:"small",disabled:!0,children:s.formatMessage({id:"label.noMore"})}):c?Object(oe.jsx)(k.a,{container:!0,children:Object(oe.jsx)(he.a,{})}):Object(oe.jsxs)(_.a,{variant:"contained",color:"primary",size:"small",disableElevation:!0,onClick:function(t){return e.setState({page:u+1})},children:[s.formatMessage({id:"label.more"})," \xa0\xa0",Object(oe.jsx)(fe.a,{icon:Ge.a})]})})})]}):Object(oe.jsx)(Pt,{imageName:"mergerequests-empty.png",title:s.formatMessage({id:"message.mergeRequestEmpty"})}):Object(oe.jsx)(k.a,{container:!0,spacing:2,className:r.loading,children:Object(oe.jsx)(he.a,{})})})})]})}}]),a}(i.a.Component),ri=Object(R.b)(Object(C.a)((function(e){return{loading:{paddingTop:e.spacing(16),paddingBottom:e.spacing(16),justifyContent:"center"},list:{marginTop:e.spacing(3)},button:{marginLeft:e.spacing(4)},input:{width:e.spacing(30),maxWidth:"100%"},icon:{color:e.palette.text.light},transform:{transform:"rotateX(180deg)"},more:{paddingTop:e.spacing(2)}}}))(Object(h.f)(Object(l.b)((function(e,t){return{repositoryList:e.DataStore.repositoryList,currentGroupConfig:e.DataStore.currentGroupConfig,currentRepositoryConfig:e.DataStore.currentRepositoryConfig}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(ai)))),ii=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={name:"",originRepository:"",targetRepository:"",originBranch:"",targetBranch:"",originLastCommit:{},targetLastCommit:{},targetRepositoryList:[],targetRepositoryBranches:[],originRepositoryBranches:[],originRepositoryInfo:null,targetRepositoryInfo:null,error:!1,groupName:e.match.params.groupName?e.match.params.groupName:"",repositoryName:e.match.params.repositoryName?e.match.params.repositoryName:""},r}return Object(d.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){var a=this;if(void 0!==this.props.currentRepositoryConfig.repository&&this.props.currentRepositoryKey!==e.currentRepositoryKey)return this.getTargetRepository(),!1;if(JSON.stringify(this.props.currentRepositoryConfig)!==JSON.stringify(e.currentRepositoryConfig))return this.getTargetRepository(),!1;if(this.props.repositoryList!==e.repositoryList){if(this.state.groupName&&!this.state.repositoryName){var r=e.repositoryList.filter(U.groupName(this.state.groupName));r.length>0&&this.getTargetRepository(r[0].id)}return this.state.groupName||this.state.repositoryName||e.repositoryList.length>0&&(this.getInitRepositoryBranches(e.repositoryList[0].id),this.getTargetRepository(e.repositoryList[0].id)),!1}if(this.props.history.listen((function(e){if("/mergerequests/new"===e.pathname)return a.setState({groupName:"",repositoryName:""}),!1})),this.state.originRepository!==t.originRepository&&e.repositoryList.length>0){if(this.state.groupName&&!this.state.repositoryName){var i=e.repositoryList.filter(U.groupName(t.groupName));this.getInitRepositoryBranches(t.originRepository),i.length>0&&this.getTargetRepository(t.originRepository)}else this.state.repositoryName||this.state.groupName||this.state.originRepository?(this.getInitRepositoryBranches(t.originRepository),this.getTargetRepository(t.originRepository)):(this.getInitRepositoryBranches(e.repositoryList[0].id),this.getTargetRepository(t.originRepository));return!1}if(!this.state.originRepository&&!this.state.repositoryName&&!this.state.groupName&&e.repositoryList.length>0)return this.setState({originRepository:e.repositoryList[0].id}),!0;if(!this.state.originRepository&&!this.state.repositoryName&&this.state.groupName&&e.repositoryList.length>0){var n=e.repositoryList.filter(U.groupName(t.groupName));return n.length&&this.getInitRepositoryBranches(n[0].id),!1}return!0}},{key:"componentDidMount",value:function(){this.getTargetRepository()}},{key:"getTargetRepository",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=this.props.currentRepositoryKey;if(!a&&!t)return!1;Ht.targetRepository({repository:a||t}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(r){if(!r.code){var i="",n=r.data;n.map((function(e){return e.forkFlag&&(i=e.rKey),!0})),i||(i=a||t),Ht.branchList({repository:i}).then(ne.withEventdispatcher(e.props.dispatchEvent)(ne.getJSONData)).then((function(r){r.code||e.setState({originRepository:a||t,targetRepository:i,targetRepositoryList:n,targetRepositoryBranches:r.data})}))}}))}},{key:"getInitRepositoryBranches",value:function(e){var t=this;Ht.branchList({repository:e}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(a){a.code||t.setState({originRepository:e,originRepositoryBranches:a.data,error:!1})}))}},{key:"getOriginRepositoryBranches",value:function(e){var t=this;Ht.branchList({repository:e.target.value}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(a){a.code||t.setState({originRepository:e.target.value,originRepositoryBranches:a.data,error:!1,originLastCommit:!1,targetLastCommit:!1})}))}},{key:"getTargetRepositoryBranches",value:function(e){var t=this;Ht.branchList({repository:e.target.value}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(a){a.code||t.setState({targetRepository:e.target.value,targetRepositoryBranches:a.data,error:!1,targetLastCommit:!1})}))}},{key:"selectOriginBranch",value:function(e){var t=this,a=this.props,r=a.currentRepositoryKey,i=a.repositoryList,n=this.state.originRepository;Ht.lastCommitLog({ref:e.target.value,repository:r||n}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(a){if(!a.code){var r=n?i.filter(U.id(n)):null;t.setState({originLastCommit:a.data,originBranch:e.target.value,originRepositoryInfo:r[0],error:!1})}}))}},{key:"selectTargetBranch",value:function(e){var t=this,a=this.props.repositoryList,r=this.state.targetRepository;Ht.lastCommitLog({ref:e.target.value,repository:r}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(i){if(!i.code){var n=r?a.filter(U.id(r)):null;t.setState({targetLastCommit:i.data,targetBranch:e.target.value,targetRepositoryInfo:n[0],error:!1})}}))}},{key:"GoMergeRequestDetail",value:function(){var e=this.props.history,t=this.state,a=t.originRepository,r=t.targetRepository,i=t.originBranch,n=t.targetBranch,s=t.targetRepositoryInfo;a===r&&i===n?this.setState({error:!0}):e.push(W(s.group.name,s.name,"mergerequests","detail",a,encodeURIComponent(i),r,encodeURIComponent(n)))}},{key:"render",value:function(){var e=this,t=this.props,a=t.currentRepositoryConfig,r=t.classes,n=t.intl,s=t.repositoryList,o=this.state,c=o.targetRepositoryList,l=o.targetRepositoryBranches,p=o.originLastCommit,d=o.targetLastCommit,u=o.originBranch,m=o.targetBranch,h=o.originRepository,g=o.targetRepository,b=o.error,f=o.repositoryName,j=o.groupName,v=o.originRepositoryBranches,O=o.originRepositoryInfo,y=o.targetRepositoryInfo,x=[];return!f&&j&&(x=s.filter(U.groupName(j))),Object(oe.jsxs)(k.a,{container:!0,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"h6",component:"div",className:r.title,children:n.formatMessage({id:"label.createMergeRequest"})})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsxs)(k.a,{container:!0,spacing:3,children:[Object(oe.jsx)(k.a,{item:!0,xs:6,children:Object(oe.jsxs)(k.a,{className:r.repositorySelect,children:[Object(oe.jsx)(w.a,{variant:"subtitle1",component:"div",className:r.branchTitle,children:n.formatMessage({id:"label.sourceBranch"})}),Object(oe.jsxs)(k.a,{container:!0,spacing:2,className:r.branchSelect,children:[Object(oe.jsx)(k.a,{item:!0,xs:6,children:Object(oe.jsxs)(E.a,{fullWidth:!0,variant:"outlined",select:!0,value:h.length?h:"empty",onChange:function(t){return e.getOriginRepositoryBranches(t)},onClick:function(t){return!h&&e.props.history.push(W("repositories/new"))},children:[f&&a.repository&&Object(oe.jsxs)(lt.a,{value:a.repository.id,children:[a.repository.group.name,"/",a.repository.name]},a.repository.id),!!x.length&&j&&x.map((function(e,t){return e.group.name!==j?null:Object(oe.jsx)(lt.a,{value:e.id,children:e.group.displayName+"/"+e.displayName},e.id)})),0===x.length&&0===h.length&&j&&Object(oe.jsx)(lt.a,{value:"empty",children:n.formatMessage({id:"label.createRepository"})}),!j&&!f&&!!h.length&&!!s.length&&s.map((function(e,t){return Object(oe.jsx)(lt.a,{value:e.id,children:e.group.displayName+"/"+e.displayName},e.id)})),(!h.length||!s.length)&&Object(oe.jsx)(lt.a,{value:"empty",children:n.formatMessage({id:"label.createRepository"})})]})}),Object(oe.jsx)(k.a,{item:!0,xs:6,children:Object(oe.jsxs)(E.a,{fullWidth:!0,select:!0,variant:"outlined",value:u,onChange:function(t){return e.selectOriginBranch(t)},children:[Object(oe.jsx)(lt.a,{disabled:!0,children:n.formatMessage({id:"label.branch"})}),a.branches&&a.branches.map((function(e,t){return Object(oe.jsxs)(lt.a,{value:e.name,children:[Object(oe.jsx)(fe.a,{className:r.icon,icon:je.d}),"\xa0\xa0",e.name]},t)})),!a.branches&&v&&v.map((function(e,t){return Object(oe.jsxs)(lt.a,{value:e.name,children:[Object(oe.jsx)(fe.a,{className:r.icon,icon:je.d}),"\xa0\xa0",e.name]},t)}))]})})]}),(O||a.repository)&&p&&u&&Object(oe.jsx)(k.a,{item:!0,xs:12,className:r.commit,children:Object(oe.jsx)(or,{showBorder:Boolean(!1),data:p,current:u,currentRefType:"branch",currentGroup:O.group.name||a.repository.group.name,currentRepositoryConfig:a.repository?a:O,currentRepository:a.repository?a.repository.name:O.name,linkPathBase:W(O.group.name||a.repository.group.name,a.repository?a.repository.name:O.name,"commit")})})]})}),Object(oe.jsx)(k.a,{item:!0,xs:6,children:Object(oe.jsxs)(k.a,{className:r.repositorySelect,children:[Object(oe.jsx)(w.a,{variant:"subtitle1",component:"div",className:r.branchTitle,children:n.formatMessage({id:"label.targetBranch"})}),Object(oe.jsxs)(k.a,{container:!0,spacing:2,className:r.branchSelect,children:[Object(oe.jsx)(k.a,{item:!0,xs:6,children:Object(oe.jsxs)(E.a,{fullWidth:!0,variant:"outlined",select:!0,value:g.length?g:"empty",onChange:function(t){return e.getTargetRepositoryBranches(t)},children:[c&&c.map((function(e,t){return Object(oe.jsx)(lt.a,{value:e.rKey,children:e.name},e.rKey)})),0===c.length&&Object(oe.jsx)(lt.a,{value:"empty",children:n.formatMessage({id:"label.createRepository"})})]})}),Object(oe.jsx)(k.a,{item:!0,xs:6,children:Object(oe.jsxs)(E.a,{fullWidth:!0,select:!0,variant:"outlined",value:m,onChange:function(t){return e.selectTargetBranch(t)},children:[Object(oe.jsx)(lt.a,{disabled:!0,children:n.formatMessage({id:"label.branch"})}),l&&l.map((function(e,t){return Object(oe.jsxs)(lt.a,{value:e.name,children:[Object(oe.jsx)(fe.a,{className:r.icon,icon:je.d}),"\xa0\xa0",e.name]},t)}))]})})]}),(y||a.repository)&&d&&m&&Object(oe.jsx)(k.a,{item:!0,xs:12,className:r.commit,children:Object(oe.jsx)(or,{showBorder:Boolean(!1),data:d,current:m,currentRefType:"branch",currentGroup:y.group.name||a.repository.group.name,currentRepositoryConfig:a.repository?a:y,currentRepository:a.repository?a.repository.name:y.name,linkPathBase:W(y.group.name||a.repository.group.name,a.repository?a.repository.name:y.name,"commit")})})]})}),b&&Object(oe.jsxs)(i.a.Fragment,{children:[Object(oe.jsx)(k.a,{item:!0,xs:6}),Object(oe.jsx)(k.a,{item:!0,xs:6,children:Object(oe.jsx)(w.a,{variant:"h6",component:"div",align:"center",className:b?r.errorInfo:r.hideError,children:n.formatMessage({id:"message.selectDifferentBranch"})})})]}),Object(oe.jsx)(k.a,{item:!0,xs:12,align:"right",children:Object(oe.jsx)(_.a,{variant:"contained",color:"primary",disabled:!h||!g||!u||!m||b,onClick:function(){return e.GoMergeRequestDetail()},children:n.formatMessage({id:"label.compareBranch"})})})]})})]})}}]),a}(i.a.Component),ni=Object(R.b)(Object(C.a)((function(e){return{title:{lineHeight:e.spacing(5)+"px",marginBottom:e.spacing(3),borderBottom:"1px solid "+e.palette.border},repositorySelect:{border:"1px solid "+e.palette.border,borderRadius:e.spacing(.5)+"px",overflow:"hidden"},branchTitle:{lineHeight:e.spacing(5)+"px",background:e.palette.background.main,padding:"0px "+e.spacing(2)+"px",borderBottom:"1px solid "+e.palette.border},branchSelect:{padding:e.spacing(2)},commit:{borderTop:"1px solid "+e.palette.border},icon:{color:e.palette.text.light},errorInfo:{backgroundColor:e.palette.error.main,color:e.palette.error.contrastText},hideError:{display:"none"}}}))(Object(h.f)(Object(l.b)((function(e,t){return{repositoryList:e.DataStore.repositoryList,currentRepositoryKey:e.DataStore.currentRepositoryKey,currentRepositoryConfig:e.DataStore.currentRepositoryConfig}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(ii)))),si=a(537),oi=a(575),ci=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;Object(p.a)(this,a);var i=(r=t.call(this,e)).props,n=i.latestVersion,s=i.baseVersion;return r.state={diffViwerLayoutUpdateTimestamp:0,renderSideBySide:!0,fileTreeIsOpen:!1,fileTreeGridNumber:3,startHash:n,endHash:s},r}return Object(d.a)(a,[{key:"toggleDiffShow",value:function(){this.setState({renderSideBySide:!this.state.renderSideBySide,diffViwerLayoutUpdateTimestamp:(new Date).getTime()})}},{key:"componentDidMount",value:function(){var e=this.props,t=e.latestVersion,a=e.baseVersion;this.setState({startHash:t,endHash:a})}},{key:"toggleFileTree",value:function(){this.setState({fileTreeIsOpen:!this.state.fileTreeIsOpen,renderSideBySide:this.state.fileTreeIsOpen,diffViwerLayoutUpdateTimestamp:(new Date).getTime()})}},{key:"jumpToAnchor",value:function(e){window.location.href=window.location.href.split("#")[0]+"#"+e}},{key:"shouldComponentUpdate",value:function(e,t){return this.state.startHash!==t.startHash?(this.props.getVersionDiff(e.sourceRepository,e.targetRepository,t.startHash,this.state.endHash,e),!1):this.state.endHash===t.endHash||(this.props.getVersionDiff(e.sourceRepository,e.targetRepository,this.state.startHash,t.endHash,e),!1)}},{key:"changeHash",value:function(e,t){var a=e.target.value;"start"===t?this.setState({startHash:a}):this.setState({endHash:a})}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,r=t.intl,n=t.changedFilesInfo,s=t.fileDiff,o=t.pending,c=t.effectFileCount,l=t.addLine,p=t.deleteLine,d=t.showVersionCompare,u=t.versionList,m=t.baseVersionList,h=t.baseVersion,g=t.sourceRepository,b=t.latestVersion,f=this.state,j=f.renderSideBySide,v=f.fileTreeIsOpen,O=f.fileTreeGridNumber,y=f.diffViwerLayoutUpdateTimestamp,x=f.startHash,S=f.endHash;return Object(oe.jsxs)(i.a.Fragment,{children:[Object(oe.jsxs)(k.a,{container:!0,justifyContent:d?"space-between":"flex-end",alignItems:"center",className:a.diffInfoSticky,children:[d&&Object(oe.jsx)(k.a,{item:!0,children:Object(oe.jsxs)(k.a,{container:!0,spacing:2,children:[Object(oe.jsx)(k.a,{item:!0,children:Object(oe.jsx)(si.a,{className:a.margin,children:Object(oe.jsx)(oi.a,{variant:"outlined",value:x||b,onChange:function(t){return e.changeHash(t,"start")},children:u&&u.map((function(e,t){return Object(oe.jsxs)(lt.a,{value:e.sha,children:[Object(oe.jsx)(w.a,{variant:"body2",component:"span",children:0===t?r.formatMessage({id:"label.lastModified"}):r.formatMessage({id:"label.lastModified_N"},{n:u.length-t})}),Object(oe.jsx)(w.a,{variant:"body2",component:"span",children:"-"+e.sha.substr(0,8)})]},t)}))})})}),Object(oe.jsx)(k.a,{item:!0,className:a.and,children:r.formatMessage({id:"label.and"})}),Object(oe.jsx)(k.a,{item:!0,children:Object(oe.jsx)(si.a,{className:a.margin,children:Object(oe.jsx)(oi.a,{variant:"outlined",value:S||h,onChange:function(t){return e.changeHash(t,"end")},children:m&&m.map((function(e,t){return Object(oe.jsxs)(lt.a,{value:e.sha,children:[Object(oe.jsx)(w.a,{variant:"body2",component:"span",children:0===t?"Base Line":r.formatMessage({id:"label.lastModified_N"},{n:m.length-t})}),Object(oe.jsx)(w.a,{variant:"body2",component:"span",children:"-"+e.sha.substr(0,8)})]},t)}))})})})]})}),Object(oe.jsxs)(k.a,{item:!0,className:a.content,children:[Object(oe.jsxs)(w.a,{variant:"body1",component:"span",children:[r.formatMessage({id:"label.allFiles"})," : \xa0",o?Object(oe.jsx)(he.a,{size:"12px",color:"inherit"}):c]}),Object(oe.jsx)(w.a,{variant:"body1",component:"span",className:a.add,children:o?Object(oe.jsx)(he.a,{size:"12px",color:"inherit"}):"+"+l}),Object(oe.jsx)(w.a,{variant:"body1",component:"span",className:a.delete,children:o?Object(oe.jsx)(he.a,{size:"12px",color:"inherit"}):p}),Object(oe.jsxs)(Ha.a,{variant:"outlined",color:"primary",size:"small",children:[Object(oe.jsx)(_.a,{onClick:function(t){return e.toggleDiffShow(t)},children:j?"inline":"side-by-side"}),Object(oe.jsx)(_.a,{onClick:function(t){return e.toggleFileTree(t)},children:v?r.formatMessage({id:"label.closeFileTree"}):r.formatMessage({id:"label.openFileTree"})})]})]})]}),Object(oe.jsxs)(k.a,{container:!0,spacing:3,children:[Object(oe.jsx)(k.a,{item:!0,xs:v?O:12,className:v?a.fileTreeSticky:a.fileTreeHide,children:Object(oe.jsx)(Vr,{changeFiles:n,treeView:Boolean(!1),fileClick:function(t){return e.jumpToAnchor(t)}})}),Object(oe.jsx)(k.a,{item:!0,xs:v?12-O:12,children:Object(oe.jsx)(k.a,{container:!0,children:!o&&s?s.map((function(e,t){return Object(oe.jsx)(k.a,{item:!0,xs:12,id:e.modified.sha,className:a.fileDiffPanel,children:Object(oe.jsx)(qr,{modifiedRepositoryKey:g,fileDiffInfo:e,renderSideBySide:j,layoutUpdateTimeStamp:y,fileTreeIsOpen:v},t)},t)})):Object(oe.jsx)(k.a,{container:!0,spacing:2,className:a.loading,children:Object(oe.jsx)(he.a,{})})})})]})]})}}]),a}(i.a.Component),li=Object(R.b)(Object(C.a)((function(e){return{loading:{paddingTop:e.spacing(16),paddingBottom:e.spacing(16),justifyContent:"center"},copyHash:{minWidth:e.spacing(1),height:e.spacing(4),width:e.spacing(4),padding:e.spacing(0),marginBottom:e.spacing(.5)},commitLog:{paddingRight:0},changedFileList:{width:"100%",backgroundColor:e.palette.background.paper},commitAvatar:{marginLeft:e.spacing(1),marginTop:e.spacing(.5),marginRight:e.spacing(1)},commiterName:{paddingTop:e.spacing(.5)},add:{color:e.palette.success.main,marginLeft:e.spacing(3),marginRight:e.spacing(2)},delete:{color:e.palette.error.main,marginLeft:e.spacing(1),marginRight:e.spacing(1)},changedFile:{color:e.palette.primary.main,paddingBottom:e.spacing(1),backgroundColor:"transparent",fontSize:"1.25rem","&:hover":{backgroundColor:"transparent",boxShadow:"none"}},typography:{padding:e.spacing(2)},paper:{minWidth:e.spacing(38),width:"100%"},expansionMargin0:{margin:0},content:{zIndex:e.spacing(1),backgroundColor:e.palette.background.light},stickyPosition:{position:"sticky",top:e.spacing(8),zIndex:e.spacing(1),backgroundColor:e.palette.background.light},diffInfoSticky:{top:"105px",position:"sticky",marginTop:"-24px",paddingTop:e.spacing(3),paddingBottom:e.spacing(3),height:e.spacing(10)+1+"px",zIndex:e.spacing(1),backgroundColor:e.palette.background.light},and:{lineHeight:e.spacing(4)+"px"},fileTreeHide:{display:"none"},fileTreeSticky:{position:"sticky",top:"174px",maxHeight:window.innerHeight-174+"px"},fileDiffPanel:{marginBottom:e.spacing(3),"& > div > div:first-child":{top:"186px"}}}}))(Object(h.f)(Object(l.b)((function(e,t){return{}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(ci)))),pi=Object(C.a)((function(e){return{root:{width:e.spacing(3),height:e.spacing(3)}}}))(Le.a),di=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;Object(p.a)(this,a),r=t.call(this,e);var i=e.match.params;return r.state={mid:i.mid?i.mid:"",mergeRequestInfo:{id:"",sourceRepository:i.sourceRepository?i.sourceRepository:"",sourceBranch:i.sourceBranch?decodeURIComponent(i.sourceBranch):"",targetRepository:i.targetRepository?i.targetRepository:"",targetBranch:i.targetBranch?decodeURIComponent(i.targetBranch):""},sourceRepositoryInfo:null,targetRepositoryInfo:null,requesterInfo:null,handlerInfo:null,title:i.sourceBranch?decodeURIComponent(i.sourceBranch):"",description:"",tabValue:0,pending:!0,changedFiles:[],fileDiff:[],effectFileCount:0,addLine:0,deleteLine:0,commits:[],activities:[],showCommitInput:!1,mergeMessage:"",usingSquash:!1,error:{},hasMergeConflict:!1,mergeStatus:"open",versionList:[],latestVersion:"",baseVersion:"",submitMergeRequest:!1,mergePending:!1,reviewers:[],reviewersMenu:null,updateReviewersPending:!1},r.checkInput=se.stateValidator(Object(N.a)(r),[{name:"message",passPattern:/^.+$/,errorMessage:r.props.intl.formatMessage({id:"message.error._S_empty"},{s:r.props.intl.formatMessage({id:"label.branchName"})})},{name:"message",passPattern:/^.{1,30}$/,errorMessage:r.props.intl.formatMessage({id:"message.error.noMoreThan_N_characters"},{n:30})}]),r.getVersionDiff=r.getVersionDiff.bind(Object(N.a)(r)),r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.props.closeDrawer(),this.state.mid?this.getDetailData(this.props,this.state):this.getChangeData(this.props,this.state),this.state.mid&&this.getVersionList(this.state)}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.repositoryList.length!==e.repositoryList.length?(this.state.mid?this.getDetailData(e,t):this.getChangeData(e,t),this.getVersionList(t),!1):JSON.stringify(this.state.mergeRequestInfo)!==JSON.stringify(t.mergeRequestInfo)?this.state.updateReviewersPending?(this.getActivities(this.state.mergeRequestInfo.targetRepository,this.state.mergeRequestInfo.id),!1):(this.getChangeData(e,t),this.getVersionList(t),!1):this.props.match.params.mid!==e.match.params.mid?(this.setState({mid:e.match.params.mid}),!1):this.state.mid!==t.mid?(this.getDetailData(e,t),this.getVersionList(t),!1):this.state.mergeStatus!==t.mergeStatus?(this.getDetailData(e,t),!1):this.props.currentRepositoryKey===e.currentRepositoryKey||(this.getDetailData(e,t),!1)}},{key:"getVersionDiff",value:function(e,t,a,r,i){var n=this;Ht.fileChanges({versionCompare:!0,repository:e,original:a,targetRepository:t,modified:r}).then(ne.withEventdispatcher(i.dispatchEvent)(ne.getJSONData)).then((function(e){if(!e.code){var t=e.data.detail.reduce((function(e,t){return e+t.diff.additions}),0),a=e.data.detail.reduce((function(e,t){return e+t.diff.deletions}),0);n.setState({pending:!1,changedFiles:n.getFileTreeInfo(e.data.detail),fileDiff:e.data.detail,effectFileCount:e.data.count,addLine:t,deleteLine:a})}}))}},{key:"getChangeData",value:function(e,t){var a=this,r=e.repositoryList,i=t.mergeRequestInfo,n=i.id,s=i.sourceRepository,o=i.sourceBranch,c=i.targetRepository,l=i.targetBranch;if(!s||!o||!c||!l||!r.length)return!1;n?this.getRepositories(e,t,!1):(this.setState({submitMergeRequest:!0}),this.getRepositories(e,t,!0)),Ht.fileChanges({mergeRequest:n,repository:s,original:o,targetRepository:c,modified:l}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(e){if(!e.code){var t=e.data.detail.reduce((function(e,t){return e+t.diff.additions}),0),r=e.data.detail.reduce((function(e,t){return e+t.diff.deletions}),0);a.setState({pending:!1,changedFiles:a.getFileTreeInfo(e.data.detail),fileDiff:e.data.detail,effectFileCount:e.data.count,addLine:t,deleteLine:r})}Ht.mergeRequestCommits({mergeRequest:n,sourceRepository:s,sourceBranch:o,targetRepository:c,targetBranch:l}).then(ne.withEventdispatcher(a.props.dispatchEvent)(ne.getJSONData)).then((function(e){e.code||a.setState({commits:e.data})})),a.state.mid&&a.getActivities(c,n)}))}},{key:"getActivities",value:function(e,t){var a=this;Ht.activities({repository:e,mergeRequest:t}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(e){e.code||a.setState({activities:e.data,updateReviewersPending:!1})}))}},{key:"getFileTreeInfo",value:function(e){for(var t=[],a=0;a<e.length;a++){var r=e[a];r.modified&&r.modified.name&&t.push({name:r.modified.name,add:r.diff.additions,delete:Math.abs(r.diff.deletions),hash:r.modified.sha})}return t}},{key:"getRepositories",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.repositoryList,i=t.mergeRequestInfo,n=r.filter(U.id(i.targetRepository))[0];this.setState({sourceRepositoryInfo:a?r.filter(U.id(i.sourceRepository))[0]:t.mergeRequestInfo.sourceRepoInfo,targetRepositoryInfo:n,requesterInfo:i.submitter,handlerInfo:i.handler?n.members.filter(U.id(i.handler))[0]:null})}},{key:"createMergeRequest",value:function(){var e=this,t=this.state,a=t.mergeRequestInfo,r=t.title,i=t.description,n=t.targetRepositoryInfo,s=t.reviewers,o=t.mergePending,c=this.props,l=c.history,p=c.intl;if(o)return!1;this.setState({mergePending:!0}),Ht.createMergeRequest({sourceRepository:a.sourceRepository,sourceBranch:a.sourceBranch,targetRepository:a.targetRepository,targetBranch:a.targetBranch,title:r,description:i,reviewers:s.join(",")}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){e.setState({mergePending:!1}),t.code?1030===t.code?e.props.dispatchEvent(ae.NewNotification(p.formatMessage({id:"message.error.mergeRequestExists"}),2)):1039===t.code?e.props.dispatchEvent(ae.NewNotification(p.formatMessage({id:"message.error.branchProteced"}),2)):e.props.dispatchEvent(ae.NewNotification(p.formatMessage({id:"message.error.createMergeRequestFail"}),2)):(e.setState({mid:t.data.id}),l.push(W(n.group.name,n.name,"mergerequests",t.data.id)))}))}},{key:"getDetailData",value:function(e,t){var a=this,r=e.currentRepositoryKey,i=t.mid;if(!i||!r)return!1;Ht.mergeRequestDetail({repository:r,mid:i}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(e){e.code||a.setState({mergeRequestInfo:e.data,reviewers:e.data.reviewers.map((function(e){return e.user}))})}))}},{key:"getVersionList",value:function(e){var t=this,a=e.mergeRequestInfo;if(!a.id)return!1;Ht.mergeRequestVersionList({mergeRequest:a.id}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(e){e.code||t.setState({versionList:e.data.mergeVersionList||[],latestVersion:e.data.mergeVersionList.length>0?e.data.mergeVersionList[0].sha:"",baseVersion:e.data.baseVersion,baseVersionList:e.data.baseVersionList})}))}},{key:"checkMergeType",value:function(){var e=this,t=this.state,a=t.mergeRequestInfo,r=t.mergeMessage,i=t.usingSquash,n=t.showCommitInput,s=this.props.intl;if(!a.id&&!this.checkInput()&&n)return!1;this.setState({mergePending:!0}),Ht.checkMergeType({mergeRequest:a.id}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){if(t.code)e.setState({mergePending:!1});else if(t.data.canBeFastForward)e.mergeBranch(e.props,e.state,"",!1);else{if(e.setState({showCommitInput:!0}),!r)return e.setState({error:{mergeMessage:s.formatMessage({id:"message.error._S_empty"},{s:e.props.intl.formatMessage({id:"label.mergeMessage"})})},mergePending:!1}),!1;e.mergeBranch(e.props,e.state,r,i)}}))}},{key:"mergeBranch",value:function(e,t,a,r){var i=this,n=t.mergeRequestInfo,s=this.props.intl;if(!n.id)return!1;Ht.mergeBranch({message:a,mergeRequest:n.id,usingSquash:r}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(e){i.setState({mergePending:!1}),e.code?1029===e.code?i.props.dispatchEvent(ae.NewNotification(s.formatMessage({id:"message.error.userNotReview"}),2)):1039===e.code?i.props.dispatchEvent(ae.NewNotification(s.formatMessage({id:"message.error.branchProteced"}),2)):i.props.dispatchEvent(ae.NewNotification(s.formatMessage({id:"message.error.mergeFail"}),2)):e.data.conflict?i.setState({hasMergeConflict:!0,mergeStatus:"conflict",showCommitInput:!1}):i.setState({mergeStatus:"merged",showCommitInput:!1})}))}},{key:"closeMergeRequest",value:function(){var e=this,t=this.props.intl;if(!this.state.mergeRequestInfo)return!1;Ht.mergeRequestClose({mergeRequest:this.state.mergeRequestInfo.id}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(a){a.code||(e.setState({mergeStatus:"closed",showCommitInput:!1}),e.props.dispatchEvent(ae.NewNotification(t.formatMessage({id:"message.closed"}),0)))}))}},{key:"assignReviewer",value:function(e,t){var a=this,r=this.state,i=r.updateReviewersPending,n=r.mergeRequestInfo,s=r.reviewers,o=this.props.intl;if(i||!t||!e&&!n.id)return!1;if(e)s.includes(t)?this.deleteReviewer(e,t):this.setState({reviewers:[t]});else{if(s.includes(t))return!1;if(s.length&&this.isReview(s[0]))return this.props.dispatchEvent(ae.NewNotification(o.formatMessage({id:"message.error.reviewedCanNotAssign"}),1)),!1;this.setState({updateReviewersPending:!0}),Ht.assignReviewer({id:n.id,reviewer:t}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(e){e.code?(a.setState({updateReviewersPending:!1}),1029===e.code&&a.props.dispatchEvent(ae.NewNotification(o.formatMessage({id:"message.error.reviewedCanNotAssign"}),1))):(a.setState({reviewers:[t]}),a.getDetailData(a.props,a.state),a.props.dispatchEvent(ae.NewNotification(o.formatMessage({id:"message.updated"}),0)))}))}}},{key:"deleteReviewer",value:function(e,t){var a=this,r=this.state,i=r.updateReviewersPending,n=r.mergeRequestInfo,s=r.reviewers,o=this.props.intl;if(i||!t||!e&&!n.id)return!1;if(e)this.setState({reviewers:s.filter((function(e){return e!==t}))});else{if(this.isReview(t))return this.props.dispatchEvent(ae.NewNotification(o.formatMessage({id:"message.error.reviewedCanNotDelete"}),1)),!1;this.setState({updateReviewersPending:!0}),Ht.deleteReviewer({id:n.id,reviewer:t}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(e){e.code?(a.setState({updateReviewersPending:!1}),1029===e.code&&a.props.dispatchEvent(ae.NewNotification(o.formatMessage({id:"message.error.reviewedCanNotDelete"}),1))):(a.setState({reviewers:s.filter((function(e){return e!==t}))}),a.getDetailData(a.props,a.state),a.props.dispatchEvent(ae.NewNotification(o.formatMessage({id:"message.deleted"}),0)))}))}}},{key:"mergeRequestReview",value:function(){var e=this,t=this.state,a=t.mergeRequestInfo,r=t.updateReviewersPending,i=this.props.intl;if(r||!a.id)return!1;this.setState({updateReviewersPending:!0}),Ht.mergeRequestReview({id:a.id}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){t.code||(e.setState({updateReviewersPending:!1}),e.getDetailData(e.props,e.state),e.props.dispatchEvent(ae.NewNotification(i.formatMessage({id:"message.approved"}),0)))}))}},{key:"isReview",value:function(e){var t=this.state.mergeRequestInfo;return!!t.id&&(!!(e=t.reviewers.filter((function(t){return t.user===e}))).length&&e[0].isReview)}},{key:"getTabs",value:function(){var e=this.props.intl,t=this.state,a=t.changedFiles,r=t.commits,i=t.activities,n=[];return n.push(e.formatMessage({id:"label.codeDiff"})+"("+a.length+")"),n.push(e.formatMessage({id:"label.commitActivity"})+"("+r.length+")"),this.state.mid&&n.push(e.formatMessage({id:"label.mergeRequestActivity"})+"("+i.length+")"),n}},{key:"render",value:function(){var e=this,t=this.props,a=t.currentUserInfo,r=t.history,n=t.classes,s=t.intl,o=this.state,c=o.mergeRequestInfo,l=o.sourceRepositoryInfo,p=o.targetRepositoryInfo,d=o.requesterInfo,u=o.handlerInfo,m=o.title,h=o.description,g=o.tabValue,b=o.pending,f=o.changedFiles,j=o.fileDiff,v=o.effectFileCount,O=o.addLine,y=o.deleteLine,x=o.commits,S=o.activities,C=o.showCommitInput,N=o.mergeMessage,R=o.usingSquash,M=o.hasMergeConflict,T=o.versionList,A=o.latestVersion,I=o.baseVersion,P=o.baseVersionList,F=o.submitMergeRequest,B=o.reviewers,G=o.reviewersMenu;return Object(oe.jsxs)(k.a,{container:!0,children:[!this.state.mid&&(l||F)&&Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsxs)(k.a,{container:!0,spacing:2,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"h6",component:"div",className:n.createMRTitle,children:s.formatMessage({id:"label.createMergeRequest"})})}),Object(oe.jsx)(k.a,{item:!0,xs:9,children:s.formatMessage({id:"message.from_S_Merge_S"},{s1:l.group.name+"/"+l.name+":"+c.sourceBranch,s2:p.group.name+"/"+p.name+":"+c.targetBranch})}),Object(oe.jsx)(k.a,{item:!0,xs:3,align:"right",children:Object(oe.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(e){return r.push(W(l.group.name,l.name,"mergerequests","new"))},children:s.formatMessage({id:"label.modificationBranch"})})}),Object(oe.jsx)(k.a,{item:!0,xs:8,children:Object(oe.jsxs)(k.a,{container:!0,spacing:2,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"subtitle1",component:"div",children:s.formatMessage({id:"label.title"})})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(E.a,{fullWidth:!0,variant:"outlined",value:m,onChange:function(t){return e.setState({title:t.target.value})}})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"subtitle1",component:"div",children:s.formatMessage({id:"label.description"})})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(E.a,{fullWidth:!0,variant:"outlined",multiline:!0,rows:5,value:h,onChange:function(t){return e.setState({description:t.target.value})}})})]})}),Object(oe.jsx)(k.a,{item:!0,xs:4,children:Object(oe.jsxs)(k.a,{container:!0,spacing:2,children:[Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{variant:"subtitle1",component:"div",children:s.formatMessage({id:"message.assignReviewerTitle"})})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(k.a,{className:n.members,children:p.members.map((function(t,a){return!(t.deleteFlag||t.role<L.Role.DEVELOPER)&&Object(oe.jsxs)(k.a,{container:!0,justifyContent:"space-between",alignItems:"center",className:n.member,onClick:function(a){return e.assignReviewer(!0,t.id)},children:[Object(oe.jsx)(k.a,{item:!0,children:Object(oe.jsx)(ua,{item:t})}),Object(oe.jsx)(k.a,{item:!0,children:B.includes(t.id)&&Object(oe.jsx)(fe.a,{icon:je.e,className:n.assigned})})]},a)}))})})]})}),Object(oe.jsx)(k.a,{item:!0,xs:12,className:n.button,children:Object(oe.jsx)(k.a,{container:!0,justifyContent:"flex-end",alignItems:"center",children:Object(oe.jsxs)(k.a,{item:!0,children:[Object(oe.jsx)(_.a,{variant:"outlined",color:"primary",disableElevation:!0,className:n.cancel,onClick:function(e){return r.push(W(p.group.name,p.name,"mergerequests"))},children:s.formatMessage({id:"label.cancel"})}),Object(oe.jsx)(_.a,{disabled:!m,variant:"contained",color:"primary",disableElevation:!0,onClick:function(t){return e.createMergeRequest()},children:s.formatMessage({id:"label.submit"})})]})})})]})}),this.state.mid&&c.id&&Object(oe.jsxs)(k.a,{container:!0,spacing:2,children:[Object(oe.jsxs)(k.a,{item:!0,xs:6,children:[Object(oe.jsxs)(w.a,{variant:"h6",component:"div",children:[c.title,"\xa0\xa0\xa0\xa0",c.status===D.mergeRequestStatus.open&&Object(oe.jsxs)(i.a.Fragment,{children:[Object(oe.jsx)(Ke,{color:"success",background:!1,icon:je.j,text:s.formatMessage({id:"message.opened"})}),"\xa0\xa0\xa0\xa0"]}),c.status===D.mergeRequestStatus.merged&&Object(oe.jsxs)(i.a.Fragment,{children:[Object(oe.jsx)(Ke,{color:"info",background:!1,icon:je.z,text:s.formatMessage({id:"message.merged"})}),"\xa0\xa0\xa0\xa0"]}),c.status===D.mergeRequestStatus.closed&&Object(oe.jsxs)(i.a.Fragment,{children:[Object(oe.jsx)(Ke,{color:"warning",background:!1,icon:je.q,text:s.formatMessage({id:"message.closed"})}),"\xa0\xa0\xa0\xa0"]})]}),c.description&&Object(oe.jsx)(w.a,{variant:"body1",component:"div",className:n.description,children:c.description})]}),c.status===D.mergeRequestStatus.open&&Object(oe.jsx)(k.a,{item:!0,xs:6,children:Object(oe.jsxs)(k.a,{container:!0,justifyContent:"flex-end",children:[Object(oe.jsx)(_.a,{variant:"outlined",color:"primary",onClick:function(t){return e.closeMergeRequest()},children:s.formatMessage({id:"label.close"})}),"\xa0\xa0\xa0\xa0",B.includes(a.id)&&!this.isReview(a.id)?Object(oe.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(t){return e.mergeRequestReview()},children:s.formatMessage({id:"label.approve"})}):Object(oe.jsxs)(_.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:function(t){return e.checkMergeType()},disabled:this.state.mergePending,children:[this.state.mergePending&&Object(oe.jsx)(he.a,{size:"1rem",color:"inherit"}),"\xa0 ",s.formatMessage({id:"label.merge"})," \xa0"]})]})}),Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsxs)(k.a,{container:!0,spacing:2,children:[Object(oe.jsx)(k.a,{item:!0,xs:6,children:Object(oe.jsx)(E.a,{fullWidth:!0,variant:"outlined",value:N,placeholder:s.formatMessage({id:"message.inputMergeCommit"}),className:C?"":n.hideInput,error:!N,helperText:this.state.error.mergeMessage?"":this.state.error.mergeMessage,onChange:function(t){return e.setState({mergeMessage:t.target.value})}})}),Object(oe.jsx)(k.a,{item:!0,xs:2,children:Object(oe.jsx)(Qt.a,{className:C?"":n.hideInput,control:Object(oe.jsx)(ea.a,{checked:R,onChange:function(t){return e.setState({usingSquash:!e.state.usingSquash})},name:"usingSquash",color:"primary"}),label:"\u4f7f\u7528Squash"})}),M&&Object(oe.jsxs)(k.a,{item:!0,xs:12,children:[Object(oe.jsxs)(w.a,{variant:"h6",component:"div",gutterBottom:!0,children:[Object(oe.jsx)(w.a,{component:"span",children:s.formatMessage({id:"message.mergeConflictTitle"})})," \xa0",Object(oe.jsx)(Oe,{doc:"/git/merge_branch.md",type:"icon"})]}),Object(oe.jsxs)(w.a,{variant:"body2",component:"div",gutterBottom:!0,children:[s.formatMessage({id:"message.mergeConflictTip1"}),Object(oe.jsx)(w.a,{variant:"h6",component:"div",gutterBottom:!0,children:"git fetch origin"}),Object(oe.jsxs)(w.a,{variant:"h6",component:"div",gutterBottom:!0,children:["git checkout -b ",c.sourceBranch," origin/ ",c.sourceBranch]})]}),Object(oe.jsx)(w.a,{variant:"body2",component:"div",gutterBottom:!0,children:s.formatMessage({id:"message.mergeConflictTip2"})}),Object(oe.jsxs)(w.a,{variant:"body2",component:"div",gutterBottom:!0,children:[s.formatMessage({id:"message.mergeConflictTip3"}),Object(oe.jsx)(w.a,{variant:"h6",component:"div",gutterBottom:!0,children:"git fetch origin"}),Object(oe.jsx)(w.a,{variant:"h6",component:"div",gutterBottom:!0,children:"git fetch origin"}),Object(oe.jsxs)(w.a,{variant:"h6",component:"div",gutterBottom:!0,children:["git checkout origin/",c.targetBranch]}),Object(oe.jsxs)(w.a,{variant:"h6",component:"div",gutterBottom:!0,children:["git merge --no-ff ",c.sourceBranch]})]}),Object(oe.jsxs)(w.a,{variant:"body2",component:"div",gutterBottom:!0,children:[s.formatMessage({id:"message.mergeConflictTip4"}),Object(oe.jsxs)(w.a,{variant:"h6",component:"div",gutterBottom:!0,children:["git push origin ",c.targetBranch]})]})]})]})})]}),b?Object(oe.jsx)(k.a,{container:!0,spacing:2,className:n.loading,children:Object(oe.jsx)(he.a,{})}):Object(oe.jsxs)(k.a,{container:!0,spacing:3,children:[Object(oe.jsxs)(k.a,{item:!0,xs:this.state.mid?9:12,children:[Object(oe.jsx)(k.a,{container:!0,className:n.tabHeader,children:Object(oe.jsx)(ft,{tabs:this.getTabs(),onChange:function(t,a){return e.setState({tabValue:a})},currentTab:g,children:"\xa0"})}),Object(oe.jsxs)(k.a,{item:!0,xs:12,className:n.tab,children:[0===g&&Object(oe.jsx)(li,{pending:b,mergeRequestDetail:c,changedFilesInfo:f,fileDiff:j,effectFileCount:v,addLine:O,deleteLine:y,showVersionCompare:this.state.mid?Boolean(!0):Boolean(!1),versionList:T,latestVersion:A,baseVersion:I,baseVersionList:P,getVersionDiff:this.getVersionDiff,sourceRepository:c.sourceRepository,targetRepository:c.targetRepository}),1===g&&Object(oe.jsx)(ra,{title:"",children:x.map((function(e,t){return Object(oe.jsx)(or,{showBorder:!0,data:e,linkPathBase:W(l.group.name,l.name,"commit"),currentRepositoryConfig:l},t)}))}),2===g&&S.map((function(e,t){return Object(oe.jsx)(Ba,{item:e},t)}))]})]}),this.state.mid&&c.id&&Object(oe.jsx)(k.a,{item:!0,xs:3,children:Object(oe.jsxs)(k.a,{container:!0,className:[n.tabHeader,n.mergeRequestInfo].join(" "),children:[Object(oe.jsxs)(k.a,{item:!0,xs:12,container:!0,justifyContent:"space-between",alignItems:"center",className:n.reviewersTitle,children:[Object(oe.jsx)(w.a,{variant:"subtitle1",component:"div",children:s.formatMessage({id:"label.reviewer"})}),c.status===D.mergeRequestStatus.open&&Object(oe.jsxs)(i.a.Fragment,{children:[Object(oe.jsx)(Ie,{label:"",className:n.icon,onClick:function(t){return e.setState({reviewersMenu:t.currentTarget})},icon:je.a}),Object(oe.jsxs)(ot.a,{anchorEl:G,open:!!G,anchorOrigin:{horizontal:"right",vertical:"bottom"},transformOrigin:{horizontal:"right",vertical:"top"},getContentAnchorEl:null,transitionDuration:0,onClose:function(t){return e.setState({reviewersMenu:null})},children:[Object(oe.jsx)(lt.a,{disabled:!0,className:n.reviewersMenuItem,children:s.formatMessage({id:"message.selectReviewer"})}),p.members&&p.members.map((function(t,a){return!(t.deleteFlag||t.role<L.Role.DEVELOPER)&&Object(oe.jsxs)(lt.a,{className:n.reviewersMenuItem,onClick:function(a){e.setState({reviewersMenu:null}),e.assignReviewer(!1,t.id)},children:[Object(oe.jsx)(k.a,{item:!0,children:Object(oe.jsx)(ua,{item:t})}),"\xa0\xa0",Object(oe.jsx)(k.a,{item:!0,children:B.includes(t.id)&&Object(oe.jsx)(fe.a,{icon:je.e,className:n.assigned})})]},a)})),Object(oe.jsx)(pa.a,{className:n.divider}),Object(oe.jsxs)(lt.a,{className:n.deleteReviewer,onClick:function(t){e.setState({reviewersMenu:null}),e.deleteReviewer(!1,B[0])},children:[Object(oe.jsx)(fe.a,{icon:je.H}),"\xa0\xa0",s.formatMessage({id:"message.deleteReviewer"})]})]})]})]}),Object(oe.jsx)(k.a,{container:!0,children:B.length>0?B.map((function(t,a){var r=e.isReview(t);return Object(oe.jsxs)(k.a,{container:!0,justifyContent:"space-between",className:n.reviewersMember,children:[Object(oe.jsx)(k.a,{item:!0,children:Object(oe.jsx)(ua,{item:p.members.filter(U.id(t))[0]},a)}),Object(oe.jsx)(k.a,{children:Object(oe.jsx)(Ke,{color:r?"success":"error",text:s.formatMessage({id:r?"message.approved":"message.notApprove"})})})]},a)})):Object(oe.jsx)(k.a,{item:!0,xs:12,children:Object(oe.jsx)(w.a,{className:n.noReviewers,variant:"caption",component:"div",children:s.formatMessage({id:"message.notSelectReviewers"})})})}),Object(oe.jsx)(k.a,{container:!0,alignItems:"center",className:[n.reviewersTitle,n.activityTitle].join(" "),children:Object(oe.jsx)(w.a,{variant:"subtitle1",component:"div",children:s.formatMessage({id:"label.activity"})})}),Object(oe.jsxs)(k.a,{item:!0,xs:12,children:[Object(oe.jsxs)(w.a,{variant:"body2",component:"div",className:n.activityItem,children:[Object(oe.jsx)(fe.a,{icon:je.y}),s.formatMessage({id:"label.requestMerge"}),":\xa0\xa0",l.group.displayName,"/",l.displayName,"/",c.sourceBranch," -> ",p.group.displayName,"/",p.displayName,"/",c.targetBranch]}),Object(oe.jsxs)(w.a,{variant:"body2",component:"div",className:n.activityItem,children:[Object(oe.jsx)(pi,{src:D.HOSTS.PGYER_AVATAR_HOST+d.icon}),d.name,"\xa0\xa0",s.formatMessage({id:"label.requestCreated"}),":\xa0\xa0",Object(oe.jsx)(Nt,{timestamp:c.create}),Object(oe.jsx)("div",{className:n.activityItemLine})]}),c.status!==D.mergeRequestStatus.open&&Object(oe.jsxs)(w.a,{variant:"body2",component:"div",className:n.activityItem,children:[Object(oe.jsx)(pi,{src:D.HOSTS.PGYER_AVATAR_HOST+u.icon}),u.name,"\xa0\xa0",s.formatMessage({id:c.status===D.mergeRequestStatus.merged?"label.requestMerged":"label.requestClosed"}),":\xa0\xa0",Object(oe.jsx)(Nt,{timestamp:c.status===D.mergeRequestStatus.merged?c.merge:c.close}),Object(oe.jsx)("div",{className:n.activityItemLine})]})]})]})})]})]})}}]),a}(i.a.Component),ui=Object(R.b)(Object(ge.a)(Object(C.a)((function(e){return{loading:{paddingTop:e.spacing(16),paddingBottom:e.spacing(16),justifyContent:"center"},createMRTitle:{lineHeight:e.spacing(5)+"px",marginBottom:e.spacing(2),borderBottom:"1px solid "+e.palette.border},activityItem:{display:"flex",position:"relative",alignItems:"center",height:e.spacing(8),padding:"0px "+e.spacing(2)+"px","& > svg:first-child":{padding:"12px",borderRadius:"50%",marginRight:e.spacing(2),color:e.palette.primary.main,border:"1px solid "+e.palette.border,width:e.spacing(5),height:e.spacing(5),boxSizing:"border-box"},"& > div:first-child":{width:e.spacing(5),height:e.spacing(5),marginRight:e.spacing(2)}},activityItemLine:{top:"-12px",position:"absolute",left:e.spacing(4.5),height:e.spacing(3),borderLeft:"1px solid "+e.palette.border},hideInput:{display:"none"},tab:{marginTop:e.spacing(3)},tabHeader:{position:"sticky",top:e.spacing(8),zIndex:9,borderBottom:"1px solid "+e.palette.border},mergeRequestInfo:{border:0},description:{padding:e.spacing(2)+"px"},button:{margin:e.spacing(2)+"px 0px"},icon:{color:e.palette.text.light},assigned:{color:e.palette.primary.main},members:{overflowY:"auto",borderRadius:"4px",boxSizing:"border-box",maxHeight:e.spacing(27.5),border:"1px solid "+e.palette.border},member:{cursor:"pointer",borderBottom:"1px solid "+e.palette.border,padding:e.spacing(1.5)+"px "+e.spacing(2)+"px","&:last-child":{border:"none"},"&:hover":{background:e.palette.background.main}},reviewersTitle:{height:e.spacing(5),boxSizing:"content-box",padding:"0px "+e.spacing(2)+"px",borderBottom:"1px solid "+e.palette.border},activityTitle:{marginBottom:e.spacing(2)},reviewersMenuItem:{justifyContent:"space-between",height:e.spacing(5)},divider:{margin:e.spacing(1)+"px 0px"},deleteReviewer:{color:e.palette.error.main},reviewersMember:{padding:e.spacing(3)+"px "+e.spacing(2)+"px",height:e.spacing(10)},noReviewers:{fontSize:"14px",textAlign:"center",lineHeight:e.spacing(10)+"px"},cancel:{marginRight:e.spacing(2)}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentUserInfo:e.DataStore.currentUserInfo,currentRepositoryKey:e.DataStore.currentRepositoryKey,repositoryList:e.DataStore.repositoryList}}),(function(e,t){return{dispatchEvent:function(t){e(t)},closeDrawer:function(){return e({type:"drawer.expandStatus.close"})}}}))(di))))),mi=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return Object(oe.jsxs)(h.c,{children:[Object(oe.jsx)(h.a,{path:"/userInfo",component:me}),Object(oe.jsx)(h.a,{path:"/settings",children:Object(oe.jsxs)(h.c,{children:[Object(oe.jsx)(h.a,{exact:!0,path:"/settings/profile",component:We}),Object(oe.jsx)(h.a,{exact:!0,path:"/settings/sshkey",component:Ee}),Object(oe.jsx)(h.a,{exact:!0,path:"/settings/notification",component:Xe}),Object(oe.jsx)(h.a,{exact:!0,path:"/settings/email",component:Fe}),Object(oe.jsx)(h.a,{path:"/settings",component:We})]})}),Object(oe.jsx)(h.a,{path:"/admin",children:Object(oe.jsxs)(h.c,{children:[Object(oe.jsx)(h.a,{exact:!0,path:"/admin/users",component:vt}),Object(oe.jsx)(h.a,{exact:!0,path:"/admin/groups",component:Mt}),Object(oe.jsx)(h.a,{exact:!0,path:"/admin/repositories",component:kt}),Object(oe.jsx)(h.a,{exact:!0,path:"/admin/settings",component:Et}),Object(oe.jsx)(h.a,{path:"/admin",component:st})]})}),Object(oe.jsx)(h.a,{path:"/mergerequests",children:Object(oe.jsxs)(h.c,{children:[Object(oe.jsx)(h.a,{exact:!0,path:"/mergerequests",component:ri}),Object(oe.jsx)(h.a,{exact:!0,path:"/mergerequests/new",component:ni})]})}),Object(oe.jsx)(h.a,{path:"/repositories",children:Object(oe.jsxs)(h.c,{children:[Object(oe.jsx)(h.a,{exact:!0,path:"/repositories/new",component:zt}),Object(oe.jsx)(h.a,{exact:!0,path:"/repositories/fork/:repositoryID([0-9a-f]+)",component:Vt}),Object(oe.jsx)(h.a,{exact:!0,path:"/repositories/forklist/:repositoryID([0-9a-f]+)",component:Ut}),Object(oe.jsx)(h.a,{path:"/repositories",component:Ut})]})}),Object(oe.jsx)(h.a,{path:"/groups",children:Object(oe.jsxs)(h.c,{children:[Object(oe.jsx)(h.a,{path:"/groups/new",component:wa}),Object(oe.jsx)(h.a,{exact:!0,path:"/groups/:groupName([A-Za-z0-9_]{5,})",component:Ut}),Object(oe.jsx)(h.a,{exact:!0,path:"/groups/:groupName([A-Za-z0-9_]{5,})/repositories",component:Ut}),Object(oe.jsx)(h.a,{exact:!0,path:"/groups/:groupName([A-Za-z0-9_]{5,})/members",component:Ta}),Object(oe.jsx)(h.a,{exact:!0,path:"/groups/:groupName([A-Za-z0-9_]{5,})/activities",component:Ga}),Object(oe.jsx)(h.a,{exact:!0,path:"/groups/:groupName([A-Za-z0-9_]{5,})/repositories/new",component:zt}),Object(oe.jsx)(h.a,{exact:!0,path:"/groups/:groupName([A-Za-z0-9_]{5,})/mergerequests",component:ri}),Object(oe.jsx)(h.a,{exact:!0,path:"/groups/:groupName([A-Za-z0-9_]{5,})/mergerequests/new",component:ni}),Object(oe.jsx)(h.a,{exact:!0,path:"/groups/:groupName([A-Za-z0-9_]{5,})/settings",component:_a}),Object(oe.jsx)(h.a,{exact:!0,path:"/groups/:groupName([A-Za-z0-9_]{5,})/settings/general",component:_a}),Object(oe.jsx)(h.a,{exact:!0,path:"/groups/:groupName([A-Za-z0-9_]{5,})/settings/advanced",component:Ia}),Object(oe.jsx)(h.a,{path:"/groups",component:Ra})]})}),Object(oe.jsx)(h.a,{path:"/:groupName([A-Za-z0-9_]{5,})/:repositoryName([A-Za-z0-9_]+)",children:Object(oe.jsxs)(h.c,{children:[Object(oe.jsx)(h.a,{exact:!0,path:"/:groupName([A-Za-z0-9_]{5,})/:repositoryName([A-Za-z0-9_]+)/files",component:gr}),Object(oe.jsx)(h.a,{exact:!0,path:"/:groupName([A-Za-z0-9_]{5,})/:repositoryName([A-Za-z0-9_]+)/files/:rev([\\w\\-\\.%]+)",component:gr}),Object(oe.jsx)(h.a,{exact:!0,path:"/:groupName([A-Za-z0-9_]{5,})/:repositoryName([A-Za-z0-9_]+)/:type(files|blame)/:rev([\\w\\-\\.%]+):path(/.*)",component:gr}),Object(oe.jsx)(h.a,{exact:!0,path:"/:groupName([A-Za-z0-9_]{5,})/:repositoryName([A-Za-z0-9_]+)/commit/:hash([0-9a-f]{8})",component:Yr}),Object(oe.jsx)(h.a,{exact:!0,path:"/:groupName([A-Za-z0-9_]{5,})/:repositoryName([A-Za-z0-9_]+)/commits",component:fr}),Object(oe.jsx)(h.a,{exact:!0,path:"/:groupName([A-Za-z0-9_]{5,})/:repositoryName([A-Za-z0-9_]+)/commits/:rev([\\w\\-\\.%]+)",component:fr}),Object(oe.jsx)(h.a,{exact:!0,path:"/:groupName([A-Za-z0-9_]{5,})/:repositoryName([A-Za-z0-9_]+)/commits/:rev([\\w\\-\\.%]+):path(/.*)",component:fr}),Object(oe.jsx)(h.a,{exact:!0,path:"/:groupName([A-Za-z0-9_]{5,})/:repositoryName([A-Za-z0-9_]+)/mergerequests",component:ri}),Object(oe.jsx)(h.a,{exact:!0,path:"/:groupName([A-Za-z0-9_]{5,})/:repositoryName([A-Za-z0-9_]+)/mergerequests/new",component:ni}),Object(oe.jsx)(h.a,{exact:!0,path:"/:groupName([A-Za-z0-9_]{5,})/:repositoryName([A-Za-z0-9_]+)/mergerequests/detail/:sourceRepository([0-9a-f]{32})/:sourceBranch([\\w\\-\\.%]+)/:targetRepository([0-9a-f]{32})/:targetBranch([\\w\\-\\.%]+)",component:ui}),Object(oe.jsx)(h.a,{exact:!0,path:"/:groupName([A-Za-z0-9_]{5,})/:repositoryName([A-Za-z0-9_]+)/mergerequests/:mid(\\d+)",component:ui}),Object(oe.jsx)(h.a,{exact:!0,path:"/:groupName([A-Za-z0-9_]{5,})/:repositoryName([A-Za-z0-9_]+)/branches",component:Sr}),Object(oe.jsx)(h.a,{exact:!0,path:"/:groupName([A-Za-z0-9_]{5,})/:repositoryName([A-Za-z0-9_]+)/branches/new",component:_r}),Object(oe.jsx)(h.a,{exact:!0,path:"/:groupName([A-Za-z0-9_]{5,})/:repositoryName([A-Za-z0-9_]+)/tags",component:Nr}),Object(oe.jsx)(h.a,{exact:!0,path:"/:groupName([A-Za-z0-9_]{5,})/:repositoryName([A-Za-z0-9_]+)/tags/new",component:wr}),Object(oe.jsx)(h.a,{exact:!0,path:"/:groupName([A-Za-z0-9_]{5,})/:repositoryName([A-Za-z0-9_]+)/members",component:ja}),Object(oe.jsx)(h.a,{exact:!0,path:"/:groupName([A-Za-z0-9_]{5,})/:repositoryName([A-Za-z0-9_]+)/activities",component:Ga}),Object(oe.jsx)(h.a,{exact:!0,path:"/:groupName([A-Za-z0-9_]{5,})/:repositoryName([A-Za-z0-9_]+)/settings",component:Kt}),Object(oe.jsx)(h.a,{exact:!0,path:"/:groupName([A-Za-z0-9_]{5,})/:repositoryName([A-Za-z0-9_]+)/settings/general",component:Kt}),Object(oe.jsx)(h.a,{exact:!0,path:"/:groupName([A-Za-z0-9_]{5,})/:repositoryName([A-Za-z0-9_]+)/settings/branch",component:Zt}),Object(oe.jsx)(h.a,{exact:!0,path:"/:groupName([A-Za-z0-9_]{5,})/:repositoryName([A-Za-z0-9_]+)/settings/webhook",component:oa}),Object(oe.jsx)(h.a,{exact:!0,path:"/:groupName([A-Za-z0-9_]{5,})/:repositoryName([A-Za-z0-9_]+)/settings/advanced",component:xa}),Object(oe.jsx)(h.a,{component:gr})]})})]})}}]),a}(i.a.Component),hi=Object(h.f)(mi),gi=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={groupListLoaded:!1,repositoryListLoaded:!1},r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;te.getUserInfo().then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){t.code||e.props.dispatchEvent({type:"data.currentUserInfo.update",data:t.data})})),Ht.list().then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){t.code||(e.props.dispatchEvent({type:"data.repositoryList.update",data:t.data}),e.setState({repositoryListLoaded:!0}))})),va.list().then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){t.code||(e.props.dispatchEvent({type:"data.groupList.update",data:t.data}),e.setState({groupListLoaded:!0}))}))}},{key:"shouldComponentUpdate",value:function(e,t){var a=this;if(t.groupListLoaded&&this.state.groupListLoaded!==t.groupListLoaded||this.props.match.params.groupName!==e.match.params.groupName||this.props.match.params.repositoryName!==e.match.params.repositoryName&&!e.match.params.repositoryName){var r=e.groupList.filter(U.name(e.match.params.groupName))[0];r&&r.id?(this.props.dispatchEvent({type:"data.currentGroupKey.update",data:r.id}),this.props.dispatchEvent({type:"data.currentGroupConfig.update",data:{}}),e.history.location.pathname.match(/^\/groups/i)&&va.config({gKey:r.id}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(e){e.code?a.props.dispatchEvent({type:"data.currentGroupConfig.update",data:{}}):a.props.dispatchEvent({type:"data.currentGroupConfig.update",data:e.data})}))):(this.props.dispatchEvent({type:"data.currentGroupKey.update",data:""}),this.props.dispatchEvent({type:"data.currentGroupConfig.update",data:{}}))}else e.match.params.groupName||(this.props.dispatchEvent({type:"data.currentGroupKey.update",data:""}),this.props.dispatchEvent({type:"data.currentGroupConfig.update",data:{}}));if(t.repositoryListLoaded&&this.state.repositoryListLoaded!==t.repositoryListLoaded||this.props.match.params.groupName!==e.match.params.groupName||this.props.match.params.repositoryName!==e.match.params.repositoryName){var i=e.repositoryList.filter((function(t){return t.group.name===e.match.params.groupName&&t.name===e.match.params.repositoryName}))[0];i&&i.id?(this.props.dispatchEvent({type:"data.currentRepositoryKey.update",data:i.id}),Ht.config({rKey:i.id}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(e){e.code?a.props.dispatchEvent({type:"data.currentRepositoryConfig.update",data:{}}):(a.props.dispatchEvent({type:"data.currentRepositoryConfig.update",data:e.data}),a.setState({repositoryListLoaded:!0}))})),this.props.dispatchEvent({type:"data.currentRepositoryConfig.update",data:{}}),this.props.dispatchEvent({type:"data.currentRepositoryError.update",data:!1})):(this.props.dispatchEvent({type:"data.currentRepositoryKey.update",data:""}),this.props.dispatchEvent({type:"data.currentRepositoryConfig.update",data:{}}),this.props.dispatchEvent({type:"data.currentRepositoryError.update",data:!0}))}return!0}},{key:"render",value:function(){var e=this.props.classes;return Object(oe.jsx)("div",{className:e.container,children:Object(oe.jsxs)("main",{className:e.content,children:[Object(oe.jsx)("div",{className:e.toolbar}),Object(oe.jsx)("div",{className:e.mainContainer,children:Object(oe.jsx)(hi,{})})]})})}}]),a}(i.a.Component),bi=Object(C.a)((function(e){return{container:{backgroundColor:e.palette.background.light},content:{padding:0},toolbar:e.mixins.toolbar,mainContainer:{padding:e.spacing(3)+"px "+e.spacing(6)+"px"}}}))(Object(h.f)(Object(l.b)((function(e,t){return{repositoryList:e.DataStore.repositoryList,groupList:e.DataStore.groupList}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(gi))),fi=a(566),ji=a(567),vi=a(565),Oi=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={anchorEl:null},r.handleUserMenuClick=r.handleUserMenuClick.bind(Object(N.a)(r)),r.handleUserMenuClose=r.handleUserMenuClose.bind(Object(N.a)(r)),r.logout=r.logout.bind(Object(N.a)(r)),r}return Object(d.a)(a,[{key:"handleUserMenuClick",value:function(e){this.setState({anchorEl:e.currentTarget})}},{key:"handleUserMenuClose",value:function(){this.setState({anchorEl:null})}},{key:"logout",value:function(){this.setState({anchorEl:null}),window.location.href="/user/logout"}},{key:"goView",value:function(e){this.setState({anchorEl:null}),this.props.history.push(e)}},{key:"render",value:function(){var e=this,t=this.props,a=t.currentUserInfo,r=t.classes,n=t.className,s=t.intl;return Object(oe.jsxs)(i.a.Fragment,{children:[Object(oe.jsxs)("div",{className:[r.settings,n].join(" "),onClick:this.handleUserMenuClick,children:[Object(oe.jsx)(Le.a,{src:D.HOSTS.PGYER_AVATAR_HOST+a.icon,className:r.icon}),Object(oe.jsx)(fe.a,{icon:je.L,className:r.down})]}),Object(oe.jsxs)(ot.a,{id:"user-menu",anchorEl:this.state.anchorEl,open:Boolean(this.state.anchorEl),onClose:this.handleUserMenuClose,anchorOrigin:{horizontal:"right",vertical:"bottom"},transformOrigin:{horizontal:"right",vertical:"top"},PaperProps:{className:r.menu},MenuListProps:{className:r.list},getContentAnchorEl:null,transitionDuration:0,children:[Object(oe.jsxs)(lt.a,{disabled:!0,className:r.name,children:[Object(oe.jsx)(w.a,{variant:"h6",component:"div",children:a.name}),Object(oe.jsx)(w.a,{variant:"body2",component:"div",children:a.email})]}),Object(oe.jsx)(pa.a,{}),Object(oe.jsxs)(lt.a,{onClick:function(t){e.goView("/settings/profile")},children:[Object(oe.jsx)(vi.a,{children:Object(oe.jsx)(fe.a,{icon:je.w})}),Object(oe.jsx)(ut.a,{disableTypography:!0,primary:s.formatMessage({id:"menu.profile"})})]}),Object(oe.jsxs)(lt.a,{onClick:function(t){e.goView("/settings/email")},children:[Object(oe.jsx)(vi.a,{children:Object(oe.jsx)(fe.a,{icon:je.l})}),Object(oe.jsx)(ut.a,{disableTypography:!0,primary:s.formatMessage({id:"menu.mail"})})]}),Object(oe.jsxs)(lt.a,{onClick:function(t){e.goView("/settings/sshkey")},children:[Object(oe.jsx)(vi.a,{children:Object(oe.jsx)(fe.a,{icon:je.t})}),Object(oe.jsx)(ut.a,{disableTypography:!0,primary:s.formatMessage({id:"menu.SSHKey_pl"})})]}),Object(oe.jsx)(pa.a,{}),Object(oe.jsxs)(lt.a,{onClick:this.logout,children:[Object(oe.jsx)(vi.a,{children:Object(oe.jsx)(fe.a,{icon:je.n})}),Object(oe.jsx)(ut.a,{disableTypography:!0,primary:s.formatMessage({id:"menu.logout"})})]})]})]})}}]),a}(r.Component),yi=Object(R.b)(Object(C.a)((function(e){return{settings:{display:"flex",alignItems:"center",cursor:"pointer"},menu:{width:e.spacing(30),marginTop:e.spacing(1),padding:0},list:{"& > li":{height:e.spacing(5)},"& > hr":{marginTop:e.spacing(1),marginBottom:e.spacing(1)}},name:{opacity:"1 !important",display:"block",height:"auto !important"},icon:{width:e.spacing(4),height:e.spacing(4)},down:{marginLeft:e.spacing(2),fontSize:e.spacing(1)}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentUserInfo:e.DataStore.currentUserInfo}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(Oi)))),xi=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={anchorEl:null,userInfoLoadingStatus:!1},r.handleUserMenuClick=r.handleUserMenuClick.bind(Object(N.a)(r)),r.handleUserMenuClose=r.handleUserMenuClose.bind(Object(N.a)(r)),r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.setState({userInfoLoadingStatus:!0})}},{key:"handleUserMenuClick",value:function(e){this.setState({anchorEl:e.currentTarget})}},{key:"handleUserMenuClose",value:function(){this.setState({anchorEl:null})}},{key:"changeLanguage",value:function(e){this.props.dispatchEvent({type:"data.currentLanguage.update",data:e}),this.setState({anchorEl:null})}},{key:"render",value:function(){var e=this,t=this.state.anchorEl,a=this.props,r=a.intl,n=a.classes,s=a.currentLanguage;return Object(oe.jsxs)(i.a.Fragment,{children:[Object(oe.jsx)(Ie,{label:"label.language",onClick:this.handleUserMenuClick,icon:je.u,className:this.props.className}),Object(oe.jsxs)(ot.a,{id:"language-menu",anchorEl:t,anchorOrigin:{horizontal:"right",vertical:"bottom"},transformOrigin:{horizontal:"right",vertical:"top"},PaperProps:{className:n.menu},getContentAnchorEl:null,transitionDuration:0,open:Boolean(t),onClose:this.handleUserMenuClose,children:[Object(oe.jsx)(lt.a,{selected:"zh-cn"===s,onClick:function(t){return e.changeLanguage("zh-cn")},children:Object(oe.jsx)(ut.a,{disableTypography:!0,primary:r.formatMessage({id:"lang.chinese"})})}),Object(oe.jsx)(lt.a,{selected:"en-us"===s,onClick:function(t){return e.changeLanguage("en-us")},children:Object(oe.jsx)(ut.a,{disableTypography:!0,primary:r.formatMessage({id:"lang.english"})})})]})]})}}]),a}(r.Component),Si=Object(R.b)(Object(C.a)((function(e){return{menu:{marginTop:e.spacing(1),padding:0}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentLanguage:e.DataStore.currentLanguage}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(xi)))),Ci=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={anchorElement:null,repositoryList:r.props.repositoryList,groupList:r.props.groupList,enterMenu:!1,enterButton:!1},r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.repositoryList===e.repositoryList&&this.props.groupList===e.groupList||this.setState({repositoryList:e.repositoryList,groupList:e.groupList}),!0}},{key:"getToRepository",value:function(e){this.initAnchor(),this.props.history.push("/"+e.group.name+"/"+e.name+"/")}},{key:"getToGroup",value:function(e){this.initAnchor(),this.props.history.push("/groups/"+e.name+"/")}},{key:"initAnchor",value:function(){this.setState({anchorElement:null,enterButton:!1,enterMenu:!1})}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,r=t.intl,i=t.history,n=t.type,s=t.currentRepositoryKey,o=t.currentGroupKey,c=this.state,l=c.repositoryList,p=c.groupList,d=l.filter(U.withPermission(L.PermissionCode.REPO_READ)).map((function(t,r){return Object(oe.jsxs)(lt.a,{onClick:function(a){e.getToRepository(t)},children:[Object(oe.jsx)(vi.a,{children:t.icon?Object(oe.jsx)(Le.a,{variant:"square",className:a.listIcon,src:D.HOSTS.STATIC_AVATAR_PREFIX+t.icon}):Object(oe.jsx)(Le.a,{variant:"square",className:a.listIcon,children:t.name.substr(0,1).toUpperCase()})}),Object(oe.jsx)(ut.a,{disableTypography:!0,primary:t.group.displayName+"/"+t.displayName}),t.id===s&&Object(oe.jsx)(fe.a,{icon:je.e,className:a.checked})]},"r"+r)})),u=p.filter(U.withPermission(L.PermissionCode.REPO_READ)).map((function(t,r){return Object(oe.jsxs)(lt.a,{onClick:function(a){e.getToGroup(t)},children:[Object(oe.jsx)(vi.a,{children:t.icon?Object(oe.jsx)(Le.a,{variant:"square",className:a.listIcon,src:D.HOSTS.STATIC_AVATAR_PREFIX+t.icon}):Object(oe.jsx)(Le.a,{variant:"square",className:a.listIcon,children:t.name.substr(0,1).toUpperCase()})}),Object(oe.jsx)(ut.a,{disableTypography:!0,primary:t.displayName}),t.id===o&&!s&&Object(oe.jsx)(fe.a,{icon:je.e,className:a.checked})]},"g"+r)}));return Object(oe.jsxs)("span",{children:["repository"===n&&l.length+p.length||"group"===n&&p.length?Object(oe.jsxs)(_.a,{color:"inherit","aria-owns":"menu-"+n,"aria-haspopup":"true",className:a.button,onClick:function(){e.initAnchor(),i.push("repository"===n?"/repositories":"/groups")},onMouseEnter:function(t){e.setState({enterButton:!0,anchorElement:t.currentTarget})},onMouseLeave:function(){e.setState({enterButton:!1}),setTimeout((function(){return!e.state.enterMenu&&e.initAnchor()}),100)},children:["repository"===n&&r.formatMessage({id:"menu.repository_pl"}),"group"===n&&r.formatMessage({id:"menu.group_pl"}),Object(oe.jsx)(fe.a,{icon:Ge.a})]}):Object(oe.jsxs)(_.a,{color:"inherit","aria-owns":"menu-"+n,"aria-haspopup":"true",onClick:function(){i.push("repository"===n?"/repositories/new":"/groups/new")},children:["repository"===n&&r.formatMessage({id:"label.newRepository"}),"group"===n&&r.formatMessage({id:"label.newGroup"})]}),("repository"===n&&l.length+p.length>0||"group"===n&&p.length>0)&&Object(oe.jsxs)(ot.a,{id:"menu-"+n,anchorEl:this.state.anchorElement,anchorOrigin:{horizontal:"left",vertical:"bottom"},transformOrigin:{horizontal:"left",vertical:"top"},open:Boolean(this.state.anchorElement),onClose:function(t){e.setState({anchorElement:null})},PaperProps:{className:a.menu},getContentAnchorEl:null,transitionDuration:0,onMouseEnter:function(){e.setState({enterMenu:!0})},onMouseLeave:function(){return e.initAnchor()},children:[Object(oe.jsx)(k.a,{className:a.title,children:Object(oe.jsxs)(w.a,{variant:"caption",component:"div",children:["repository"===n&&r.formatMessage({id:"label.repository"}),"group"===n&&r.formatMessage({id:"label.group"})]})}),"repository"===n&&d,"group"===n&&u]})]})}}]),a}(r.Component),Ni=Object(R.b)(Object(C.a)((function(e){return{menu:{top:e.spacing(8)+1+"px !important",width:e.spacing(34)+"px !important",height:e.spacing(40),boxShadow:"0px 20px 40px 0px rgba(66, 72, 86, 0.1)"},button:{position:"relative",maxWidth:"100%",paddingRight:e.spacing(3),"& > span":{display:"list-item",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},"& svg":{position:"absolute",right:e.spacing(1),top:"10px"}},listIcon:{width:e.spacing(3),height:e.spacing(3),fontSize:e.spacing(2)+"px"},title:{color:e.palette.text.lighter,fontSize:e.spacing(1.5)+"px",padding:e.spacing(1)+"px "+e.spacing(2)+"px"},checked:{color:e.palette.primary.main}}}))(Object(h.f)(Object(l.b)((function(e,t){return{repositoryList:e.DataStore.repositoryList,groupList:e.DataStore.groupList,currentRepositoryKey:e.DataStore.currentRepositoryKey,currentGroupKey:e.DataStore.currentGroupKey}}),(function(e,t){return{}}))(Ci)))),Ri=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={newMenuAnchor:null,helpMenuAnchor:null},r}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,r=t.currentUserInfo,i=t.scrollTrigger,n=t.history,s=t.intl,o=t.notificationOpenStatusToggle,c=t.currentLanguage;return Object(oe.jsx)(fi.a,{position:"fixed",color:"default",className:a.appBar,elevation:i?2:0,children:Object(oe.jsx)(ji.a,{children:Object(oe.jsxs)(k.a,{container:!0,justifyContent:"space-between",alignItems:"center",children:[Object(oe.jsxs)(k.a,{item:!0,className:a.options,children:[Object(oe.jsx)("img",{className:a.img,src:"/static/00000000000000/images/logo-community.png",onClick:function(){return n.push("/repositories")}}),Object(oe.jsx)(k.a,{item:!0,className:a.optionItem,children:Object(oe.jsx)(Ni,{type:"repository"})}),Object(oe.jsx)(k.a,{item:!0,className:a.optionItem,children:Object(oe.jsx)(Ni,{type:"group"})}),Object(oe.jsx)(Ie,{label:"label.mergeRequest",onClick:function(){n.push("/mergerequests")},icon:je.y,className:a.optionItem})]}),Object(oe.jsxs)(k.a,{item:!0,className:a.options,children:[Object(oe.jsx)(Ie,{label:"label.create",color:"primary",onClick:function(t){return e.setState({newMenuAnchor:t.currentTarget})},icon:je.I,className:a.optionItem}),Object(oe.jsx)(pa.a,{orientation:"vertical",className:[a.split,a.optionItem].join(" ")}),Object(oe.jsxs)(ot.a,{id:"new-menu",anchorEl:this.state.newMenuAnchor,anchorOrigin:{horizontal:"left",vertical:"bottom"},PaperProps:{className:a.menu},getContentAnchorEl:null,transitionDuration:0,open:Boolean(this.state.newMenuAnchor),onClose:function(t){return e.setState({newMenuAnchor:null})},children:[Object(oe.jsx)(lt.a,{onClick:function(t){n.push("/repositories/new"),e.setState({newMenuAnchor:null})},children:Object(oe.jsx)(ut.a,{disableTypography:!0,primary:s.formatMessage({id:"label.newRepository"})})}),Object(oe.jsx)(lt.a,{onClick:function(t){n.push("/groups/new"),e.setState({newMenuAnchor:null})},children:Object(oe.jsx)(ut.a,{disableTypography:!0,primary:s.formatMessage({id:"label.newGroup"})})}),Object(oe.jsx)(lt.a,{onClick:function(t){n.push("/mergerequests/new"),e.setState({newMenuAnchor:null})},children:Object(oe.jsx)(ut.a,{disableTypography:!0,primary:s.formatMessage({id:"label.createMergeRequest"})})})]}),Object(oe.jsx)(Ie,{label:"label.notification",icon:je.c,badge:r.unReadNotification,className:a.optionItem,onClick:function(e){return o()}}),Object(oe.jsx)(Si,{className:a.optionItem}),Object(oe.jsx)(Ie,{label:"label.help",onClick:function(t){return e.setState({helpMenuAnchor:t.currentTarget})},icon:je.s,className:a.optionItem}),Object(oe.jsxs)(ot.a,{id:"help-menu",anchorEl:this.state.helpMenuAnchor,anchorOrigin:{horizontal:"right",vertical:"bottom"},transformOrigin:{horizontal:"right",vertical:"top"},PaperProps:{className:a.menu},getContentAnchorEl:null,transitionDuration:0,open:Boolean(this.state.helpMenuAnchor),onClose:function(t){return e.setState({helpMenuAnchor:null})},children:[Object(oe.jsx)(lt.a,{onClick:function(){e.setState({helpMenuAnchor:null}),window.open("/doc/"+("en-us"===c?"en":"cn"),"_blank")},children:Object(oe.jsx)(ut.a,{disableTypography:!0,primary:s.formatMessage({id:"label.help"})})}),Object(oe.jsx)(lt.a,{onClick:function(){e.setState({helpMenuAnchor:null}),window.open("https://codefever.pgyer.com/community","_blank")},children:Object(oe.jsx)(ut.a,{disableTypography:!0,primary:s.formatMessage({id:"label.support"})})}),Object(oe.jsx)(lt.a,{onClick:function(){e.setState({helpMenuAnchor:null}),window.open("https://github.com/PGYER/codefever/blob/master/doc/zh-cn/contribute/bug_fix_issue.md","_blank")},children:Object(oe.jsx)(ut.a,{disableTypography:!0,primary:s.formatMessage({id:"label.feedback"})})}),Object(oe.jsx)(pa.a,{}),Object(oe.jsx)(lt.a,{onClick:function(){e.setState({helpMenuAnchor:null}),window.open("https://github.com/PGYER/codefever","_blank")},children:Object(oe.jsx)(ut.a,{disableTypography:!0,primary:s.formatMessage({id:"label.contribute"})})}),Object(oe.jsx)(lt.a,{onClick:function(){e.setState({helpMenuAnchor:null}),window.open("https://codefever.pgyer.com/","_blank")},children:Object(oe.jsx)(ut.a,{disableTypography:!0,primary:s.formatMessage({id:"label.about"})})})]}),r.admin&&Object(oe.jsx)(Ie,{label:"label.adminArea",onClick:function(){n.push("/admin")},icon:je.A,className:a.optionItem}),Object(oe.jsx)(yi,{className:a.optionItem})]})]})})})}}]),a}(i.a.Component),Mi=Object(R.b)(Object(h.f)(Object(C.a)((function(e){return{appBar:{width:"100%",zIndex:e.zIndex.drawer,borderBottom:"1px solid "+e.palette.border},img:{height:e.spacing(4),marginLeft:e.spacing(3),marginRight:e.spacing(6),cursor:"pointer"},placeholder:{display:"inline-block",verticalAlign:"middle",height:e.spacing(4),marginRight:e.spacing(2),transition:e.transitions.create("width")},placeholderExpanded:{width:e.spacing(37)},placeholderCollapsed:{width:e.spacing(8)},options:{display:"flex"},split:{marginTop:e.spacing(1),height:e.spacing(2)},optionItem:{marginRight:e.spacing(2)},menu:{marginTop:e.spacing(1),padding:0}}}))(Object(l.b)((function(e,t){return{currentUserInfo:e.DataStore.currentUserInfo,currentLanguage:e.DataStore.currentLanguage}}),(function(e,t){return{notificationOpenStatusToggle:function(){return e({type:"notification.notificationOpenStatus.toggle"})}}}))((Pa={threshold:0,watching:".app-content"},function(e){return function(t){Object(u.a)(r,t);var a=Object(m.a)(r);function r(e){var t;return Object(p.a)(this,r),(t=a.call(this,e)).target=null,t.cancel=null,t.onScroll=t.onScroll.bind(Object(N.a)(t)),t.state={scrollTrigger:!1},t}return Object(d.a)(r,[{key:"componentDidMount",value:function(){Pa.watching&&(this.cancel&&this.cancel(),this.target=document.querySelector(Pa.watching),this.cancel=function(){this.target.removeEventListener("scroll",this.onScroll)},this.target.addEventListener("scroll",this.onScroll),this.onScroll({target:this.target}))}},{key:"componentWillUnmount",value:function(){this.cancel&&this.cancel(),this.cancel=null,this.target=null}},{key:"onScroll",value:function(e){var t=e.target.pageYOffset||e.target.scrollTop;t>Pa.threshold&&!this.state.scrollTrigger?this.setState({scrollTrigger:!0}):t<=Pa.threshold&&this.state.scrollTrigger&&this.setState({scrollTrigger:!1})}},{key:"render",value:function(){return Object(oe.jsx)(e,Object(y.a)({ref:this.mountContainer,scrollTrigger:this.state.scrollTrigger},this.props))}}]),r}(i.a.Component)})(Ri))))),wi=a(581),ki=a(540),_i=a(562),Ei=a(296),Ti=a.n(Ei),Ai=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={open:{},itemSwitch:!1,itemName:null,avatarHover:!1},r}return Object(d.a)(a,[{key:"openChildren",value:function(e){var t=Object(y.a)({},this.state.open);t[e]=!t[e],this.setState({open:t})}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,r=t.drawerExpandStatus,n=t.drawerConfig,s=t.location,o=t.intl,c=t.mode,l=t.repositoryList,p=t.currentRepositoryKey,d=t.groupList,u=t.currentGroupKey,m=n.map((function(t,i){var n=!1;t.activePattern.map((function(e){return s.pathname&&s.pathname.match(e)&&(n=!0),!0}));var c=Object(oe.jsxs)(tr.a,{className:[a.listItem,n?a.active:"",r?a.listItemExpand:a.listItemCollapsed].join(" "),onClick:function(){e.props.history.push(t.path),t.children&&e.openChildren(i)},children:[Object(oe.jsx)(vi.a,{children:Object(oe.jsx)(fe.a,{icon:t.icon,className:[a.listIcon,n?a.iconActive:""].join(" ")})}),Object(oe.jsx)(ut.a,{className:[a.listItemText,r?a.listItemTextExpand:a.listItemTextCollapsed].join(" "),primary:o.formatMessage({id:t.name})}),Object(oe.jsx)(w.a,{variant:"caption",children:t.count}),t.children?e.state.open[i]?Object(oe.jsx)(Ti.a,{}):Object(oe.jsx)(Fr.a,{}):""]}),l=t.children?t.children.map((function(t,c){var l=!1;return t.activePattern.map((function(e){return s.pathname&&s.pathname.match(e)&&(l=!0),!0})),Object(oe.jsx)(_i.a,{in:e.state.open[i]&&r,timeout:"auto",unmountOnExit:!0,onClick:function(){return e.props.history.push(t.path)},className:n?a.secondCollapse:"",children:Object(oe.jsx)(ki.a,{component:"div",disablePadding:!0,children:Object(oe.jsx)(tr.a,{className:a.listItem,children:Object(oe.jsx)(ut.a,{className:[a.listItemText,l?a.secondActive:"",r?a.listItemTextExpand:a.listItemTextCollapsed].join(" "),inset:!0,primary:o.formatMessage({id:t.name})})})})},c)})):"";return Object(oe.jsxs)("div",{className:t.children&&n&&e.state.open[i]&&r?a.morePadding:"",children:[c,l]},i)})),h={},g=l.filter(U.id(p))[0],b=d.filter(U.id(u))[0];if(["repository","group"].includes(c)){var f=g&&g.icon||b&&b.icon,j=g&&g.name||b&&b.name;f?h.src=D.HOSTS.STATIC_AVATAR_PREFIX+f:j&&(h.children=j[0].toUpperCase()),"repository"===c?h.onClick=function(){e.props.history.push("/"+g.group.name+"/"+g.name+"/")}:"group"===c&&(h.onClick=function(){e.props.history.push("/groups/"+b.name)}),h.onMouseEnter=function(){e.setState({avatarHover:!0})},h.onMouseLeave=function(){e.setState({avatarHover:!1})},this.state.avatarHover&&(h.src="",h.children=Object(oe.jsx)(be.a,{title:o.formatMessage({id:"message.backHome"}),placement:"top",children:Object(oe.jsx)(_.a,{variant:"contained",color:"primary",className:a.button,children:Object(oe.jsx)(fe.a,{icon:je.V,style:{width:16}})})}),h.onClick=function(){e.props.history.push("/repositories"),e.setState({avatarHover:!1})})}else h.src="/static/00000000000000/images/logo-ico.png",h.onClick=function(){e.props.history.push("/repositories"),e.setState({avatarHover:!1})};return Object(oe.jsxs)(i.a.Fragment,{children:[Object(oe.jsxs)("div",{className:[a.drawerHeader,r?a.drawerHeaderExpand:a.drawerHeaderCollapsed].join(" "),children:[Object(oe.jsx)(Le.a,Object(y.a)({variant:"square",className:[a.avatar,this.state.avatarHover&&a.home].join(" ")},h)),Object(oe.jsxs)(w.a,{variant:"subtitle1",component:"div",className:[a.title,r?a.titleExpand:a.titleCollapsed].join(" "),children:["default"===c&&"CodeFever","admin"===c&&"CodeFever Admin"]})]}),Object(oe.jsx)(ki.a,{className:a.list,component:"nav",children:m})]})}}]),a}(i.a.Component),Di=Object(R.b)(Object(C.a)((function(e){return{list:{marginTop:e.spacing(3)},listItem:{overflow:"hidden",width:e.spacing(34),height:e.spacing(5),borderRadius:e.spacing(.5),transition:[e.transitions.create("width"),e.transitions.create("padding")].join(","),cursor:"pointer","& svg, & span":{color:e.palette.text.light},"&:hover":{"& > div > svg":{color:e.palette.primary.main},"& span":{color:e.palette.text.main}}},listItemExpand:{padding:"0px "+e.spacing(4)+"px"},listItemCollapsed:{width:e.spacing(5),minWidth:e.spacing(5),padding:"0px "+e.spacing(1.5)+"px"},listItemText:{margin:0,overflow:"hidden",transition:e.transitions.create("height"),"& > span":{lineHeight:e.spacing(5)+"px"}},listItemTextExpand:{height:e.spacing(5)+"px"},listItemTextCollapsed:{height:0},drawerHeader:{display:"flex",overflow:"hidden",alignItems:"center",height:e.spacing(4),width:e.spacing(28),background:e.palette.background.main,padding:e.spacing(1)+"px "+e.spacing(3)+"px",transition:[e.transitions.create("width"),e.transitions.create("padding")].join(",")},drawerHeaderExpand:{width:e.spacing(28),padding:e.spacing(1)+"px "+e.spacing(3)+"px"},drawerHeaderCollapsed:{width:e.spacing(4),padding:e.spacing(1)+"px "+e.spacing(.5)+"px"},active:{backgroundColor:e.palette.background.light,"& span":{color:e.palette.text.main}},secondCollapse:{backgroundColor:e.palette.background.light},morePadding:{width:e.spacing(34),borderRadius:e.spacing(.5),paddingBottom:e.spacing(2)+"px",backgroundColor:e.palette.background.light},secondActive:{borderRadius:e.spacing(.5),backgroundColor:e.palette.background.main,"& span":{color:e.palette.text.main}},home:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main},iconActive:{color:e.palette.primary.main+" !important"},avatar:{cursor:"pointer",width:e.spacing(4),height:e.spacing(4)},title:{fontSize:"18px",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",height:e.spacing(4),paddingLeft:e.spacing(2),lineHeight:e.spacing(4)+"px",transition:e.transitions.create("height")},titleExpand:{height:e.spacing(4)},titleCollapsed:{height:0},button:{"&:hover":{background:e.palette.primary.main}}}}))(Object(l.b)((function(e,t){return{drawerExpandStatus:e.DrawerStates.expandStatus,repositoryList:e.DataStore.repositoryList,groupList:e.DataStore.groupList,currentRepositoryKey:e.DataStore.currentRepositoryKey,currentGroupKey:e.DataStore.currentGroupKey}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(Object(h.f)(Ai))));var Ii={makeDrawerConfig:function(){return[{path:"/settings/profile",name:"menu.profile",icon:je.Y,activePattern:[/^\/settings$/i,/^\/settings\/profile/i]},{path:"/settings/email",name:"menu.mail",icon:je.Q,activePattern:[/^\/settings\/email/i]},{path:"/settings/sshkey",name:"menu.SSHKey_pl",icon:je.W,activePattern:[/^\/settings\/sshkey/i]},{path:"/settings/notification",name:"menu.notification",icon:je.J,activePattern:[/^\/settings\/notification/i]}]},makeAdminDrawerConfig:function(){return[{path:"/admin/dashboard",name:"menu.dashboard",icon:je.X,activePattern:[/^\/admin(\/)?$/i,/^\/admin\/dashboard\/?.*$/i]},{path:"/admin/users",name:"menu.user_pl",icon:je.Z,activePattern:[/^\/admin\/users\/?.*$/i]},{path:"/admin/groups",name:"menu.group_pl",icon:je.fb,activePattern:[/^\/admin\/groups\/?.*$/i]},{path:"/admin/repositories",name:"menu.repository_pl",icon:je.eb,activePattern:[/^\/admin\/repositories\/?.*$/i]},{path:"/admin/settings",name:"menu.setting_pl",icon:je.gb,activePattern:[/^\/admin\/settings\/?.*$/i]}]},makeGroupDrawerConfig:function(e){return e&&e.group?[{path:["/groups",e.group.name,"repositories"].join("/"),name:"menu.repository_pl",icon:je.eb,activePattern:[/\/groups\/([A-Za-z0-9_]{5,})(\/)?$/i,/\/groups\/([A-Za-z0-9_]{5,})\/repositories/i]},{path:["/groups",e.group.name,"mergerequests"].join("/"),name:"menu.mergeRequest_pl",icon:je.ab,activePattern:[/\/groups\/([A-Za-z0-9_]{5,})\/mergerequests\/?.*$/i]},{path:["/groups",e.group.name,"members"].join("/"),name:"menu.member_pl",icon:je.Z,activePattern:[/\/groups\/([A-Za-z0-9_]{5,})\/members(\/)?$/i]},{path:["/groups",e.group.name,"activities"].join("/"),name:"menu.activity_pl",icon:je.X,activePattern:[/\/groups\/([A-Za-z0-9_]{5,})\/activities(\/)?/i]},{path:["/groups",e.group.name,"settings"].join("/"),name:"menu.setting_pl",icon:je.gb,activePattern:[/\/groups\/([A-Za-z0-9_]{5,})\/settings(\/)?$/i,/\/groups\/([A-Za-z0-9_]{5,})\/settings\/.*$/i],children:[{path:["/groups",e.group.name,"settings","general"].join("/"),name:"menu.general",icon:je.gb,activePattern:[/\/groups\/([A-Za-z0-9_]{5,})\/settings(\/)?$/i,/\/groups\/([A-Za-z0-9_]{5,})\/settings\/general(\/)?$/i]},{path:["/groups",e.group.name,"settings","advanced"].join("/"),name:"menu.advanced",icon:je.gb,activePattern:[/\/groups\/([A-Za-z0-9_]{5,})\/settings\/advanced(\/)?$/i]}]}]:[]},makeRepositoryDrawerConfig:function(e){return e&&e.repository?[{path:["",e.group.name,e.repository.name,"files"].join("/"),name:"menu.file_pl",icon:je.T,activePattern:[/^\/([A-Za-z0-9_]{5,})\/[A-Za-z0-9_]+(\/)?$/i,/([A-Za-z0-9_]{5,})\/[A-Za-z0-9_]+\/files(\/)?$/i,/([A-Za-z0-9_]{5,})\/[A-Za-z0-9_]+\/files\/.*$/i,/([A-Za-z0-9_]{5,})\/[A-Za-z0-9_]+\/blame\/.*$/i]},{path:["",e.group.name,e.repository.name,"commits"].join("/"),name:"menu.commit_pl",count:e.count.commit,icon:je.O,activePattern:[/([A-Za-z0-9_]{5,})\/[A-Za-z0-9_]+\/commits(\/)?$/i,/([A-Za-z0-9_]{5,})\/[A-Za-z0-9_]+\/commits\/.*$/i,/([A-Za-z0-9_]{5,})\/[A-Za-z0-9_]+\/commit\/.*$/i]},{path:["",e.group.name,e.repository.name,"mergerequests"].join("/"),name:"menu.mergeRequest_pl",count:e.count.mergeRequest.open,icon:je.ab,activePattern:[/([A-Za-z0-9_]{5,})\/[A-Za-z0-9_]+\/mergerequests(\/)?$/i,/([A-Za-z0-9_]{5,})\/[A-Za-z0-9_]+\/mergerequests\/.*$/i]},{path:["",e.group.name,e.repository.name,"branches"].join("/"),name:"menu.branch_pl",count:e.count.branch,icon:je.K,activePattern:[/([A-Za-z0-9_]{5,})\/[A-Za-z0-9_]+\/branches(\/)?$/i,/([A-Za-z0-9_]{5,})\/[A-Za-z0-9_]+\/branches\/.*$/i]},{path:["",e.group.name,e.repository.name,"tags"].join("/"),name:"menu.tag_pl",count:e.count.tag,icon:je.hb,activePattern:[/([A-Za-z0-9_]{5,})\/[A-Za-z0-9_]+\/tags(\/)?$/i,/([A-Za-z0-9_]{5,})\/[A-Za-z0-9_]+\/tags\/.*$/i]},{path:["",e.group.name,e.repository.name,"members"].join("/"),name:"menu.member_pl",count:e.members&&e.members.filter(U.notDeleted()).length||0,icon:je.Z,activePattern:[/([A-Za-z0-9_]{5,})\/[A-Za-z0-9_]+\/members(\/)?$/i]},{path:["",e.group.name,e.repository.name,"activities"].join("/"),name:"menu.activity_pl",icon:je.X,activePattern:[/([A-Za-z0-9_]{5,})\/[A-Za-z0-9_]+\/activities(\/)?$/i]},{path:["",e.group.name,e.repository.name,"settings"].join("/"),name:"menu.setting_pl",icon:je.gb,activePattern:[/([A-Za-z0-9_]{5,})\/[A-Za-z0-9_]+\/settings(\/)?$/i,/([A-Za-z0-9_]{5,})\/[A-Za-z0-9_]+\/settings\/.*$/i],children:[{path:["",e.group.name,e.repository.name,"settings","general"].join("/"),name:"menu.general",icon:je.gb,activePattern:[/([A-Za-z0-9_]{5,})\/[A-Za-z0-9_]+\/settings(\/)?$/i,/([A-Za-z0-9_]{5,})\/[A-Za-z0-9_]+\/settings\/general(\/)?$/i]},{path:["",e.group.name,e.repository.name,"settings","branch"].join("/"),name:"menu.branch_pl",icon:je.gb,activePattern:[/([A-Za-z0-9_]{5,})\/[A-Za-z0-9_]+\/settings\/branch(\/)?$/i]},{path:["",e.group.name,e.repository.name,"settings","webhook"].join("/"),name:"menu.webhook_pl",icon:je.gb,activePattern:[/([A-Za-z0-9_]{5,})\/[A-Za-z0-9_]+\/settings\/webhook(\/)?$/i]},{path:["",e.group.name,e.repository.name,"settings","advanced"].join("/"),name:"menu.advanced",icon:je.gb,activePattern:[/([A-Za-z0-9_]{5,})\/[A-Za-z0-9_]+\/settings\/advanced(\/)?$/i]}]}]:[]}},Pi=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"drawer",value:function(e,t){var a=this.props,r=a.classes,i=a.expandStatus,n=a.toggleDrawer;return Object(oe.jsxs)("div",{className:r.drawerContainer,children:[Object(oe.jsx)("div",{className:r.drawerExpandControl,onClick:n,children:Object(oe.jsx)(fe.a,{icon:je.x,className:i?"":r.transform})}),Object(oe.jsx)(wi.a,{open:!0,variant:"permanent",classes:{paper:r.drawerPaper},className:[r.container,i?r.containerExpanded:r.containerCollapsed].join(" "),children:Object(oe.jsx)(Di,{drawerConfig:e,mode:t})})]})}},{key:"render",value:function(){var e=this.props,t=e.currentGroupConfig,a=e.currentRepositoryConfig;return Object(oe.jsxs)(h.c,{children:[Object(oe.jsx)(h.a,{path:"/settings",children:this.drawer(Ii.makeDrawerConfig(),"default")}),Object(oe.jsx)(h.a,{path:"/mergerequests"}),Object(oe.jsx)(h.a,{path:"/repositories"}),Object(oe.jsx)(h.a,{path:"/groups/new"}),Object(oe.jsx)(h.a,{path:"/admin",children:this.drawer(Ii.makeAdminDrawerConfig(),"admin")}),Object(oe.jsx)(h.a,{path:"/groups/:groupName([A-Za-z0-9_]{5,})",children:this.drawer(Ii.makeGroupDrawerConfig(t),"group")}),Object(oe.jsx)(h.a,{path:"/:groupName([A-Za-z0-9_]{5,})/:repositoryName([A-Za-z0-9_]+)",children:this.drawer(Ii.makeRepositoryDrawerConfig(a),"repository")})]})}}]),a}(i.a.Component),Fi=Object(C.a)((function(e){return{drawerContainer:{position:"relative"},container:{height:"100vh",transition:e.transitions.create("width")},containerExpanded:{width:e.spacing(40)},containerCollapsed:{width:e.spacing(11)},drawerPaper:{position:"relative",boxSizing:"border-box",width:"100%"},drawerExpandControl:{position:"absolute",top:e.spacing(12),right:"-12px",fontSize:"14px",color:"#64728C",cursor:"pointer",textAlign:"center",borderRadius:"50%",width:e.spacing(3),height:e.spacing(3),zIndex:e.zIndex.drawer+1,lineHeight:e.spacing(3)+"px",background:e.palette.background.light,border:"1px solid "+e.palette.border},transform:{transform:"rotate(180deg)"},toolbar:e.mixins.toolbar}}))(Object(l.b)((function(e){return{expandStatus:e.DrawerStates.expandStatus,currentGroupConfig:e.DataStore.currentGroupConfig,currentRepositoryConfig:e.DataStore.currentRepositoryConfig}}),(function(e,t){return{toggleDrawer:function(){e({type:"drawer.expandStatus.toggle"})}}}))(Object(h.f)(Pi))),Li=a(569),Bi=a(568),Ui=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={loading:!1},r.observed={openStatus:!1},r}return Object(d.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return this.observed.openStatus!==e.openStatus&&(this.observed.openStatus=e.openStatus,this.setState({loading:!1}),this.props.dispatchEvent(ae.consumeComformation())),this.observed.eventCount!==e.eventCount&&this.props.dispatchEvent(ae.consumeComformation()),!0}},{key:"onCancel",value:function(e){this.props.rejectFn&&this.props.rejectFn(),this.props.dispatchEvent(ae.cancelComformation())}},{key:"onAccept",value:function(e){this.setState({loading:!0}),this.props.acceptFn&&this.props.acceptFn()}},{key:"render",value:function(){var e=this,t=this.props,a=t.openStatus,r=t.title,i=t.description,n=t.intl;return Object(oe.jsxs)(ct.a,{open:a,onClose:function(t){return e.onCancel(t)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(oe.jsx)(dt.a,{id:"alert-dialog-title",children:r}),Object(oe.jsx)(mt.a,{children:Object(oe.jsx)(Bi.a,{id:"alert-dialog-description",children:i})}),Object(oe.jsxs)(Li.a,{children:[Object(oe.jsx)(_.a,{color:"default",onClick:function(t){return e.onCancel(t)},children:n.formatMessage({id:"label.cancel"})}),Object(oe.jsx)(_.a,{color:"primary",onClick:function(t){return e.onAccept(t)},children:this.state.loading?Object(oe.jsx)(he.a,{size:24}):n.formatMessage({id:"label.ok"})})]})]})}}]),a}(i.a.Component),Gi=Object(R.b)(Object(h.f)(Object(l.b)((function(e,t){return{openStatus:e.NotificationStates.confirmation.open,eventCount:e.NotificationStates.confirmation.eventCount,title:e.NotificationStates.confirmation.title,description:e.NotificationStates.confirmation.description,acceptFn:e.NotificationStates.confirmation.accept,rejectFn:e.NotificationStates.confirmation.reject}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(Ui))),Hi=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={pending:!1,menuAnchor:null,category:D.notificationCategory.unRead,list:[],pagesize:20,page:1,loadMore:!0},r}return Object(d.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.notificationOpenStatus!==e.notificationOpenStatus&&!0===e.notificationOpenStatus||this.state.category!==t.category?(this.getData(t,!0),!1):this.state.page===t.page||(this.getData(t,!1),!1)}},{key:"getData",value:function(e,t){var a=this,r=e.pending,i=e.category,n=e.list,s=e.pagesize,o=e.page,c=e.loadMore;if(r)return!1;this.setState({pending:!0,list:t?[]:n,page:t?1:o,loadMore:!!t||c}),te.notifications({category:i,page:t?1:o}).then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(e){e.code||(e.data.map((function(e){return function(e,t){if(!e.type||!e.data)return!1;var a=e.data=JSON.parse(e.data);return e.text=t.formatMessage({id:"notification."+e.type},a),e.url="",["mergeRequest:create","mergeRequest:close","mergeRequest:merge","mergeRequestReviewer:create","mergeRequestReviewer:review"].includes(e.type)&&(e.url=[a.group,a.repository,"mergerequests",a.number].join("/")),!0}(e,a.props.intl)})),a.setState({pending:!1,list:[].concat(Object(T.a)(a.state.list),Object(T.a)(e.data)),loadMore:e.data.length===s}))}))}},{key:"reloadUserData",value:function(){var e=this;te.getUserInfo().then(ne.withEventdispatcher(this.props.dispatchEvent)(ne.getJSONData)).then((function(t){t.code||e.props.dispatchEvent({type:"data.currentUserInfo.update",data:t.data})}))}},{key:"setNotificationRead",value:function(e){var t=this,a=this.props,r=a.dispatchEvent,i=a.intl,n=this.state.list;if(this.state.pending)return!1;this.setState({menuAnchor:null,pending:!0}),te.setNotificationRead({id:e,all:e?"":"1"}).then(ne.withEventdispatcher(r)(ne.getJSONData)).then((function(a){n.map((function(t,a){return e?e&&t.id===e&&(t.isRead=!0):t.isRead=!0,!0})),t.setState({pending:!1,list:n}),t.reloadUserData(),a.code&&r(ae.NewNotification(i.formatMessage({id:"message.error.updateFail"}),2))}))}},{key:"deleteNotification",value:function(e){var t=this,a=this.props,r=a.dispatchEvent,i=a.intl,n=this.state.list;if(this.state.pending)return!1;this.setState({menuAnchor:null,pending:!0}),te.deleteNotification({id:e,all:e?"":"1"}).then(ne.withEventdispatcher(r)(ne.getJSONData)).then((function(a){n=n.filter((function(a,r){return e?(a.id===e&&!a.isRead&&t.reloadUserData(),a.id!==e):!a.isRead})),t.setState({pending:!1,list:n}),a.code&&r(ae.NewNotification(i.formatMessage({id:"message.error.deleteFail"}),2))}))}},{key:"aLink",value:function(e){var t=this.props.history;this.props.notificationOpenStatusClose(),!e.isRead&&this.setNotificationRead(e.id),t.push(W(e.url))}},{key:"notificationSetting",value:function(){this.props.notificationOpenStatusClose(),this.props.history.push(W("settings/notification"))}},{key:"render",value:function(){var e=this,t=this.props,a=t.notificationOpenStatus,r=t.notificationOpenStatusClose,i=t.classes,n=t.intl,s=this.state,o=s.pending,c=s.menuAnchor,l=s.category,p=s.list,d=s.page,u=s.loadMore,m=[];return m[D.notificationCategory.all]=n.formatMessage({id:"label.all"}),m[D.notificationCategory.unRead]=n.formatMessage({id:"label.unread"}),Object(oe.jsxs)(wi.a,{anchor:"right",open:a,onClose:function(e){return!o&&r()},className:i.notification,elevation:8,PaperProps:{className:i.paper,onScroll:function(t){return!o&&u&&t.target.offsetHeight-2+t.target.scrollTop===t.target.scrollHeight&&e.setState({page:d+1})}},children:[Object(oe.jsxs)(k.a,{container:!0,className:i.header,children:[Object(oe.jsxs)(k.a,{container:!0,className:i.headerTitle,children:[Object(oe.jsx)(k.a,{item:!0,xs:8,children:Object(oe.jsx)(w.a,{variant:"h6",component:"div",children:n.formatMessage({id:"label.notificationCenter"})})}),Object(oe.jsxs)(k.a,{item:!0,xs:4,align:"right",children:[Object(oe.jsx)(Ie,{label:"label.setting",icon:je.gb,className:i.icon,onClick:function(t){return e.notificationSetting()}}),Object(oe.jsx)(Ie,{label:"label.close",icon:je.g,className:[i.icon,i.close].join(" "),onClick:function(e){return!o&&r()}})]})]}),Object(oe.jsx)(k.a,{item:!0,xs:12,className:i.menu,children:Object(oe.jsxs)(ft,{currentTab:l,onChange:function(t,a){return!o&&e.setState({category:a})},tabs:m,children:[Object(oe.jsx)(Ie,{label:"label.more",icon:je.cb,className:[i.icon,i.more].join(" "),onClick:function(t){return e.setState({menuAnchor:t.target})}}),Object(oe.jsxs)(ot.a,{anchorEl:c,open:!!c,onClose:function(t){return e.setState({menuAnchor:null})},transitionDuration:0,children:[Object(oe.jsx)(lt.a,{onClick:function(t){return e.setNotificationRead("")},children:n.formatMessage({id:"message.tagAllRead"})}),Object(oe.jsx)(lt.a,{onClick:function(t){return e.deleteNotification("")},children:n.formatMessage({id:"message.deleteAllReaded"})})]})]})})]}),Object(oe.jsxs)(k.a,{container:!0,children:[p.map((function(t,a){return Object(oe.jsxs)(k.a,{item:!0,xs:12,className:[i.notify,t.isRead?i.readed:""].join(" "),onClick:function(a){return!t.isRead&&e.setNotificationRead(t.id)},children:[Object(oe.jsxs)(k.a,{container:!0,children:[Object(oe.jsx)(k.a,{item:!0,xs:8,children:Object(oe.jsxs)(w.a,{variant:"body2",component:"div",className:i.notifiTitle,children:["\xa0\xb7\xa0",t.data.group&&t.data.group+" / ",t.data.repository]})}),Object(oe.jsxs)(k.a,{item:!0,xs:4,className:i.notifySetting,align:"right",children:[!t.isRead&&Object(oe.jsx)(Ie,{label:"message.tagRead",icon:je.e,className:i.icon}),Object(oe.jsx)(Ie,{label:"label.delete",icon:je.ib,className:i.icon,onClick:function(a){e.deleteNotification(t.id),a.stopPropagation()}})]})]}),Object(oe.jsx)(w.a,{variant:t.isRead?"body2":"subtitle2",component:"div",className:i.notifiContent,onClick:function(a){e.aLink(t),a.stopPropagation()},children:t.text}),Object(oe.jsx)(w.a,{component:"div",className:i.notifiTitle,children:Object(oe.jsx)(Nt,{timestamp:1*t.created})})]},a)})),u?Object(oe.jsx)(k.a,{container:!0,className:i.loading,children:o&&Object(oe.jsx)(he.a,{size:30})}):Object(oe.jsx)(k.a,{item:!0,xs:12,align:"center",className:i.loading,children:Object(oe.jsx)(_.a,{size:"small",disabled:!0,children:n.formatMessage({id:"label.noMore"})})})]})]})}}]),a}(i.a.Component),qi=Object(R.b)(Object(C.a)((function(e){return{notification:{"& > div:first-child":{background:"transparent"}},paper:{padding:0,top:e.spacing(8),boxSizing:"border-box",width:e.spacing(50),height:"calc(100% - 64px)",background:e.palette.background.light,border:"1px solid "+e.palette.border},header:{top:0,zIndex:1,position:"sticky",background:e.palette.background.light},headerTitle:{display:"flex",alignItems:"center",height:e.spacing(6)+"px",padding:"0px "+e.spacing(3)+"px",borderBottom:"1px solid "+e.palette.border},close:{"& svg":{width:"14px !important",height:"14px !important",padding:"2px"}},icon:{color:e.palette.text.light},more:{marginTop:e.spacing(.5)},menu:{padding:"0px "+e.spacing(3)+"px",borderBottom:"1px solid "+e.palette.border},notifySetting:{display:"none"},notify:{"&:hover":{background:e.palette.background.main,"& > div:first-child > div:nth-of-type(2)":{display:"block"}},padding:e.spacing(2)+"px "+e.spacing(3)+"px",borderBottom:"1px solid "+e.palette.border},notifiTitle:{lineHeight:e.spacing(4)+"px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > span":{fontSize:"12px"}},readed:{"& div, & span":{color:e.palette.text.lighter+"!important"}},notifiContent:{cursor:"pointer",lineHeight:e.spacing(2.5)+"px",maxHeight:e.spacing(5),overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box","-webkit-line-clamp":2,"-webkit-box-orient":"vertical"},loading:{justifyContent:"center",padding:e.spacing(4)+"px"}}}))(Object(l.b)((function(e){return{notificationOpenStatus:e.NotificationStates.notificationOpenStatus}}),(function(e,t){return{dispatchEvent:function(t){e(t)},notificationOpenStatusClose:function(){return e({type:"notification.notificationOpenStatus.close"})}}}))(Object(h.f)(Hi)))),zi=a(299),Wi=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this)).messageLists=[],e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.messageLists=[]}},{key:"addMessage",value:function(e){var t=this;if(e.message){var a=this.messageLists.length;this.messageLists.push(Object(y.a)(Object(y.a)({},e),{},{openStatus:!0})),setTimeout((function(){t.closeMessage(a)}),5e3)}}},{key:"closeMessage",value:function(e){var t=this;this.messageLists[e].openStatus=!1,this.props.dispatchEvent({type:"notification.message.change"}),setTimeout((function(){t.messageLists.reduce((function(e,t){return e||t.openStatus}),!1)||(t.messageLists=[])}),200)}},{key:"shouldComponentUpdate",value:function(e,t){return e.notificationBody!==this.props.notificationBody}},{key:"render",value:function(){var e=this,t=this.props.notificationBody;this.addMessage(t);var a=0;return this.messageLists.map((function(t,r){return a+=t.openStatus?1:0,Object(oe.jsx)(zi.a,{level:t.level,offset:a>0?a-1:0,open:t.openStatus,onClose:function(t,a){return"timeout"===a&&e.closeMessage(r)},action:t.action,message:t.message},r)}))}}]),a}(i.a.Component),Vi=Object(l.b)((function(e,t){return{notificationBody:e.NotificationStates.notificationBody}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(Wi),Ji=Object(y.a)({__namespace__:"lang"},{chinese:"\u7b80\u4f53\u4e2d\u6587",english:"English"}),Ki=Object(y.a)(Object(y.a)({},{Added:"\u5df2\u6dfb\u52a0",created:"\u5df2\u521b\u5efa",updated:"\u5df2\u66f4\u65b0",removed:"\u5df2\u79fb\u9664",deleted:"\u5df2\u5220\u9664",copied:"\u5df2\u62f7\u8d1d",merged:"\u5df2\u5408\u5e76",opened:"\u5df2\u6253\u5f00",closed:"\u5df2\u5173\u95ed",binded:"\u5df2\u7ed1\u5b9a",unbinded:"\u5df2\u89e3\u7ed1",verified:"\u5df2\u9a8c\u8bc1",approved:"\u5df2\u8bc4\u5ba1",enabled:"\u5df2\u6062\u590d",disabled:"\u5df2\u7981\u7528",reseted:"\u5df2\u91cd\u7f6e",createPersonalGroupNotice:"\u81f3\u5c11\u9700\u8981\u521b\u5efa\u4e00\u4e2a\u4ed3\u5e93\u7ec4\u4f5c\u4e3a\u4e2a\u4eba\u4ed3\u5e93\u7ec4",emailCodeHasSendNewEmail:"\u9a8c\u8bc1\u7801\u5df2\u7ecf\u53d1\u9001\u81f3\u65b0\u7684\u90ae\u7bb1",phoneCodeHasSendNewPhone:"\u9a8c\u8bc1\u7801\u5df2\u7ecf\u53d1\u9001\u81f3\u65b0\u7684\u624b\u673a",finishIdentityVerify:"\u524d\u8bf7\u8f93\u5165\u60a8\u7684\u8d26\u53f7\u5bc6\u7801\u4ee5\u5b8c\u6210\u8eab\u4efd\u9a8c\u8bc1",unbindEnterCodeFeverPassword:"\u82e5\u786e\u8ba4\uff0c\u8bf7\u8f93\u5165\u60a8\u7684CodeFever\u8d26\u53f7\u5bc6\u7801\u4ee5\u9a8c\u8bc1\u8eab\u4efd",scanQrcodeBind:"\u8bf7\u4f7f\u7528\u5fae\u4fe1\u626b\u63cf\u4e8c\u7ef4\u7801\u5b8c\u6210\u7ed1\u5b9a",theAccountUsedWechat_N:'\u8be5\u8d26\u53f7\u66fe\u4f7f\u7528\u5fae\u4fe1"{n}"\u4e0e\u84b2\u516c\u82f1\u65d7\u4e0b\u4ea7\u54c1\u5c0f\u7a0b\u5e8f\u7ed1\u5b9a\uff0c\u786e\u8ba4\u4f7f\u7528\u5f53\u524d\u5fae\u4fe1\u8d26\u53f7\u66ff\u6362"{n}"\u7684\u7ed1\u5b9a\u5417?',rebindWechat:"\u53d6\u6d88\uff0c\u66f4\u6362\u5fae\u4fe1\u540e\u91cd\u65b0\u7ed1\u5b9a",unbindAllProduct:"\u89e3\u9664\u7ed1\u5b9a\uff0c\u60a8\u5c06\u540c\u65f6\u89e3\u7ed1\u84b2\u516c\u82f1\u65d7\u4e0b\u6240\u6709\u4ea7\u54c1",mfaGuide:"\u6253\u5f00\u5177\u6709 MFA \u529f\u80fd\u7684 App \u5e76\u626b\u63cf\u4e0b\u65b9\u4e8c\u7ef4\u7801\uff0c\u8f93\u5165 App \u4e0a\u7684\u663e\u793a\u7684\u4e24\u7ec4\u4e0d\u540c\u7684 MFA \u5bc6\u7801\u5e76\u70b9\u51fb \u4fdd\u5b58 \u6309\u94ae\u5b8c\u6210 MFA \u8bbe\u5907\u8bbe\u7f6e\u3002\u4f60\u53ef\u4ee5\u5728\u4efb\u4f55\u624b\u673a\u5e94\u7528\u5e02\u573a\u641c\u7d22 MFA \u4e0b\u8f7d\u4f60\u4fe1\u4efb\u7684 App\u3002",inputEmailToAddMemeber:"\u8f93\u5165\u7528\u6237\u7684\u6ce8\u518c\u90ae\u7bb1\u4ee5\u6dfb\u52a0\u4e3a\u6210\u5458",groupMemberCanControlRepositoryNotice:"\u6b64\u4ed3\u5e93\u6240\u5728\u4ed3\u5e93\u7ec4\u7684\u6210\u5458\u5bf9\u4e8e\u6b64\u4ed3\u5e93\u7684\u63a7\u5236\u6743\u7531\u5176\u4ed3\u5e93\u7ec4\u89d2\u8272\u51b3\u5b9a",repositoryChangeCreatorNotice:"\u60a8\u786e\u5b9a\u9700\u8981\u66f4\u6362\u6b64\u4ed3\u5e93\u521b\u5efa\u8005\u5417 ? \u65b0\u7684\u521b\u5efa\u7740\u5c06\u62e5\u6709\u4ed3\u5e93\u6240\u6709\u7ba1\u7406\u6743\u9650, \u4e14\u66fe\u7ecf\u7684\u521b\u5efa\u8005\u5c06\u4f1a\u62e5\u6709 \u6240\u6709\u8005 \u89d2\u8272",repositoryChangeURLNotice:"\u60a8\u786e\u5b9a\u9700\u8981\u66f4\u6539\u6b64\u4ed3\u5e93 URL \u5417 ? URL \u66f4\u6539\u540e\uff0c\u4e0d\u80fd\u518d\u4f7f\u7528\u539f URL \u7ba1\u7406\u4ed3\u5e93, git \u5ba2\u6237\u7aef\u4f7f\u7528\u7684\u4ed3\u5e93\u5730\u5740\u4e5f\u4f1a\u540c\u6b65\u53d8\u66f4, \u60a8\u9700\u8981\u4f7f\u7528 git remote \u547d\u4ee4\u91cd\u65b0\u8bbe\u7f6e\u4ed3\u5e93\u5730\u5740",repositoryDeleteRepositoryNotice:"\u60a8\u786e\u5b9a\u8981\u5220\u9664\u6b64\u4ed3\u5e93\u5417 ? \u4ed3\u5e93\u5220\u9664\u540e\u6b64\u4ed3\u5e93\u4e0d\u518d\u53ef\u7528, \u4ed3\u5e93\u5185\u7684 \u6587\u4ef6 \u548c \u76f8\u5173\u8bb0\u5f55 \u90fd\u4f1a\u4e0d\u53ef\u9006\u7684\u88ab\u5220\u9664, \u8bf7\u786e\u8ba4\u9700\u8981\u4fdd\u7559\u7684\u6587\u4ef6\u5df2\u7ecf\u5907\u4efd\u5b8c\u6210, \u70b9\u51fb \u53d6\u6d88 \u6309\u94ae\u53ef\u4ee5\u53d6\u6d88\u64cd\u4f5c\u3002",repositoryDeleteRepositoryConfirmNotice:"\u9700\u8981\u60a8\u518d\u6b21\u786e\u8ba4\u5220\u9664\u6b64\u4ed3\u5e93 ? \u6b64\u4ed3\u5e93\u5220\u9664\u540e, \u6240\u6709\u4fe1\u606f\u548c\u6587\u4ef6\u90fd\u4f1a\u88ab\u4e0d\u53ef\u9006\u5220\u9664, \u6b64\u64cd\u4f5c\u9020\u6210\u7684\u540e\u679c\u4e0d\u53ef\u6062\u590d, \u8bf7\u786e\u8ba4\u9700\u8981\u4fdd\u7559\u7684\u6587\u4ef6\u5df2\u7ecf\u5907\u4efd\u5b8c\u6210, \u70b9\u51fb \u53d6\u6d88 \u6309\u94ae\u53ef\u4ee5\u53d6\u6d88\u6b64\u64cd\u4f5c\u3002",groupChangeCreatorNotice:"\u60a8\u786e\u5b9a\u9700\u8981\u66f4\u6362\u6b64\u4ed3\u5e93\u7ec4\u521b\u5efa\u8005\u5417 ? \u65b0\u7684\u521b\u5efa\u7740\u5c06\u62e5\u6709\u4ed3\u5e93\u7ec4\u6240\u6709\u7ba1\u7406\u6743\u9650, \u4e14\u66fe\u7ecf\u7684\u521b\u5efa\u8005\u5c06\u4f1a\u62e5\u6709 \u6240\u6709\u8005 \u89d2\u8272, \u6ce8\u610f\u4e2a\u4eba\u9ed8\u8ba4\u4ed3\u5e93\u7ec4\u4e0d\u80fd\u66f4\u6539\u521b\u5efa\u8005",groupChangeURLNotice:"\u60a8\u786e\u5b9a\u9700\u8981\u66f4\u6539\u6b64\u4ed3\u5e93\u7ec4 URL \u5417 ? URL \u66f4\u6539\u540e\uff0c\u4e0d\u80fd\u518d\u4f7f\u7528\u539f URL \u7ba1\u7406\u4ed3\u5e93\u7ec4, git \u5ba2\u6237\u7aef\u4f7f\u7528\u7684\u7ec4\u5185\u4ed3\u5e93\u5730\u5740\u4e5f\u4f1a\u540c\u6b65\u53d8\u66f4, \u60a8\u9700\u8981\u4f7f\u7528 git remote \u547d\u4ee4\u91cd\u65b0\u8bbe\u7f6e\u4ed3\u5e93\u5730\u5740",groupDeleteRepositoryNotice:"\u60a8\u786e\u5b9a\u8981\u5220\u9664\u6b64\u4ed3\u5e93\u7ec4\u5417 ? \u4ed3\u5e93\u7ec4\u5220\u9664\u540e\u4e0d\u518d\u53ef\u7528, \u4ed3\u5e93\u7ec4\u5185\u7684 \u76f8\u5173\u8bb0\u5f55 \u90fd\u4f1a\u4e0d\u53ef\u9006\u7684\u88ab\u5220\u9664, \u5728\u5220\u9664\u6b64\u4ed3\u5e93\u7ec4\u524d\u8bf7\u624b\u52a8\u5220\u9664\u7ec4\u5185\u6240\u6709\u4ed3\u5e93, \u70b9\u51fb \u53d6\u6d88 \u6309\u94ae\u53ef\u4ee5\u53d6\u6d88\u64cd\u4f5c\u3002",groupDeleteRepositoryConfirmNotice:"\u9700\u8981\u60a8\u518d\u6b21\u786e\u8ba4\u5220\u9664\u6b64\u4ed3\u5e93\u7ec4 ? \u6b64\u4ed3\u5e93\u7ec4\u5220\u9664\u540e, \u6240\u6709\u4fe1\u606f\u90fd\u4f1a\u88ab\u4e0d\u53ef\u9006\u5220\u9664, \u6b64\u64cd\u4f5c\u9020\u6210\u7684\u540e\u679c\u4e0d\u53ef\u6062\u590d, \u5728\u5220\u9664\u6b64\u4ed3\u5e93\u7ec4\u524d\u8bf7\u624b\u52a8\u5220\u9664\u7ec4\u5185\u6240\u6709\u4ed3\u5e93, \u70b9\u51fb \u53d6\u6d88 \u6309\u94ae\u53ef\u4ee5\u53d6\u6d88\u6b64\u64cd\u4f5c\u3002",inputCommitFilter:"\u8f93\u5165\u63d0\u4ea4\u4fe1\u606f\u8fc7\u6ee4",repositoryEmpty:"\u4ed3\u5e93\u4e3a\u7a7a",displaySource:"\u5c55\u793a\u6e90\u7801",displayRendereFile:"\u5c55\u793a\u6e32\u67d3\u5185\u5bb9",fileContentEmpty:"\u6587\u4ef6\u5185\u5bb9\u4e3a\u7a7a",fileContentOversize:"\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc7\u5141\u8bb8\u5c55\u793a\u7684\u6700\u5927\u9650\u5ea6, \u8bf7\u5728\u672c\u5730\u67e5\u770b",fileTypeNotSupport:"\u6682\u4e0d\u652f\u6301\u4e8c\u8fdb\u5236\u6587\u4ef6\u7684\u5c55\u793a",diffFileToMany:"\u8d85\u8fc7\u5141\u8bb8\u5c55\u793a\u7684\u6700\u5927\u6587\u4ef6\u6570\u91cf, \u8bf7\u5728\u672c\u5730\u67e5\u770b",createNewRepository:"\u5728\u547d\u4ee4\u884c\u521b\u5efa\u4e00\u4e2a\u65b0\u4ed3\u5e93",pushRepository:"\u5728\u547d\u4ee4\u884c push \u4e00\u4e2a\u5df2\u5b58\u5728\u7684\u4ed3\u5e93",_S_empty:"\u8bf7\u8f93\u5165{s}",repository_S_empty:"\u4ed3\u5e93\u5185\u8fd8\u6ca1\u6709{s}",repositoryBranchEmpty:"Git\u5206\u652f\uff0c\u672c\u8d28\u4e0a\u662f\u6307\u5411\u63d0\u4ea4\u5bf9\u8c61\u7684\u53ef\u53d8\u6307\u9488\u3002\u4f7f\u7528 git \u547d\u4ee4\u521b\u5efa\u5206\u652f\uff1a 'git branch \u65b0\u5206\u652f\u540d\u79f0 \u65e7\u5206\u652f\u540d\u79f0'",repositoryTagEmpty:"\u6807\u7b7e\u662f\u67d0\u4e00\u65f6\u95f4\u70b9\u4e0a\u7684\u7248\u672c\uff0c\u901a\u5e38\u4f7f\u7528\u6807\u7b7e\u6807\u8bc6\u4ee3\u7801\u5e93\u7684\u91cd\u8981\u7248\u672c\uff0c\u5982\u5728\u9879\u76ee\u7684\u91cc\u7a0b\u7891\u521b\u5efa\u6807\u7b7e\u3002\u4e5f\u53ef\u4ee5\u4f7f\u7528 git \u547d\u4ee4\u521b\u5efa\u6807\u7b7e\uff1agit tag -a v1.0 -m '\u7248\u672c 1.0'",mergeRequestEmpty:"\u672a\u627e\u5230\u76f8\u5173\u5408\u5e76\u8bf7\u6c42\u8bb0\u5f55",addNewCommit:"\u65b0\u589e\u4e00\u4e2a\u63d0\u4ea4",alreadyMergeRequest:"\u5df2\u7ecf\u5408\u5e76\u8bf7\u6c42",alreadyCloseRequest:"\u5df2\u7ecf\u5173\u95ed\u8bf7\u6c42",assignReviewerTitle:"\u6307\u5b9a\u8bc4\u5ba1\u5458\uff08\u53ea\u80fd\u6307\u5b9a1\u4eba\uff09",selectReviewer:"\u9009\u62e9\u8bc4\u5ba1\u5458",notSelectReviewers:"\u672a\u6307\u5b9a\u8bc4\u5ba1\u5458",deleteReviewer:"\u6e05\u9664\u8bc4\u5ba1\u5458",notApprove:"\u672a\u8bc4\u5ba1",assign_N_M_Reviewer:"\u6307\u5b9a {n} \u4e3a\u548c\u5e76\u8bf7\u6c42 {m} \u7684\u8bc4\u5ba1\u5458",delete_M_N_Reviewer:"\u5220\u9664\u4e86\u548c\u5e76\u8bf7\u6c42 {m} \u7684\u8bc4\u5ba1\u5458 {n}",review_M_Reviewer:"\u8bc4\u5ba1\u4e86\u548c\u5e76\u8bf7\u6c42 {m} \u7684\u4ee3\u7801",_S_listEmpty:"{s}\u5217\u8868\u4e3a\u7a7a",repositoryListEmptyNotice:"\u521b\u5efa\u4e00\u4e2a\u4ed3\u5e93, \u5f00\u59cb\u4f53\u9a8c\u5427",groupListEmptyNotice:"\u521b\u5efa\u4e00\u4e2a\u4ed3\u5e93\u7ec4, \u7ec4\u7ec7\u5e76\u7ba1\u7406\u7ec4\u5185\u4ed3\u5e93",input_S_name:"\u8f93\u5165{s}\u540d\u8fc7\u6ee4",confirmDelete:"\u786e\u8ba4\u5220\u9664{s}?",jumpWithLink:"\u8df3\u8f6c\u94fe\u63a5",noRepositoryFind:"\u6ca1\u6709\u67e5\u770b\u6743\u9650",noCommitRecord:"\u6682\u65e0\u63d0\u4ea4\u8bb0\u5f55",plsInputInvitedEmail:"\u8bf7\u8f93\u5165\u88ab\u9080\u8bf7\u4eba\u90ae\u7bb1",repositoryDeleteTipFirst:"\u5220\u9664\u9879\u76ee\u5c06\u5220\u9664\u5176\u5b58\u50a8\u5e93\u548c\u6240\u6709\u76f8\u5173\u8d44\u6e90\uff0c\u5305\u62ec\u95ee\u9898\u3001\u5408\u5e76\u8bf7\u6c42\u7b49",repositoryDeleteTipSecond:"\u65e0\u6cd5\u8fd8\u539f\u5df2\u5220\u9664\u7684\u9879\u76ee!",inputMergeCommit:"\u8bf7\u8f93\u5165\u5408\u5e76\u7684\u63d0\u4ea4\u4fe1\u606f, \u5e76\u6839\u636e\u60c5\u51b5\u52fe\u9009\u662f\u5426\u4f7f\u7528squash\u529f\u80fd",selectDifferentBranch:"\u5fc5\u987b\u9009\u62e9\u4e0d\u540c\u7684\u5206\u652f\u8fdb\u884c\u5408\u5e76",mergeConflictTitle:"\u4f60\u8981\u5408\u5e76\u7684\u4e24\u4e2a\u5206\u652f\u6709\u4ee3\u7801\u51b2\u7a81\uff0c\u8bf7\u6839\u636e\u4e0b\u9762\u7684\u547d\u4ee4\u5728\u672c\u5730\u8fdb\u884c\u5408\u5e76",mergeConflictTip1:"\u7b2c\u4e00\u6b65:\u62c9\u53d6\u4ee3\u7801\u5e76\u65b0\u5efa\u5408\u5e76\u8bf7\u6c42\u7684\u5206\u652f",mergeConflictTip2:"\u7b2c\u4e8c\u6b65:\u672c\u5730\u68c0\u67e5\u4ee3\u7801\u66f4\u6539",mergeConflictTip3:"\u7b2c\u4e09\u6b65:\u5408\u5e76\u5206\u652f\u5e76\u89e3\u51b3\u51b2\u7a81",mergeConflictTip4:"\u7b2c\u56db\u6b65:\u5c06\u4ee3\u7801\u63a8\u9001\u5230codeForge\u5e73\u53f0",from_S_Merge_S:"\u4ece {s1} \u8bf7\u6c42\u5408\u5e76\u5230 {s2}",defaultGroupReqiured:"\u9700\u8981\u9ed8\u8ba4\u4ed3\u5e93\u7ec4",defaultGroupReqiuredDescription:"\u60a8\u9700\u8981\u81f3\u5c11\u521b\u5efa\u4e00\u4e2a\u4ed3\u5e93\u7ec4\u7528\u4e8e\u5b58\u653e\u4ed3\u5e93",someVersion:"\u76f8\u5173\u7248\u672c",backHome:"\u56de\u5230\u9996\u9875",inputSSHKEYContent:"\u8bf7\u8f93\u5165 SSH Key \u5185\u5bb9",inputSSHKEYName:"\u8bf7\u8f93\u5165 SSH Key \u540d\u79f0",defaultBranchDescription:"\u9ed8\u8ba4\u5206\u652f\u88ab\u89c6\u4e3a\u4ee3\u7801\u5e93\u4e2d\u7684\u57fa\u672c\u5206\u652f, \u662f\u6240\u6709\u514b\u9686\u3001\u4ee3\u7801\u63d0\u4ea4\u548c\u5408\u5e76\u8bf7\u6c42\u7684\u76ee\u6807\u5206\u652f",settingToDefaultBranch:"\u8bbe\u7f6e\u4e3a\u9ed8\u8ba4\u5206\u652f",updateDefaultBranch:"\u4fee\u6539\u9ed8\u8ba4\u5206\u652f",settingDefaultBranch:"\u8bf7\u8bbe\u7f6e\u9ed8\u8ba4\u5206\u652f",protectedBranchDescription:"\u4fdd\u62a4\u5206\u652f\u4f1a\u4fdd\u969c\u5206\u652f\u5b89\u5168\u6027, \u4e0d\u5141\u8bb8\u9664\u6240\u6709\u8005\u4ee5\u5916\u89d2\u8272\u8fdb\u884c\u5f3a\u5236\u63a8\u9001\u53ca\u5220\u9664",protectedBranchRuleEmpty:"\u76ee\u524d\u65e0\u4fdd\u62a4\u5206\u652f\u89c4\u5219, \u8bf7\u65b0\u5efa\u4fdd\u62a4\u5206\u652f\u89c4\u5219, \u4fdd\u62a4\u5206\u652f\u5b89\u5168",inputBranchOrRegexp:"\u8bf7\u8f93\u5165\u5206\u652f\u540d\u79f0\u6216\u901a\u7528\u7b26\u89c4\u5219",createProtectedBranchRule:"\u65b0\u5efa\u4fdd\u62a4\u5206\u652f\u89c4\u5219",updateProtectedBranchRule:"\u4fee\u6539\u4fdd\u62a4\u5206\u652f\u89c4\u5219",deleteProtectedBranchRule:"\u5220\u9664\u4fdd\u62a4\u5206\u652f\u89c4\u5219",noBodyAllow:"\u4e0d\u5141\u8bb8\u4efb\u4f55\u4eba",primaryEmail:"\u4e3b\u90ae\u7bb1\u5730\u5740",primaryEmailDescription:"\u5f53\u524d CodeFever \u8d26\u53f7\u7684\u90ae\u7bb1\u5730\u5740, \u7528\u4e8e\u63a5\u6536\u76f8\u5173\u901a\u77e5, \u5bc6\u7801\u91cd\u7f6e, \u767b\u5f55\u7b49\u64cd\u4f5c",updatePrimaryEmail:"\u66f4\u6539\u4e3b\u90ae\u7bb1\u5730\u5740",myEmail:"\u6211\u7684\u90ae\u7bb1\u5730\u5740",myEmailDescription:"\u591a\u90ae\u7bb1\u529f\u80fd\u7528\u4e8e\u540c\u4e00\u7528\u6237\u6709\u591a\u4e2a\u4e0d\u540c\u90ae\u7bb1\u7528\u4e8e\u63d0\u4ea4\u4ee3\u7801, \u7cfb\u7edf\u53ef\u8bc6\u522b\u5e76\u521b\u5efa\u5173\u8054\u5173\u7cfb",addEmail:"\u65b0\u5efa\u90ae\u7bb1\u5730\u5740",contactedEmail:"\u5df2\u5173\u8054\u90ae\u7bb1",shouldValidation:"\u5f85\u9a8c\u8bc1",resendEmail:"\u91cd\u53d1\u90ae\u4ef6",differenceBetweenHTTPSAndSSH:"HTTPS \u4e0e SSH \u6709\u4ec0\u4e48\u533a\u522b ?",generateAndSetSSHKey:"\u8bf7\u786e\u8ba4\u5ba2\u6237\u7aef\u7684 SSH Key \u5df2\u7ecf\u751f\u6210\u5e76\u4e14\u5728 CodeFever \u4e0a\u6b63\u786e\u8bbe\u7f6e\u3002",itsMyEmail:"\u8fd9\u662f\u6211\u7684\u90ae\u7bb1",notificationSystem:"\u7cfb\u7edf\u6d88\u606f",notificationMention:"\u63d0\u5230\u6211\u7684",tagRead:"\u6807\u8bb0\u4e3a\u5df2\u8bfb",tagAllRead:"\u6807\u8bb0\u6240\u6709\u4e3a\u5df2\u8bfb",deleteAllReaded:"\u5220\u9664\u6240\u6709\u5df2\u8bfb\u7528\u6237\u6d88\u606f",mergeRequestNotification:"\u5408\u5e76\u8bf7\u6c42\u901a\u77e5",mergeRequestNotificationDesc:"\u53ef\u63a5\u6536\u4ed3\u5e93\u6210\u5458\u53d1\u5e03\u7684\u548c\u5e76\u8bf7\u6c42\u901a\u77e5, \u5f00\u53d1\u8005\u53ca\u4ee5\u4e0a\u6210\u5458\u53ef\u63a5\u6536",emailNotification:"\u90ae\u4ef6\u901a\u77e5",emailNotificationDesc:"\u901a\u77e5\u8bbe\u7f6e\u4e2d\u7684\u6d88\u606f\u5c06\u53d1\u9001\u5230\u60a8\u7684\u6ce8\u518c\u90ae\u7bb1\u4e2d\u3002",searchByName:"\u67e5\u627e\u59d3\u540d\u6216\u90ae\u7bb1",userStatusEnabled:"\u6062\u590d\u786e\u8ba4",userStatusDisabled:"\u7981\u7528\u786e\u8ba4",userStatusEnabled_N:'\u786e\u8ba4\u6062\u590d\u7528\u6237 "{n}" ?',userStatusDisabled_N:'\u786e\u8ba4\u7981\u7528\u7528\u6237 "{n}" ?',closeMFA:"\u5173\u95ed2FA\u8ba4\u8bc1",closeMFAConfirm:"\u5173\u95ed2FA\u8ba4\u8bc1\u786e\u8ba4",closeMFA_N:'\u786e\u8ba4\u5173\u95ed\u7528\u6237 "{n}" 2FA\u8ba4\u8bc1?',resetPassword:"\u91cd\u7f6e\u5bc6\u7801",reset_N_Password:'\u91cd\u7f6e\u7528\u6237 "{n}" \u5bc6\u7801',searchRepository:"\u67e5\u627e\u4ed3\u5e93",searchGroup:"\u67e5\u627e\u4ed3\u5e93\u7ec4",roleToOwner:"\u6307\u5b9a\u4e3a\u6240\u6709\u8005",setGroupOwner_S:"\u786e\u5b9a\u6307\u5b9a {s} \u4e3a\u4ed3\u5e93\u7ec4\u7684\u6240\u6709\u8005?",setAdministrator:"\u8bbe\u7f6e\u4e3a\u7ba1\u7406\u5458",cancelAdministrator:"\u53d6\u6d88\u7ba1\u7406\u5458",memberRemoveConfirm:"\u6210\u5458\u5220\u9664\u786e\u8ba4",successAddUser:"\u6dfb\u52a0\u7528\u6237\u6210\u529f",webhookEventsNeed:"\u8bf7\u9009\u62e9\u63a8\u9001\u4e8b\u4ef6",webhookListEmpty:"\u8fd8\u6ca1\u6709\u521b\u5efaWebhook",useTime_n:"\u7528\u65f6 {n} s",show_n_record:"\u663e\u793a\u6700\u65b0{n}\u6761\u8bb0\u5f55"}),{},{__namespace__:"message"}),$i=Object(y.a)(Object(y.a)({},{_S_empty:"\u8bf7\u8f93\u5165{s}",_S_retype:"\u8bf7\u518d\u6b21\u8f93\u5165{s}",_S_has_illegal_character:"{s}\u542b\u6709\u975e\u6cd5\u5b57\u7b26(\u53ea\u652f\u6301\u5b57\u6bcd\u3001\u6570\u5b57\u3001\u4e0b\u5212\u7ebf(_)\u3001\u4e2d\u5212\u7ebf(-)\u548c\u70b9(.)\u7684\u7ec4\u5408)",_S_notChoose:"\u8bf7\u9009\u62e9{s}",_S_duplicate:"{s}\u91cd\u590d",_S_invalid:"{s}\u4e0d\u6b63\u786e",_S_notFound:"\u6ca1\u6709\u627e\u5230\u6b64{s}",noMoreThan_N_characters:"\u4e0d\u80fd\u8d85\u8fc7{n}\u4e2a\u5b57\u7b26",within_N1_to_N2_characters:"\u9700\u8981\u5728{n1}\u81f3{n2}\u4e2a\u5b57\u7b26\u4e4b\u95f4",only_N1_or_N2_characters:"\u53ea\u80fd\u5305\u542b{n1}\u6216{n2}\u4e2a\u5b57\u7b26",requireCombinationOfCharactersNumbersAndUnderscore:"\u53ea\u80fd\u662f\u5b57\u6bcd\u3001\u6570\u5b57\u548c\u4e0b\u5212\u7ebf\u7684\u7ec4\u5408",input_S_placeholder:"\u8bf7\u8f93\u5165{s}\uff0c\u53ea\u652f\u6301\u5b57\u6bcd\u3001\u6570\u5b57\u3001\u4e0b\u5212\u7ebf(_)\u3001\u4e2d\u5212\u7ebf(-)\u548c\u70b9(.)\u7684\u7ec4\u5408",inputNotSame:"\u4e24\u6b21\u8f93\u5165\u4e0d\u4e00\u81f4",inputSame:"\u4e24\u6b21\u8f93\u5165\u4e00\u81f4",canNotAddCreatorAsMember:"\u521b\u5efa\u8005\u4e0d\u80fd\u5f53\u4f5c\u6210\u5458\u6dfb\u52a0",createRepositoryFail:"\u521b\u5efa\u4ed3\u5e93\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",createGroupFail:"\u521b\u5efa\u4ed3\u5e93\u7ec4\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",createBranchFail:"\u521b\u5efa\u5206\u652f\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",createTagFail:"\u521b\u5efa\u6807\u7b7e\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",createMergeRequestFail:"\u521b\u5efa\u5408\u5e76\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",createProtectedBrancheRuleFail:"\u521b\u5efa\u4fdd\u62a4\u5206\u652f\u89c4\u5219\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",AddFail:"\u6dfb\u52a0\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",updateFail:"\u66f4\u65b0\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",removeFail:"\u79fb\u9664\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",deleteFail:"\u5220\u9664\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",verifyFail:"\u9a8c\u8bc1\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",forkRepositoryFail:"Fork\u4ed3\u5e93\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",getFileFail:"\u83b7\u53d6\u5b8c\u6574\u6587\u4ef6\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",getEmailCodeFail:"\u83b7\u53d6\u90ae\u7bb1\u9a8c\u8bc1\u7801\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",getPhoneCodeFail:"\u83b7\u53d6\u624b\u673a\u9a8c\u8bc1\u7801\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",change_S_Fail:"\u4fee\u6539{s}\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",waitToRetry:"\u7f51\u7edc\u9519\u8bef\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",canNotChangeOwnerOfUserGroup:"\u4e0d\u80fd\u66f4\u6539\u4e2a\u4eba\u9ed8\u8ba4\u4ed3\u5e93\u7ec4\u7684\u521b\u5efa\u8005",canNotDeleteUserGroup:"\u4e0d\u80fd\u5220\u9664\u4e2a\u4eba\u9ed8\u8ba4\u4ed3\u5e93\u7ec4",canNotDeleteNonEmptyGroup:"\u4ed3\u5e93\u7ec4\u5185\u542b\u6709\u672a\u5220\u9664\u7684\u4ed3\u5e93, \u8bf7\u624b\u52a8\u5220\u9664\u7ec4\u5185\u4ed3\u5e93\u540e\u518d\u8bd5",mergeRequestExists:"\u5b58\u5728\u5df2\u6253\u5f00\u7684\u5408\u5e76\u8bf7\u6c42",mergeFail:"\u5408\u5e76\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",reviewedCanNotAssign:"\u4e0d\u80fd\u66ff\u6362\u8bc4\u5ba1\u8fc7\u7684\u8bc4\u5ba1\u5458",reviewedCanNotDelete:"\u4e0d\u80fd\u5220\u9664\u8bc4\u5ba1\u8fc7\u7684\u8bc4\u5ba1\u5458",branchProteced:"\u4e0d\u80fd\u5728\u4fdd\u62a4\u5206\u652f\u4e0a\u5408\u5e76",userNotReview:"\u4e0d\u80fd\u5408\u5e76\uff0c\u8fd8\u6709\u8bc4\u5ba1\u5458\u672a\u8bc4\u5ba1",inputNewEmail:"\u8bf7\u8f93\u5165\u65b0\u7684\u90ae\u7bb1",bindEmailFirst:"\u4f60\u9700\u8981\u7ed1\u5b9a\u90ae\u7bb1\u624d\u53ef\u4ee5\u7ed1\u5b9a\u7b2c\u4e09\u65b9\u5e73\u53f0",wechatHasbound:"\u8be5\u5fae\u4fe1\u53f7\u5df2\u7ecf\u88ab\u7ed1\u5b9a\uff0c\u8bf7\u626b\u7801\u767b\u5f55\u540e\u89e3\u7ed1\u91cd\u8bd5",sshKeyDuplicate:"\u6b64 SSH Key \u5df2\u7ecf\u6dfb\u52a0, \u6216\u5728\u5176\u4ed6\u7528\u6237\u4e2d"}),{},{__namespace__:"message.error"}),Zi=Object(y.a)(Object(y.a)({},{createdGroup:"\u521b\u5efa\u4ed3\u5e93\u7ec4",updateGroup_S_Avator:"\u66f4\u65b0\u4e86\u4ed3\u5e93\u7ec4 {s} \u7684\u5934\u50cf",updateGroup_S_Name:"\u66f4\u65b0\u4e86\u4ed3\u5e93\u7ec4 {s} \u7684\u540d\u79f0",updateGroup_S_Description:"\u66f4\u65b0\u4e86\u4ed3\u5e93\u7ec4 {s} \u7684\u63cf\u8ff0",addGroup_S_Memeber:"\u5411\u4ed3\u5e93\u7ec4 {s} \u6dfb\u52a0\u4e86\u6210\u5458",changeGroup_S_MemebrRole:"\u8bbe\u7f6e\u4e86\u4ed3\u5e93\u7ec4 {s} \u5185\u6210\u5458\u89d2\u8272",removeGroup_S_Memebr:"\u79fb\u9664\u4e86\u4ed3\u5e93\u7ec4 {s} \u7684\u6210\u5458",setGroup_S_Creator:"\u8bbe\u7f6e\u4e86\u4ed3\u5e93\u7ec4 {s} \u7684\u521b\u5efa\u8005",setGroup_S_URL:"\u4fee\u6539\u4e86\u4ed3\u5e93\u7ec4 {s} \u7684\u8bbf\u95ee\u5730\u5740",createdRepository:"\u521b\u5efa\u4ed3\u5e93",deleteRepository:"\u5220\u9664\u4ed3\u5e93",forkRepository:"fork \u5e76\u521b\u5efa\u4ed3\u5e93",updateRepository_S_Avator:"\u66f4\u65b0\u4e86\u4ed3\u5e93 {s} \u7684\u5934\u50cf",updateRepository_S_Name:"\u66f4\u65b0\u4e86\u4ed3\u5e93 {s} \u7684\u540d\u79f0",updateRepository_S_Description:"\u66f4\u65b0\u4e86\u4ed3\u5e93 {s} \u7684\u63cf\u8ff0",pushTo_S_Branch:"\u63a8\u9001\u63d0\u4ea4\u5230\u4ed3\u5e93 {s} \u7684\u5206\u652f",pushTo_S_NewBranch:"\u63a8\u9001\u5206\u652f\u5230\u4ed3\u5e93 {s}",created_S_NewBranch:"\u5728\u4ed3\u5e93 {s} \u521b\u5efa\u65b0\u5206\u652f",delete_S_Branch:"\u5728\u4ed3\u5e93 {s} \u5220\u9664\u4e86\u5206\u652f",update_S_DefaultBranch:"\u4fee\u6539\u4e86\u4ed3\u5e93 {s} \u7684\u9ed8\u8ba4\u5206\u652f",created_S_ProtectedBranchRule:"\u5728\u4ed3\u5e93 {s} \u521b\u5efa\u4fdd\u62a4\u5206\u652f\u89c4\u5219",update_S_ProtectedBranchRule:"\u4fee\u6539\u4e86\u4ed3\u5e93 {s} \u7684\u4fdd\u62a4\u5206\u652f\u89c4\u5219",delete_S_ProtectedBranchRule:"\u5220\u9664\u4e86\u4ed3\u5e93 {s} \u7684\u4fdd\u62a4\u5206\u652f\u89c4\u5219",pushTo_S_Tag:"\u63a8\u9001\u63d0\u4ea4\u5230\u4ed3\u5e93 {s} \u7684\u6807\u7b7e",pushTo_S_NewTag:"\u63a8\u9001\u6807\u7b7e\u5230\u4ed3\u5e93 {s}",created_S_NewTag:"\u5728\u4ed3\u5e93 {s} \u521b\u5efa\u65b0\u6807\u7b7e",delete_S_Tag:"\u5728\u4ed3\u5e93 {s} \u5220\u9664\u4e86\u6807\u7b7e",addRepository_S_Memeber:"\u5411\u4ed3\u5e93 {s} \u6dfb\u52a0\u4e86\u6210\u5458",changeRepository_S_MemebrRole:"\u8bbe\u7f6e\u4e86\u4ed3\u5e93 {s} \u5185\u6210\u5458\u89d2\u8272",removeRepository_S_Memebr:"\u79fb\u9664\u4e86\u4ed3\u5e93 {s} \u7684\u6210\u5458",setRepository_S_Creator:"\u8bbe\u7f6e\u4e86\u4ed3\u5e93 {s} \u7684\u521b\u5efa\u8005",setRepository_S_URL:"\u4fee\u6539\u4e86\u4ed3\u5e93 {s} \u7684\u8bbf\u95ee\u5730\u5740",open_S_MergeRquest:"\u5728\u4ed3\u5e93 {s} \u6253\u5f00\u5408\u5e76\u8bf7\u6c42",close_S_MergeRquest:"\u5728\u4ed3\u5e93 {s} \u5173\u95ed\u5408\u5e76\u8bf7\u6c42",merge_S_MergeRquest:"\u5728\u4ed3\u5e93 {s} \u5408\u5e76\u8bf7\u6c42",assign_S_Reviewer:"\u5728\u4ed3\u5e93 {s} \u6307\u5b9a\u8bc4\u5ba1\u5458",delete_S_Reviewer:"\u5728\u4ed3\u5e93 {s} \u5220\u9664\u8bc4\u5ba1\u5458",review_S_Reviewer:"\u5728\u4ed3\u5e93 {s} \u8bc4\u5ba1\u4e86\u4ee3\u7801",create_S_Webhook:"\u5728\u4ed3\u5e93 {s} \u521b\u5efa\u4e86webhook",update_S_Webhook:"\u5728\u4ed3\u5e93 {s} \u66f4\u65b0\u4e86webhook",delete_S_Webhook:"\u5728\u4ed3\u5e93 {s} \u5220\u9664\u4e86webhook"}),{},{__namespace__:"message.activity"}),Yi=Object(y.a)(Object(y.a)({},{repository:"\u4ed3\u5e93",repository_pl:"\u4ed3\u5e93",group:"\u4ed3\u5e93\u7ec4",group_pl:"\u4ed3\u5e93\u7ec4",file:"\u6587\u4ef6",file_pl:"\u6587\u4ef6",commit:"\u63d0\u4ea4",commit_pl:"\u63d0\u4ea4",mergeRequest:"\u5408\u5e76\u8bf7\u6c42",mergeRequest_pl:"\u5408\u5e76\u8bf7\u6c42",branch:"\u5206\u652f",branch_pl:"\u5206\u652f",webhook:"Webhook",webhook_pl:"Webhooks",tag:"\u6807\u7b7e",tag_pl:"\u6807\u7b7e",member:"\u6210\u5458",member_pl:"\u6210\u5458",activity:"\u52a8\u6001",activity_pl:"\u52a8\u6001",setting:"\u8bbe\u7f6e",setting_pl:"\u8bbe\u7f6e",SSHKey:"SSH Key",SSHKey_pl:"SSH Keys",user:"\u7528\u6237",user_pl:"\u7528\u6237",fileTree:"\u6587\u4ef6\u6811",merge:"\u5408\u5e76",data:"\u6570\u636e",clone:"\u514b\u9686",fork:"Fork",limitation:"\u9650\u5236",role:"\u89d2\u8272",team:"\u56e2\u961f",code:"\u6e90\u7801",hash:"\u54c8\u5e0c\u503c",time:"\u65f6\u95f4",number:"\u6570\u91cf",line:"\u884c",guest:"\u8bbf\u5ba2",reporter:"\u76d1\u7763\u8005",developer:"\u5f00\u53d1\u8005",maintianer:"\u7ef4\u62a4\u8005",owner:"\u6240\u6709\u8005",parentNode:"\u7236\u8282\u70b9"}),{},{__namespace__:"term"}),Xi=Object(y.a)(Object(y.a)({},Yi),{},{CodeFever:"CodeFever",ID:"ID",user:"\u7528\u6237",name:"\u540d\u79f0",creator:"\u521b\u5efa\u8005",reviewer:"\u8bc4\u5ba1\u5458",administrator:"\u7ba1\u7406\u5458",title:"\u6807\u9898",description:"\u63cf\u8ff0",origin:"\u6765\u6e90",source:"\u6e90",target:"\u76ee\u6807",url:"URL",slug:"\u6807\u8bc6\u4e32",avatar:"\u5934\u50cf",icon:"\u56fe\u6807",joinedAt:"\u52a0\u5165\u65f6\u95f4",unknown:"\u672a\u77e5",all:"\u6240\u6709",detail:"\u8be6\u60c5",language:"\u8bed\u8a00",webhook:"Webhook",log:"\u65e5\u5fd7",httpHeaders:"\u5934\u90e8",httpBody:"\u54cd\u5e94\u6570\u636e",httpPayload:"\u8bf7\u6c42\u6570\u636e",browser:"\u6d4f\u89c8",expand:"\u5c55\u5f00",times:"\u6b21",full:"\u5b8c\u6574",invite:"\u9080\u8bf7",before:"\u524d",new:"\u65b0\u5efa",add:"\u65b0\u589e",open:"\u6253\u5f00",close:"\u5173\u95ed",save:"\u4fdd\u5b58",create:"\u521b\u5efa",update:"\u66f4\u65b0",remove:"\u79fb\u9664",modification:"\u4fee\u6539",delete:"\u5220\u9664",and:"\u548c",ok:"\u786e\u5b9a",cancel:"\u53d6\u6d88",copy:"\u62f7\u8d1d",push:"\u63a8\u9001",merge:"\u5408\u5e76",chose:"\u9009\u62e9",show:"\u663e\u793a",list:"\u5217\u8868",copied:"\u5df2\u590d\u5236",contain:"\u5305\u542b",request:"\u8bf7\u6c42",response:"\u54cd\u5e94",bind:"\u7ed1\u5b9a",unbind:"\u89e3\u7ed1",replace:"\u66ff\u6362",sort:"\u6392\u5e8f",manage:"\u7ba1\u7406",protected:"\u4fdd\u62a4",operating:"\u64cd\u4f5c",approve:"\u8bc4\u5ba1",enable:"\u6062\u590d",disable:"\u7981\u7528",last:"\u6700\u8fd1",default:"\u9ed8\u8ba4",active:"\u6d3b\u8dc3",inactive:"\u975e\u6d3b\u8dc3",path:"\u8def\u5f84",email:"\u7535\u5b50\u90ae\u4ef6\u5730\u5740",password:"\u5bc6\u7801",oldPassword:"\u65e7\u5bc6\u7801",newPassword:"\u65b0\u5bc6\u7801",mfaCode:"MFA \u5bc6\u7801",twoFactorAuthentication:"\u4e8c\u56e0\u7d20\u8ba4\u8bc1",emailCode:"\u9a8c\u8bc1\u7801",phoneCode:"\u9a8c\u8bc1\u7801",phone:"\u624b\u673a",china:"\u4e2d\u56fd",company:"\u516c\u53f8",job:"\u804c\u4f4d",wechat:"\u5fae\u4fe1",credential:"\u51ed\u636e",login:"\u767b\u5f55",logout:"\u9000\u51fa\u767b\u5f55",next:"\u4e0b\u4e00\u9875",prev:"\u4e0a\u4e00\u9875",mergeMessage:"\u5408\u5e76\u4fe1\u606f",submit:"\u63d0\u4ea4",rule:"\u89c4\u5219",allow:"\u5141\u8bb8",status:"\u72b6\u6001",history:"\u5386\u53f2",notification:"\u901a\u77e5",learnMore:"\u4e86\u89e3\u66f4\u591a",myServiceTicket:"\u6211\u7684\u5de5\u5355",getHelp:"\u83b7\u53d6\u5e2e\u52a9",help:"\u5e2e\u52a9",result:"\u7ed3\u679c",success:"\u6210\u529f",failure:"\u5931\u8d25",doc:"\u6587\u6863",adminArea:"\u7ba1\u7406\u540e\u53f0",edit:"\u7f16\u8f91",confirm:"\u786e\u8ba4"}),Qi=Object(y.a)(Object(y.a)({},Xi),{},{__namespace__:"phrase"}),en=Object(y.a)(Object(y.a)(Object(y.a)({},Yi),Qi),{},{dashboard:"\u6982\u89c8",general:"\u5e38\u89c4",advanced:"\u9ad8\u7ea7",profile:"\u4e2a\u4eba\u4fe1\u606f",mail:"\u591a\u90ae\u7bb1"}),tn=Object(y.a)(Object(y.a)({},en),{},{__namespace__:"menu"}),an="",rn=Object(y.a)(Object(y.a)(Object(y.a)({},Qi),Yi),{},{update_S_:"\u4fee\u6539{s}",retryAfter_N_seconds:"{n} \u79d2\u540e\u91cd\u8bd5",userAvatar:[Qi.user,Qi.avatar].join(an),userName:[Qi.user,Qi.name].join(an),getEmailCode:["\u83b7\u53d6",Qi.emailCode].join(an),getPhoneCode:["\u83b7\u53d6",Qi.phoneCode].join(an),mostSeen:"\u5e38\u89c1",loginCredential:[Qi.login,Qi.credential].join(an),CodeFeverPassword:[Qi.CodeFever,Qi.password].join(an),wechatBind:[Qi.wechat,Qi.bind].join(an),unbind_P:"\u89e3\u9664{p}\u7ed1\u5b9a",repositoryID:[Yi.repository,Qi.ID].join(an),repositoryName:[Yi.repository,Qi.name].join(an),repositoryDescription:[Yi.repository,Qi.description].join(an),repositoryURL:[Yi.repository,Qi.url].join(an),repositorySlug:[Yi.repository,Qi.slug].join(an),repositoryMember:[Yi.repository,Yi.member].join(an),newRepository:[Qi.new,Yi.repository].join(an),forkRepository:[Yi.fork,Yi.repository].join(an),unknownRepository:[Qi.unknown,Yi.repository].join(an),allRepository:[Qi.all,Yi.repository].join(an),deleteRepository:[Qi.delete,Yi.repository].join(an),groupID:[Yi.group,Qi.ID].join(an),groupName:[Yi.group,Qi.name].join(an),groupDescription:[Yi.group,Qi.description].join(an),groupURL:[Yi.group,Qi.url].join(an),groupSlug:[Yi.repository,Qi.slug].join(an),groupMember:[Yi.group,Yi.member].join(an),newGroup:[Qi.new,Yi.group].join(an),unknownGroup:[Qi.unknown,Yi.group].join(an),deleteGroup:[Qi.delete,Yi.group].join(an),inviteMember:[Qi.invite,Yi.member].join(an),removeMember:[Qi.remove,Yi.member].join(an),forkFrom_S:[Yi.fork,"\u81ea: {s}"].join(an),updateFrom_S1_To_S2:["\u4ece {s1} \u66f4\u65b0\u4e3a {s2}"].join(an),repositoryAvatar:[Yi.repository,Qi.icon].join(an),groupAvatar:[Yi.group,Qi.icon].join(an),basicInfo:"\u57fa\u672c\u4fe1\u606f",newPasswordConfirm:[Qi.confirm,Qi.newPassword].join(an),security:"\u5b89\u5168\u6027",setupNewMFADevice:"\u8bbe\u7f6e MFA \u8bbe\u5907",changeMFADevice:"\u66f4\u6362 MFA \u8bbe\u5907",removeMFADevice:"\u79fb\u9664 MFA \u8bbe\u5907",commitTime:[Qi.commit,Qi.time].join(an),copyPath:[Qi.copy,Qi.path].join(an),copyHash:[Qi.copy,Yi.hash].join(an),copyCode:[Qi.copy,Yi.code].join(an),lastCommit:[Qi.last,Yi.commit].join(an),lastUpdate:[Qi.last,Qi.update].join(an),updateCreator:[Qi.update,Qi.creator].join(an),updateRepositoryURL:[Qi.update,Yi.repository,Qi.url].join(an),updateGroupURL:[Qi.update,Yi.group,Qi.url].join(an),webhookSetting:[Yi.webhook,Yi.setting].join(an),createWebhook:[Qi.create,Yi.webhook].join(an),updateWebhook:[Qi.update,Yi.webhook].join(an),deleteWebhook:[Qi.delete,Yi.webhook].join(an),contentType:"\u6570\u636e\u683c\u5f0f",webhookSecret:"\u6821\u9a8c\u79d8\u94a5",webhookTrigger:"\u89e6\u53d1\u4e8b\u4ef6",pushTrigger:"\u4ec5\u63a8\u9001\u4e8b\u4ef6",customeTrigger:"\u81ea\u5b9a\u4e49",webhookList:"Webhook\u5217\u8868",webhookLog:[Qi.webhook,Qi.log].join(an),createOrigin:[Qi.create,Qi.origin].join(an),choseCreateOrigin:[Qi.chose,Qi.create,Qi.origin].join(an),tagDescription:[Yi.tag,Qi.description].join(an),tagName:[Yi.tag,Qi.name].join(an),branchName:[Yi.branch,Qi.name].join(an),defaultBranch:[Qi.default,Yi.branch].join(an),protectedBranch:[Qi.protected,Yi.branch].join(an),branchRule:[Qi.branch,Qi.rule].join(an),allowPush:[Qi.allow,Qi.push].join(an),allowMerge:[Qi.allow,Qi.merge].join(an),noData:["\u6ca1\u6709",Yi.data].join(an),newBranch:[Qi.new,Yi.branch].join(an),newTag:[Qi.new,Yi.tag].join(an),deleteBranch:[Qi.delete,Yi.branch].join(an),deleteTag:[Qi.delete,Yi.tag].join(an),updateTime:[Qi.update,Yi.time].join(an),updatedIn:"\u66f4\u65b0\u4e8e",editIn:"\u7f16\u8f91\u4e8e",expandFullFile:[Qi.expand,Qi.full,Qi.file].join(an),showDiffOnly:"\u4ec5\u5c55\u793a\u4fee\u6539\u884c",codeDiff:"\u4ee3\u7801\u5dee\u5f02",requestCreated:"\u521b\u5efa\u4e8e",requestClosed:"\u5173\u95ed\u4e8e",requestMerged:"\u5408\u5e76\u4e8e",createRepository:["\u8bf7",Qi.create,Yi.repository].join(an),commitActivity:[Yi.commit,Qi.activity].join(an),mergeRequestActivity:[Yi.mergeRequest,Qi.activity].join(an),memberActivity:[Yi.member,Qi.activity].join(an),addSSHKey:[Qi.add,Yi.SSHKey].join(an),emailManage:["\u90ae\u7bb1",Qi.manage].join(an),memberManage:[Yi.member,Qi.manage].join(an),primaryEmail:"\u4e3b\u90ae\u7bb1",contactEmail:"\u5173\u8054\u90ae\u7bb1\u5217\u8868",SSHKeyManage:[Yi.SSHKey_pl," ",Qi.manage].join(an),notificationCenter:"\u901a\u77e5\u4e2d\u5fc3",notificationReceiveStatus:"\u63a5\u6536\u901a\u77e5\u72b6\u6001",unread:"\u672a\u8bfb",fileModification:[Yi.file,Qi.modification].join(an),fileModificationList:[Qi.modification,Yi.file,Qi.list].join(an),lineAdd:[Yi.line,Qi.add].join(an),lineDelete:[Yi.line,Qi.delete].join(an),browserFile:[Qi.browser,Qi.file].join(an),browserUnchangedFIle:[Qi.browser,Qi.modification,Qi.before,Qi.file].join(an),commitHash:[Yi.commit,Yi.hash].join(an),allFiles:[Qi.all,Qi.file].join(an),openFileTree:[Qi.open,Yi.fileTree].join(an),closeFileTree:[Qi.close,Yi.fileTree].join(an),requestMerge:[Qi.request,Qi.merge].join(an),createMergeRequest:[Qi.create,Yi.mergeRequest].join(an),closeMergeRequest:[Qi.close,Yi.mergeRequest].join(an),more:"\u67e5\u770b\u66f4\u591a",noMore:"\u6ca1\u6709\u66f4\u591a",processing:"\u5904\u7406\u4e2d",IJoined:"\u6211\u53c2\u4e0e\u7684",ICreated:"\u6211\u521b\u5efa\u7684",dangerOperation:"\u5371\u9669\u64cd\u4f5c",dangerOperationConfirm:"\u6700\u540e\u786e\u8ba4\u5371\u9669\u64cd\u4f5c",compareBranch:"\u5bf9\u6bd4\u5206\u652f\u5e76\u7ee7\u7eed",lastModified:"\u6700\u8fd1\u4fee\u6539",lastModified_N:["\u7b2c","{n}","\u6b21\u4fee\u6539"].join(an),openMergeRequest:[Qi.open,Yi.mergeRequest].join(an),modificationBranch:[Qi.modification,Yi.branch].join(an),sourceBranch:[Qi.source,Yi.branch].join(an),targetBranch:[Qi.target,Yi.branch].join(an),repositoryAdvancedSetting:"\u4ed3\u5e93\u9ad8\u7ea7\u8bbe\u7f6e",branchSetting:"\u5206\u652f\u8bbe\u7f6e",groupAdvancedSetting:"\u4ed3\u5e93\u7ec4\u9ad8\u7ea7\u8bbe\u7f6e",memberLimitation:[Yi.member,Yi.limitation].join(an),modificationLimitation:[Qi.modification,Yi.limitation].join(an),roleID_1:Yi.guest,roleID_2:Yi.reporter,roleID_3:Yi.developer,roleID_4:Yi.maintianer,roleID_5:Yi.owner,yourself:"\u4f60\u81ea\u5df1",enabledMFA:"\u5f00\u542f\u4e862FA",disabledMFA:"\u672a\u5f00\u542f2FA",blocked:"\u7981\u7528",createTime:"\u521b\u5efa\u65f6\u95f4",addUser:"\u6dfb\u52a0\u7528\u6237",statistic:"\u7edf\u8ba1",systemResources:"\u7cfb\u7edf\u8d44\u6e90",diskUsgae:"\u78c1\u76d8\u4f7f\u7528\u91cf",serviceStatus:"\u670d\u52a1\u72b6\u6001",host:"\u4e3b\u673a",senderName:"\u53d1\u4ef6\u4eba\u540d\u79f0",senderAddress:"\u53d1\u4ef6\u4eba\u5730\u5740",register:"\u6ce8\u518c",allowRegister:"\u5f00\u653e\u6ce8\u518c",support:"\u6280\u672f\u652f\u6301",feedback:"\u63d0\u4ea4\u53cd\u9988",contribute:"\u4e3a CodeFever Community \u8d21\u732e\u4ee3\u7801",about:"\u5173\u4e8e CodeFever Community",pushEvent:"\u63a8\u9001\u4e8b\u4ef6",changeMemberRole:[Qi.modification,Yi.member,Yi.role].join(an),createProtectedBranchRule:"\u521b\u5efa\u53d7\u4fdd\u62a4\u5206\u652f\u89c4\u5219",changeProtectedBranchRule:"\u4fee\u6539\u53d7\u4fdd\u62a4\u5206\u652f\u89c4\u5219",removeProtectedBranchRule:"\u5220\u9664\u53d7\u4fdd\u62a4\u5206\u652f\u89c4\u5219",reviewReviewer:"\u8bc4\u5ba1\u4ee3\u7801",_N_repository:"{n} {n, plural, =0 {"+Yi.repository+"}\n=1 {"+Yi.repository+"}\nother {"+Yi.repository_pl+"}}",_N_commit:"{n} {n, plural, =0 {"+Yi.commit+"}\n=1 {"+Yi.commit+"}\nother {"+Yi.commit_pl+"}}",_N_branch:"{n} {n, plural, =0 {"+Yi.branch+"}\n=1 {"+Yi.branch+"}\nother {"+Yi.branch_pl+"}}",_N_tag:"{n} {n, plural, =0 {"+Yi.tag+"}\n=1 {"+Yi.tag+"}\nother {"+Yi.tag_pl+"}}",_N_byte:"{n} {n, plural, =0 {Byte}\n=1 {Byte}\nother {Bytes}}",_N_mergeRequest:"{n} {n, plural, =0 {"+Yi.mergeRequest+"}\n=1 {"+Yi.mergeRequest+"}\nother {"+Yi.mergeRequest_pl+"}}",_N_member:"{n} {n, plural, =0 {"+Yi.member+"}\n=1 {"+Yi.member+"}\nother {"+Yi.member_pl+"}}"}),nn=Object(y.a)(Object(y.a)({},rn),{},{__namespace__:"label"}),sn=Object(y.a)(Object(y.a)({},{"mergeRequest:create":"{user} \u6253\u5f00\u4e86\u548c\u5e76\u8bf7\u6c42: !{number} {title}","mergeRequest:close":"{user} \u5173\u95ed\u4e86\u548c\u5e76\u8bf7\u6c42: !{number} {title}","mergeRequest:merge":"{user} \u5408\u5e76\u4e86\u548c\u5e76\u8bf7\u6c42: !{number} {title}","mergeRequestReviewer:create":"{user} \u6307\u5b9a\u4f60\u4e3a\u5408\u5e76\u8bf7\u6c42 !{number} {title} \u7684\u8bc4\u5ba1\u5458","mergeRequestReviewer:review":"{user} \u901a\u8fc7\u4e86\u548c\u5e76\u8bf7\u6c42 !{number} {title} \u7684\u8bc4\u5ba1"}),{},{__namespace__:"notification"}),on=Object(y.a)(Object(y.a)({},{Added:"Added",created:"Created",updated:"Updated",removed:"Removed",deleted:"Deleted",copied:"Copied",merged:"Merged",opened:"Opened",closed:"Closed",binded:"Binded",unbinded:"Unbinded",verified:"Verified",approved:"Approved",enabled:"Enabled",disabled:"Disabled",reseted:"reseted",createPersonalGroupNotice:"At Least One Group is Required",emailCodeHasSendNewEmail:"A E-mail Contains Validation Code Has Sent To Your E-mail Box",phoneCodeHasSendNewPhone:"A Text Message Contains Validation Code Has Sent To Your Cellphone",finishIdentityVerify:"Input Password To Verify Your Identity",unbindEnterCodeFeverPassword:"Input Password To Confirm",scanQrcodeBind:"Scan QR Code To Bind Your Account By Using WeChat App",theAccountUsedWechat_N:'This Account Has Binded Account Named "{n}", Are Your Confirm To Substitute It?',rebindWechat:"Cancel",unbindAllProduct:"Unbind All Pgyer's Products",mfaGuide:"Use Apps with MFA Feature to Scan the Following QRCode, Input Two Different MFA Code And Press Save Button to Setup a New MFA Device. You Can Search MFA in Any App Merket to Download a MFA App You Trusted in.",inputEmailToAddMemeber:"Input Email To Add A Member",groupMemberCanControlRepositoryNotice:"Members In Group Can Also Access This Repositoy Using Same Role Privilige In Group",repositoryChangeCreatorNotice:"Sure To Change Creator ? Both New And Old Creator Will Be Owner Of This Repository",repositoryChangeURLNotice:"Sure To Change URL ? Both Git Client And Web Wiil Not Respond For Old URL, You May Wish To Reset Remote Via git remote Command",repositoryDeleteRepositoryNotice:"Sure To Delete This Repositoy ? Your Repository Will NOT BE AVAILABLE Any More, All Record Related To This Repositoy Will Also Be DELETED. Please Make Sure ALL IMPORTANT DATA BACKUPED. You Can Click CANCEL Button To Cancel It.",repositoryDeleteRepositoryConfirmNotice:"This Repository Will Be Deleted, Are You Sure About This ? Your Repository Will NOT BE AVAILABLE Any More, All Record Related To This Repositoy Will Also Be DELETED. Please Make Sure ALL IMPORTANT DATA BACKUPED. You Can Click CANCEL Button To Cancel It.",groupChangeCreatorNotice:"Sure To Change Creator ? Both New And Old Creator Will Be Owner Of This Repository, Notice That You Can Not Change Creator Of Default Group",groupChangeURLNotice:"Sure To Change URL ? Both Git Client And Web Wiil Not Respond For Old URL, You May Wish To Reset Remote Via git remote Command",groupDeleteRepositoryNotice:"Sure To Delete This Group ? Your Group And Related Repositoies Will NOT BE AVAILABLE Any More, All Record Related To This Group Will Also Be DELETED. Please Make Sure ALL IMPORTANT DATA BACKUPED. You Can Click CANCEL Button To Cancel It.",groupDeleteRepositoryConfirmNotice:"This Group Will Be Deleted, Are You Sure About This ? Your Group And Related Repositoies Will NOT BE AVAILABLE Any More, All Record Related To This Repositoy Will Also Be DELETED. Please Make Sure ALL IMPORTANT DATA BACKUPED. You Can Click CANCEL Button To Cancel It.",inputCommitFilter:"Input To Filter",repositoryEmpty:"Empty Repository",displaySource:"View Source",displayRendereFile:"View Rendered",fileContentEmpty:"Empty File",fileContentOversize:"File Size Exceed limitation, Check It Out Localy",fileTypeNotSupport:"Binary File Can Not Shown",diffFileToMany:" The maximum number of files allowed to be displayed is exceeded, please check locally",createNewRepository:"create a new repository on the command line",pushRepository:"push an existing repository from the command line",_S_empty:"Please Input {s}",repository_S_empty:"No {s} In Repository",repositoryBranchEmpty:"Branch List Empty",repositoryTagEmpty:"Tag List Empty",mergeRequestEmpty:"Empty Merge Request List",addNewCommit:"Add New Commit",alreadyMergeRequest:"Merged",alreadyCloseRequest:"Close",assignReviewerTitle:"Assigne Reviewer(Only One Person Can Be Assigned)",selectReviewer:"Select Reviewer",notSelectReviewers:"No Assign Reviewer",deleteReviewer:"Delete Reviewer",notApprove:"Not Approve",assign_N_M_Reviewer:"Assign {n} As A Reviewer For Merge Request {m}",delete_M_N_Reviewer:"Removed Reviewer {n} Of Merge Request {m}",review_M_Reviewer:"Approve Changes Of Merge Request {m}",_S_listEmpty:"Empty {s} List",repositoryListEmptyNotice:"Create A Repositoy To Explore",groupListEmptyNotice:"Create A Group To Manage Your Repositories",input_S_name:"Input {s} To Filter",confirmDelete:"Delteing {s}?",jumpWithLink:"Go To This Link",noRepositoryFind:"No view permission",noCommitRecord:"No Commit Record",plsInputInvitedEmail:"Input E-mail to Invite",repositoryDeleteTipFirst:"All Recored Related To This Repositoy Will Also Be DELTED, Include Source, Merge Request Record etc.",repositoryDeleteTipSecond:"A Delted Repository CAN NOT Recover!",inputMergeCommit:"Input Commit Message, Check Squash When Needed.",selectDifferentBranch:"Can Not Merge INTO Source Itself",mergeConflictTitle:"Conflict Found In Merge Progeress, Follows Instructions Below To Resolve Conflict Localy ",mergeConflictTip1:"1: Pull Target Branch To Local",mergeConflictTip2:"2: Check File Diff",mergeConflictTip3:"3: Resolve Conflicts And Merge",mergeConflictTip4:"4 : Push Changes To Remote",from_S_Merge_S:"Request Merge From {s1} To {s2}",defaultGroupReqiured:"A Group Is Required",defaultGroupReqiuredDescription:"At Least One Group Is Required To Create Repository",someVersion:"Related Version",backHome:"Homepage",inputSSHKEYContent:"Please Enter The SSH Key",inputSSHKEYName:"Please Enter SSH Key Name",defaultBranchDescription:"The Default Branch Is Regarded As The Basic Branch In The Code Base And Is The Target Branch For All Clones, Code Submissions, And Merge Requests",settingToDefaultBranch:"Set As Default Branch",updateDefaultBranch:"Modify The Default Branch",settingDefaultBranch:"Please Set The Default Branch",protectedBranchDescription:"Protecting Branches Will Ensure Branch Security, And Roles Other Than Owner Are Not Allowed To Be Pushed And Deleted Forcibly",protectedBranchRuleEmpty:"There Are No Protection Branch Rules At Present, Please Create A New Protection Branch Rule To Protect Branch Safety",inputBranchOrRegexp:"Please Enter The Branch Name or Universal Rules",createProtectedBranchRule:"New Protection Branch Rule",updateProtectedBranchRule:"Modify Protection Branch Rule",deleteProtectedBranchRule:"Delete Protection Branch Rule",noBodyAllow:"Nobody",primaryEmail:"Primary E-mail",primaryEmailDescription:"The Email Address Of The Current CodeFever Account, Used To Receive Relevant Notifications, Password Reset, Login And Other Operations",updatePrimaryEmail:"Change Primary E-mail",myEmail:"My E-mail",myEmailDescription:"Multi-mailbox Function Is Used For The Same User To Have Multiple Different Mailboxes For Code Submission, The System Can Identify And Create An Association Relationship",addEmail:"Add E-mail",contactedEmail:"Mailbox Linked",shouldValidation:"To Be Verified",resendEmail:"Resend Mail",differenceBetweenHTTPSAndSSH:"HTTPS or SSH, Which one should I choose ?",generateAndSetSSHKey:"Please Confirm The SSH Key Has Been Generated And Set Porperly On CodeFever.",itsMyEmail:"It's My Email",notificationSystem:"System Message",notificationMention:"Mentioned Me",tagRead:"Mark As Read",tagAllRead:"Mark All As Read",deleteAllReaded:"Delete All Read User Messages",mergeRequestNotification:"Notification Of Merge Request",mergeRequestNotificationDesc:"Can Receive And Request Notifications Issued By Warehouse Members, Developers And Above Members Can Receive",emailNotification:"E-mail notification",emailNotificationDesc:"The Message In The Notification Settings Will Be Sent To Your Registered Mailbox.",searchByName:"Search by name or email",userStatusEnabled:"Enable confirmation",userStatusDisabled:"Disable confirmation",userStatusEnabled_N:'Confirm to enable user "{n}"?',userStatusDisabled_N:'Confirm to disable user "{n}"?',closeMFA:"Turn off 2FA certification",closeMFAConfirm:"Close 2FA authentication confirmation",closeMFA_N:'Are you sure to turn off 2FA authentication for user "{n}"?',resetPassword:"Reset Password",reset_N_Password:'Reset user "{n}" password',searchRepository:"Search repository",searchGroup:"Sreach group",roleToOwner:"Designated as owner",setGroupOwner_S:"Are you sure to specify {s} as the owner of the group?",setAdministrator:"Set as administrator",cancelAdministrator:"Cancel an administrator",memberRemoveConfirm:"Member delete confirmation",successAddUser:"User added successfully",webhookEventsNeed:"Please select events",webhookListEmpty:"Webhook List Empty",useTime_n:"Completed in {n} seconds",show_n_record:"Show latest {n} records"}),{},{__namespace__:"message"}),cn=Object(y.a)(Object(y.a)({},{_S_empty:"Please Input {s}",_S_retype:"Please Retype {s}",_S_has_illegal_character:"Only Combination of Alphanumeric '_' '-' '.' Allowed in {s}",_S_notChoose:"Please Choose {s}",_S_duplicate:"{s} Duplicated",_S_invalid:"{s} Invalid",_S_notFound:"{s} Not Found",noMoreThan_N_characters:"No More{n} Characters",within_N1_to_N2_characters:"Between {n1} to {n2} Characters",only_N1_or_N2_characters:"Only {n1} Or {n2} Characters Allowed",requireCombinationOfCharactersNumbersAndUnderscore:"Only Combination Of Numberic, Underscore And Character Allowd",input_S_placeholder:"Please Input {s}, Only Numberic, Underscore, strike, dot And Character Allowed",inputNotSame:"Doesn't Match The Retype Field",inputSame:"Same Input",canNotAddCreatorAsMember:"Can Not Add Creator As Member",createRepositoryFail:"Create Repository Fail, Please Retry Later",createGroupFail:"Create Group Fail, Please Retry Later",createBranchFail:"Create Branch Fail, Please Retry Later",createTagFail:"Create Tags Fail, Please Retry Later",createMergeRequestFail:"Create Merge Request Fail, Please Retry Later",createProtectedBrancheRuleFail:"Failed To Create Protection Branch Rule, Please Retry Later",AddFail:"Fail To Add, Please Retry Later",updateFail:"Fail To Update, Please Retry Later",removeFail:"Fail To Remove, Please Retry Later",deleteFail:"Fail To Delete, Please Retry Later",verifyFail:"Fail To Verify, Please Retry Later",forkRepositoryFail:"Fail To Fork, Please Retry Later",getFileFail:"Fail To Get File Content, Please Retry Later",getEmailCodeFail:"Fail To Get Email Validation Code, Please Retry Later",getPhoneCodeFail:"Fail To Get Phone Number Validation Code, Please Retry Later",change_S_Fail:"Fail To Update {s}, Please Retry Later",waitToRetry:"Connection Down, Please Retry Later",canNotChangeOwnerOfUserGroup:"Creator Of Default Group CAN NOT Be Modified",canNotDeleteUserGroup:"Default Group CAN NOT Be Deleted",canNotDeleteNonEmptyGroup:"Group CAN NOT Be Deleted When Contains Repository",mergeRequestExists:"Same Merge Request Exsits",mergeFail:"Fail To Merge, Please Retry Later",reviewedCanNotAssign:"Can\u2019t Replace The Reviewer",reviewedCanNotDelete:"Cannot Delete Reviewers Who Have Reviewed The Code",branchProteced:"Can Not Perform Merge On Proteced Branch",userNotReview:"Cannot Be Merged, And The Reviewers Have Not Reviewed",inputNewEmail:"Input New Email",bindEmailFirst:"An Login Email Is Required When Bind Account Of Other Platform",wechatHasbound:"This Account Has Been Used, Please Select Another Account And Retry",sshKeyDuplicate:"This SSH Key has already been added, or in another user"}),{},{__namespace__:"message.error"}),ln=Object(y.a)(Object(y.a)({},{createdGroup:"Create A Group",updateGroup_S_Avator:"Update Avatar Of Group {s}",updateGroup_S_Name:"Update Name Of Group {s}",updateGroup_S_Description:"Update Description Of Group {s}",addGroup_S_Memeber:"Add New Member To Group {s}",changeGroup_S_MemebrRole:"Update Role Of A Member In Group {s}",removeGroup_S_Memebr:"Remove A Member In Group {s}",setGroup_S_Creator:"Set A Member As Creator Of Group {s}",setGroup_S_URL:"Change URL Of Group {s}",createdRepository:"Create A Repository",deleteRepository:"Delete A Repository",forkRepository:"Frok And Create A Repository",updateRepository_S_Avator:"Update Avatar Of Repository {s}",updateRepository_S_Name:"Update Name Of Repository {s}",updateRepository_S_Description:"Update Description Of Repository {s}",pushTo_S_Branch:"Push Commits To Repository {s}",pushTo_S_NewBranch:"Push Branches To Repository {s}",created_S_NewBranch:"Add Branch In Repository {s}",delete_S_Branch:"Delete Branche In Repository {s}",update_S_DefaultBranch:"Modified The Default Branch Of Repository {s}",created_S_ProtectedBranchRule:"Create Protection Branch Rule in Repository {s}",update_S_ProtectedBranchRule:"Modified The Protection Branch Rule Of Repository {s}",delete_S_ProtectedBranchRule:"Removed Protection Branch Rule For Repository {s}",pushTo_S_Tag:"Push Commits To A Tag Of Repository {s}",pushTo_S_NewTag:"Push Tags To Repository {s}",created_S_NewTag:"Create A Tag In Repository {s}",delete_S_Tag:"Delete A Tag In Repository {s}",addRepository_S_Memeber:"Add A Member To Repository {s}",changeRepository_S_MemebrRole:"Set Role To A Memebre In Repository {s}",removeRepository_S_Memebr:"Remove Members in Repository {s}",setRepository_S_Creator:"Set A Member As Creator Of Repository {s}",setRepository_S_URL:"Change URL Of Repository {s}",open_S_MergeRquest:"Open A Merge Request In Repository {s}",close_S_MergeRquest:"Close A Merge Request In Repository {s}",merge_S_MergeRquest:"Merged A Merge Request In Repository {s}",assign_S_Reviewer:"Assign Reviewer In Repository {s}",delete_S_Reviewer:"Delete Reviewer In Repository {s}",review_S_Reviewer:"Approve Changes In Repository {s}",create_S_Webhook:"Create Webhook In Repository {s}",update_S_Webhook:"Update Webhook In Repository {s}",delete_S_Webhook:"Delete Webhook In Repository {s}"}),{},{__namespace__:"message.activity"}),pn=Object(y.a)(Object(y.a)({},{repository:"Repository",repository_pl:"Repositories",group:"Group",group_pl:"Groups",file:"File",file_pl:"Files",commit:"Commit",commit_pl:"Commits",mergeRequest:"Merge Request",mergeRequest_pl:"Merge Requests",branch:"Branch",branch_pl:"Branches",webhook:"Webhook",webhook_pl:"Webhooks",tag:"Tag",tag_pl:"Tags",member:"Member",member_pl:"Members",activity:"Activity",activity_pl:"Activities",setting:"Setting",setting_pl:"Settings",SSHKey:"SSH Key",SSHKey_pl:"SSH Keys",user:"User",user_pl:"Users",fileTree:"File Tree",merge:"Merge",data:"Data",clone:"Clone",fork:"Fork",limitation:"Limitation",role:"Role",team:"Team",code:"Source",hash:"Hash",time:"Time",number:"Count",line:"Line",guest:"Guest",reporter:"Reporter",developer:"Developer",maintianer:"Maintainer",owner:"Owner",parentNode:"Parent Node"}),{},{__namespace__:"term"}),dn=Object(y.a)(Object(y.a)({},pn),{},{CodeFever:"CodeFever",ID:"ID",user:"User",name:"Name",creator:"Creator",reviewer:"Reviewer",administrator:"Administrator",title:"Title",description:"Description",origin:"Origin",source:"Source",target:"Target",url:"URL",slug:"Slug",avatar:"Avatar",icon:"Icon",joinedAt:"Joined In",unknown:"Unknown",all:"All",detail:"Detail",language:"Language",webhook:"Webhook",log:"Log",httpHeaders:"Headers",httpBody:"Body",httpPayload:"Payload",browser:"View",expand:"Expand",full:"Full",invite:"Invite",times:"Times",before:"Before",new:"New",add:"Add",open:"Open",close:"Close",save:"Save",create:"Create",update:"Update",remove:"Remove",modification:"Modify",delete:"Delete",and:"And",ok:"OK",cancel:"Cancel",copy:"Copy",push:"Push",merge:"Merge",chose:"Choose",show:"Show",list:"List",copied:"Copied",contain:"Contain",request:"Request",response:"Response",bind:"Bind",unbind:"Unbind",replace:"Replace",sort:"Sort",manage:"Manage",protected:"Protected",operating:"Operating",approve:"Approve",enable:"Enable",disable:"Disable",last:"Latest",default:"Default",active:"Active",inactive:"Inactive",path:"Path",email:"E-mail",password:"Password",oldPassword:"Current Password",newPassword:"New Password",mfaCode:"MFA Code",twoFactorAuthentication:"Two-Factor Authentication",emailCode:"Validation Code",phoneCode:"Validation Code",phone:"Cellphone",china:"China",company:"Company",job:"Job",wechat:"Wechat",credential:"Credential",login:"Sign In",logout:"Sign Out",next:"Next",prev:"Previous",mergeMessage:"Merge Message",submit:"Submit",rule:"Rule",allow:"Allow",status:"Status",history:"History",notification:"Notification",learnMore:"Learn More",myServiceTicket:"My Service Tickets",getHelp:"Get Help",help:"Help",result:"Result",success:"Success",failure:"Failure",doc:"DOC",adminArea:"Admin Area",edit:"Edit",confirm:"Confirm"}),un=Object(y.a)(Object(y.a)({},dn),{},{__namespace__:"phrase"}),mn=Object(y.a)(Object(y.a)(Object(y.a)({},pn),un),{},{dashboard:"Dashboard",general:"General",advanced:"Advanced",profile:"Profile",mail:"E-mails"}),hn=Object(y.a)(Object(y.a)({},mn),{},{__namespace__:"menu"}),gn=" ",bn=Object(y.a)(Object(y.a)(Object(y.a)({},un),pn),{},{update_S_:"Modify {s}",retryAfter_N_seconds:"Retry After {n} Seconds",userAvatar:[un.user,un.avatar].join(gn),userName:[un.user,un.name].join(gn),getEmailCode:["Get",un.emailCode].join(gn),getPhoneCode:["Get",un.phoneCode].join(gn),mostSeen:"Most Seen",loginCredential:[un.login,un.credential].join(gn),CodeFeverPassword:[un.CodeFever,un.password].join(gn),wechatBind:[un.wechat,un.bind].join(gn),unbind_P:"Unbind {p}",repositoryID:[pn.repository,un.ID].join(gn),repositoryName:[pn.repository,un.name].join(gn),repositoryDescription:[pn.repository,un.description].join(gn),repositoryURL:[pn.repository,un.url].join(gn),repositorySlug:[pn.repository,un.slug].join(gn),repositoryMember:[pn.repository,pn.member].join(gn),newRepository:[un.new,pn.repository].join(gn),forkRepository:[pn.fork,pn.repository].join(gn),unknownRepository:[un.unknown,pn.repository].join(gn),allRepository:[un.all,pn.repository].join(gn),deleteRepository:[un.delete,pn.repository].join(gn),groupID:[pn.group,un.ID].join(gn),groupName:[pn.group,un.name].join(gn),groupDescription:[pn.group,un.description].join(gn),groupURL:[pn.group,un.url].join(gn),groupSlug:[pn.repository,un.slug].join(gn),groupMember:[pn.group,pn.member].join(gn),newGroup:[un.new,pn.group].join(gn),unknownGroup:[un.unknown,pn.group].join(gn),deleteGroup:[un.delete,pn.group].join(gn),inviteMember:[un.invite,pn.member].join(gn),removeMember:[un.remove,pn.member].join(gn),forkFrom_S:[pn.fork,"From: {s}"].join(gn),updateFrom_S1_To_S2:["Update From {s1} To {s2}"].join(gn),repositoryAvatar:[pn.repository,un.icon].join(gn),groupAvatar:[pn.group,un.icon].join(gn),basicInfo:"Basic Info",newPasswordConfirm:[un.confirm,un.newPassword].join(gn),security:"Security",setupNewMFADevice:"Setup New MFA Device",changeMFADevice:"Change MFA Device",removeMFADevice:"Remove MFA Device",commitTime:[un.commit,un.time].join(gn),copyPath:[un.copy,un.path].join(gn),copyHash:[un.copy,pn.hash].join(gn),copyCode:[un.copy,pn.code].join(gn),lastCommit:[un.last,pn.commit].join(gn),lastUpdate:[un.last,un.update].join(gn),updateCreator:[un.update,un.creator].join(gn),updateRepositoryURL:[un.update,pn.repository,un.url].join(gn),updateGroupURL:[un.update,pn.group,un.url].join(gn),webhookSetting:[pn.webhook,pn.setting].join(gn),createWebhook:[un.create,pn.webhook].join(gn),updateWebhook:[un.update,pn.webhook].join(gn),deleteWebhook:[un.delete,pn.webhook].join(gn),contentType:"Content Type",webhookSecret:"Secret Key",webhookTrigger:"Trigger Event",pushTrigger:"Just the push event",customeTrigger:"Customized",webhookList:"Webhook List",webhookLog:[un.webhook,un.log].join(gn),createOrigin:[un.create,un.origin].join(gn),choseCreateOrigin:[un.chose,un.create,un.origin].join(gn),tagDescription:[pn.tag,un.description].join(gn),tagName:[pn.tag,un.name].join(gn),branchName:[pn.branch,un.name].join(gn),defaultBranch:[un.default,pn.branch].join(gn),protectedBranch:[un.protected,pn.branch].join(gn),branchRule:[un.branch,un.rule].join(gn),allowPush:[un.allow,un.push].join(gn),allowMerge:[un.allow,un.merge].join(gn),noData:["No",pn.data].join(gn),newBranch:[un.new,pn.branch].join(gn),newTag:[un.new,pn.tag].join(gn),deleteBranch:[un.delete,pn.branch].join(gn),deleteTag:[un.delete,pn.tag].join(gn),updateTime:[un.update,pn.time].join(gn),updatedIn:"Updated At",editIn:"Edited At",expandFullFile:[un.expand,un.full,un.file].join(gn),showDiffOnly:"Show Diff",codeDiff:"Diff",requestCreated:"Created At",requestClosed:"Closed At",requestMerged:"Merged At",createRepository:["Please",un.create,pn.repository].join(gn),commitActivity:[pn.commit,un.activity].join(gn),mergeRequestActivity:[pn.mergeRequest,un.activity].join(gn),memberActivity:[pn.member,un.activity].join(gn),addSSHKey:[un.add,pn.SSHKey].join(gn),emailManage:[un.email,un.manage].join(gn),memberManage:[pn.member,un.manage].join(gn),primaryEmail:"Primary E-mail",contactEmail:"List Of Associated Mailboxes",SSHKeyManage:[pn.SSHKey_pl,un.manage].join(gn),notificationCenter:"Notification Center",notificationReceiveStatus:"Receive Notification Status",unread:"Unread",fileModification:[pn.file,un.modification].join(gn),fileModificationList:[un.modification,pn.file,un.list].join(gn),lineAdd:[pn.line,un.add].join(gn),lineDelete:[pn.line,un.delete].join(gn),browserFile:[un.browser,un.file].join(gn),browserUnchangedFIle:[un.browser,un.modification,un.before,un.file].join(gn),commitHash:[pn.commit,pn.hash].join(gn),allFiles:[un.all,un.file].join(gn),openFileTree:[un.open,pn.fileTree].join(gn),closeFileTree:[un.close,pn.fileTree].join(gn),requestMerge:[un.request,un.merge].join(gn),createMergeRequest:[un.create,pn.mergeRequest].join(gn),closeMergeRequest:[un.close,pn.mergeRequest].join(gn),more:"More",noMore:"No More",processing:"Processing",IJoined:"Joined",ICreated:"Created By Me",dangerOperation:"Dangerous Action",dangerOperationConfirm:"Confirm Dangerous Action",compareBranch:"Comoare And Continue",lastModified:"Last Modified",lastModified_N:"{n}{n, plural, =1 {st}\n=2 {nd}\n=3 {rd}\nother {th}} Revision",openMergeRequest:[un.open,pn.mergeRequest].join(gn),modificationBranch:[un.modification,pn.branch].join(gn),sourceBranch:[un.source,pn.branch].join(gn),targetBranch:[un.target,pn.branch].join(gn),repositoryAdvancedSetting:"Repository Advanced Settings",branchSetting:"Branch Settings",groupAdvancedSetting:"Group Advanced Settings",memberLimitation:[pn.member,pn.limitation].join(gn),modificationLimitation:[un.modification,pn.limitation].join(gn),roleID_1:pn.guest,roleID_2:pn.reporter,roleID_3:pn.developer,roleID_4:pn.maintianer,roleID_5:pn.owner,yourself:"It's you",enabledMFA:"2FA Enabled",disabledMFA:"2FA Disabled",blocked:"Blocked",createTime:"Created Time",addUser:"Add user",statistic:"Statistic",systemResources:"System Resources",diskUsgae:"Disk Usgae",serviceStatus:"Service Status",host:"Host",senderName:"Sender Name",senderAddress:"Sender Email Address",register:"Register",allowRegister:"Allow Register",support:"Technical Support",feedback:"Submit Feedback",contribute:"Contribute to CodeFever Community",about:"About CodeFever Community",pushEvent:"Push Event",changeMemberRole:[un.modification,pn.member,pn.role].join(gn),createProtectedBranchRule:"Create protected branch rule",changeProtectedBranchRule:"Update protected branch rule",removeProtectedBranchRule:"remove protected branch rule",reviewReviewer:"Review Code",_N_repository:"{n} {n, plural, =0 {"+pn.repository+"}\n=1 {"+pn.repository+"}\nother {"+pn.repository_pl+"}}",_N_commit:"{n} {n, plural, =0 {"+pn.commit+"}\n=1 {"+pn.commit+"}\nother {"+pn.commit_pl+"}}",_N_branch:"{n} {n, plural, =0 {"+pn.branch+"}\n=1 {"+pn.branch+"}\nother {"+pn.branch_pl+"}}",_N_tag:"{n} {n, plural, =0 {"+pn.tag+"}\n=1 {"+pn.tag+"}\nother {"+pn.tag_pl+"}}",_N_byte:"{n} {n, plural, =0 {Byte}\n=1 {Byte}\nother {Bytes}}",_N_mergeRequest:"{n} {n, plural, =0 {"+pn.mergeRequest+"}\n=1 {"+pn.mergeRequest+"}\nother {"+pn.mergeRequest_pl+"}}",_N_member:"{n} {n, plural, =0 {"+pn.member+"}\n=1 {"+pn.member+"}\nother {"+pn.member_pl+"}}"}),fn=Object(y.a)(Object(y.a)({},bn),{},{__namespace__:"label"}),jn=Object(y.a)(Object(y.a)({},{"mergeRequest:create":"{user} Open Merge Request: !{number} {title}","mergeRequest:close":"{user} Close Merge Request: !{number} {title}","mergeRequest:merge":"{user} Merge The Merge Request: !{number} {title}","mergeRequestReviewer:create":"{user} Assign You As The Reviewer For The Merge Request !{number} {title}","mergeRequestReviewer:review":"{user} Approve Changes Of Merge Request !{number} {title} "}),{},{__namespace__:"notification"});function vn(e){switch(e){case"zh-cn":return V(Ji,Ki,Zi,$i,Yi,Qi,tn,nn,sn);case"en-us":return V(Ji,on,ln,cn,pn,un,hn,fn,jn)}}var On=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props.currentLanguage,t=Object(b.a)({}),a=Object(b.a)(S(t));return Object(oe.jsx)(f.a,{theme:a,children:Object(oe.jsx)(v.a,{utils:j.a,locale:O.a,children:Object(oe.jsx)(g.a,{locale:e,messages:vn(e),children:Object(oe.jsxs)("div",{className:"app-root",children:[Object(oe.jsx)(Fi,{}),Object(oe.jsxs)("div",{className:"app-content",ref:this.appContent,children:[Object(oe.jsx)(Mi,{}),Object(oe.jsx)(bi,{}),Object(oe.jsx)(qi,{}),Object(oe.jsx)(Vi,{}),Object(oe.jsx)(Gi,{})]})]})})})})}}]),a}(i.a.Component),yn=Object(l.b)((function(e,t){return{currentLanguage:e.DataStore.currentLanguage}}))(On),xn=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return Object(oe.jsxs)(h.c,{children:[Object(oe.jsx)(h.a,{exact:!0,path:"/",component:yn}),Object(oe.jsx)(h.a,{exact:!0,path:"/userInfo",component:yn}),Object(oe.jsx)(h.a,{exact:!0,path:"/createApp",component:yn}),Object(oe.jsx)(h.a,{path:"/groups/:groupName([A-Za-z0-9_]{5,})",component:yn}),Object(oe.jsx)(h.a,{path:"/groups",component:yn}),Object(oe.jsx)(h.a,{path:"/repositories",component:yn}),Object(oe.jsx)(h.a,{path:"/:groupName([A-Za-z0-9_]{5,})/:repositoryName([A-Za-z0-9_]+)",component:yn}),Object(oe.jsx)(h.a,{path:"/mergerequests",component:yn}),Object(oe.jsx)(h.a,{path:"/settings",component:yn}),Object(oe.jsx)(h.a,{path:"/admin",component:yn})]})}}]),a}(i.a.Component),Sn=Object(h.f)(xn);var Cn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;e.repositoryList=G(e.repositoryList,[]),e.repositoryListPending=G(e.repositoryListPending,!0),e.groupList=G(e.groupList,[]),e.groupListPending=G(e.groupListPending,!0),e.currentRepositoryKey=G(e.currentRepositoryKey,""),e.currentRepositoryError=G(e.currentRepositoryError,!1),e.currentRepositoryConfig=G(e.currentRepositoryConfig,{}),e.currentGroupKey=G(e.currentGroupKey,""),e.currentGroupConfig=G(e.currentGroupConfig,{}),e.currentUserInfo=G(e.currentUserInfo,{});var a=window.localStorage.getItem("lang");return a||(a=navigator.language.toLowerCase()||navigator.userLanguage.toLowerCase(),["zh-cn","en-us"].indexOf(a)<0&&(a="zh-cn"),window.localStorage.setItem("lang",a),e.currentLanguage=a),e.currentLanguage=G(e.currentLanguage,a),t.type.match(/^data\./)?("data.repositoryList.update"===t.type?(e.repositoryList=t.data,e.repositoryListPending=!1):"data.groupList.update"===t.type?(e.groupList=t.data,e.groupListPending=!1):"data.currentRepositoryKey.update"===t.type?e.currentRepositoryKey=t.data:"data.currentRepositoryError.update"===t.type?e.currentRepositoryError=t.data:"data.currentRepositoryConfig.update"===t.type?e.currentRepositoryConfig=t.data:"data.currentGroupKey.update"===t.type?e.currentGroupKey=t.data:"data.currentGroupConfig.update"===t.type?e.currentGroupConfig=t.data:"data.currentUserInfo.update"===t.type?e.currentUserInfo=t.data:"data.currentLanguage.update"===t.type&&(e.currentLanguage=t.data,window.localStorage.setItem("lang",t.data)),Object(y.a)({},e)):Object(y.a)({},e)};var Nn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return e.expandStatus=G(e.expandStatus,!0),t.type.match(/^drawer\./)?("drawer.expandStatus.toggle"===t.type?e.expandStatus=!e.expandStatus:"drawer.expandStatus.close"===t.type?e.expandStatus=!1:"drawer.expandStatus.open"===t.type&&(e.expandStatus=!0),Object(y.a)({},e)):Object(y.a)({},e)};var Rn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(e.notificationCount=G(e.notificationCount,0),e.notificationBody=G(e.notificationBody,{}),e.askHandleStatus=G(e.askHandleStatus,!1),e.confirmation=G(e.confirmation,{open:!1,title:"",description:"",accept:function(){},reject:function(){},queueList:[],eventCount:0}),e.notificationOpenStatus=G(e.notificationOpenStatus,!1),!t.type.match(/^notification\./))return Object(y.a)({},e);if("notification.message.add"===t.type?(e.notificationCount++,e.notificationBody=t.data):"notification.message.change"===t.type?e.notificationBody=t.data={}:"notification.askhandle.status"===t.type&&(e.askHandleStatus=t.data),"notification.confirmation.popup"===t.type?(e.confirmation.open=!0,e.confirmation.title=t.data.title,e.confirmation.description=t.data.description,e.confirmation.accept=t.data.accept||function(){return!0},e.confirmation.reject=t.data.reject||function(){return!0}):"notification.confirmation.close"===t.type&&(e.confirmation.eventCount++,e.confirmation.open=!1,e.confirmation.accept=function(){return!0},e.confirmation.reject=function(){return!0}),"notification.confirmation.add"===t.type)e.confirmation.eventCount++,e.confirmation.queueList.push(t.data);else if("notification.confirmation.remove"===t.type){e.confirmation.eventCount++;var a=q(e.confirmation.queueList,"key",t.data.key);"number"===typeof a&&delete e.confirmation.queueList[a]}else if("notification.confirmation.consume"===t.type&&e.confirmation.queueList.length&&!e.confirmation.open){e.confirmation.eventCount++;var r=e.confirmation.queueList.shift();e.confirmation.open=!0,e.confirmation.title=r.data.title,e.confirmation.description=r.data.description,e.confirmation.accept=r.data.accept||function(){return!0},e.confirmation.reject=r.data.reject||function(){return!0}}return"notification.notificationOpenStatus.toggle"===t.type?e.notificationOpenStatus=!e.notificationOpenStatus:"notification.notificationOpenStatus.open"===t.type?e.notificationOpenStatus=!0:"notification.notificationOpenStatus.close"===t.type&&(e.notificationOpenStatus=!1),Object(y.a)(Object(y.a)({},e),{},{confirmation:Object(y.a)(Object(y.a)({},e.confirmation),{},{queueList:Object(T.a)(e.confirmation.queueList)})})},Mn=Object(c.a)({DataStore:Cn,DrawerStates:Nn,NotificationStates:Rn}),wn=Object(c.b)(Mn);s.a.render(Object(oe.jsx)(l.a,{store:wn,children:Object(oe.jsx)(o.a,{basename:"/",children:Object(oe.jsx)(Sn,{})})}),document.getElementById("root"))}}));
//# sourceMappingURL=main.2527a024.js.map